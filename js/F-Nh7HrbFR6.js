;/*FB_PKG_DELIM*/

__d("ARIA",["DOM","emptyFunction","ge","getOrCreateDOMID","joinClasses"],(function(t,n,r,o,a,i,l){var e,s,u=function(){e=r("ge")("ariaAssertiveAlert"),e||(e=r("DOM").create("div",{id:"ariaAssertiveAlert",className:r("joinClasses")("accessible_elem","accessible_elem_offset"),"aria-live":"assertive"}),r("DOM").appendContent(document.body,e)),s=r("ge")("ariaPoliteAlert"),s||(s=e.cloneNode(!1),s.setAttribute("id","ariaPoliteAlert"),s.setAttribute("aria-live","polite"),r("DOM").appendContent(document.body,s)),u=r("emptyFunction")};function c(t,n){u();var o=n?e:s;r("DOM").setContent(o,t)}function d(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),o=1;o<t;o++)n[o-1]=arguments[o];var a=n.map(function(e){return r("getOrCreateDOMID")(e)}).join(" ");e.setAttribute("aria-controls",a)}function m(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),o=1;o<t;o++)n[o-1]=arguments[o];var a=n.map(function(e){return r("getOrCreateDOMID")(e)}).join(" ");e.setAttribute("aria-describedby",a)}function p(e,t){e.setAttribute("aria-owns",r("getOrCreateDOMID")(t))}function _(e,t){var n=r("getOrCreateDOMID")(t);e.setAttribute("aria-controls",n),e.setAttribute("aria-haspopup","true");var o=e.getAttribute("role")||"";o&&e.setAttribute("role",o)}function f(e){c(e,!0)}function g(e){c(e,!1)}l.controls=d,l.describedBy=m,l.owns=p,l.setPopup=_,l.announce=f,l.notify=g}),98);
__d("ReactPropTransferer",["cr:8910"],(function(t,n,r,o,a,i,l){l.default=n("cr:8910")}),98);
__d("cloneWithProps_DEPRECATED",["ReactPropTransferer","react","warning"],(function(t,n,r,o,a,i){"use strict";var e,l=e||(e=n("react")),s="children",u=!1;function c(e,t){var r=n("ReactPropTransferer").mergeProps(t,e.props);return!Object.prototype.hasOwnProperty.call(r,s)&&Object.prototype.hasOwnProperty.call(e.props,s)&&(r.children=e.props.children),l.createElement(e.type,r)}a.exports=c}),null);
__d("AbstractButton.react",["cx","Link.react","cloneWithProps_DEPRECATED","joinClasses","mergeRefs","react"],(function(t,n,r,o,a,i,l,s){var e=["depressed","disabled","image","imageRight","label","labelIsHidden","buttonRef"],u,c=u||(u=o("react")),d=u.Component,m=(function(t){function n(){for(var e,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return e=t.call.apply(t,[this].concat(r))||this,e.$1=c.createRef(),e.handleLinkClick=function(t){e.props.disabled===!0?t.preventDefault():e.props.onClick&&e.props.onClick(t)},babelHelpers.assertThisInitialized(e)||babelHelpers.assertThisInitialized(e)}babelHelpers.inheritsLoose(n,t);var o=n.prototype;return o.focus=function(){this.$1.current!=null&&this.$1.current.focus()},o.render=function(){var t=this.props,n=t.depressed,o=t.disabled,a=t.image,i=t.imageRight,l=t.label,s=t.labelIsHidden,u=t.buttonRef,d=babelHelpers.objectWithoutPropertiesLoose(t,e),m=r("mergeRefs")(this.$1,u);delete d.shade;var p="_42ft"+(o?" _42fr":"")+(n?" _42fs":""),_=a;if(_!=null){var f={};l!=null&&(f.alt="",(s===!1||s==null)&&(f.className="_3-8_")),_=r("cloneWithProps_DEPRECATED")(_,f)}var g=i;if(g!=null){var h={};l!=null&&(h.alt="",(s===!1||s==null)&&(h.className="_3-99")),g=r("cloneWithProps_DEPRECATED")(g,h)}if(this.props.href!=null){var y=this.props,C=y.disabled,b=y.role,v=C===!0&&b==="button";return c.jsxs(r("Link.react"),babelHelpers.extends({},d,{linkRef:m,"aria-disabled":v?!0:void 0,className:r("joinClasses")(this.props.className,p),onClick:this.handleLinkClick,tabIndex:C===!0?-1:this.props.tabIndex,children:[_,s===!0?c.jsx("span",{className:"_afhc",children:l}):l,g]}))}else return this.props.type&&this.props.type!=="submit"?c.jsxs("button",babelHelpers.extends({},d,{ref:m,className:r("joinClasses")(this.props.className,p),disabled:o,type:this.props.type,children:[_,s===!0?c.jsx("span",{className:"_afhc",children:l}):l,g]})):c.jsxs("button",babelHelpers.extends({},d,{ref:m,className:r("joinClasses")(this.props.className,p),disabled:o,type:"submit",value:"1",children:[_,s===!0?c.jsx("span",{className:"_afhc",children:l}):l,g]}))},n})(d);m.defaultProps={disabled:!1,depressed:!1,labelIsHidden:!1},l.default=m}),98);
__d("BasicVector",[],(function(t,n,r,o,a,i){var e=(function(){function e(e,t){this.x=e,this.y=t}var t=e.prototype;return t.derive=function(n,r){return new e(n,r)},t.toString=function(){return"("+this.x+", "+this.y+")"},t.add=function(t,n){n===void 0&&(n=t.y,t=t.x);var e=parseFloat(t),r=parseFloat(n);return this.derive(this.x+e,this.y+r)},t.mul=function(t,n){return n===void 0&&(n=t),this.derive(this.x*t,this.y*n)},t.div=function(t,n){return n===void 0&&(n=t),this.derive(this.x*1/t,this.y*1/n)},t.sub=function(t,n){return arguments.length===1?this.add(t.mul(-1)):this.add(-t,-n)},t.distanceTo=function(t){return this.sub(t).magnitude()},t.magnitude=function(){return Math.sqrt(this.x*this.x+this.y*this.y)},t.rotate=function(t){return this.derive(this.x*Math.cos(t)-this.y*Math.sin(t),this.x*Math.sin(t)+this.y*Math.cos(t))},e})();i.default=e}),66);
__d("getUnboundedScrollPosition",["Scroll"],(function(t,n,r,o,a,i){"use strict";function e(e){if(e===window){var t,r;return{x:(t=window.pageXOffset)!=null?t:n("Scroll").getLeft(document.documentElement),y:(r=window.pageYOffset)!=null?r:n("Scroll").getTop(document.documentElement)}}return{x:n("Scroll").getLeft(e),y:n("Scroll").getTop(e)}}a.exports=e}),null);
__d("DOMVector",["BasicVector","getDocumentScrollElement","getElementPosition","getUnboundedScrollPosition","getViewportDimensions"],(function(t,n,r,o,a,i,l){var e=(function(e){function t(t,n,r){var o;return o=e.call(this,t,n)||this,o.domain=r||"pure",o}babelHelpers.inheritsLoose(t,e);var n=t.prototype;return n.derive=function(n,r,o){return new t(n,r,o||this.domain)},n.add=function(r,o){return r instanceof t&&r.getDomain()!=="pure"&&(r=r.convertTo(this.domain)),e.prototype.add.call(this,r,o)},n.convertTo=function(n){if(n!="pure"&&n!="viewport"&&n!="document")return this.derive(0,0);if(n==this.domain)return this.derive(this.x,this.y,this.domain);if(n=="pure")return this.derive(this.x,this.y);if(this.domain=="pure")return this.derive(0,0);var e=t.getScrollPosition("document"),r=this.x,o=this.y;return this.domain=="document"?(r-=e.x,o-=e.y):(r+=e.x,o+=e.y),this.derive(r,o,n)},n.getDomain=function(){return this.domain},t.from=function(n,r,o){return new t(n,r,o)},t.getScrollPosition=function(t){t=t||"document";var e=r("getUnboundedScrollPosition")(window);return this.from(e.x,e.y,"document").convertTo(t)},t.getElementPosition=function(t,n){n=n||"document";var e=r("getElementPosition")(t);return this.from(e.x,e.y,"viewport").convertTo(n)},t.getElementDimensions=function(t){return this.from(t.offsetWidth||0,t.offsetHeight||0)},t.getViewportDimensions=function(){var e=r("getViewportDimensions")();return this.from(e.width,e.height,"viewport")},t.getLayoutViewportDimensions=function(){var e=r("getViewportDimensions").layout();return this.from(e.width,e.height,"viewport")},t.getViewportWithoutScrollbarDimensions=function(){var e=r("getViewportDimensions").withoutScrollbars();return this.from(e.width,e.height,"viewport")},t.getDocumentDimensions=function(t){var e=r("getDocumentScrollElement")(t);return this.from(e.scrollWidth,e.scrollHeight,"document")},t})(r("BasicVector"));l.default=e}),98);
__d("Vector",["DOMEvent","DOMVector","Scroll","getDocumentScrollElement"],(function(t,n,r,o,a,i,l){var e=(function(e){function t(t,n,r){return e.call(this,parseFloat(t),parseFloat(n),r)||this}babelHelpers.inheritsLoose(t,e);var n=t.prototype;return n.derive=function(n,r,o){return new t(n,r,o||this.domain)},n.setElementPosition=function(t){var e=this.convertTo("document");return t.style.left=parseInt(e.x,10)+"px",t.style.top=parseInt(e.y,10)+"px",this},n.setElementDimensions=function(t){return this.setElementWidth(t).setElementHeight(t)},n.setElementWidth=function(t){return t.style.width=parseInt(this.x,10)+"px",this},n.setElementHeight=function(t){return t.style.height=parseInt(this.y,10)+"px",this},n.scrollElementBy=function(t){if(t==document.body)window.scrollBy(this.x,this.y);else{var e;(e=o("Scroll")).setLeft(t,e.getLeft(t)+this.x),e.setTop(t,e.getTop(t)+this.y)}return this},t.from=function(n,r,o){return new t(n,r,o)},t.getEventPosition=function(t,n){n===void 0&&(n="document");var e=new(r("DOMEvent"))(t).event,a=r("getDocumentScrollElement")(),i=e.clientX+o("Scroll").getLeft(a),l=e.clientY+o("Scroll").getTop(a),s=this.from(i,l,"document");return s.convertTo(n)},t.getTouchEventPosition=function(t,n){n===void 0&&(n="document");var e=t.touches[0],r=this.from(e.pageX,e.pageY,"document");return r.convertTo(n)},t.deserialize=function(t){var e=t.split(",");return this.from(e[0],e[1])},t})(r("DOMVector"));l.default=e}),98);
__d("abstractMethod",["invariant"],(function(t,n,r,o,a,i,l,s){"use strict";function e(e,t){s(0,1537,e,t)}l.default=e}),98);
__d("AbstractContextualDialogArrowBehavior",["cx","CSS","DOM","Locale","Style","Vector","abstractMethod"],(function(t,n,r,o,a,i,l){var e={bottom:"_53ik",top:"_53il",right:"_53im",left:"_53in"},s={above:"bottom",below:"top",left:"right",right:"left"},u=(function(){"use strict";function t(e){this.__layer=this._layer=e}var r=t.prototype;return r.enable=function(){this._subscription=this._layer.subscribe(["adjust","reposition"],this._handle.bind(this))},r.disable=function(){this._subscription.unsubscribe(),this._subscription=null},r.__getArrow=function(){return n("abstractMethod")("AbstractContextualDialogArrowBehavior","__getArrow")},r._handle=function(t,n){t==="adjust"?this._repositionArrow(n):this._repositionRoot(n)},r._repositionRoot=function(t){var e=t.getAlignment();if(e!="center"){var r=this._layer.getRoot(),o=this._layer.getContext(),a=t.isVertical(),i=this._layer.getArrowDimensions(),l=i.offset,s=i.length,u=n("Vector").getElementDimensions(o),c=a?u.x:u.y;if(!(c>=s+l*2)){var d=s/2+l,m=c/2,p=parseInt(d-m,10);if(a){var _=null;e=="left"?_=n("Locale").isRTL()?"right":"left":_=n("Locale").isRTL()?"left":"right";var f=parseInt(n("Style").get(r,_),10);n("Style").set(r,_,f-p+"px")}else{var g=parseInt(n("Style").get(r,"top"),10);n("Style").set(r,"top",g-p+"px")}}}},r._repositionArrow=function(o){var r=this._layer.getContentRoot(),a=o.getPosition(),i=s[a];for(var l in e)n("CSS").conditionClass(r,e[l],i===l);if(a!="none"){this._arrow||(this._arrow=this.__getArrow()),n("DOM").contains(r,this._arrow)||n("DOM").appendContent(r,this._arrow),n("Style").set(this._arrow,"top",""),n("Style").set(this._arrow,"left",""),n("Style").set(this._arrow,"right",""),n("Style").set(this._arrow,"margin","");var u=t.getOffsetPercent(o),c=t.getOffset(o,u,this._layer),d=t.getOffsetSide(o);n("Style").set(this._arrow,d,u+"%"),n("Style").set(this._arrow,"margin-"+d,c+"px")}},t.getOffsetPercent=function(t){var e=t.getAlignment(),n=t.getPosition();if(n=="above"||n=="below"){if(e=="center")return 50;if(e=="right")return 100}return 0},t.getOffsetSide=function(t){var e=t.isVertical();return e?n("Locale").isRTL()?"right":"left":"top"},t.getOffset=function(t,n,r){var e=r.getArrowDimensions(),o=e.offset,a=e.length,i=t.getAlignment(),l=i=="center"?0:o;return l+=a*n/100,i!="left"&&(l*=-1),l},t})();a.exports=u}),null);
__d("Rect",["invariant","$","Vector","react","vulture"],(function(t,n,r,o,a,i,l,s){var e,u=e||(e=o("react")),c=(function(){function e(t,n,o,a,i){return arguments.length===1?t instanceof e?t:t instanceof r("Vector")?new e(t.y,t.x,t.y,t.x,t.domain):(typeof t=="string"&&(t=r("$")(t)),e.getElementBounds(t)):(typeof t=="number"&&typeof n=="number"&&typeof o=="number"&&typeof a=="number"&&(!i||typeof i=="string")||s(0,1087),Object.assign(this,{t:t,r:n,b:o,l:a,domain:i||"pure"}),this)}var t=e.prototype;return t.w=function(){return this.r-this.l},t.h=function(){return this.b-this.t},t.getWidth=function(){return this.w()},t.getHeight=function(){return this.h()},t.toString=function(){return"(("+this.l+", "+this.t+"), ("+this.r+", "+this.b+"))"},t.contains=function(n){n=new e(n).convertTo(this.domain);var t=this;return t.l<=n.l&&t.r>=n.r&&t.t<=n.t&&t.b>=n.b},t.intersection=function(n){r("vulture")("-okNV-VjjAXl100qGSihEqDI6Ps=");var t=n.convertTo(this.domain),o=Math.min(this.b,t.getBottom()),a=Math.max(this.l,t.getLeft()),i=Math.min(this.r,t.getRight()),l=Math.max(this.t,t.getTop());return o>l&&i>a?new e(l,i,o,a):null},t.isEqualTo=function(t){return this.t===t.t&&this.r===t.r&&this.b===t.b&&this.l===t.l&&this.domain===t.domain},t.add=function(n,o){if(arguments.length==1)return n instanceof e&&n.domain!="pure"&&(n=n.convertTo(this.domain)),n instanceof r("Vector")?this.add(n.x,n.y):this;var t=parseFloat(n),a=parseFloat(o);return new e(this.t+a,this.r+t,this.b+a,this.l+t,this.domain)},t.sub=function(t,n){return arguments.length==1&&t instanceof r("Vector")?this.add(t.mul(-1)):typeof t=="number"&&typeof n=="number"?this.add(-t,-n):this},t.rotateAroundOrigin=function(n){var t=this.getCenter().rotate(n*Math.PI/2),r=0,o=0;n%2?(r=this.h(),o=this.w()):(r=this.w(),o=this.h());var a=t.y-o/2,i=t.x-r/2,l=a+o,s=i+r;return new e(a,s,l,i,this.domain)},t.boundWithin=function(t){var e=0,n=0;return this.l<t.l?e=t.l-this.l:this.r>t.r&&(e=t.r-this.r),this.t<t.t?n=t.t-this.t:this.b>t.b&&(n=t.b-this.b),this.add(e,n)},t.getCenter=function(){return new(r("Vector"))(this.l+this.w()/2,this.t+this.h()/2,this.domain)},t.getTop=function(){return this.t},t.getRight=function(){return this.r},t.getBottom=function(){return this.b},t.getLeft=function(){return this.l},t.getArea=function(){return(this.b-this.t)*(this.r-this.l)},t.getPositionVector=function(){return new(r("Vector"))(this.l,this.t,this.domain)},t.getDimensionVector=function(){return new(r("Vector"))(this.w(),this.h(),"pure")},t.convertTo=function(n){if(this.domain==n)return this;if(n=="pure")return new e(this.t,this.r,this.b,this.l,"pure");if(this.domain=="pure")return new e(0,0,0,0);var t=new(r("Vector"))(this.l,this.t,this.domain).convertTo(n);return new e(t.y,t.x+this.w(),t.y+this.h(),t.x,n)},e.deserialize=function(n){var t=n.split(":");return new e(parseFloat(t[1]),parseFloat(t[2]),parseFloat(t[3]),parseFloat(t[0]))},e.newFromVectors=function(n,r){return new e(n.y,n.x+r.x,n.y+r.y,n.x,n.domain)},e.getElementBounds=function(n){return e.newFromVectors(r("Vector").getElementPosition(n),r("Vector").getElementDimensions(n))},e.getViewportBounds=function(){return e.newFromVectors(r("Vector").getScrollPosition(),r("Vector").getViewportDimensions())},e.getViewportWithoutScrollbarsBounds=function(){return e.newFromVectors(r("Vector").getScrollPosition(),r("Vector").getViewportWithoutScrollbarDimensions())},e.minimumBoundingBox=function(n){for(var t=new e(1/0,-1/0,-1/0,1/0),r,o=0;o<n.length;o++)r=n[o],t.t=Math.min(t.t,r.t),t.r=Math.max(t.r,r.r),t.b=Math.max(t.b,r.b),t.l=Math.min(t.l,r.l);return t},e})();l.default=c}),98);
__d("BlueBar",["csx","CSS","DOMQuery","Style","ge"],(function(t,n,r,o,a,i,l,s){var e=document,u={};function c(t){return o("DOMQuery").scry(e,t)[0]}function d(e,t){return u[e]?u[e]:u[e]=c(t)}function m(){e=r("ge")("blueBarDOMInspector")||document,u={}}function p(){var e=g();return e?o("CSS").matchesSelector(e,"._5rmj")||r("Style").isFixed(e):!1}function _(){return d("bar","div._1s4v")}function f(){return d("navRoot","div._cx4")||_()}function g(){return d("maybeFixedRoot","div._26aw")}function h(){return d("maybeFixedRootLoggedOut","div._1pmx")}function y(){return d("maybeFixedRootLogin","div._53jh")}m(),l.hasFixedBlueBar=p,l.getBar=_,l.getNavRoot=f,l.getMaybeFixedRoot=g,l.getLoggedOutRoot=h,l.getNewLoggedOutRoot=y}),98);
__d("ViewportBounds",["Arbiter","ArbiterMixin","BlueBar","ExecutionEnvironment","PageEvents","Vector","emptyFunction","removeFromArray"],(function(t,n,r,o,a,i){var e,l={top:[],right:[],bottom:[],left:[]};function s(e){return function(){return l[e].reduce(function(e,t){return Math.max(e,t.getSize())},0)}}function u(e,t){return function(n){return new c(e,n,t)}}var c=(function(){"use strict";function e(e,t,r){r===void 0&&(r=!1),this.getSide=n("emptyFunction").thatReturns(e),this.getSize=function(){return typeof t=="function"?t():t},this.isPersistent=n("emptyFunction").thatReturns(r),l[e].push(this),d.inform("change")}var t=e.prototype;return t.remove=function(){n("removeFromArray")(l[this.getSide()],this),d.inform("change")},e})();n("Arbiter").subscribe(n("PageEvents").AJAXPIPE_ONUNLOAD,function(){["top","right","bottom","left"].forEach(function(e){for(var t=l[e],n=t.length-1;n>=0;n--){var r=t[n];r.isPersistent()||r.remove()}})});var d=babelHelpers.extends({},n("ArbiterMixin"),{getTop:s("top"),getRight:s("right"),getBottom:s("bottom"),getLeft:s("left"),getElementPosition:function(t){var e=n("Vector").getElementPosition(t);return e.y-=d.getTop(),e},addTop:u("top"),addRight:u("right"),addBottom:u("bottom"),addLeft:u("left"),addPersistentTop:u("top",!0),addPersistentRight:u("right",!0),addPersistentBottom:u("bottom",!0),addPersistentLeft:u("left",!0)});d.addPersistentTop(function(){if((e||(e=n("ExecutionEnvironment"))).canUseDOM&&n("BlueBar").hasFixedBlueBar()){var t=n("BlueBar").getMaybeFixedRoot();return t?t.offsetHeight:0}return 0}),a.exports=d}),null);
__d("getOverlayZIndex",["Style"],(function(t,n,r,o,a,i,l){function e(e,t,n){var o=n===void 0?{}:n,a=o.includeStaticPosition,i=a===void 0?!1:a,l=t,s=e;l=l||document.body;for(var u=[];s&&s!==l;)u.push(s),s=s.parentNode;if(s!==l)return 0;for(var c=u.length-1;c>=0;c--){var d=u[c];if(i===!0||r("Style").get(d,"position")!="static"){var m=parseInt(r("Style").get(d,"z-index"),10);if(!isNaN(m))return m}}return 0}l.default=e}),98);
__d("LayerBounds",["Locale","Rect","ViewportBounds","containsNode","ge","getOverlayZIndex"],(function(t,n,r,o,a,i,l){function e(e){var t=r("ge")("globalContainer"),n=t&&r("containsNode")(t,e)||r("getOverlayZIndex")(e)<300,a=r("Rect").getViewportWithoutScrollbarsBounds();return n&&(a.t+=r("ViewportBounds").getTop(),o("Locale").isRTL()?(a.r-=r("ViewportBounds").getLeft(),a.l+=r("ViewportBounds").getRight()):(a.r-=r("ViewportBounds").getRight(),a.l+=r("ViewportBounds").getLeft())),a}l.getViewportRectForContext=e}),98);
__d("ContextualLayerDimensions",["LayerBounds","Locale","Rect","Vector"],(function(t,n,r,o,a,i,l){function e(e){return o("LayerBounds").getViewportRectForContext(e.getContext())}function s(e,t){var n=e.getContextBounds("viewport"),a=e.simulateOrientation(t,function(){return r("Vector").getElementDimensions(e.getContentRoot())}),i=n.t+t.getOffsetY();t.getPosition()==="above"?i-=a.y:t.getPosition()==="below"&&(i+=n.b-n.t);var l=n.l+t.getOffsetX(),s=n.r-n.l;if(t.isVertical()){var u=t.getAlignment();u==="center"?l+=(s-a.x)/2:u==="right"!==o("Locale").isRTL()?l+=s-a.x+t.getArrowOffset():l-=t.getArrowOffset()}else t.getPosition()==="right"!==o("Locale").isRTL()?l+=s:l-=a.x;return new(r("Rect"))(i,l+a.x,i+a.y,l,"viewport")}l.getViewportRect=e,l.getLayerRect=s}),98);
__d("AbstractContextualDialogKeepInViewportBehavior",["ContextualLayerDimensions","Event","Vector","abstractMethod","throttle"],(function(t,n,r,o,a,i){var e=(function(){"use strict";function e(e){this._layer=e,this._listeners=[],this._subscription=null,this._minimumTop=null}var t=e.prototype;return t.enable=function(){var e=this,t=this._layer.getArrowDimensions();this._arrowOffset=t.offset;var n=t.length;this._arrowBuffer=this._arrowOffset+n,this._subscription=this._layer.subscribe(["show","hide","reposition"],function(t,n){e._layer.isFixed()||(t=="reposition"?(e._calculateMinimumTop(n),e._adjustForScroll()):t=="show"?(e._attachScroll(),e._adjustForScroll()):e._detachScroll())}),this._layer.isShown()&&this._attachScroll()},t.disable=function(){this._layer.isShown()&&this._detachScroll(),this._subscription.unsubscribe(),this._subscription=null},t.__adjustForScroll=function(t,r){return n("abstractMethod")("AbstractContextualDialogArrowBehavior","__adjustForScroll")},t._attachScroll=function(){var e=n("throttle")(this._adjustForScroll.bind(this)),t=this._layer.getContextScrollParent()||window;this._listeners=[n("Event").listen(t,"scroll",e),n("Event").listen(window,"resize",e)]},t._detachScroll=function(){for(;this._listeners.length;)this._listeners.pop().remove();this._listeners=[]},t._getContentHeight=function(){return this._layer._contentWrapper?n("Vector").getElementDimensions(this._layer._contentWrapper).y:0},t._getContextY=function(){return n("Vector").getElementPosition(this._layer.getContext()).y},t._calculateMinimumTop=function(t){t.isVertical()||(this._minimumTop=this._getContextY()-(this._getContentHeight()-this._arrowBuffer)+t.getOffsetY())},t._adjustForScroll=function(){var e=this._layer.getOrientation(),t=this._layer.getContent();if(!(e.isVertical()||!t)){var r=n("ContextualLayerDimensions").getViewportRect(this._layer),o=r.b-this._minimumTop;if(!(o<0)){var a=this._getContentHeight(),i=a-(this._arrowBuffer+this._arrowOffset),l=Math.max(0,Math.min(i,i-(o-a)));this.__adjustForScroll(this._layer,l)}}},e})();a.exports=e}),null);
__d("AbstractVideoFullscreenControl.react",["cx","AbstractButton.react","joinClasses","react"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u=e||(e=o("react")),c=(function(e){function t(){for(var t,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return t=e.call.apply(e,[this].concat(r))||this,t.state={awaitingUpdate:!1},t.isFullscreen=function(){return t.state.awaitingUpdate?t.state.isFullscreenOverride:!!t.props.isFullscreen},t.onButtonClick=function(){t.props.onToggleFullscreen&&t.props.onToggleFullscreen()},babelHelpers.assertThisInitialized(t)||babelHelpers.assertThisInitialized(t)}babelHelpers.inheritsLoose(t,e);var n=t.prototype;return n.render=function(){var e=babelHelpers.extends({},this.props);return delete e.isFullscreen,delete e.onToggleFullscreen,u.jsx(r("AbstractButton.react"),babelHelpers.extends({},e,{className:r("joinClasses")(this.props.isFullscreen?"uiContextualLayerParent":"",this.props.className),disabled:this.props.disabled,image:this.props.image,label:this.props.label,onClick:this.onButtonClick}))},t})(u.PureComponent);l.default=c}),98);
__d("AccessibleLayer",["fbt","DOM","Event","Focus"],(function(t,n,r,o,a,i,l){var e=(function(){"use strict";function e(e){this.$1=e,this.$2=null}var t=e.prototype;return t.enable=function(){this.$3=this.$1.subscribe("aftershow",this.$5.bind(this)),this.$4=this.$1.subscribe("hide",this.$6.bind(this))},t.disable=function(){this.$2&&this.$2.remove(),this.$3.unsubscribe(),this.$2=this.$3=null},t.$7=function(t){var e=this.$1.getCausalElement();e&&(e.tabIndex==null?(e.tabIndex=-1,n("Focus").setWithoutOutline(e)):n("Focus").set(e)),this.$1.hide()},t.$8=function(){var e=this.$1.getContentRoot();if(!(n("DOM").scry(e,'[role="dialog"]').length<=0&&(n("DOM").scry(e,'[role="listbox"]').length>0||n("DOM").scry(e,'[role="menu"]').length>0))){var t=n("DOM").scry(e,".layer_close_elem")[0];t||(t=n("DOM").create("a",{className:"accessible_elem layer_close_elem",href:"#",role:"button"},[l._(/*BTDS*/"Close popup and return")]),n("DOM").appendContent(e,t)),this.$2=n("Event").listen(t,"click",this.$7.bind(this))}},t.$5=function(){this.$2||this.$8()},t.$6=function(){this.$2&&this.$2.remove(),this.$2=null},e})();a.exports=e}),130);
__d("AdsObjectTypes",[],(function(t,n,r,o,a,i){var e=Object.freeze({ACCOUNT:"ACCOUNT",ADGROUP:"ADGROUP",AUDIENCE:"AUDIENCE",BUSINESS_ACCOUNT:"BUSINESS_ACCOUNT",CAMPAIGN:"CAMPAIGN",CAMPAIGN_GROUP:"CAMPAIGN_GROUP",CREATION_PACKAGE:"CREATION_PACKAGE",CREATIVE:"CREATIVE",HISTORY:"HISTORY",OPPORTUNITIES:"OPPORTUNITIES",PIXEL:"PIXEL",PRIVACY_INFO_CENTER:"PRIVACY_INFO_CENTER",TRANSACTION:"TRANSACTION",MESSAGES:"MESSAGES"});i.default=e}),66);
__d("AdsALSubsurface",["AdsObjectTypes"],(function(t,n,r,o,a,i,l){"use strict";var e,s=(e={},e[r("AdsObjectTypes").CAMPAIGN_GROUP]="campaign",e[r("AdsObjectTypes").CAMPAIGN]="adset",e[r("AdsObjectTypes").ADGROUP]="ad",e);function u(e,t){return e+":"+t}function c(e){var t;if(e!=null)return(t=s[e])!=null?t:e.toLowerCase()}function d(e){return e}function m(e){return e==null?"":e}l.getFullSurfaceString=u,l.getAdsObjectTypeSubsurface=c,l.getAdObjectLevelSubsurface=d,l.getDynamicSubsurface=m}),98);
__d("feature",["invariant"],(function(t,n,r,o,a,i,l,s){"use strict";function e(e){return e!=null&&e.length===1||s(0,63155),e[0]}function u(e){return e}l.feature=e,l.toString=u}),98);
__d("AdsALSurfaceMessagePlugin",["feature"],(function(t,n,r,o,a,i,l){"use strict";var e,s={type:"alSurface",key:"msg",logKey:"msg",feature:o("feature").feature(e||(e=babelHelpers.taggedTemplateLiteralLoose(["ABPInfra_DeliveryProducts_Guidance"])))},u=s;l.default=u}),98);
__d("AdsALMessageSurface.react",["AdsALSubsurface","AdsALSurfaceConditional","AdsALSurfaceMessagePlugin","react"],(function(t,n,r,o,a,i,l){"use strict";var e=["children","moduleId"],s,u=s||(s=o("react")),c=function(n){var t=n.children,a=n.moduleId,i=babelHelpers.objectWithoutPropertiesLoose(n,e);return u.jsx(r("AdsALSurfaceConditional"),babelHelpers.extends({subsurface:o("AdsALSubsurface").getDynamicSubsurface(a.replace(".react","")),surface:r("AdsALSurfaceMessagePlugin")},i,{capability:babelHelpers.extends({},i.capability,{trackVisibilityThreshold:.5}),children:t}))};l.AdsALMessageSurface=c}),98);
__d("AdsCanvasElementUpdateDataActionFlux",[],(function(t,n,r,o,a,i){"use strict";a.exports={actionType:"ELEMENT.UPDATE"}}),null);
__d("AdsMessengerPACreationStateQuestionItemsActionFlux",[],(function(t,n,r,o,a,i){"use strict";a.exports={actionType:"ADS_MESSENGER_PA_CREATION_STATE_QUESTION_ITEMS"}}),null);
__d("AdsUEditorAdgroupSetSAOffOptinStatusActionFlux",[],(function(t,n,r,o,a,i){"use strict";a.exports={actionType:"AdsUEditorAdgroupSetDestinationSpecPlugin"}}),null);
__d("AgnosticEmbeddedVideoApiComponent",["EventEmitter"],(function(t,n,r,o,a,i,l){var e=(function(e){function t(t,n){var r;return r=e.call(this)||this,r.$AgnosticEmbeddedVideoApiComponent$p_1=t,n("Connect.Unsafe.play",function(){r.emit("play")}),n("Connect.Unsafe.pause",function(){r.emit("pause")}),n("Connect.Unsafe.seek",function(e,t){r.emit("seek",e,t)}),n("Connect.Unsafe.mute",function(){r.emit("mute")}),n("Connect.Unsafe.unmute",function(){r.emit("unmute")}),n("Connect.Unsafe.setVolume",function(e,t){r.emit("setVolume",e,t)}),r}babelHelpers.inheritsLoose(t,e);var n=t.prototype;return n.notifyStartedPlaying=function(){this.$AgnosticEmbeddedVideoApiComponent$p_2("startedPlaying")},n.notifyFinishedPlaying=function(){this.$AgnosticEmbeddedVideoApiComponent$p_2("finishedPlaying")},n.notifyPaused=function(){this.$AgnosticEmbeddedVideoApiComponent$p_2("paused")},n.notifyStartedBuffering=function(){this.$AgnosticEmbeddedVideoApiComponent$p_2("startedBuffering")},n.notifyFinishedBuffering=function(){this.$AgnosticEmbeddedVideoApiComponent$p_2("finishedBuffering")},n.notifyError=function(){this.$AgnosticEmbeddedVideoApiComponent$p_2("error")},n.notifyStateUpdate=function(t){this.$AgnosticEmbeddedVideoApiComponent$p_1({type:"cachedStateUpdateRequest",data:JSON.stringify(t)})},n.notifyVideoAPIReady=function(t){this.$AgnosticEmbeddedVideoApiComponent$p_1({type:"onVideoAPIReady",data:JSON.stringify(t)})},n.$AgnosticEmbeddedVideoApiComponent$p_2=function(t){this.$AgnosticEmbeddedVideoApiComponent$p_1({type:"stateChange",state:t})},t})(r("EventEmitter"));l.default=e}),98);
__d("AvailableListConstants",[],(function(t,n,r,o,a,i){var e=Object.freeze({ON_AVAILABILITY_CHANGED:"buddylist/availability-changed",ON_UPDATE_ERROR:"buddylist/update-error",ON_UPDATED:"buddylist/updated",ON_CHAT_NOTIFICATION_CHANGED:"chat-notification-changed",OFFLINE:0,IDLE:1,ACTIVE:2,MOBILE:3,WEB_STATUS:"webStatus",FB_APP_STATUS:"fbAppStatus",MESSENGER_STATUS:"messengerStatus",OTHER_STATUS:"otherStatus",STATUS_ACTIVE:"active",STATUS_IDLE:"idle",STATUS_OFFLINE:"offline"});i.default=e}),66);
__d("BladeRunnerConfig",["RTISubscriptionManagerConfig","WebDriverConfig","cr:3024","gkx","isEmpty"],(function(t,n,r,o,a,i,l){var e,s="javascript-sandbox",u="OverrideServer",c="www_sandbox",d="www_tier",m=(function(){function t(){}var o=t.prototype;return o.patchRequestHeaders=function(o){var t={},a=r("RTISubscriptionManagerConfig").bladerunner_www_sandbox,i=r("RTISubscriptionManagerConfig").is_intern;if((e||(e=r("isEmpty")))(r("WebDriverConfig").auxiliaryServiceInfo))a!=null&&(t[s]=a);else{var l,m=(l=r("WebDriverConfig").auxiliaryServiceInfo.BladeRunner)!=null?l:r("WebDriverConfig").auxiliaryServiceInfo["BladeRunner-sandcastle"];m!=null?(typeof m.ip_address=="string"?t[u]=m.ip_address+":18295":typeof m.hostname=="string"&&(t[u]=m.hostname+":18295"),typeof r("WebDriverConfig").originHost=="string"&&(t[c]="www."+r("WebDriverConfig").originHost)):a!=null&&(t[s]=a)}if(i===!0&&(t[d]="intern"),r("WebDriverConfig").isTestRunning&&r("gkx")("20919")){var p=n("cr:3024")==null?void 0:n("cr:3024").get();p!=null&&(t.is_test="true",t.original_request_id=p)}r("gkx")("20929")&&(t["Accept-Ack"]="RSAck");for(var _ in o)t[_]=o[_];return t.http_referer=window.location.href,t},t})(),p=new m,_=p;l.default=_}),98);
__d("BladeRunnerLogger",["FBLogger","ODS"],(function(t,n,r,o,a,i,l){var e,s="bladerunner_js_client",u={info:"info",warning:"warning",exception:"exception"},c=(function(){function t(){this.setFBLoggerLevel(1)}var n=t.prototype;return n.info=function(t){this.$2>=2&&r("FBLogger")(s).info("BladeRunner info: %s",t),this.$3(u.info,t)},n.warn=function(t){this.$2>=1&&r("FBLogger")(s).warn("BladeRunner warn: %s",t),this.$3(u.warning,t)},n.exception=function(t,n){n===void 0&&(n="");var e=n+" "+t.toString();this.$2>=0&&r("FBLogger")(s).warn("BladeRunner exception: %s, %s",n,t.toString()),this.$3(u.exception,e)},n.trimForLogging=function(t){var e=1024;return typeof t=="string"&&t.length>e?"[trimmed]:"+t.substring(0,e)+"...":t},n.bumpCounter=function(n,r){r===void 0&&(r=1),(e||(e=o("ODS"))).bumpEntityKey(2966,"BladeRunnerClient",n,r)},n.setClientSessionId=function(t){this.$1=t},n.setFBLoggerLevel=function(t){this.$2=t},n.$3=function(t,n){},t})(),d=new c,m=d;l.default=m}),98);
__d("BladeRunnerTypes",[],(function(t,n,r,o,a,i,l){var e={REQUEST:1,DATA:2,DATA_ACK:3,STATUS_UPDATE:4,REWRITE_REQUEST:5,LOG:6},s={BLADE_RUNNER:1,GATEWAY:2};l.StreamFrameType=e,l.StreamRequestType=s}),98);
__d("BladeRunnerTypesInternal",["Base64","BladeRunnerLogger","BladeRunnerTypes"],(function(t,n,r,o,a,i,l){var e=(function(){function e(){}var t=e.prototype;return t.getHeaders=function(){if(this.headers!=null)return this.headers;throw new Error("Expected headers")},t.getInstrumentationData=function(){if(this.instrumentationData!=null&&this.instrumentationData.length>0)try{return JSON.parse(this.instrumentationData)}catch(e){return null}else return null},t.updateRetryRequestPayload=function(t){t!=null?this.payload=r("Base64").encode(t):this.payload=null},e.readObject=function(n){var t=new e;return t.streamId=f(n.streamId),t.requestType=f(n.requestType),t.payload=y(n.payload),t.headers=v(n.headers),t.extraHeader=y(n.extraHeader),t.requestTarget=y(n.requestTarget),t.instrumentationData=y(n.instrumentationData),t},e})(),s=(function(){function e(){}e.readObject=function(n){var t=new e;return t.streamId=f(n.streamId),t.dataId=g(n.dataId),t.data=y(n.data),t.shouldAck=R(n.shouldAck),t};var t=e.prototype;return t.rawData=function(){if(this.data==null)throw new Error("Expected data");return this.data},t.rawDataSize=function(){return this.data==null?0:this.data.length},t.decodeData=function(){if(this.data==null)throw new Error("Expected data");return r("Base64").decode(this.data)},t.setData=function(t){this.data=r("Base64").encode(t)},t.getInstrumentationData=function(){return this.instrumentationData!=null?JSON.parse(this.instrumentationData):null},e})(),u=(function(){function e(){}return e.readObject=function(n){var t=new e;return t.streamId=f(n.streamId),t.dataId=f(n.dataId),t.success=S(n.success),t.message=y(n.message),t.code=g(n.code),t},e})();u.ACK_CODE_LANDED_AND_ACCEPTED=20,u.ACK_CODE_LANDED_BUT_NOT_ACCEPTED=21,u.ACK_CODE_FAILED_TO_LAND=50;var c=(function(){function e(){}return e.readObject=function(n){var t=new e;return t.streamId=g(n.streamId),t.message=y(n.message),t},e})(),d=(function(){function e(){}return e.readObject=function(n){var t=new e;return t.streamId=f(n.streamId),t.status=f(n.status),t.message=y(n.message),t.code=g(n.code),t.shouldRetry=R(n.shouldRetry),t.retryDelayMs=g(n.retryDelayMs),t},e})(),m=(function(){function e(){}return e.readObject=function(n){var t=new e;return t.streamId=f(n.streamId),t.newBody=y(n.newBody),t.newExtraHeader=y(n.newExtraHeader),t.patchExtraHeader=y(n.patchExtraHeader),t.killBody=R(n.killBody),t.temporary=R(n.temporary),t},e})(),p=(function(){function t(){}var n=t.prototype;return n.getRequest=function(){if(this.type==o("BladeRunnerTypes").StreamFrameType.REQUEST&&this.request!=null)return this.request;throw new Error("Expected request")},n.getData=function(){if(this.type==o("BladeRunnerTypes").StreamFrameType.DATA&&this.data!=null)return this.data;throw new Error("Expected data")},n.getDataAck=function(){if(this.type==o("BladeRunnerTypes").StreamFrameType.DATA_ACK&&this.dataAck!=null)return this.dataAck;throw new Error("Expected dataAck")},n.getStatusUpdate=function(){if(this.type==o("BladeRunnerTypes").StreamFrameType.STATUS_UPDATE&&this.statusUpdate!=null)return this.statusUpdate;throw new Error("Expected status update")},n.getLog=function(){if(this.type==o("BladeRunnerTypes").StreamFrameType.LOG&&this.log!=null)return this.log;throw new Error("Expected log")},n.getRewriteRequest=function(){if(this.type==o("BladeRunnerTypes").StreamFrameType.REWRITE_REQUEST&&this.rewriteRequest!=null)return this.rewriteRequest;throw new Error("Expected rewrite request")},n.getStreamId=function(){if(this.type==o("BladeRunnerTypes").StreamFrameType.REQUEST&&this.request!=null)return this.request.streamId;if(this.type==o("BladeRunnerTypes").StreamFrameType.DATA&&this.data!=null)return this.data.streamId;if(this.type==o("BladeRunnerTypes").StreamFrameType.STATUS_UPDATE&&this.statusUpdate!=null)return this.statusUpdate.streamId;if(this.type==o("BladeRunnerTypes").StreamFrameType.LOG&&this.log!=null)return this.log.streamId;if(this.type==o("BladeRunnerTypes").StreamFrameType.REWRITE_REQUEST&&this.rewriteRequest!=null)return this.rewriteRequest.streamId;if(this.type==o("BladeRunnerTypes").StreamFrameType.DATA_ACK&&this.dataAck!=null)return this.dataAck.streamId;throw new Error("Frame with unexpected type")},n.isInstrumented=function(){return this.type===o("BladeRunnerTypes").StreamFrameType.REQUEST?this.getRequest().instrumentationData!=null:this.type===o("BladeRunnerTypes").StreamFrameType.DATA?this.getData().instrumentationData!=null:!1},t.readObject=function(a){var n=new t;switch(n.type=f(a.type),n.type){case o("BladeRunnerTypes").StreamFrameType.REQUEST:n.request=e.readObject(C(a.request));break;case o("BladeRunnerTypes").StreamFrameType.DATA:n.data=s.readObject(C(a.data));break;case o("BladeRunnerTypes").StreamFrameType.DATA_ACK:n.dataAck=u.readObject(C(a.dataAck));break;case o("BladeRunnerTypes").StreamFrameType.STATUS_UPDATE:n.statusUpdate=d.readObject(C(a.statusUpdate));break;case o("BladeRunnerTypes").StreamFrameType.LOG:n.log=c.readObject(C(a.log));break;case o("BladeRunnerTypes").StreamFrameType.REWRITE_REQUEST:n.rewriteRequest=m.readObject(C(a.rewriteRequest));break;default:return r("BladeRunnerLogger").warn("Frame with unexpected type: "+n.type),null}return n},t.newRequestFrame=function(n){var e=new t;return e.type=o("BladeRunnerTypes").StreamFrameType.REQUEST,e.request=n,e},t.newDataFrame=function(n){var e=new t;return e.type=o("BladeRunnerTypes").StreamFrameType.DATA,e.data=n,e},t.newDataAckFrame=function(n){var e=new t;return e.type=o("BladeRunnerTypes").StreamFrameType.DATA_ACK,e.dataAck=n,e},t.newStatusUpdateFrame=function(n){var e=new t;return e.type=o("BladeRunnerTypes").StreamFrameType.STATUS_UPDATE,e.statusUpdate=n,e},t.newLogFrame=function(n){var e=new t;return e.type=o("BladeRunnerTypes").StreamFrameType.LOG,e.log=n,e},t.newRewriteRequestFrame=function(n){var e=new t;return e.type=o("BladeRunnerTypes").StreamFrameType.REWRITE_REQUEST,e.rewriteRequest=n,e},t})(),_=(function(){function e(e,t,n){this.batchId=e,this.frames=t,this.instrumentationData=n}var t=e.prototype;return t.getFrames=function(){if(this.frames!=null)return this.frames;throw new Error("Expected frames")},t.getInstrumentationData=function(){if(this.instrumentationData!=null)try{return JSON.parse(this.instrumentationData)}catch(e){return null}else return null},t.getInstrumentationDataDfTraceId=function(){if(this.instrumentationData!=null)try{var e,t=JSON.parse(this.instrumentationData);return(e=t.dataFlowTracingData)==null?void 0:e.traceId}catch(e){return null}else return null},t.write=function(){return JSON.stringify(this)},t.isInstrumented=function(){return this.getFrames().some(function(e){return e.isInstrumented()})},e.read=function(n){var t=JSON.parse(n),r=t.batchId||0,o=[];for(var a of t.frames){var i=p.readObject(a);i!=null&&o.push(i)}var l=t.instrumentationData||null;return new e(r,o,l)},e})();function f(e){if(typeof e=="number")return e;throw new Error("Expected number")}function g(e){return e==null?null:f(e)}function h(e){if(typeof e=="string")return e;throw new Error("Expected string")}function y(e){return e==null?null:h(e)}function C(e){if(typeof e=="object"&&e!=null)return e;throw new Error("Expected object")}function b(e){if(typeof e=="object"&&e!=null){var t=e,n={};return Object.keys(t).forEach(function(e){var r=t[e];typeof r=="string"&&r!=null&&(n[e]=r)}),n}throw new Error("Expected string map")}function v(e){return e==null?null:b(e)}function S(e){if(typeof e=="boolean"&&e!=null)return e;throw new Error("Expected boolean")}function R(e){return e==null?null:S(e)}l.GatewayStreamRequest=e,l.GatewayStreamData=s,l.GatewayStreamDataAck=u,l.GatewayStreamLog=c,l.GatewayStreamStatusUpdate=d,l.GatewayStreamRewriteRequest=m,l.GatewayStreamFrame=p,l.GatewayStreamBatch=_}),98);
__d("RequestStreamE2EClientLoggerEvent",[],(function(t,n,r,o,a,i){var e=Object.freeze({RECEIVED:"received",SENT:"sent",FAILURE:"failure",PUBACK:"puback"});i.default=e}),66);
__d("RequestStreamE2EClientLoggerMessageType",[],(function(t,n,r,o,a,i){var e=Object.freeze({REQUEST_STREAM:"request_stream",AMENDMENT:"amendment",AMENDMENT_ACK:"amendment_ack",CANCEL:"cancel",RESPONSE:"response",RESPONSE_ACK:"response_ack",TIMED_REQUEST:"timed_request",INTERRUPT:"interrupt"});i.default=e}),66);
__d("BladeRunnerEventHandler",["BladeRunnerLogger","BladeRunnerStreamStatus","BladeRunnerTypes","BladeRunnerTypesInternal","RequestStreamE2EClientLoggerEvent","RequestStreamE2EClientLoggerMessageType","getErrorSafe","setTimeoutAcrossTransitions"],(function(t,n,r,o,a,i,l){var e=1e3,s=(function(){function t(e,t,n){this.$2=e,this.$1=t,this.$3=n}var n=t.prototype;return n.onProxyResponse=function(t){var e,n;this.$4(t);var a=[];for(var i of t.getFrames())this.$2.witnessFrame(i)&&a.push(i);var l=this.$2.getRequest();(e=l.e2eLogger)==null||e.logE2EEvent(r("RequestStreamE2EClientLoggerMessageType").RESPONSE,r("RequestStreamE2EClientLoggerEvent").SENT,{},(n=t.getInstrumentationData())==null?void 0:n.auxId,null,t.getInstrumentationDataDfTraceId()),a.length>0&&this.$5(new(o("BladeRunnerTypesInternal")).GatewayStreamBatch(t.batchId,a,t.instrumentationData))},n.onDisconnect=function(){this.$2.resetErrors();var e=new(o("BladeRunnerTypesInternal")).GatewayStreamStatusUpdate;e.streamId=this.$2.getRequest().streamId,e.status=o("BladeRunnerStreamStatus").StreamStatus.CLOSED,e.shouldRetry=!0,e.retryDelayMs=0;var t=new(o("BladeRunnerTypesInternal")).GatewayStreamBatch(null,[o("BladeRunnerTypesInternal").GatewayStreamFrame.newStatusUpdateFrame(e)]);this.onProxyResponse(t)},n.$4=function(n){var t=this,a=n.getFrames().filter(function(e){return e.type==o("BladeRunnerTypes").StreamFrameType.STATUS_UPDATE});for(var i of a){var l=i.getStatusUpdate();if(l.status==o("BladeRunnerStreamStatus").StreamStatus.CLOSED||l.status==o("BladeRunnerStreamStatus").StreamStatus.REJECTED){this.$2.onError();var s=l.shouldRetry!=null&&l.shouldRetry,u=l.message!=null?l.message:"null";if(s&&this.$2.getErrorCount()<=this.$2.getRetriesAllowed()){l.status=o("BladeRunnerStreamStatus").StreamStatus.STOPPED;var c=e;l.retryDelayMs!=null&&(c=l.retryDelayMs),r("BladeRunnerLogger").info("Can retry: stream "+l.streamId+" closed with status "+l.status+", message "+u+". Error count: "+this.$2.getErrorCount()+", retryDelay "+c+"ms. Already retrying: "+this.$2.getRetryRequestScheduled().toString()),this.$2.getRetryRequestScheduled()?r("BladeRunnerLogger").bumpCounter("stream_closed_already_retrying"):(r("BladeRunnerLogger").bumpCounter("stream_closed_will_retry"),this.$2.setRetryRequestScheduled(!0),c>0?r("setTimeoutAcrossTransitions")(function(){return t.$6()},c):this.$6())}else r("BladeRunnerLogger").info("Will not retry: stream "+l.streamId+" closed with status "+l.status+", message "+u+". Error count: "+this.$2.getErrorCount()+", shouldRetry "+s.toString()+". Already retrying: "+this.$2.getRetryRequestScheduled().toString()),s?r("BladeRunnerLogger").bumpCounter("stream_closed_retry_exceeded"):r("BladeRunnerLogger").bumpCounter("stream_closed_no_retry"),this.$3.removeStream(l.streamId)}}},n.$6=function(){if(this.$2.setRetryRequestScheduled(!1),this.$2.isAlive()){var e=this.$1.getUpdatedRequestBody();e!=null&&this.$2.updateRetryRequestPayload(e),this.$3.sendRetryStreamRequest(this.$2)}},n.$5=function(t){r("BladeRunnerLogger").bumpCounter("send_to_handler");var e=[];this.$1.onBatch(t);for(var n of t.getFrames())try{switch(n.type){case o("BladeRunnerTypes").StreamFrameType.DATA:this.$1.onData(n.getData()),e.push(n.getData());break;case o("BladeRunnerTypes").StreamFrameType.STATUS_UPDATE:this.$1.onStatusUpdate(n.getStatusUpdate().status);break;case o("BladeRunnerTypes").StreamFrameType.LOG:var a=n.getLog().message;a!=null&&this.$1.onLog(a);break;case o("BladeRunnerTypes").StreamFrameType.DATA_ACK:break;default:throw new Error("Frame with unexpected type")}}catch(e){var i=r("getErrorSafe")(e);r("BladeRunnerLogger").bumpCounter("send_to_handler_error"),r("BladeRunnerLogger").exception(i,"Failed sending frame to stream handler")}this.$7(e)},n.$7=function(t){var e=[];for(var n of t)if(n.shouldAck===!0&&n.dataId!=null){var r=new(o("BladeRunnerTypesInternal")).GatewayStreamDataAck;r.streamId=n.streamId,r.dataId=n.dataId,r.success=!0,e.push(r)}this.$3.sendDataAcks(e)},t})();l.default=s}),98);
__d("ChannelClientID",["MqttWebDeviceID","gkx","uuidv4"],(function(t,n,r,o,a,i,l){"use strict";var e,s=r("gkx")("21118")?r("uuidv4")():(e=r("MqttWebDeviceID")==null?void 0:r("MqttWebDeviceID").clientID)!=null?e:r("uuidv4")(),u={getID:function(){return s}};i.exports=u}),34);
__d("IrisSubscribeCheckerUtils",[],(function(t,n,r,o,a,i){"use strict";function e(){if(typeof window!="undefined"){var e,t=(e=window.location)==null?void 0:e.hostname;if(t==="m.facebook.com"||t==="mobile.facebook.com"||t==="mtouch.facebook.com")return!1}return!0}i.getIrisSubscribeCheckerInitialRunningState=e}),66);
__d("MqttEnvWebSocket",[],(function(t,n,r,o,a,i){"use strict";function e(e){return new WebSocket(e)}i.createWebSocket=e}),66);
__d("MqttEnv",["MqttEnvWebSocket","clearTimeout","setTimeout"],(function(t,n,r,o,a,i,l){"use strict";var e=Object.freeze({mqtt_waterfall_log_client_sampling:1,mqtt_ws_polling_enabled:3,mqtt_lp_use_fetch:9,mqtt_fast_lp:11,mqtt_lp_no_delay:12,mqtt_enable_publish_over_polling:13,mqttweb_global_connection_counter:15}),s=(function(){function e(){this.$1=null,this.$2=null,this.$3=null,this.$4=null,this.$5=null,this.$6=null,this.$7=null,this.$8=null,this.$9=null,this.$10=null,this.$11=null}var t=e.prototype;return t.random=function(){return this.$1!=null?this.$1():Math.random()},t.isUserLoggedInNow=function(){return this.$2!=null?this.$2():!0},t.setIsUserLoggedInNow=function(t){this.$2=t},t.clearTimeout=function(t){if(this.$3!=null){this.$3(t);return}r("clearTimeout")(t)},t.setTimeout=function(t,n){for(var e=arguments.length,o=new Array(e>2?e-2:0),a=2;a<e;a++)o[a-2]=arguments[a];return this.$4!=null?this.$4.apply(null,arguments):r("setTimeout").apply(null,arguments)},t.getLoggerInstance=function(){return this.$5!=null?this.$5():u.getInstance()},t.genGk=function(t){return this.$6!=null?this.$6(t):!1},t.createSocket=function(t,n){return this.$7!=null?this.$7(t,n):o("MqttEnvWebSocket").createWebSocket(t)},t.scheduleCallback=function(t){return this.$8!=null?this.$8(t):t()},t.scheduleLoggingCallback=function(t){return this.$9!=null?this.$9(t):t()},t.configRead=function(t,n){return this.$10!=null?this.$10(t,n):n},t.configWrite=function(t,n){this.$11!=null&&this.$11(t,n)},t.initialize=function(t,n,r,o,a,i,l,s,u,c,d){this.$1=t,this.$2=n,this.$3=r,this.$4=o,this.$5=a,this.$6=i,this.$7=l,this.$8=s,this.$9=u,this.$10=c,this.$11=d},e})(),u=(function(){function e(){}e.getInstance=function(){return new e};var t=e.prototype;return t.setAppId=function(t){},t.eventLogConnect=function(t){},t.eventLogPull=function(t){},t.eventLogPullFinish=function(t){},t.eventLogDisconnect=function(t){},t.eventLogOutgoingPublish=function(t){},t.eventLogIncomingPublish=function(t){},t.eventLogPublishTimeout=function(t){},t.eventLogMiscellaneousError=function(t){},t.logIfLoggedOut=function(){},t.logError=function(t){},t.logErrorWarn=function(t){},t.logWarn=function(t){},t.debugTrace=function(t){},t.bumpCounter=function(t){},t.getBrowserConnectivity=function(){return!0},e})(),c=new s;function d(e){c.setIsUserLoggedInNow(e)}l.MqttGkNames=e,l.Env=c,l.setIsUserLoggedInNow=d}),98);
__d("IrisSubscribeChecker",["IrisSubscribeCheckerUtils","MqttEnv"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(){function e(e){this.$1=o("MqttEnv").Env.getLoggerInstance(),this.$2=null,this.$3=!1,this.$4=!1,this.$5=!1,this.$6=o("IrisSubscribeCheckerUtils").getIrisSubscribeCheckerInitialRunningState(),this.$7=0,this.$8=e}var t=e.prototype;return t.start=function(){this.$6=!0},t.stop=function(){this.$6=!1,this.$9()},t.onConnectAttempt=function(){},t.onConnectFailure=function(){this.$9()},t.onConnected=function(){var e=this;this.$7++,this.$9(),this.$3=!1,this.$4=!1,this.$5=!1,this.$6&&(this.$2=o("MqttEnv").Env.setTimeout(function(){e.$10()},8e3))},t.onConnectSuccess=function(){},t.onConnectionLost=function(){this.$9()},t.onConnectionDisconnect=function(){},t.onSubscribe=function(t){t==="/t_ms"&&(this.$3=!0)},t.onUnsubscribe=function(t){},t.onPublish=function(t){(t==="/messenger_sync_get_diffs"||t==="/messenger_sync_create_queue")&&(this.$4=!0,this.$3&&(this.$5=!0,this.$9()))},t.onMessage=function(t){},t.onWSFatal=function(){},t.$9=function(){this.$2&&(o("MqttEnv").Env.clearTimeout(this.$2),this.$2=null)},t.$10=function(){if(this.$4===!1){var e=this.$7==1?"no_iris_session_initialConnect":"no_iris_session";this.$1.bumpCounter(e),this.$8()?this.$1.bumpCounter(e+".withProvider"):this.$1.bumpCounter(e+".withoutProvider"),this.$3===!0?this.$1.bumpCounter(e+".withTopicSubscribe"):this.$1.bumpCounter(e+".withoutTopicSubscribe")}this.$3===!1&&this.$1.bumpCounter("no_iris_topic_subscribe"),this.$3===!0&&this.$4===!0&&this.$5===!1&&this.$1.bumpCounter("session_before_topic_subscribe")},e})();l.default=e}),98);
__d("CrossWindowEventEmitter",["CacheStorage","EventEmitter","cr:8958"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(e){function t(t){var o;return o=e.call(this)||this,o.$CrossWindowEventEmitter$p_2=t,o.$CrossWindowEventEmitter$p_1=new(r("CacheStorage"))("localstorage",t+":"),o.$CrossWindowEventEmitter$p_1.addValueChangeCallback(function(t,r,a){var i=t.split(":")[1],l;try{l=n("cr:8958").parse(a)}catch(e){l=void 0}if(l&&l.__v){var s;(s=e.prototype.emit).call.apply(s,[o,i].concat(l.__v))}}),o}babelHelpers.inheritsLoose(t,e);var o=t.prototype;return o.emit=function(n){for(var t,r=arguments.length,o=new Array(r>1?r-1:0),a=1;a<r;a++)o[a-1]=arguments[a];this.emitRemote.apply(this,[n].concat(o)),(t=e.prototype.emit).call.apply(t,[this,n].concat(o))},o.emitRemote=function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];this.$CrossWindowEventEmitter$p_1.set(t,n)},t})(r("EventEmitter"));l.default=e}),98);
__d("MqttGlobalStreamCounter",["CrossWindowEventEmitter","MqttEnv","uuidv4"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(){function e(){var e=this;this.isTabClosed=!1,this.otherTabs=new Map,this.thisTab={totalConnectionStreams:0},this.broadcastChannel=new(r("CrossWindowEventEmitter"))("MqttGlobalStreamCounter"),this.broadcastChannel.addListener("count-updated",function(t){var n=JSON.parse(String(t)),r=!1;e.otherTabs.has(n.key)||(r=!0),n.event==="DELETE"?e.otherTabs.delete(n.key):n.event==="UPDATE"&&n.value!=null&&(e.otherTabs.set(n.key,n.value),r&&e.$1())}),this.tabID=r("uuidv4")()}var t=e.prototype;return t.streamRequested=function(){this.thisTab.totalConnectionStreams++,this.$1()},t.streamClosed=function(){this.thisTab.totalConnectionStreams>0&&(this.thisTab.totalConnectionStreams--,this.$1())},t.tabClosed=function(){if(!this.isTabClosed){this.isTabClosed=!0;var e={key:this.tabID,event:"DELETE"};this.broadcastChannel.emitRemote("count-updated",JSON.stringify(e))}},t.getGlobalState=function(){var e={totalConnectionStreams:this.thisTab.totalConnectionStreams};return this.otherTabs.forEach(function(t){e.totalConnectionStreams+=t.totalConnectionStreams}),e},t.$1=function(){var e={key:this.tabID,event:"UPDATE",value:this.thisTab};this.broadcastChannel.emitRemote("count-updated",JSON.stringify(e))},t.isEnabled=function(){return!0},e})(),s=o("MqttEnv").Env.genGk(o("MqttEnv").MqttGkNames.mqttweb_global_connection_counter)?new e:{streamRequested:function(){},streamClosed:function(){},tabClosed:function(){},getGlobalState:function(){return{totalConnectionStreams:-1}},isEnabled:function(){return!1}},u=function(){return s};l.getInstance=u}),98);
__d("MqttAnalyticsHook",["MqttEnv","MqttGlobalStreamCounter"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(){function e(){this.$1=o("MqttEnv").Env.getLoggerInstance(),this.$2=o("MqttGlobalStreamCounter").getInstance(),this.$3=0,this.$4=0,this.$5=0,this.$6=0,this.$1.bumpCounter("session_start"),o("MqttEnv").Env.isUserLoggedInNow()||this.$1.bumpCounter("session_start.logout")}var t=e.prototype;return t.onConnectAttempt=function(){this.$1.bumpCounter("ws_connect_attempt"),this.$2.streamRequested()},t.onConnectFailure=function(){this.$4++,this.$1.bumpCounter("ws_connect_failure"),this.$1.debugTrace("connect","Connect failed existing streams count "+this.$2.getGlobalState().totalConnectionStreams),this.$2.streamClosed()},t.onConnected=function(){this.$1.bumpCounter("ws_connect_connected")},t.onConnectSuccess=function(){this.$3===0&&this.$1.bumpCounter("ws_connect_first_success"),this.$3++,this.$1.bumpCounter("ws_connect_success")},t.onConnectionLost=function(){this.$1.bumpCounter("ws_disconnect")},t.onConnectionDisconnect=function(){this.$2.streamClosed()},t.onSubscribe=function(t){},t.onUnsubscribe=function(t){},t.onPublish=function(t){this.$1.bumpCounter("ws_publish."+t)},t.onMessage=function(t){this.$1.bumpCounter("message_arrived."+t)},t.onWSFatal=function(){this.$1.bumpCounter("ws_fatal")},t.onPollRequestSent=function(){this.$1.bumpCounter("polling_request_send"),this.$2.streamRequested()},t.onPollRequestSuccess=function(){this.$1.bumpCounter("polling_request_succeed"),this.$5===0&&this.$1.bumpCounter("polling_first_success"),this.$5++},t.onPollResponse=function(t){this.$1.bumpCounter("lp.message_arrived."+t)},t.onPollFinish=function(){this.$1.bumpCounter("polling_request_finish"),this.$2.streamRequested()},t.onPollRequestFailed=function(t){this.$1.bumpCounter("polling_request_failed"),this.$1.bumpCounter("polling_request_failed_"+t),this.$6++,this.$1.debugTrace("PollRequest","Request failed existing streams count "+this.$2.getGlobalState().totalConnectionStreams),this.$2.streamClosed()},t.onPollShutdownAbort=function(){this.$2.streamClosed()},t.onTabClose=function(){this.$2.tabClosed()},e})();l.default=e}),98);
__d("MqttConnectionHookCollection",[],(function(t,n,r,o,a,i){"use strict";var e=(function(){function e(){this.$1=new Set}var t=e.prototype;return t.addHook=function(t){this.$1.add(t)},t.removeHook=function(t){this.$1.delete(t)},t.onConnectAttempt=function(){this.$1.forEach(function(e){e.onConnectAttempt==null||e.onConnectAttempt()})},t.onConnectFailure=function(){this.$1.forEach(function(e){e.onConnectFailure==null||e.onConnectFailure()})},t.onConnected=function(){this.$1.forEach(function(e){e.onConnected==null||e.onConnected()})},t.onConnectSuccess=function(){this.$1.forEach(function(e){e.onConnectSuccess==null||e.onConnectSuccess()})},t.onConnectionLost=function(){this.$1.forEach(function(e){e.onConnectionLost==null||e.onConnectionLost()})},t.onConnectionDisconnect=function(){this.$1.forEach(function(e){e.onConnectionDisconnect==null||e.onConnectionDisconnect()})},t.onSubscribe=function(t){this.$1.forEach(function(e){e.onSubscribe==null||e.onSubscribe(t)})},t.onUnsubscribe=function(t){this.$1.forEach(function(e){e.onUnsubscribe==null||e.onUnsubscribe(t)})},t.onPublish=function(t){this.$1.forEach(function(e){e.onPublish==null||e.onPublish(t)})},t.onMessage=function(t){this.$1.forEach(function(e){e.onMessage==null||e.onMessage(t)})},t.onWSFatal=function(){this.$1.forEach(function(e){e.onWSFatal==null||e.onWSFatal()})},e})();i.default=e}),66);
__d("MqttProtocolUtils",["MqttEnv"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t){if(e==null)return t;var n=new Uint8Array(e.length+t.length);return n.set(e),n.set(t,e.length),n}function s(e,t){var n=t,r=0,o=1,a;do{if(n===e.length)return null;a=e[n++],r+=(a&127)*o,o*=128}while((a&128)!==0);return{offset:n,value:r}}function u(e){for(var t=e,n=new Array(1),r=0;r<4;r++){var o=t%128;if(t>>=7,t>0)n[r]=o|128;else{n[r]=o;break}}return n}function c(e,t,n){var r=n;return t[r++]=e>>8,t[r++]=e%256,r}function d(e,t){return 256*e[t]+e[t+1]}function m(e){for(var t=0,n=0,r=e.length;n<r;n++){var o=e.charCodeAt(n);o<128?t+=1:o<2048?t+=2:o>=55296&&o<=56319?(t+=4,n++):t+=3}return t}function p(e,t,n,r){var o=c(t,n,r);return _(e,n,o),o+t}function _(e,t,n){for(var r=n,o=0,a=e.length;o<a;o++){var i=e.charCodeAt(o);i<128?t[r++]=i:i<2048?(t[r++]=192|i>>6,t[r++]=128|i&63):i<55296||i>=57344?(t[r++]=224|i>>12,t[r++]=128|i>>6&63,t[r++]=128|i&63):(i=65536+((i&1023)<<10|e.charCodeAt(++o)&1023),t[r++]=240|i>>18,t[r++]=128|i>>12&63,t[r++]=128|i>>6&63,t[r++]=128|i&63)}}function f(e,t,n){for(var r=[],o=t,a=0;o<t+n;){var i=e[o++];if(i<128)r[a++]=String.fromCharCode(i);else if(i>191&&i<224){var l=e[o++];r[a++]=String.fromCharCode((i&31)<<6|l&63)}else if(i>239&&i<365){var s=e[o++],u=e[o++],c=e[o++],d=((i&7)<<18|(s&63)<<12|(u&63)<<6|c&63)-65536;r[a++]=String.fromCharCode(55296+(d>>10)),r[a++]=String.fromCharCode(56320+(d&1023))}else{var m=e[o++],p=e[o++];r[a++]=String.fromCharCode((i&15)<<12|(m&63)<<6|p&63)}}return r.join("")}var g=(function(){function e(e,t,n,r){this.$1=e,this.$2=t,this.$5=n,this.$6=r,this.$4=!1}var t=e.prototype;return t.$7=function(){var e=this;this.$4?(this.$4=!1,this.$5(),this.$3=o("MqttEnv").Env.setTimeout(function(){e.$7()},this.$2()*1e3)):this.$6()},t.reset=function(){var e=this;this.$4=!0,this.$3&&(o("MqttEnv").Env.clearTimeout(this.$3),this.$3=null);var t=this.$1()*1e3;t>0&&(this.$3=o("MqttEnv").Env.setTimeout(function(){e.$7()},t))},t.cancel=function(){this.$3&&(o("MqttEnv").Env.clearTimeout(this.$3),this.$3=null)},e})();l.UTF8Length=m,l.convertStringToUTF8=_,l.concatBuffers=e,l.decodeMultiByteInt=s,l.convertUTF8ToString=f,l.encodeMultiByteInt=u,l.writeUInt16BE=c,l.readUInt16BE=d,l.writeString=p,l.Pinger=g}),98);
__d("MqttUtils",["MqttEnv"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t){return u(e,"sid",t.toString())}function s(e,t){var n=e;return t.forEach(function(e,t){n=u(n,t,e)}),n}function u(e,t,n){return e.indexOf("?")>0?e+"&"+t+"="+n:e+"?"+t+"="+n}function c(){return Math.floor(o("MqttEnv").Env.random()*Number.MAX_SAFE_INTEGER)}function d(e,t,n){var r=arguments.length>1?e.then(t,n):e;r.then(null,function(e){o("MqttEnv").Env.setTimeout(function(){throw e instanceof Error?e:new Error("promiseDone")},0)})}function m(e,t,n,r){var a=!1;o("MqttEnv").Env.setTimeout(function(){a||(a=!0,n(new Error("promise timeout")))},r),d(e,function(e){a||(a=!0,t(e))},function(e){a||(a=!0,n(e))})}function p(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var o=0;return e.replace(/%s/g,function(){return String(n[o++])})}l.endpointWithSessionId=e,l.endpointWithExtraParameters=s,l.endpointWithExtraParameter=u,l.generateSessionId=c,l.promiseDone=d,l.promiseDoneWithTimeout=m,l.sprintf=p}),98);
__d("MqttProtocolCodec",["MqttProtocolUtils","MqttUtils","err"],(function(t,n,r,o,a,i,l){"use strict";var e=Object.freeze({CONNECT:1,CONNACK:2,PUBLISH:3,PUBACK:4,SUBSCRIBE:8,SUBACK:9,UNSUBSCRIBE:10,UNSUBACK:11,PINGREQ:12,PINGRESP:13,DISCONNECT:14}),s=[0,6,77,81,73,115,100,112,3];function u(t,n){var a=n,i=a,l=t[a],s=l>>4;a+=1;var u=o("MqttProtocolUtils").decodeMultiByteInt(t,a);if(u==null)return{position:i,wireMessage:null};a=u.offset;var c=a+u.value;if(c>t.length)return{position:i,wireMessage:null};var d;switch(s){case e.CONNACK:{var p=t[a++],h=!!(p&1),y=t[a++];d=new f(h,y);break}case e.PUBLISH:{var v=l&15,S=v>>1&3,R=o("MqttProtocolUtils").readUInt16BE(t,a);a+=2;var L=o("MqttProtocolUtils").convertUTF8ToString(t,a,R);a+=R;var E=null;S===1&&(E=o("MqttProtocolUtils").readUInt16BE(t,a),a+=2);var k=C.createWithBytes(t.subarray(a,c)),I=(v&1)===1,T=(v&8)===8;d=new b(L,k,S,E,I,T);break}case e.PINGREQ:d=new m("PINGREQ");break;case e.PINGRESP:d=new m("PINGRESP");break;case e.PUBACK:case e.UNSUBACK:{var D=o("MqttProtocolUtils").readUInt16BE(t,a);d=new g(s===e.PUBACK?"PUBACK":"UNSUBACK",D);break}case e.SUBACK:{var x=o("MqttProtocolUtils").readUInt16BE(t,a);a+=2;var $=t.subarray(a,c);d=new _(x,$);break}default:throw r("err")(o("MqttUtils").sprintf("Invalid MQTT message type %s.",s))}return{position:c,wireMessage:d}}function c(e){for(var t=[],n=0;n<e.length;){var r=u(e,n),o=r.wireMessage;if(n=r.position,o)t.push(o);else break}var a=null;return n<e.length&&(a=e.subarray(n)),{messages:t,remaining:a}}var d=(function(){function t(t){this.messageType=e[t]}var n=t.prototype;return n.encode=function(){throw new TypeError("Cannot abstract class WireMessage")},t})(),m=(function(e){function t(t){return e.call(this,t)||this}babelHelpers.inheritsLoose(t,e);var n=t.prototype;return n.encode=function(){var e=new ArrayBuffer(2),t=new Uint8Array(e);return t[0]=(this.messageType&15)<<4,e},t})(d),p=(function(e){function t(){return e.call(this,"DISCONNECT")||this}babelHelpers.inheritsLoose(t,e);var n=t.prototype;return n.encode=function(){var e=(this.messageType&15)<<4,t=new ArrayBuffer(2),n=new Uint8Array(t);return n[0]=e,n.set(o("MqttProtocolUtils").encodeMultiByteInt(0),1),t},t})(d),_=(function(e){function t(t,n){var r;return r=e.call(this,"SUBACK")||this,r.messageIdentifier=t,r.returnCode=n,r}return babelHelpers.inheritsLoose(t,e),t})(d),f=(function(e){function t(t,n){var r;return r=e.call(this,"CONNACK")||this,r.sessionPresent=t,r.returnCode=n,r}return babelHelpers.inheritsLoose(t,e),t})(d),g=(function(e){function t(t,n){var r;return r=e.call(this,t)||this,r.messageIdentifier=n,r}babelHelpers.inheritsLoose(t,e);var n=t.prototype;return n.encode=function(){var e=(this.messageType&15)<<4,t=2,n=o("MqttProtocolUtils").encodeMultiByteInt(t),r=n.length+1,a=new ArrayBuffer(t+r),i=new Uint8Array(a);return i[0]=e,i.set(n,1),r=o("MqttProtocolUtils").writeUInt16BE(this.messageIdentifier,i,r),a},t})(d),h=(function(e){function t(t,n){var r;return r=e.call(this,"CONNECT")||this,r.clientId=t,r.connectOptions=n,r}babelHelpers.inheritsLoose(t,e);var n=t.prototype;return n.encode=function(){var e,t=(this.messageType&15)<<4,n=s.length+3;n+=(e=o("MqttProtocolUtils")).UTF8Length(this.clientId)+2,n+=e.UTF8Length(this.connectOptions.userName)+2;var r=e.encodeMultiByteInt(n),a=new ArrayBuffer(1+r.length+n),i=new Uint8Array(a);i[0]=t;var l=1;i.set(r,1),l+=r.length,i.set(s,l),l+=s.length;var u=130;return i[l++]=u,l=e.writeUInt16BE(this.connectOptions.getKeepAliveIntervalSeconds(),i,l),l=e.writeString(this.clientId,e.UTF8Length(this.clientId),i,l),l=e.writeString(this.connectOptions.userName,e.UTF8Length(this.connectOptions.userName),i,l),a},t})(d),y=(function(t){function n(e,n,r,a){var i;if(i=t.call(this,e)||this,i.topic=n,r<0&&r>1||r===1&&a==null)throw new TypeError(o("MqttUtils").sprintf("Argument Invalid. qos: %s messageType: %s.",r,e));return i.qos=r,i.messageIdentifier=a,i}babelHelpers.inheritsLoose(n,t);var r=n.prototype;return r.encode=function(){var t=(this.messageType&15)<<4;t|=2;var n=o("MqttProtocolUtils").UTF8Length(this.topic),r=2+n+2;this.messageType===e.SUBSCRIBE&&(r+=1);var a=o("MqttProtocolUtils").encodeMultiByteInt(r),i=new ArrayBuffer(1+a.length+r),l=new Uint8Array(i);l[0]=t;var s=1;return l.set(a,1),s+=a.length,this.messageIdentifier!=null&&(s=o("MqttProtocolUtils").writeUInt16BE(this.messageIdentifier,l,s)),s=o("MqttProtocolUtils").writeString(this.topic,n,l,s),this.messageType===e.SUBSCRIBE&&this.qos!=null&&(l[s++]=this.qos),i},n})(d),C=(function(){function e(e,t){this.payloadString=e,this.payloadBytes=t}e.createWithString=function(n){var t=new Uint8Array(new ArrayBuffer(o("MqttProtocolUtils").UTF8Length(n)));return o("MqttProtocolUtils").convertStringToUTF8(n,t,0),new e(n,t)},e.createWithBytes=function(n){var t=o("MqttProtocolUtils").convertUTF8ToString(n,0,n.length);return new e(t,n)};var t=e.prototype;return t.string=function(){return this.payloadString},t.bytes=function(){return this.payloadBytes},e})(),b=(function(e){function t(t,n,r,o,a,i){var l;if(l=e.call(this,"PUBLISH")||this,l.topic=t,l.payloadMessage=n,l.qos=r,l.messageIdentifier=o,l.retained=a!=null?a:!1,l.duplicate=i!=null?i:!1,l.qos===1&&l.messageIdentifier==null)throw new TypeError("Argument Invalid. messageIdentifier: null and qos: 1");return l}babelHelpers.inheritsLoose(t,e);var n=t.prototype;return n.encode=function(){var e=(this.messageType&15)<<4;this.duplicate&&(e|=8),e=e|=this.qos<<1,this.retained&&e!=1;var t=o("MqttProtocolUtils").UTF8Length(this.topic),n=t+2,r=this.qos===0?0:2;n+=r;var a=this.payloadMessage.bytes();n+=a.byteLength;var i=o("MqttProtocolUtils").encodeMultiByteInt(n),l=new ArrayBuffer(1+i.length+n),s=new Uint8Array(l);s[0]=e,s.set(i,1);var u=1+i.length;return u=o("MqttProtocolUtils").writeString(this.topic,t,s,u),this.qos!==0&&this.messageIdentifier!=null&&(u=o("MqttProtocolUtils").writeUInt16BE(this.messageIdentifier,s,u)),s.set(a,u),l},t})(d),v=C.createWithString,S=C.createWithBytes,R={Base:d,ConnAck:f,Connect:h,Disconnect:p,Ping:m,PubAckUnsubAck:g,Publish:b,Subscription:y};l.MESSAGE_TYPE=e,l.decodeMessage=u,l.decodeByteMessages=c,l.Message=C,l.createMessageWithString=v,l.createMessageWithBytes=S,l.WireMessage=R}),98);
__d("MqttTypes",[],(function(t,n,r,o,a,i){"use strict";var e=function(t,n,r){this.errorCode=t,this.errorName=n,this.errorMessage=r},l=Object.freeze({APP_DISCONNECT:new e(7,"APP_DISCONNECT","Disconnect initiated by app"),BROWSER_CLOSE:new e(11,"BROWSER_CLOSE","Browser closed"),CONNACK_FAILURE:new e(5,"CONNACK_FAILURE","Connection failure due to connack"),CONNECT_TIMEOUT:new e(4,"CONNECT_TIMEOUT","Connect timed out"),INVALID_DATA_TYPE:new e(3,"INVALID_DATA_TYPE","Received non-arraybuffer from socket."),PING_TIMEOUT:new e(6,"PING_TIMEOUT","Ping timeout"),RECONNECT:new e(10,"RECONNECT","Reconnecting"),SERVER_DISCONNECT:new e(8,"SERVER_DISCONNECT","Disconnect message sent my server"),SOCKET_CLOSE:new e(9,"SOCKET_CLOSE","Socket connection closed"),SOCKET_ERROR:new e(1,"SOCKET_ERROR","Socket error"),SOCKET_MESSAGE:new e(2,"SOCKET_MESSAGE","Unable to parse invalid socket message")}),s=function(t,n){this.mqttError=t,this.connAck=n},u=(function(e){function t(t,n,r){var o;return r===void 0&&(r=null),o=e.call(this,n)||this,o.isRecoverable=t,o.originalError=r,o}return babelHelpers.inheritsLoose(t,e),t})(babelHelpers.wrapNativeSuper(Error));i.MqttError=e,i.MqttErrors=l,i.ConnectFailure=s,i.MqttChannelError=u}),66);
__d("MqttProtocolClient",["ErrorSerializer","MqttEnv","MqttProtocolCodec","MqttProtocolUtils","MqttTypes","err","getErrorSafe"],(function(t,n,r,o,a,i,l){"use strict";var e=20,s=6e4,u=(function(){function t(e){var t=this;this.$12=function(e,n,r){n===void 0&&(n=null),t.$9.bumpCounter("protocol.debug.disconnect.internal."+e.errorName),t.$9.bumpCounter("protocol.debug.disconnect.internal");var a=t.$5,i=t.$2,l=i.onConnectFailure,s=i.onConnectionLost;t.setConnected(!1),t.$14(),a?o("MqttEnv").Env.scheduleCallback(function(){s(e,n)}):o("MqttEnv").Env.scheduleCallback(function(){l(t.$11,new(o("MqttTypes")).ConnectFailure(e,r!=null?r:-1),n)})},this.$13=function(e){var n=t.$6;if(n==null)return t.$9.bumpCounter("protocol.socket_send.failed.socket_null.<message type>"),0;if(n.readyState!==n.OPEN)return t.$9.bumpCounter("protocol.socket_send.failed.socket_not_open.<message type>"),0;var r=e.encode(),o=r.byteLength;return n.send(r),o},this.$3=e,this.$2={getKeepAliveIntervalSeconds:function(){return 10},getKeepAliveTimeoutSeconds:function(){return 10},ignoreSubProtocol:!1,mqttVersion:3,onConnectFailure:function(t,n,r){},onConnection:function(){},onConnectionLost:function(t,n){},onConnectSuccess:function(t){},onMessageArrived:function(t,n,r){},onMessageDelivered:function(t){},userName:""},this.$1="mqttwsclient",this.$4=0,this.$5=!1,this.$9=o("MqttEnv").Env.getLoggerInstance(),this.$11=0}var n=t.prototype;return n.connect=function(n){var t=this;if(this.$5)throw r("err")("Invalid state: connect - already connected");this.$2=n,this.setConnected(!1),this.$7!=null&&(o("MqttEnv").Env.clearTimeout(this.$7),this.$7=null),this.$7=o("MqttEnv").Env.setTimeout(function(){t.$9.bumpCounter("protocol.error.connect.timeout"),t.$12(o("MqttTypes").MqttErrors.CONNECT_TIMEOUT)},e*1e3),this.$6=o("MqttEnv").Env.createSocket(this.$3),this.$6.binaryType="arraybuffer",this.$6.onopen=function(){t.setConnected(!0),t.$9.debugTrace("Socket-Open","MQTTProtocolClient Socket Open"),t.$11=t.$13(new(o("MqttProtocolCodec")).WireMessage.Connect(t.$1,n)),n.onConnection()},this.$6.onmessage=function(e){var n=e.data;if(!(n instanceof ArrayBuffer)){t.$9.bumpCounter("protocol.error.onmessage.type"),t.$12(o("MqttTypes").MqttErrors.INVALID_DATA_TYPE);return}try{var a=new Uint8Array(n);t.$10!=null&&(a=o("MqttProtocolUtils").concatBuffers(t.$10,a),t.$9.bumpCounter("protocol.debug.usingMessagesBuffer"),delete t.$10,t.$10=null);var i=o("MqttProtocolCodec").decodeByteMessages(a),l=i.messages;t.$10=i.remaining;for(var s=0;s<l.length;s++)t.handleMessage(l[s])}catch(e){var u=r("getErrorSafe")(e);t.$10=null,t.$9.logError(u,o("MqttTypes").MqttErrors.SOCKET_MESSAGE.errorMessage),t.$9.bumpCounter("protocol.error.onmessage.parse"),t.$12(o("MqttTypes").MqttErrors.SOCKET_MESSAGE,u.message)}},this.$6.onerror=function(e){t.$9.bumpCounter("protocol.error.socket"),t.$9.debugTrace("Socket-Error","MQTTProtocolClient Socket Error");var n=typeof e=="object"&&e!=null&&"error"in e&&!("message"in e)?e.error:e;t.$12(o("MqttTypes").MqttErrors.SOCKET_ERROR,r("ErrorSerializer").toReadableMessage(r("getErrorSafe")(n)))},this.$6.onclose=function(e){t.$9.bumpCounter("protocol.socket.close"),e.wasClean||t.$9.debugTrace("Socket-Unclean-Close","MQTTProtocolClient error code: "+e.code+" reason: "+e.reason),t.$12(o("MqttTypes").MqttErrors.SOCKET_CLOSE,e.code+" : "+e.reason)},this.$8!=null&&this.$8.cancel(),this.$8=new(o("MqttProtocolUtils")).Pinger(n.getKeepAliveIntervalSeconds,n.getKeepAliveTimeoutSeconds,this.$13.bind(this,new(o("MqttProtocolCodec")).WireMessage.Ping("PINGREQ")),function(e,n){return t.$12(o("MqttTypes").MqttErrors.PING_TIMEOUT,e,n)})},n.$14=function(){var e=this;this.setConnected(!1),this.$8!=null&&this.$8.cancel(),this.$7!=null&&(o("MqttEnv").Env.clearTimeout(this.$7),this.$7=null),this.$6!=null&&(this.$6.onopen=function(t){e.$9.debugTrace("Socket Open After Teardown","Socket opening after teardown")},this.$6.onmessage=function(e){},this.$6.onerror=function(e){},this.$6.onclose=function(t){e.$9.debugTrace("Socket Close After Teardown","code: "+t.code+", reason: "+t.reason)},this.$6.close(),this.$6=null),this.$2.onConnectSuccess=function(e){},this.$2.onConnectFailure=function(e,t){},this.$2.onConnection=function(){},this.$2.onConnectionLost=function(e){},this.$2.onMessageArrived=function(e,t,n){},this.$2.onMessageDelivered=function(e){}},n.disconnect=function(t){if(this.$6==null||this.$6.readyState!==this.$6.OPEN||!this.$5){this.$14();return}this.$13(new(o("MqttProtocolCodec")).WireMessage.Disconnect),this.$9.bumpCounter("protocol.debug.disconnect"),this.$12(t)},n.isConnected=function(){return this.$5},n.setConnected=function(t){this.$5=t},n.subscribe=function(t){if(!this.$5)throw this.$9.bumpCounter("protocol.error.subscribe.notconnected"),r("err")("Invalid state: subscribe - not connected");this.$9.bumpCounter("protocol.subscribe."+t);var e=new(o("MqttProtocolCodec")).WireMessage.Subscription("SUBSCRIBE",t,0,this.$15());this.$13(e)},n.unsubscribe=function(t){if(!this.$5)throw this.$9.bumpCounter("protocol.error.unsubscribe.notconnected"),r("err")("Invalid state: unsubscribe - not connected");this.$9.bumpCounter("protocol.unsubscribe."+t);var e=new(o("MqttProtocolCodec")).WireMessage.Subscription("UNSUBSCRIBE",t,0,this.$15());this.$13(e)},n.publish=function(t,n,r){return this.$16(t,o("MqttProtocolCodec").createMessageWithString(n),r)},n.publishBinary=function(t,n,r){return this.$16(t,o("MqttProtocolCodec").createMessageWithBytes(n),r)},n.$16=function(t,n,r){this.$5||this.$9.bumpCounter("protocol.error.publish.notconnected"),this.$9.bumpCounter("protocol.publish."+t);var e=this.$15(),a=new(o("MqttProtocolCodec")).WireMessage.Publish(t,n,r,e);return this.$13(a),e},n.$15=function(){return++this.$4===s&&(this.$4=1),this.$4},n.handleMessage=function(t){var e=this;switch(t.messageType){case o("MqttProtocolCodec").MESSAGE_TYPE.CONNACK:if(this.$7!=null&&(o("MqttEnv").Env.clearTimeout(this.$7),this.$7=null),t instanceof o("MqttProtocolCodec").WireMessage.ConnAck){var n=t;if(n.returnCode!==0){this.$9.bumpCounter("protocol.error.connack.invalidreturncode"),this.setConnected(!1),this.$12(o("MqttTypes").MqttErrors.CONNACK_FAILURE,"connack code="+n.returnCode,n.returnCode);return}o("MqttEnv").Env.scheduleCallback(function(){e.$2.onConnectSuccess(e.$11)}),this.$8!=null&&this.$8.reset()}break;case o("MqttProtocolCodec").MESSAGE_TYPE.PUBLISH:if(t instanceof o("MqttProtocolCodec").WireMessage.Publish){var a=t;o("MqttEnv").Env.scheduleCallback(function(){e.$2.onMessageArrived(a.topic,a.payloadMessage,a.qos)});var i=a.messageIdentifier;if(this.$9.bumpCounter("protocol.publish.received"),a.qos===1&&i!=null){var l=new(o("MqttProtocolCodec")).WireMessage.PubAckUnsubAck("PUBACK",i);this.$13(l)}}break;case o("MqttProtocolCodec").MESSAGE_TYPE.PUBACK:if(t instanceof o("MqttProtocolCodec").WireMessage.PubAckUnsubAck){var s=t,u=s.messageIdentifier;this.$9.bumpCounter("protocol.puback.received"),o("MqttEnv").Env.scheduleCallback(function(){e.$2.onMessageDelivered(u)})}break;case o("MqttProtocolCodec").MESSAGE_TYPE.PINGRESP:this.$8!=null&&this.$8.reset();break;case o("MqttProtocolCodec").MESSAGE_TYPE.DISCONNECT:this.$12(o("MqttTypes").MqttErrors.SERVER_DISCONNECT);break;case o("MqttProtocolCodec").MESSAGE_TYPE.SUBACK:this.$9.bumpCounter("protocol.suback.received");break;case o("MqttProtocolCodec").MESSAGE_TYPE.UNSUBACK:this.$9.bumpCounter("protocol.unsuback.received");break;default:this.$9.logError(r("err")("MqttProtocolClient: Received unhandled message type: "+t.messageType),"Received unhandled message type"),this.$9.bumpCounter("protocol.error.handlemessage.unsupportedtype");break}},t})();l.default=u}),98);
__d("MqttPublishListener",[],(function(t,n,r,o,a,i){"use strict";var e=Object.freeze({NOT_CONNECTED:"NOT_CONNECTED",PUBLISH_ERROR:"PUBLISH_ERROR",QUEUED:"QUEUED",SENT:"SENT",ACKED:"ACKED",NOT_ACKED:"NOT_ACKED"});i.MqttPublishEvent=e}),66);
__d("MqttUserNameUtils",[],(function(t,n,r,o,a,i){"use strict";function e(e){return e!=null?e:typeof document=="object"&&document!=null&&"hasFocus"in document&&document.hasFocus()}function l(){return navigator.userAgent}i.getMqttForegroundStatus=e,i.getUserAgent=l}),66);
__d("MqttUserName",["MqttUserNameUtils"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(){function e(e,t,n,r,a,i,l,s,u,c,d,m){l===void 0&&(l=null),s===void 0&&(s=""),u===void 0&&(u="websocket"),c===void 0&&(c=null),d===void 0&&(d=null),m===void 0&&(m=null),this.$1=e,this.$2=t,this.$3=n,this.$4=r,this.$5=a,this.$6=i,this.$7=o("MqttUserNameUtils").getMqttForegroundStatus(),this.$8=l,this.$9=s,this.$10=u,this.$11=c,this.$12=d,this.$13=m}var t=e.prototype;return t.gen=function(t,n,r,a){a===void 0&&(a=[]);var e=o("MqttUserNameUtils").getMqttForegroundStatus(this.$7),i=r.map(function(e){var t={isBase64Publish:!1,messageId:e.messageId,payload:e.payload,qos:e.qos,topic:e.topic};return typeof t.payload!="string"&&(t.payload=btoa(String.fromCharCode.apply(null,t.payload)),t.isBase64Publish=!0),t}),l={a:o("MqttUserNameUtils").getUserAgent(),asi:this.$13,aid:this.$5,aids:this.$12!=null?Object.fromEntries(this.$12):null,chat_on:this.$6,cp:this.$3,ct:this.$10,d:this.$4,dc:"",ecp:this.$2,fg:e,gas:this.$8,mqtt_sid:"",no_auto_fg:!0,p:this.$11,pack:a,php_override:this.$9,pm:i,s:t,st:n,u:this.$1};return JSON.stringify(l)},t.setForegroundState=function(t){this.$7=t},t.setChatVisibility=function(t){this.$6=t},t.getEndpointCapabilities=function(){return this.$2},t.getDeviceId=function(){return this.$4},t.setEndpointCapabilities=function(t){this.$2=t},t.getIsGuestAuthStringPresent=function(){return this.$8!==null},e})();l.default=e}),98);
__d("MqttConnection",["MqttConnectionHookCollection","MqttEnv","MqttProtocolClient","MqttPublishListener","MqttTypes","MqttUserName","MqttUtils","Promise","err","getErrorSafe"],(function(t,n,r,o,a,i,l){"use strict";var e,s=15,u=15,c=1,d=1,m=64,p="publish",_="subscribe",f="unsubscribe",g=function(t){},h=18e4,y=5*1e3,C=15,b=21,v=(function(){function t(){var e=this;this.$38=function(){return e.$20},this.$39=function(){return e.$21},this.$8=!1,this.$10=o("MqttEnv").Env.getLoggerInstance(),this.$11="Disconnected",this.$17=new Set,this.$24=new Map,this.$12=0,this.$13=0,this.$14=0,this.$15=0,this.$16=0,this.$8=!1,this.$5="",this.$6=new(r("MqttUserName"))("",0,1,"",0,!0),this.$9=0,this.$18=0,this.$19=!1,this.$7=null;var t=function(){};this.$1=t,this.$2=t,this.$3=t,this.$25=!1,this.$26=!1,this.$27=new(r("MqttConnectionHookCollection")),this.$4=function(){return[]},this.$20=s,this.$21=u,this.$22=null,this.$23=0}var a=t.prototype;return a.run=function(t){var e=this,n=t.endpoint,r=t.extraConnectMessageProvider,o=t.mqttUserName,a=t.onJSError,i=t.onMessageReceived,l=t.onStateChange,c=t.subscribedTopics;if(this.$8){this.$10.debugTrace("run","Run called while in running state.");return}this.$1=l,this.$3=i,this.$5=n,this.$6=o,this.$8=!0,this.$18=Date.now(),this.$12=0,this.$13=0,this.$2=a||g,c&&c.forEach(function(t){return e.$17.add(t)}),this.$4=r,this.$20=s,this.$21=u,this.$28()},a.shutdown=function(t){this.$29(t),this.$30("shutdown"),this.$8=!1,this.$10.debugTrace("shutdown","Shutdown")},a.subscribe=function(t){return this.$17.add(t),this.ensureConnected(_)&&this.$31(t),!0},a.publish=function(t,n,r,o){return this.$32(t,n,r,o)},a.publishBinary=function(t,n,r,o){return this.$32(t,n,r,o)},a.$32=function(a,i,l,s){var t={reject:function(t){},resolve:function(){}};s!=null&&(t.listener=s);var u=new(e||(e=n("Promise")))(function(e,n){t.resolve=e,t.reject=n}),c=this.ensureConnected(p);return c?this.$33(a,i,l,t):(s==null||s.onEvent(o("MqttPublishListener").MqttPublishEvent.NOT_CONNECTED),t.reject(r("err")("Client disconnected"))),u},a.unsubscribe=function(t){return this.$17.delete(t),this.ensureConnected(f)&&this.$34(t),!0},a.addHook=function(t){this.$27.addHook(t)},a.removeHook=function(t){this.$27.removeHook(t)},a.isRunning=function(){return this.$8},a.getSessionId=function(){return this.$9},a.hasFatal=function(){return this.$25},a.hasConnectSuccess=function(){return this.$26},a.canPublish=function(){return this.ensureConnected("canPublish")},a.ensureConnected=function(t){return!(!this.$8||this.$7==null||!this.$7.isConnected())},a.connectionState=function(){return this.$11},a.mqttStateFromConnectionState=function(t){switch(t){case"Connecting":case"TransportConnected":return"Connecting";case"Connected":return"Connected";case"Disconnected":return"Disconnected"}throw r("err")("Unknown state "+t)},a.testOnlyGetSubscribedTopics=function(){return this.$17},a.getDisconnectCount=function(){return this.$23},a.$29=function(t){this.$8&&this.$7!=null&&(this.$35("Disconnected"),this.$7!=null&&(this.$7.disconnect(t),this.$27.onConnectionDisconnect()),this.$7=null)},a.$36=function(t){if(this.$11==="Connected"&&t==="Disconnected"&&this.$18===0){this.$18=Date.now();return}if(t==="Connecting"&&this.$18!==0&&!this.$19){this.$10.bumpCounter("protocol.reconnectstarted"),this.$19=!0;return}if(t==="Connected"&&this.$18!==0){var e=Date.now()-this.$18;switch(Math.floor(e/3e4)){case 0:this.$10.bumpCounter("protocol.reconnectedwithin30s");break;case 1:this.$10.bumpCounter("protocol.reconnectedwithin60s");break;case 2:this.$10.bumpCounter("protocol.reconnectedwithin90s");break;case 3:this.$10.bumpCounter("protocol.reconnectedwithin120s");break;default:this.$10.bumpCounter("protocol.reconnectedmorethan120s");break}this.$18=0,this.$19=!1;return}},a.$35=function(t){t!==this.$11&&(this.$10.debugTrace("MQTTConnection-updateState","State changed to: "+t),this.$36(t),this.$11=t,this.$1(t))},a.$28=function(){var e=this;if(this.$8){this.$11!=="Disconnected"&&this.$10.debugTrace("Reconnect","Current State not disconnected: "+this.$11),this.$35("Connecting");var t=Date.now(),n=this.$10.getBrowserConnectivity();this.$9=o("MqttUtils").generateSessionId();var a=Array.from(this.$17),i=o("MqttUtils").endpointWithSessionId(this.$5,this.$9),l=o("MqttUtils").endpointWithExtraParameter(i,"cid",this.$6.getDeviceId());try{this.$7=new(r("MqttProtocolClient"))(l);var s=this.$37(),u=s.map(function(e){return e.topic}),c=this.$6.gen(this.$9,a,s);this.$7!=null&&(this.$13+=1,this.$7.connect({getKeepAliveIntervalSeconds:this.$38,getKeepAliveTimeoutSeconds:this.$39,ignoreSubProtocol:!0,mqttVersion:3,onConnectFailure:function(o,i,l){return e.$40(i,t,e.$18,a,u,n,o,l)},onConnection:function(){return e.$41(s,a)},onConnectionLost:function(n,r){return e.$42(n,r)},onConnectSuccess:function(o){return e.$43(t,e.$18,a,u,n,o)},onMessageArrived:function(n,r,o){return e.$44(n,r,o)},onMessageDelivered:function(n){return e.$45(n)},userName:c}),this.$10.bumpCounter("protocol.connectattempt"),this.$6.getIsGuestAuthStringPresent()&&this.$10.bumpCounter("guestAuthentication.connectattempt"),this.$27.onConnectAttempt())}catch(e){var d=r("getErrorSafe")(e);this.$10.bumpCounter("js_error_in_init_exception"),this.$35("Disconnected"),this.$46(!1,!1,t,this.$18,a,[],n,null,14,"init error - "+d.message),e!=null&&this.$10.logErrorWarn(d,"ws_js_error"),this.$27.onWSFatal(),this.$47(new(o("MqttTypes")).MqttChannelError(!1,"ws_js_error",d),"client_init")}}},a.$37=function(){var e=this.$4(),t=65536;return e.map(function(e){return e.messageId=t--,e})},a.$31=function(t){try{if(this.$7!=null)return this.$7.subscribe(t),this.$10.debugTrace("#doSubscribe","Subscribing to "+t),this.$27.onSubscribe(t),this.$10.bumpCounter("protocol.subscribe"),!0}catch(n){var e=r("getErrorSafe")(n);this.$10.logError(e,"Exception subscribing"),this.$10.bumpCounter("subscribe_exception."+t),this.$10.bumpCounter("protocol.subscribe.error")}return!1},a.$34=function(t){try{if(this.$7!=null)return this.$7.unsubscribe(t),this.$10.debugTrace("#doUnsubscribe","Unsubscribing to "+t),this.$27.onUnsubscribe(t),this.$10.bumpCounter("protocol.unsubscribe"),!0}catch(n){var e=r("getErrorSafe")(n);this.$10.logError(e,"Exception unsubscribing"),this.$10.bumpCounter("unsubscribe_exception."+t),this.$10.bumpCounter("protocol.unsubscribe.error")}return!1},a.$33=function(t,n,a,i){if(this.$7!=null)try{var e,l;typeof n=="string"?l=this.$7.publish(t,n,a):l=this.$7.publishBinary(t,n,a),this.$10.bumpCounter("protocol.publish");var s=l!=null?l:"null";return this.$10.debugTrace("#doPublish","publish "+t+" with messageId:"+s+" qos:"+a),this.$27.onPublish(t),(e=i.listener)==null||e.onEvent(o("MqttPublishListener").MqttPublishEvent.SENT),l!=null?(this.$10.bumpCounter("publish.ack_expected"),this.$24.set(l,i)):i.resolve(),!0}catch(e){var u=r("getErrorSafe")(e);return this.$10.logError(u,"Exception publishing"),this.$10.bumpCounter("publish_exception."+t),i.reject(u),this.$10.bumpCounter("protocol.publish.error"),!1}else return!1},a.$48=function(t){var e=this;if(t===void 0&&(t=null),!!this.$8){this.$29(o("MqttTypes").MqttErrors.RECONNECT),this.$30("reconnect"),this.$49(),this.$9=-1,this.$16=0;var n=t;n==null&&(n=c*Math.pow(2,this.$12)),n=Math.max(n,d),n=Math.min(n,m);var r=n*(1e3+o("MqttEnv").Env.random()*200);this.$10.debugTrace("#scheduleReconnect","Reconnect in "+r+" ms"),this.$22=o("MqttEnv").Env.setTimeout(function(){e.$28()},r),this.$12+=1}},a.$49=function(){var e=Date.now()-this.$16,t=this.$16!==0&&e>y,n=this.$12>C;(t||n)&&(this.$12=0),this.$16!==0&&e<=y&&this.$10.bumpCounter("short_lived_session"),n&&this.$10.bumpCounter("connection_attempt_limit")},a.$46=function(t,n,r,o,a,i,l,s,u,c){t?this.$14++:this.$15++;var e=Date.now();this.$10.eventLogConnect({ackReceived:n,attemptNumber:this.$13,connectionState:this.mqttStateFromConnectionState(this.$11),connectionStatus:t,disconnectCount:this.$23,duration:e-r,errorCode:u,errorMessage:c,failTotal:this.$15,hostname:this.$5,messageSizeBytes:s,osConnectivity:l,publishes:i,sessionID:this.$9,subscribedTopics:a,successTotal:this.$14,total_duration:e-o}),t&&(this.$13=0)},a.$40=function(t,n,r,o,a,i,l,s){var e=t.mqttError,u=s!=null?e.errorMessage+" - "+s:e.errorMessage;if(this.$10.debugTrace("connect","Connect failed "+u),this.$10.bumpCounter("protocol.onconnectfailure"),this.$6.getIsGuestAuthStringPresent()&&this.$10.bumpCounter("guestAuthentication.onconnectfailure"),this.$27.onConnectFailure(),this.$46(!1,t.connAck!==-1,n,r,o,a,i,l,e.errorCode,u),t.connAck!=null&&(this.$10.bumpCounter("protocol.connect_failure."+t.connAck),t.connAck===b)){this.$48(h);return}this.$48()},a.$41=function(t,n){var e=this;this.$10.bumpCounter("protocol.onconnection"),this.$10.debugTrace("Connect","Socket established"),this.$27.onConnected(),this.$6.getIsGuestAuthStringPresent()&&this.$10.bumpCounter("guestAuthentication.onconnection"),n.forEach(function(t){e.$27.onSubscribe(t)}),t.forEach(function(t){e.$27.onPublish(t.topic)}),this.$35("TransportConnected")},a.$43=function(t,n,r,o,a,i){this.$10.bumpCounter("protocol.onconnectsuccess"),this.$10.debugTrace("connect","Connect success"),this.$6.getIsGuestAuthStringPresent()&&this.$10.bumpCounter("guestAuthentication.onconnectsucess"),this.$27.onConnectSuccess(),this.$26=!0,this.$35("Connected"),this.$46(!0,!0,t,n,r,o,a,i),this.$50(r),this.$16=Date.now()},a.$42=function(t,n){if(this.$10.bumpCounter("protocol.onconnectionlost"),this.$23++,t.errorCode){var e=n!=null?t.errorMessage+" - "+n:t.errorMessage;this.$10.eventLogDisconnect({disconnectCount:this.$23,duration:Date.now()-this.$16,errorCode:t.errorCode,errorMessage:e,sessionID:this.$9})}this.$10.debugTrace("connect","connection lost"),this.$27.onConnectionLost(),this.$6.getIsGuestAuthStringPresent()&&this.$10.bumpCounter("guestAuthentication.onconnectionlost"),this.$48()},a.$44=function(t,n,o){this.$10.bumpCounter("protocol.onmessagearrived"),this.$6.getIsGuestAuthStringPresent()&&this.$10.bumpCounter("guestAuthentication.onmessagearrived"),this.$10.debugTrace("onMessageArrived","Message received on "+t),this.$27.onMessage(t);try{this.$3(t,n,o)}catch(n){var e=r("getErrorSafe")(n);this.$10.logError(e,"Listener threw error"),this.$10.bumpCounter("listener_error."+t)}},a.$45=function(t){var e;this.$10.bumpCounter("protocol.onmessagedelivered");var n=t!=null?t:"null";if(this.$10.debugTrace("onMessageDelivered","Delivered Message {ID: "+n+"}"),t!=null){var r=this.$24.get(t);if(r==null){this.$10.bumpCounter("protocol.message_with_unknown_id");return}this.$24.delete(t),(e=r.listener)==null||e.onEvent(o("MqttPublishListener").MqttPublishEvent.ACKED),r.resolve(),this.$10.bumpCounter("publish.ack_received")}},a.$30=function(t){this.$10.bumpCounter("protocol.fail_all_unacked_publishes."+t),this.$24.forEach(function(e,n,a){var i;(i=e.listener)==null||i.onEvent(o("MqttPublishListener").MqttPublishEvent.NOT_ACKED),e.reject(r("err")(t))}),this.$24.clear()},a.$50=function(t){var e=this,n=new Set(t);n.forEach(function(t){e.$17.has(t)||e.unsubscribe(t)});var r=new Set(this.$17);r.forEach(function(t){n.has(t)||e.subscribe(t)})},a.$47=function(t,n){try{this.$10.bumpCounter("js_error_in_init"),this.$10.bumpCounter(n+".error"),this.$25=!0;var e=t?t.message:"error";this.$10.debugTrace("onError",n+": "+e),this.$2(t)}catch(e){var o=r("getErrorSafe")(e);this.$10.bumpCounter("js_error_in_error_logging"),this.$10.logError(o,"JS error while trying to log previous error")}},a.setRunning_OnlyForTests=function(t){this.$8=t},t})();l.default=v}),98);
__d("MqttWebSocketUtils",[],(function(t,n,r,o,a,i){"use strict";function e(){return"WebSocket"in t&&t.WebSocket!=null&&"CLOSING"in t.WebSocket.prototype}i.hasWSSupport=e}),66);
__d("isFastRefreshEnabledForCurrentDomain",[],(function(t,n,r,o,a,i){"use strict";function e(){return!1}i.default=e}),66);
__d("MqttChannel",["ChannelClientID","IrisSubscribeChecker","MetaConfig","MqttAnalyticsHook","MqttConnection","MqttEnv","MqttPublishListener","MqttTypes","MqttUserName","MqttUtils","MqttWebSocketUtils","Promise","Run","err","getErrorSafe","isFastRefreshEnabledForCurrentDomain","promiseDone","requireDeferred"],(function(t,n,r,o,a,i,l){"use strict";var e,s=29125,u=(function(){function t(e){var t=this,n=e.endpoint,a=e.pollingEndpoint,i=e.userFbid,l=e.appId,s=e.initialSubscribedTopics,u=e.capabilities,c=e.clientCapabilities,d=e.chatVisibility,m=d===void 0?!0:d,p=e.guestAuthString,_=p===void 0?null:p,f=e.phpOverride,g=f===void 0?"":f,h=e.clientType,y=h===void 0?"websocket":h,C=e.deviceId,b=C===void 0?r("ChannelClientID").getID():C,v=e.pageId,S=v===void 0?null:v,R=e.assetIds,L=R===void 0?null:R,E=e.appSpecificInfo,k=E===void 0?null:E;if(this.$11=o("MqttEnv").Env.getLoggerInstance(),this.$11.setAppId(l),this.$12=new(r("MqttUserName"))(i,u,c,b,l,m,_,g,y,S,L,k),this.$1=n,this.$2=a,this.$5="Disconnected",this.$7="LPInactive",this.$6="Disconnected",this.$3=[],this.$4=new Set,this.$8=new Map,this.$9=new Map,this.$10=new(r("MqttConnection")),this.$13=null,this.$16=new(r("MqttAnalyticsHook")),this.$15=new Map,this.$14=[],!o("MqttEnv").Env.isUserLoggedInNow()&&!r("isFastRefreshEnabledForCurrentDomain")()&&(_==null||_=="")){this.$11.bumpCounter("logged_out_init");return}this.$10.addHook(this.$16),this.$10.addHook(new(r("IrisSubscribeChecker"))(function(){return t.$4.size>0})),this.$17(s),this.$18()}var a=t.prototype;return a.$17=function(t){var e=this;if(this.$10.isRunning()){this.$19("run","Connection started calling run again");return}if(o("MqttEnv").Env.genGk(o("MqttEnv").MqttGkNames.mqtt_ws_polling_enabled)){if(r("MetaConfig")._("15")){this.$19("MqttChannel","Websocket disabled, will do long polling only");return}else if(!o("MqttWebSocketUtils").hasWSSupport()){this.$19("MqttChannel","Websocket Unavailable, will do long polling only"),this.$11.bumpCounter("ws_unavailable_polling");return}}this.$10.run({endpoint:this.$1,extraConnectMessageProvider:function(){return e.$20()},mqttUserName:this.$12,onJSError:function(n){e.$21(n)},onMessageReceived:function(n,r,o){e.$22(n,r,o)},onStateChange:function(n){e.$23(n)},subscribedTopics:t}),this.$24()},a.$24=function(){var e=this,t=o("Run").onUnload(function(){e.$25(o("MqttTypes").MqttErrors.BROWSER_CLOSE)})},a.shutdown=function(){this.$25(o("MqttTypes").MqttErrors.APP_DISCONNECT)},a.$25=function(t){this.$10&&this.$10.shutdown(t),this.$13&&this.$13.shutdown(),this.$16.onTabClose()},a.publish=function(t,n,r){return this.$26(t,n,r!=null?r:{qos:1,skipBuffer:!1})},a.publishBinary=function(t,n,r){return r===void 0&&(r={qos:1,skipBuffer:!1}),this.$26(t,n,r)},a.$26=function(t,n,r){r===void 0&&(r={qos:1,skipBuffer:!1});var e;return r.qos===0?e=this.$27(t,n,r.listener):e=this.$28(t,n,r),o("MqttUtils").promiseDone(e,function(){},function(e){var t;(t=r.listener)==null||t.onEvent(o("MqttPublishListener").MqttPublishEvent.PUBLISH_ERROR)}),e},a.$27=function(t,n,r){return this.$29(t,n,0,r,1,null)},a.$28=function(r,a,i){var t={reject:function(t){},resolve:function(){}},l=new(e||(e=n("Promise")))(function(e,n){t.resolve=e,t.reject=n}),s=o("MqttEnv").Env.random(),u={ack:t,attempt:0,options:i,payload:a,publishToken:s,startTime:Date.now(),timeoutId:null,topic:r};if(i.skipBuffer)if(this.$10.connectionState()==="Connecting"){var c;this.$14.push(u),(c=i.listener)==null||c.onEvent(o("MqttPublishListener").MqttPublishEvent.QUEUED)}else this.$30(u);else{var d;u.timeoutId=this.$31(s),this.$15.set(s,u),(d=i.listener)==null||d.onEvent(o("MqttPublishListener").MqttPublishEvent.QUEUED),this.$32(u)}return l},a.$30=function(t){t.attempt+=1,o("MqttUtils").promiseDone(this.$29(t.topic,t.payload,t.options.qos,t.options.listener,t.attempt,t.startTime),function(){t.ack.resolve()},function(e){t.ack.reject(e)})},a.$32=function(t){var e=this;t.attempt+=1,o("MqttUtils").promiseDone(this.$29(t.topic,t.payload,t.options.qos,t.options.listener,t.attempt,t.startTime),function(){return e.$33(t)},function(e){})},a.$29=function(t,n,a,i,l,s){var e=this,u,c,d=this.getConnectionState(),m=Date.now();return!this.$10.canPublish()&&this.$13&&this.$13.canPublish()?(typeof n=="string"?u=this.$13.publish(t,n,a):u=this.$13.publishBinary(t,n,a),c="lp",i!=null&&(u=u.then(function(){return i.onEvent(o("MqttPublishListener").MqttPublishEvent.SENT)})),this.$11.bumpCounter("try_publish_lp")):(typeof n=="string"?u=this.$10.publish(t,n,a,i):u=this.$10.publishBinary(t,n,a,i),c="ws",this.$11.bumpCounter("try_publish_ws")),r("promiseDone")(u,function(){e.$11.eventLogOutgoingPublish({attempt:l,connectionState:d,disconnectCount:e.$10.getDisconnectCount(),errorMessage:null,firstAttemptStartTime:s,payloadSizeBytes:n.length*2,protocol:c,qos:a,sessionID:e.$10.getSessionId(),success:!0,thisAttemptStartTime:m,topic:t})},function(r){e.$11.eventLogOutgoingPublish({attempt:l,connectionState:d,disconnectCount:e.$10.getDisconnectCount(),errorMessage:r!=null?r.toString():null,firstAttemptStartTime:s,payloadSizeBytes:n.length*2,protocol:c,qos:a,sessionID:e.$10.getSessionId(),success:!1,thisAttemptStartTime:m,topic:t})}),u},a.subscribe=function(t,n){var e=this;this.$10.subscribe(t);var r=this.$8.get(t);return r?r.push(n):(r=[n],this.$8.set(t,r)),function(){var r=e.$8.get(t)||[],o=r.filter(function(e){return e!==n});e.$8.set(t,o),o.length===0&&e.unsubscribeAll(t)}},a.subscribeBinary=function(t,n){var e=this;this.$10.subscribe(t);var r=this.$9.get(t);return r?r.push(n):(r=[n],this.$9.set(t,r)),function(){var r=e.$9.get(t)||[],o=r.filter(function(e){return e!==n});e.$9.set(t,o),o.length===0&&e.unsubscribeAll(t)}},a.subscribeChannelEvents=function(t){var e=this;return this.$3.push(t),function(){e.unsubscribeChannelEvents(t)}},a.unsubscribeChannelEvents=function(t){var e=this.$3.indexOf(t);e>-1&&this.$3.splice(e,1)},a.registerExtraConnectPayloadProvider=function(t){var e=this;if(this.$19("MqttChannel","registerExtraConnectPayloadProvider called"),this.$4.add(t),this.$10.isRunning()){var n=t.getPublishMessages();n.forEach(function(t){typeof t.payload=="string"?e.publish(t.topic,t.payload,{qos:t.qos,skipBuffer:!0}):e.publishBinary(t.topic,t.payload,{qos:t.qos,skipBuffer:!0})})}},a.unregisterExtraConnectPayloadProvider=function(t){this.$4.delete(t)},a.unsubscribeAll=function(t){this.$10.unsubscribe(t),this.$8.delete(t),this.$9.delete(t)},a.getConnectionState=function(){return this.$5},a.getLongPollingStatus=function(){return this.$7},a.getEndpoint=function(){return this.$1},a.addHook=function(t){this.$10.addHook(t)},a.removeHook=function(t){this.$10.removeHook(t)},a.testOnlyMessageReceived=function(t,n){this.$22(t,n,-1)},a.$34=function(t){var e=this.$15.get(t);e!=null&&e.timeoutId!=null&&o("MqttEnv").Env.clearTimeout(e.timeoutId),this.$15.delete(t)},a.$31=function(t){var e=this;return o("MqttEnv").Env.setTimeout(function(t){var n=e.$15.get(t);if(n){var o=n.topic;e.$11.bumpCounter("publish_timeout."+o),e.$11.debugTrace("publish_timeout","Timeout publishing topic: "+o+" publishToken: "+t),e.$34(t),n.ack.reject(r("err")("Publish Timed Out"))}},s,t)},a.$33=function(t){var e=t.publishToken,n=this.$15.get(e);n&&(this.$34(e),t.ack.resolve(),this.$11.debugTrace("publish_success","Topic: "+t.topic+" publishToken: "+t.publishToken),this.$11.bumpCounter("publish_success."+t.topic))},a.$22=function(t,n,o){var e=this.$8.get(t);if(this.$11.eventLogIncomingPublish({connectionState:this.getConnectionState(),disconnectCount:this.$10.getDisconnectCount(),payloadSizeBytes:n.payloadString.length*2,qos:o,sessionID:this.$10.getSessionId(),topic:t}),!e)this.$11.debugTrace("_onMessageReceived",t+" being dropped, no listeners");else for(var a of e)try{a(n.payloadString)}catch(e){this.$11.logError(r("getErrorSafe")(e),"Listener exception"),this.$11.bumpCounter("listener_error")}var i=this.$9.get(t);if(this.$11.eventLogIncomingPublish({connectionState:this.getConnectionState(),disconnectCount:this.$10.getDisconnectCount(),payloadSizeBytes:n.payloadBytes.length,qos:o,sessionID:this.$10.getSessionId(),topic:t}),!i)this.$11.debugTrace("_onMessageReceived",t+" being dropped, no binary listeners");else for(var l of i)try{l(n.payloadBytes)}catch(e){this.$11.logError(r("getErrorSafe")(e),"Binary Listener exception"),this.$11.bumpCounter("listener_error")}},a.$21=function(t){if(o("MqttEnv").Env.genGk(o("MqttEnv").MqttGkNames.mqtt_ws_polling_enabled)){t.isRecoverable?this.$11.bumpCounter("recoverable_error_skipped"):this.$11.bumpCounter("unrecoverable_error_skipped");return}t.isRecoverable?this.$11.bumpCounter("recoverable_error_not_skipped"):this.$11.bumpCounter("unrecoverable_error_not_skipped"),this.$35(t)},a.$36=function(t){this.$35(t)},a.$35=function(t){for(var e of this.$3)e.onJSError&&e.onJSError(t)},a.$37=function(){var e=this;this.$14.forEach(function(t){e.$30(t),e.$11.bumpCounter("publish_from_temp_buffer."+t.topic)}),this.$14=[],this.$15.forEach(function(t,n,r){e.$32(t),e.$11.bumpCounter("publish_from_buffer."+t.topic)})},a.$23=function(t){t==="Connecting"?(this.$14.forEach(function(e){e.ack.reject(r("err")("Client Reconnecting - "+e.topic))}),this.$14=[]):t==="TransportConnected"&&this.$37(),this.$19("_changeState","Connection state = "+t),this.$38(t,this.$7)},a.$39=function(t,n){this.$13&&this.$13.canPublish()&&this.$37(),this.$19("_changeLPStatus","LP status = "+t+", LP Request status = "+n),this.$38(this.$6,t)},a.$38=function(t,n){var e=this.$10.mqttStateFromConnectionState(t);this.$13&&this.$13.canPublish()&&(e="Connected"),this.$6=t,(e!==this.$5||n!=this.$7)&&(this.$5=e,this.$7=n,this.$40(e))},a.$40=function(t){for(var e of this.$3)e.onMQTTStateChanged(t)},a.$20=function(){var e=this,t=[];return this.$4.forEach(function(n){try{var o=n.getPublishMessages();t.push.apply(t,o)}catch(t){e.$11.logError(r("getErrorSafe")(t),"ConnectPayload provider exception"),e.$11.bumpCounter("connectPayloadProvider_error")}}),t},a.$18=function(){var e=this;o("MqttEnv").Env.genGk(o("MqttEnv").MqttGkNames.mqtt_ws_polling_enabled)&&!r("MetaConfig")._("262")&&this.$2&&this.$2!=""&&r("requireDeferred")("MqttLongPollingRunner").__setRef("MqttChannel").onReady(function(t){var n=new t(e.$2,e.$12,e.$10.hasFatal(),e.$10.hasConnectSuccess(),function(t,n,r){return e.$22(t,n,r)},function(){var t=Array.from(e.$8.keys()),n=Array.from(e.$9.keys());return Array.from(new Set(t.concat(n)))},function(){return e.$20()},function(t){e.$36(t)},function(t,n){e.$39(t,n)});n.start(),e.$10.addHook(n),n.addHook(e.$16),e.$13=n,e.$11.debugTrace("MqttChannel","longPollingRunner loaded")})},a.$19=function(t,n){this.$11.debugTrace(t,"Mqtt channel: "+n)},a.setForegroundState=function(t){this.$12&&this.$12.setForegroundState(t)},a.setChatVisibility=function(t){this.$12&&this.$12.setChatVisibility(t)},a.getEndpointCapabilities=function(){return this.$12.getEndpointCapabilities()},a.setEndpointCapabilities=function(t){this.$12.setEndpointCapabilities(t)},a.getConnection_OnlyForTests=function(){return this.$10},t})();l.default=u}),98);
__d("MqttConfig",["MqttWebConfig"],(function(t,n,r,o,a,i,l){"use strict";l.default=r("MqttWebConfig")}),98);
__d("CurrentMessengerUser",["CurrentEnvironment","CurrentUser"],(function(t,n,r,o,a,i,l){"use strict";function e(){return r("CurrentUser").getID()}function s(){return r("CurrentEnvironment").instagramdotcom?r("CurrentUser").getEIMU():r("CurrentUser").getID()}function u(){return r("CurrentUser").getPageMessagingMailboxId()}function c(){return r("CurrentUser").isWorkUser()}function d(){return r("CurrentUser").isTestUser()}function m(){return r("CurrentUser").isEmployee()}function p(){return r("CurrentUser").getAppID()}function _(){return r("CurrentUser").getAccountID()}function f(){return r("CurrentUser").isLoggedInNow()}l.getID=e,l.getIDorEIMU=s,l.getPageMessagingMailboxId=u,l.isWorkUser=c,l.isTestUser=d,l.isEmployee=m,l.getAppID=p,l.getAccountID=_,l.isLoggedInNow=f}),98);
__d("MqttEnvConfigStorage",["WebStorage"],(function(t,n,r,o,a,i,l){"use strict";var e,s="mqtt:";function u(t,n){var o=(e||(e=r("WebStorage"))).getLocalStorage();if(o){var a=o.getItem(s+t);if(a!=null)return a}return n}function c(t,n){var o=(e||(e=r("WebStorage"))).getLocalStorage();if(o)if(n==null)o.removeItem(s+t);else var a=(e||(e=r("WebStorage"))).setItemGuarded(o,s+t,n)}l.configRead=u,l.configWrite=c}),98);
__d("MqttUnifiedClientConnectFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(t,n,r,o,a,i,l){"use strict";var e=r("getFalcoLogPolicy_DO_NOT_USE")("1744057"),s=o("FalcoLoggerInternal").create("mqtt_unified_client_connect",e),u=s;l.default=u}),98);
__d("MqttUnifiedClientDisconnectFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(t,n,r,o,a,i,l){"use strict";var e=r("getFalcoLogPolicy_DO_NOT_USE")("1744058"),s=o("FalcoLoggerInternal").create("mqtt_unified_client_disconnect",e),u=s;l.default=u}),98);
__d("MqttUnifiedClientIncomingPublishFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(t,n,r,o,a,i,l){"use strict";var e=r("getFalcoLogPolicy_DO_NOT_USE")("1744059"),s=o("FalcoLoggerInternal").create("mqtt_unified_client_incoming_publish",e),u=s;l.default=u}),98);
__d("MqttUnifiedClientOutgoingPublishFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(t,n,r,o,a,i,l){"use strict";var e=r("getFalcoLogPolicy_DO_NOT_USE")("1744060"),s=o("FalcoLoggerInternal").create("mqtt_unified_client_outgoing_publish",e),u=s;l.default=u}),98);
__d("MqttWsClientTypedLoggerLite",["generateLiteTypedLogger"],(function(t,n,r,o,a,i){"use strict";a.exports=n("generateLiteTypedLogger")("logger:MqttWsClientLoggerConfig")}),null);
__d("MqttLogger",["ChannelClientID","FBLogger","LogHistory","MetaConfig","MqttEnv","MqttGlobalStreamCounter","MqttUnifiedClientConnectFalcoEvent","MqttUnifiedClientDisconnectFalcoEvent","MqttUnifiedClientIncomingPublishFalcoEvent","MqttUnifiedClientOutgoingPublishFalcoEvent","MqttWsClientTypedLoggerLite","NetworkStatus","ODS","Random"],(function(t,n,r,o,a,i,l){"use strict";var e,s=r("MetaConfig")._("99"),u="mqtt_client",c=100,d="WEBSOCKET",m=typeof window!="undefined"?window:self,p=null,_={CLIENT_ERROR:"mqtt_client_error",CONNECT:"mqtt_client_connect",DISCONNECT:"mqtt_client_disconnect",PUBLISH:"mqtt_client_publish",PUBLISH_TIMEOUT:"mqtt_qos1_publish_timeout",SOCKET_DISCONNECT:"mqtt_protocol_error"},f={CONNECT:"connect",DISCONNECT:"disconnect",INCOMING_PUBLISH:"incoming_publish",OUTGOING_PUBLISH:"outgoing_publish"},g=(function(){function t(e){this.$1=o("LogHistory").getInstance(u),this.$2=0,this.$3=Date.now(),this.$4=r("ChannelClientID").getID(),this.$7(),this.$5=o("MqttGlobalStreamCounter").getInstance(),this.$5.isEnabled()||(this.$5=null),this.$6=e}t.getInstance=function(n){return p||(p=new t(n)),p};var n=t.prototype;return n.setAppId=function(t){this.$2===0&&(this.$2=t)},n.eventLogConnect=function(t){var e,n,o=t.ackReceived,a=t.attemptNumber,i=t.connectionState,l=t.connectionStatus,s=t.disconnectCount,u=t.duration,c=t.errorMessage,m=t.failTotal,p=t.hostname,g=t.messageSizeBytes,h=t.osConnectivity,y=t.sessionID,C=t.successTotal,b=t.total_duration,v=l?"success":"failed";this.bumpCounter(_.CONNECT+"."+v);var S=C/(C+m),R=h&&this.getBrowserConnectivity(),L={acked:o,attempt_number:a.toString(),client_type:d,connection_state:i,disconnect_count:s.toString(),duration:u.toString(),error:c,event_type:f.CONNECT,extra_data:{connect_success_rate:S.toString(),device_id:this.$4,hostname:p,connectionStatus:l.toString(),exposure:(e=this.$6)!=null?e:""},os_connectivity:R,payload_size:g==null?void 0:g.toString(),session_id:y.toString(),total_duration:b.toString(),ws_count:(n=this.$5)==null?void 0:n.getGlobalState().totalConnectionStreams.toString()};this.$8(function(){r("MqttUnifiedClientConnectFalcoEvent").log(function(){return L})})},n.eventLogPull=function(t){var e=t.duration,n=t.errorMessage,r=t.hostname,a=t.pullEventName,i=t.sessionID,l=t.status,s={connection_status:l,device_id:this.$4,duration:e,error_message:n,hostname:r,href:m.location.hostname,logged_in:o("MqttEnv").Env.isUserLoggedInNow(),session_id:i};this.$9(a,s)},n.eventLogPullFinish=function(t){var e=t.duration,n=t.errorMessage,r=t.publishReceived,a=t.publishSent,i=t.pullEventName,l=t.sessionID,s={device_id:this.$4,duration:e,error_message:n,href:m.location.hostname,logged_in:o("MqttEnv").Env.isUserLoggedInNow(),publish_received:r,publish_sent:a,session_id:l};this.$9(i,s)},n.eventLogDisconnect=function(t){var e,n,o=t.disconnectCount,a=t.duration,i=t.errorMessage,l=t.sessionID;this.bumpCounter(_.DISCONNECT);var s={client_type:d,connection_state:"Disconnected",disconnect_count:o.toString(),duration:a.toString(),error:i,event_type:f.DISCONNECT,extra_data:{device_id:this.$4,exposure:(e=this.$6)!=null?e:""},os_connectivity:this.getBrowserConnectivity(),session_id:l.toString(),ws_count:(n=this.$5)==null?void 0:n.getGlobalState().totalConnectionStreams.toString()};this.$8(function(){r("MqttUnifiedClientDisconnectFalcoEvent").log(function(){return s})})},n.eventLogOutgoingPublish=function(t){var e=t.attempt,n=t.connectionState,o=t.disconnectCount,a=t.errorMessage,i=t.firstAttemptStartTime,l=t.payloadSizeBytes,s=t.protocol,u=t.qos,c=t.sessionID,m=t.success,p=t.thisAttemptStartTime,g=t.topic;this.bumpCounter(_.PUBLISH+"."+g);var h=Date.now(),y={acked:u===1?m:null,attempt_number:e.toString(),client_type:d,connection_state:n,disconnect_count:o.toString(),duration:(h-p).toString(),error:a,event_type:f.OUTGOING_PUBLISH,extra_data:{device_id:this.$4,protocol:s},os_connectivity:this.getBrowserConnectivity(),payload_size:l.toString(),qos:u.toString(),session_id:c.toString(),topic:g,total_duration:i!=null?(h-i).toString():null};this.$8(function(){r("MqttUnifiedClientIncomingPublishFalcoEvent").log(function(){return y})})},n.eventLogIncomingPublish=function(t){var e=t.connectionState,n=t.disconnectCount,o=t.payloadSizeBytes,a=t.qos,i=t.sessionID,l=t.topic,s={client_type:d,connection_state:e,disconnect_count:n.toString(),event_type:f.INCOMING_PUBLISH,extra_data:{device_id:this.$4},os_connectivity:this.getBrowserConnectivity(),payload_size:o.toString(),qos:a.toString(),session_id:i.toString(),topic:l},u=l=="/webrtc"||l=="/rtc_multi";this.$10(function(){r("MqttUnifiedClientOutgoingPublishFalcoEvent").log(function(){return s})},50,u)},n.logError=function(t,n){o("MqttEnv").Env.scheduleLoggingCallback(function(){try{r("FBLogger")(u).catching(t).mustfix(n)}catch(e){}})},n.logErrorWarn=function(t,n){o("MqttEnv").Env.scheduleLoggingCallback(function(){try{r("FBLogger")(u).catching(t).warn(n)}catch(e){}})},n.logWarn=function(t,n){var e=this;o("MqttEnv").Env.scheduleLoggingCallback(function(){try{e.$1.warn(t,n)}catch(e){}})},n.debugTrace=function(t,n){var e=this;o("MqttEnv").Env.scheduleLoggingCallback(function(){try{e.$1.debug(t,n)}catch(e){}})},n.bumpCounter=function(n){var t=this;o("Random").coinflip(c)&&o("MqttEnv").Env.scheduleLoggingCallback(function(){t.$2!==0&&(e||(e=o("ODS"))).bumpEntityKey(2966,"mqtt_ws_client",t.$2+"."+n,c),(e||(e=o("ODS"))).bumpEntityKey(2966,"mqtt_ws_client",n,c)})},n.$9=function(t,n,a){var e=this;o("MqttEnv").Env.scheduleLoggingCallback(function(){n.event_type=t,n.app_id=e.$2,n.online=e.$11();var o=JSON.stringify(n);e.$1.log(t,o,{weight:a}),t!==_.DISCONNECT&&r("MqttWsClientTypedLoggerLite").log(n)})},n.$10=function(t,n,r){var e;s&&n!==0?e=r||o("Random").coinflip(n):e=!0,e&&o("MqttEnv").Env.scheduleCallback(t)},n.$8=function(t){this.$10(t,0,!1)},n.$11=function(){return m.navigator&&m.navigator.onLine!==void 0?m.navigator.onLine:!1},n.getBrowserConnectivity=function(){return r("NetworkStatus").isOnline()},n.$7=function(){var e=this;if(m.navigator&&m.navigator.onLine!==void 0){var t=function(n){var t=n.online;t||e.bumpCounter("browser_disconnect")};r("NetworkStatus").onChange(t)}},t})();l.default=g}),98);
__d("MqttEnvGk",["MqttEnv","MqttLogger","gkx"],(function(t,n,r,o,a,i,l){"use strict";function e(e){switch(e){case o("MqttEnv").MqttGkNames.mqtt_waterfall_log_client_sampling:return r("gkx")("21119");case o("MqttEnv").MqttGkNames.mqtt_ws_polling_enabled:return!0;case o("MqttEnv").MqttGkNames.mqtt_lp_use_fetch:return r("gkx")("21120");case o("MqttEnv").MqttGkNames.mqtt_fast_lp:return!1;case o("MqttEnv").MqttGkNames.mqtt_lp_no_delay:return r("gkx")("21122");case o("MqttEnv").MqttGkNames.mqtt_enable_publish_over_polling:return r("gkx")("21123");case o("MqttEnv").MqttGkNames.mqttweb_global_connection_counter:return r("gkx")("21124");default:return r("MqttLogger").getInstance().logError(new Error("unknown gk"),"Unknown GK value "+e),!1}}l.default=e}),98);
__d("MqttEnvInitializer",["CurrentMessengerUser","MqttEnv","MqttEnvConfigStorage","MqttEnvGk","MqttLogger","Random","clearTimeout","setTimeoutAcrossTransitions"],(function(t,n,r,o,a,i,l){"use strict";function e(e){o("MqttEnv").Env.initialize(r("Random").random,o("CurrentMessengerUser").isLoggedInNow,r("clearTimeout"),r("setTimeoutAcrossTransitions"),function(){return r("MqttLogger").getInstance()},r("MqttEnvGk"),e!=null?e:null,null,null,o("MqttEnvConfigStorage").configRead,o("MqttEnvConfigStorage").configWrite)}var s={genGk:r("MqttEnvGk"),initialize:e};l.default=s}),98);
__d("FBMqttChannel",["MqttChannel","MqttConfig","MqttEnvInitializer"],(function(t,n,r,o,a,i,l){"use strict";var e;r("MqttEnvInitializer").initialize();var s=new(r("MqttChannel"))({appId:(e=r("MqttConfig")).appID,capabilities:e.capabilities,chatVisibility:!1,clientCapabilities:e.clientCapabilities,endpoint:e.endpoint,initialSubscribedTopics:e.subscribedTopics,phpOverride:e.hostNameOverride,pollingEndpoint:e.pollingEndpoint,userFbid:e.fbid});l.default=s}),98);
__d("RtiRequestStreamE2eClientBatchFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(t,n,r,o,a,i,l){"use strict";var e=r("getFalcoLogPolicy_DO_NOT_USE")("819"),s=o("FalcoLoggerInternal").create("rti_request_stream_e2e_client_batch",e),u=s;l.default=u}),98);
__d("RtiRequestStreamE2eClientFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(t,n,r,o,a,i,l){"use strict";var e=r("getFalcoLogPolicy_DO_NOT_USE")("1857112"),s=o("FalcoLoggerInternal").create("rti_request_stream_e2e_client",e),u=s;l.default=u}),98);
__d("RequestStreamE2ELogger",["ConstUriUtils","RequestStreamE2EClientLoggerEvent","RequestStreamE2EClientLoggerMessageType","RtiRequestStreamE2eClientBatchFalcoEvent","RtiRequestStreamE2eClientFalcoEvent","WebStorage"],(function(t,n,r,o,a,i,l){"use strict";var e,s="rs_debug_logging",u=["FBGQLS:COMMENT_CREATE_SUBSCRIBE","FBGQLS:COMMENT_LIKE_SUBSCRIBE","FBGQLS:FEEDBACK_COMMENT_PERMISSION_TOGGLE_SUBSCRIBE","FBGQLS:FEEDBACK_TYPING_SUBSCRIBE","GRAPHQL:CometNotificationsReceiveLiveQuery"],c=0;function d(){var e=Date.now();return c>=e?c+=1:c=e,c.toString()}var m=(function(){function e(e,t,n,r,a,i,l,s,u,c){this.$10=[],this.$11=!1,this.$1=e,this.$2=t,this.$3=n,this.$4=r,this.$5=a,this.$6=i,this.$7=l,this.$8=s,this.$9=u,this.$12=c!=null?c:!1;var d=o("ConstUriUtils").getUri(window.location.href);d&&(this.$13=d.getDomain())}var t=e.prototype;return t.logE2EEvent=function(t,n,r,o,a,i,l){if(r===void 0&&(r=null),o===void 0&&(o=null),a===void 0&&(a=null),i===void 0&&(i=null),l===void 0&&(l=null),this.$3!=="Falco"){var e={request_id:this.$1,resume_id:"0",retry_id:a,transport:this.$2,method:this.$3,use_case:this.$4,request_log_context:this.$5,force_log_context:this.$6,e2e_sample_rate:this.$7,message_type:t,event:n,timestamp_ms:d(),aux_id:o,additional_data:r,dgw_stream_group_logging_id:this.$8,dgw_count_prior_streams_in_group:this.$9,domain:this.$13,df_trace_id:i};this.$14(e,l)}},t.$14=function(t,n){if(!this.$12){r("RtiRequestStreamE2eClientFalcoEvent").log(function(){return t});return}if(this.$10.push(t),this.$11||t.event==r("RequestStreamE2EClientLoggerEvent").FAILURE||t.message_type==r("RequestStreamE2EClientLoggerMessageType").RESPONSE){var e={events:this.$10};r("RtiRequestStreamE2eClientBatchFalcoEvent").log(function(){return e}),this.$10=[],this.$11=!0}},t.getRequestId=function(){return this.$1},e})();function p(e,t,n){if(e==null||e.method==null)return null;var r=!1;if(u.includes(e.method)&&(r=!0),t==null||t.length==0)return null;var o=JSON.parse(t);return o.requestId==null?null:new m(o.requestId,n,e.method,_(e.method,e),o.requestLogContext,o.forceLogContext,o.sampleRate,o.dgwStreamGroupLoggingId,o.dgwCountPriorStreamsInGroup,r)}function _(e,t){if(e==="FBLQ"&&t.config_id)return t.config_id;if(e==="SKY"){if(t.topic){var n=t.topic.lastIndexOf("/");return n>0?t.topic.substr(0,n):t.topic}return}return e}function f(e,t,n,o,a,i){if(a===void 0&&(a=null),i===void 0&&(i=null),!(e==null||e.requestId==null||e.clientLoggingDisabled!=null)){var l={request_id:e.requestId,resume_id:"0",transport:t,e2e_sample_rate:e.sampleRate,message_type:n,event:o,timestamp_ms:d(),aux_id:e.auxId,additional_data:a,df_trace_id:i};r("RtiRequestStreamE2eClientFalcoEvent").log(function(){return l})}}l.RequestStreamE2ELogger=m,l.createStreamLogger=p,l.logRequestStreamE2EEventStatic=f}),98);
__d("RequestStreamTransport",["$InternalEnum"],(function(t,n,r,o,a,i){"use strict";var e=n("$InternalEnum").Mirrored(["WEB_BR_MQTT","WEB_RS_MQTT","WEB_RS_STARGATE"]);i.RequestStreamTransport=e}),66);
__d("BladeRunnerSocket",["BladeRunnerEventHandler","BladeRunnerLogger","BladeRunnerStreamStatus","BladeRunnerTypes","BladeRunnerTypesInternal","CurrentUser","FBMqttChannel","MqttPublishListener","Promise","RequestStreamE2EClientLoggerEvent","RequestStreamE2EClientLoggerMessageType","RequestStreamE2ELogger","RequestStreamTransport","getErrorSafe","justknobx","uuidv4"],(function(t,n,r,o,a,i,l){"use strict";var e,s="Connected",u="Disconnected",c="/br_sr",d="/sr_res",m=null;function p(e){var t,n;switch(e.type){case o("BladeRunnerTypes").StreamFrameType.REQUEST:return(t=e.request)==null?void 0:t.getInstrumentationData();case o("BladeRunnerTypes").StreamFrameType.DATA:return(n=e.data)==null?void 0:n.getInstrumentationData()}return null}function _(e){switch(e.type){case o("BladeRunnerTypes").StreamFrameType.REQUEST:return r("RequestStreamE2EClientLoggerMessageType").REQUEST_STREAM;case o("BladeRunnerTypes").StreamFrameType.DATA:return r("RequestStreamE2EClientLoggerMessageType").AMENDMENT}return null}function f(e){if(e===null)return null;switch(e){case o("BladeRunnerStreamStatus").StreamStatus.ACCEPTED:return"Accepted";case o("BladeRunnerStreamStatus").StreamStatus.REJECTED:return"Rejected";case o("BladeRunnerStreamStatus").StreamStatus.STARTED:return"Started";case o("BladeRunnerStreamStatus").StreamStatus.STOPPED:return"Stopped";case o("BladeRunnerStreamStatus").StreamStatus.CLOSED:return"Closed"}return null}function g(e){var t,n={};return e==null||(t=e.frames)==null||t.forEach(function(e){if(e.type===o("BladeRunnerTypes").StreamFrameType.STATUS_UPDATE){var t,r=(t=e.statusUpdate)==null?void 0:t.status,a=f(r);a!==null&&(n.flow_status=a)}}),n}function h(e,t){var n,r;switch(e.type){case o("BladeRunnerTypes").StreamFrameType.REQUEST:t.data_base64_size=(n=e.request)==null||(n=n.payload)==null||(n=n.length)==null?void 0:n.toString();break;case o("BladeRunnerTypes").StreamFrameType.DATA:t.data_base64_size=(r=e.data)==null||(r=r.rawDataSize())==null?void 0:r.toString();break}return null}function y(e,t,n){var a,i=p(e);if(i!=null){var l=_(e);if(l!=null){var s=null;switch(t){case o("MqttPublishListener").MqttPublishEvent.SENT:s=r("RequestStreamE2EClientLoggerEvent").SENT;break;case o("MqttPublishListener").MqttPublishEvent.ACKED:s=r("RequestStreamE2EClientLoggerEvent").PUBACK;break;case o("MqttPublishListener").MqttPublishEvent.NOT_ACKED:case o("MqttPublishListener").MqttPublishEvent.NOT_CONNECTED:case o("MqttPublishListener").MqttPublishEvent.PUBLISH_ERROR:s=r("RequestStreamE2EClientLoggerEvent").FAILURE,n.reason==null&&(n.reason=t);break}if(s!=null)if(h(e,n),((a=e.request)==null?void 0:a.e2eLogger)!=null&&i.clientLoggingDisabled==null){var u;(u=e.request)==null||u.e2eLogger.logE2EEvent(l,s,n,i.auxId)}else o("RequestStreamE2ELogger").logRequestStreamE2EEventStatic(i,o("RequestStreamTransport").RequestStreamTransport.WEB_BR_MQTT,l,s,n)}}}var C=(function(){function t(e){this.$1=[],this.$2=0,this.$3=0,this.$4=null,this.$5=0,this.$6=new Map,this.$7=e!=null?e:r("FBMqttChannel"),this.$8=new Map,r("BladeRunnerLogger").setClientSessionId(r("uuidv4")()),this.$9()}t.get=function(){return m==null&&(m=new t(r("FBMqttChannel"))),m};var a=t.prototype;return a.sendNewStreamRequest=function(n,o){var e=new(r("BladeRunnerEventHandler"))(n,o,this),a=n.getRequest();if(this.$6.set(a.streamId,e),!this.$10()){this.$11(e,a.streamId);return}this.getStreamCount()<=t.maxStreamCount?this.$12(a):(r("BladeRunnerLogger").bumpCounter("socket_request_throttled_max_streams"),r("BladeRunnerLogger").warn("Maximum stream count reached, will not send request: "+JSON.stringify(n.getRequest().getHeaders())),this.$11(e,a.streamId))},a.sendRetryStreamRequest=function(t){this.$12(t.getRequest())},a.sendCancel=function(t){r("BladeRunnerLogger").bumpCounter("socket_send_cancel");var e=new(o("BladeRunnerTypesInternal")).GatewayStreamStatusUpdate;e.streamId=t.streamId,e.status=o("BladeRunnerStreamStatus").StreamStatus.CLOSED,this.$13(e,t),this.removeStream(t.streamId)},a.sendAmendment=function(t,n,a){r("BladeRunnerLogger").bumpCounter("socket_send_amendment");var e=new(o("BladeRunnerTypesInternal")).GatewayStreamData;e.streamId=t,e.setData(n),a!=null&&(e.instrumentationData=a),this.$14(e)},a.sendAmendmentWithAck=function(a,i,l){var t=this;r("BladeRunnerLogger").bumpCounter("socket_send_amendment");var s=this.$15(),u=new(o("BladeRunnerTypesInternal")).GatewayStreamData;u.streamId=a,u.setData(i),u.shouldAck=!0,u.dataId=s,l!=null&&(u.instrumentationData=l);var c=new(e||(e=n("Promise")))(function(e,n){t.$8.set(s,{resolve:e,reject:n})});return this.$14(u),c},a.$14=function(t){this.$1.push(o("BladeRunnerTypesInternal").GatewayStreamFrame.newDataFrame(t)),this.$16()},a.sendDataAcks=function(t){r("BladeRunnerLogger").bumpCounter("socket_send_data_ack",t.length),this.$17(t)},a.removeStream=function(t){this.$6.delete(t)},a.getStreamCount=function(){return this.$6.size},a.getNextStreamId=function(){return this.$5++,this.$5},a.onMQTTStateChanged=function(t){this.$16(),!(t!=u&&t!=s||this.$4==t)&&(this.$4=t,r("BladeRunnerLogger").info("MQTTStateChanged: "+t),t==u?(r("BladeRunnerLogger").bumpCounter("mqtt_state_disconnected"),this.$18()):t==s&&r("BladeRunnerLogger").bumpCounter("mqtt_state_connected"))},a.$12=function(t){if(r("BladeRunnerLogger").bumpCounter("socket_send_request"),this.$1.push(o("BladeRunnerTypesInternal").GatewayStreamFrame.newRequestFrame(t)),!this.$16()){var e;(e=t.e2eLogger)==null||e.logE2EEvent(r("RequestStreamE2EClientLoggerMessageType").REQUEST_STREAM,r("RequestStreamE2EClientLoggerEvent").FAILURE,{reason:"MQTT Not Connected"})}},a.$13=function(t,n){if(this.$1.push(o("BladeRunnerTypesInternal").GatewayStreamFrame.newStatusUpdateFrame(t)),this.$16()){var e;(e=n.e2eLogger)==null||e.logE2EEvent(r("RequestStreamE2EClientLoggerMessageType").CANCEL,r("RequestStreamE2EClientLoggerEvent").SENT)}},a.$17=function(t){for(var e of t)this.$1.push(o("BladeRunnerTypesInternal").GatewayStreamFrame.newDataAckFrame(e));this.$16()},a.$19=function(){return this.$2++,this.$2},a.$15=function(){return this.$3++,this.$3},a.$16=function(){var e=!1;if(this.$7.getConnectionState()===s&&this.$1.length>0)try{this.$20(this.$1),e=!0}catch(e){}finally{this.$1=[]}return e},a.$20=function(t){var e=this,n=new(o("BladeRunnerTypesInternal")).GatewayStreamBatch(this.$19(),t),a=n.write();if(a.length>this.$21()){var i=Math.floor(t.length/2);if(i===0){t.forEach(function(e){return y(e,o("MqttPublishListener").MqttPublishEvent.PUBLISH_ERROR,{reason:"too long"})});var l=new Error("Publish is too long: "+a.length);throw l.stack,this.$22(n,l,"Publish is too long"),l}this.$20(t.slice(0,i)),this.$20(t.slice(i,t.length))}else try{r("BladeRunnerLogger").info("send message to "+c+" ("+a.length+" bytes)");var s={qos:1,skipBuffer:!1};if(n.isInstrumented()){var u=Date.now();s.listener={onEvent:function(n){var e=(Date.now()-u).toString();t.forEach(function(t){y(t,n,{latency:e})})}}}this.$7.publish(c,a,s).catch(function(t){e.$22(n,t,"Failed publishing to MQTT")}),r("BladeRunnerLogger").bumpCounter("mqtt_publish_success")}catch(e){var d=r("getErrorSafe")(e);throw this.$22(n,d,"Failed publishing to MQTT"),d}},a.$9=function(){var e=this;r("BladeRunnerLogger").info("Starting socket with endpoint "+this.$7.getEndpoint()+" useragent "+navigator.userAgent),this.onMQTTStateChanged(this.$7.getConnectionState()),this.$7.subscribeChannelEvents({onMQTTStateChanged:function(n){e.onMQTTStateChanged(n)},onJSError:function(t){var e=t!=null&&typeof t.isRecoverable=="boolean"?t.isRecoverable:!1;e?r("BladeRunnerLogger").bumpCounter("mqtt_channel_recoverable_error"):(r("BladeRunnerLogger").warn("JS error in MQTTChannel: "+(typeof t=="object"&&t!=null?t.toString():"unknown error")+", "+JSON.stringify(t)),r("BladeRunnerLogger").bumpCounter("mqtt_channel_error"))}}),this.$7.subscribe(c,function(e){throw new Error("Unexpected response: "+c+" "+e.toString())}),this.$7.subscribe(d,function(t){e.$23(t)})},a.$23=function(t){var e=o("BladeRunnerTypesInternal").GatewayStreamBatch.read(t);this.processBatch(e)},a.$22=function(t,n,a){for(var e of t.getFrames())if(e.type===o("BladeRunnerTypes").StreamFrameType.REQUEST){var i=e.getRequest(),l=this.$6.get(i.streamId);l!=null&&this.$24(l,i.streamId,o("BladeRunnerStreamStatus").StreamStatus.CLOSED,!0,null)}else if(e.type===o("BladeRunnerTypes").StreamFrameType.DATA){var s=e.getData(),u=s.dataId;if(s.shouldAck!=null&&s.shouldAck&&u!=null){var c=new(o("BladeRunnerTypesInternal")).GatewayStreamDataAck;c.streamId=s.streamId,c.dataId=u,c.success=!1,c.code=o("BladeRunnerTypesInternal").GatewayStreamDataAck.ACK_CODE_FAILED_TO_LAND,c.message=a,this.$25(c)}}r("BladeRunnerLogger").info("Failed publishing to MQTT: "+n.message),r("BladeRunnerLogger").bumpCounter("mqtt_publish_error")},a.$25=function(t){var e=this.$8.get(t.dataId);e!=null&&(this.$8.delete(t.dataId),t.success?e.resolve(!0):t.code===o("BladeRunnerTypesInternal").GatewayStreamDataAck.ACK_CODE_LANDED_BUT_NOT_ACCEPTED?e.resolve(!1):e.reject(t.message))},a.processBatch=function(t){try{o("RequestStreamE2ELogger").logRequestStreamE2EEventStatic(t.getInstrumentationData(),o("RequestStreamTransport").RequestStreamTransport.WEB_BR_MQTT,r("RequestStreamE2EClientLoggerMessageType").RESPONSE,r("RequestStreamE2EClientLoggerEvent").RECEIVED,g(t),t.getInstrumentationDataDfTraceId()),r("BladeRunnerLogger").bumpCounter("socket_process_batch");var e=JSON.stringify(t);r("BladeRunnerLogger").info("Received batch ("+e.length+" bytes)");var n=null;for(var a of t.getFrames()){var i=a.getStreamId();if(n==null&&(n=i),i!=null&&n!=i)throw new Error("Received batch with frames for multiple streams");a.type==o("BladeRunnerTypes").StreamFrameType.DATA_ACK&&this.$25(a.getDataAck())}if(n!=null){var l=this.$6.get(n);l!=null?l.onProxyResponse(t):r("BladeRunnerLogger").info("Received batch with frames for unknown stream id: "+n)}else r("BladeRunnerLogger").info("Received batch with no frames")}catch(e){var s=r("getErrorSafe")(e);throw r("BladeRunnerLogger").exception(s,"Failed processing batch from MQTT"),r("BladeRunnerLogger").bumpCounter("socket_process_batch_error"),s}},a.$18=function(){this.$6.forEach(function(e,t,n){e.onDisconnect()})},a.$11=function(t,n){this.$24(t,n,o("BladeRunnerStreamStatus").StreamStatus.REJECTED,!1,0)},a.$24=function(t,n,r,a,i){var e=new(o("BladeRunnerTypesInternal")).GatewayStreamStatusUpdate;e.streamId=n,e.status=r,e.shouldRetry=a,e.retryDelayMs=i;var l=new(o("BladeRunnerTypesInternal")).GatewayStreamBatch(null,[o("BladeRunnerTypesInternal").GatewayStreamFrame.newStatusUpdateFrame(e)]);t.onProxyResponse(l)},a.$10=function(){return r("CurrentUser").isLoggedIn()?!0:(r("BladeRunnerLogger").bumpCounter("request_stream_user_logged_out"),!1)},a.$21=function(){var e=1048576,t=512*1024;try{var n=r("justknobx")._("317");t=n*e}catch(e){}return Math.max(t-1024,0)},t})();C.maxStreamCount=2e3,l.default=C}),98);
__d("BladeRunnerStream",["Promise","asyncToGeneratorRuntime"],(function(t,n,r,o,a,i){var e,l=(function(){function t(e){this.$1=e}var r=t.prototype;return r.getStreamHandler=function(){return this.$1},r.cancel=function(){},r.amendWithAck=(function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){return!1});function t(t){return e.apply(this,arguments)}return t})(),r.amendFireAndForget=function(t){},r.amendWithoutAck=function(t){},r.start=function(){return(e||(e=n("Promise"))).resolve()},r.isAlive=function(){return!1},r.canAmend=function(){return!1},r.getStatus=function(){return null},r.getStreamId=function(){return 0},t})();i.default=l}),66);
__d("BladeRunnerStreamState",["BladeRunnerLogger","BladeRunnerStreamStatus","BladeRunnerTypes"],(function(t,n,r,o,a,i,l){var e=(function(){function e(e){this.$1=e,this.$2=null,this.$3=0,this.$4=!1,this.$5=0,this.$6=!1}var t=e.prototype;return t.getRequest=function(){return this.$1},t.updateRetryRequestPayload=function(t){this.$1.updateRetryRequestPayload(t)},t.isAlive=function(){return!(this.$2==o("BladeRunnerStreamStatus").StreamStatus.CLOSED||this.$2==o("BladeRunnerStreamStatus").StreamStatus.REJECTED)},t.canAmend=function(){return this.$2==o("BladeRunnerStreamStatus").StreamStatus.ACCEPTED||this.$2==o("BladeRunnerStreamStatus").StreamStatus.STARTED||this.$2==o("BladeRunnerStreamStatus").StreamStatus.STOPPED},t.getLastStatus=function(){return this.$2},t.setLastStatus=function(t){this.$2=t},t.onError=function(){this.$3+=1},t.getErrorCount=function(){return this.$3},t.resetErrors=function(){this.$3=0},t.getRetryRequestScheduled=function(){return this.$6},t.setRetryRequestScheduled=function(t){this.$6=t},t.witnessFrame=function(t){switch(t.type){case o("BladeRunnerTypes").StreamFrameType.STATUS_UPDATE:var e=t.getStatusUpdate(),n=!0;switch(e.status){case o("BladeRunnerStreamStatus").StreamStatus.ACCEPTED:n=!this.$4,this.$4||(this.$4=!0);break;case o("BladeRunnerStreamStatus").StreamStatus.STARTED:n=this.getLastStatus()!=o("BladeRunnerStreamStatus").StreamStatus.STARTED;break;case o("BladeRunnerStreamStatus").StreamStatus.STOPPED:n=this.getLastStatus()==o("BladeRunnerStreamStatus").StreamStatus.STARTED;break;case o("BladeRunnerStreamStatus").StreamStatus.CLOSED:case o("BladeRunnerStreamStatus").StreamStatus.REJECTED:default:n=!0}return this.setLastStatus(e.status),n;case o("BladeRunnerTypes").StreamFrameType.REWRITE_REQUEST:return this.$7(t.getRewriteRequest()),!1;default:return!0}},t.setRetriesAllowed=function(t){this.$5=t},t.getRetriesAllowed=function(){return this.$5},t.$7=function(t){if(!(t.temporary!=null||t.temporary==!0)){if(t.newBody!=null&&(this.$1.payload=t.newBody),t.newExtraHeader!=null&&(this.$1.extraHeader=t.newExtraHeader,this.$1.headers=JSON.parse(t.newExtraHeader)),t.patchExtraHeader!=null)try{var e=JSON.parse(t.patchExtraHeader),n=this.$1.extraHeader!=null?JSON.parse(this.$1.extraHeader):{};this.$1.headers==null&&(this.$1.headers={});for(var o of Object.keys(e))this.$1.headers[o]=e[o],n[o]=e[o];this.$1.extraHeader=JSON.stringify(n)}catch(e){r("BladeRunnerLogger").warn("Failed to patch header: "+t.patchExtraHeader)}t.killBody!=null&&t.killBody==!0&&(this.$1.payload=null)}},e})();l.default=e}),98);
__d("BladeRunnerSocketStream",["BladeRunnerStream","BladeRunnerStreamState","BladeRunnerStreamStatus","Promise","RequestStreamE2EClientLoggerEvent","RequestStreamE2EClientLoggerMessageType","asyncToGeneratorRuntime","uuidv4"],(function(t,n,r,o,a,i,l){var e,s=4,u={reason:"stream_dead"},c=(function(t){function a(e,n,o){var a;return a=t.call(this,e)||this,a.$BladeRunnerSocketStream$p_1=o,a.$BladeRunnerSocketStream$p_2=new(r("BladeRunnerStreamState"))(n),a.$BladeRunnerSocketStream$p_2.setRetriesAllowed(s),a}babelHelpers.inheritsLoose(a,t);var i=a.prototype;return i.start=function(){var t=this;return new(e||(e=n("Promise")))(function(e){t.send(),e()})},i.send=function(){var e,t,n=this.$BladeRunnerSocketStream$p_2.getRequest();(e=n.e2eLogger)==null||e.logE2EEvent(r("RequestStreamE2EClientLoggerMessageType").REQUEST_STREAM,r("RequestStreamE2EClientLoggerEvent").RECEIVED,{data_base64_size:(t=n.payload)==null||(t=t.length)==null?void 0:t.toString()}),this.$BladeRunnerSocketStream$p_1.sendNewStreamRequest(this.$BladeRunnerSocketStream$p_2,this.getStreamHandler())},i.amendWithAck=(function(){var t=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t){var o,a=this.$BladeRunnerSocketStream$p_2.getRequest(),i=a.getInstrumentationData();if(i){var l,s;i.auxId=r("uuidv4")(),(l=a.e2eLogger)==null||l.logE2EEvent(r("RequestStreamE2EClientLoggerMessageType").AMENDMENT,r("RequestStreamE2EClientLoggerEvent").RECEIVED,{data_size:t==null||(s=t.length)==null?void 0:s.toString()},i.auxId)}if(this.canAmend()){if(i){var c,d;(c=a.e2eLogger)==null||c.logE2EEvent(r("RequestStreamE2EClientLoggerMessageType").AMENDMENT,r("RequestStreamE2EClientLoggerEvent").SENT,{data_size:t==null||(d=t.length)==null?void 0:d.toString()},i.auxId)}return this.$BladeRunnerSocketStream$p_1.sendAmendmentWithAck(a.streamId,this.$BladeRunnerSocketStream$p_3(t),i==null?null:JSON.stringify(i))}return(o=a.e2eLogger)==null||o.logE2EEvent(r("RequestStreamE2EClientLoggerMessageType").AMENDMENT,r("RequestStreamE2EClientLoggerEvent").FAILURE,u,i==null?void 0:i.auxId),(e||(e=n("Promise"))).reject("Stream is closed or not accepted")});function o(e){return t.apply(this,arguments)}return o})(),i.amendFireAndForget=function(t){var e=this.$BladeRunnerSocketStream$p_2.getRequest(),n=e.getInstrumentationData();if(n){var o,a;n.auxId=r("uuidv4")(),(o=e.e2eLogger)==null||o.logE2EEvent(r("RequestStreamE2EClientLoggerMessageType").AMENDMENT,r("RequestStreamE2EClientLoggerEvent").RECEIVED,{data_size:t==null||(a=t.length)==null?void 0:a.toString()},n.auxId)}if(this.canAmend()){if(this.$BladeRunnerSocketStream$p_1.sendAmendment(this.$BladeRunnerSocketStream$p_2.getRequest().streamId,this.$BladeRunnerSocketStream$p_3(t),n==null?null:JSON.stringify(n)),n){var i,l;(i=e.e2eLogger)==null||i.logE2EEvent(r("RequestStreamE2EClientLoggerMessageType").AMENDMENT,r("RequestStreamE2EClientLoggerEvent").SENT,{data_size:t==null||(l=t.length)==null?void 0:l.toString()},n.auxId)}}else{var s;throw(s=e.e2eLogger)==null||s.logE2EEvent(r("RequestStreamE2EClientLoggerMessageType").AMENDMENT,r("RequestStreamE2EClientLoggerEvent").FAILURE,u,n==null?void 0:n.auxId),new Error("Stream is closed or not accepted")}},i.amendWithoutAck=function(t){this.amendFireAndForget(t)},i.$BladeRunnerSocketStream$p_3=function(t){return typeof t=="object"?btoa(new TextDecoder("utf8").decode(t)):t},i.cancel=function(){var e,t=this.$BladeRunnerSocketStream$p_2.getRequest();(e=t.e2eLogger)==null||e.logE2EEvent(r("RequestStreamE2EClientLoggerMessageType").CANCEL,r("RequestStreamE2EClientLoggerEvent").RECEIVED),this.isAlive()&&(this.$BladeRunnerSocketStream$p_1.sendCancel(this.$BladeRunnerSocketStream$p_2.getRequest()),this.$BladeRunnerSocketStream$p_2.setLastStatus(o("BladeRunnerStreamStatus").StreamStatus.CLOSED),this.getStreamHandler().onClientCancel())},i.isAlive=function(){return this.$BladeRunnerSocketStream$p_2.isAlive()},i.canAmend=function(){return this.$BladeRunnerSocketStream$p_2.canAmend()},i.getStatus=function(){return this.$BladeRunnerSocketStream$p_2.getLastStatus()},i.getStreamId=function(){return this.$BladeRunnerSocketStream$p_2.getRequest().streamId},a})(r("BladeRunnerStream"));l.default=c}),98);
__d("RequestStreamE2ESampling",["invariant","Random","RequestStreamE2EClientSamplingConfig","uuidv4"],(function(t,n,r,o,a,i,l,s){"use strict";function e(e){return e==null?!1:e.requestId!=null&&typeof e.requestId=="string"&&e.forceLogContext!=null&&typeof e.forceLogContext=="string"}function u(e,t){var n=r("RequestStreamE2EClientSamplingConfig").sampleRate;if(n>1&&e!=null){var o=r("RequestStreamE2EClientSamplingConfig").methodToSamplingMultiplier[e];o==0?n=0:o!=null&&(n/=o)}return n==1?1:n/t}function c(e,t,n,o){var a=r("uuidv4")();(t.requestId==null||t.requestId===""||typeof t.requestId!="string")&&(e.requestId!=null&&typeof e.requestId=="string"?t.requestId=e.requestId:t.requestId=a),t.requestId+="/_"+a.substring(0,4),t.resumeId="0",n!=null?t.sampleRate=n:t.sampleRate=void 0;var i="";o!=null&&o.length>0&&(i=o),i.length>0&&(t.requestLogContext!=null&&t.requestLogContext.length>0?t.requestLogContext+=":":t.requestLogContext="",t.requestLogContext+=i),(e==null?void 0:e.method)==="Falco"&&(t.clientLoggingDisabled="Falco");var l={};for(var s of Object.keys(t).sort())l[s]=t[s];return JSON.stringify(l)}function d(t,n,o,a){n&&(!n.requestId.includes("/")&&!n.requestId.includes("#")||s(0,41721));var i=u(t.method,a!=null?a:1);return r("Random").coinflip(i)?c(t,n||{requestId:""},i,o):e(n)?c(t,n||{requestId:""},null,o):""}l.isForceLogged=e,l.getSampleRateForLogging=u,l.normalizeInstrumentationData=c,l.validateInstrumentationData=d}),98);
__d("BladeRunnerClient",["Base64","BladeRunnerConfig","BladeRunnerLogger","BladeRunnerSocket","BladeRunnerSocketStream","BladeRunnerTypes","BladeRunnerTypesInternal","RequestStreamE2ELogger","RequestStreamE2ESampling","RequestStreamTransport","cr:2046346"],(function(t,n,r,o,a,i,l){var e=(function(){function e(e,t){this.$2=o("RequestStreamTransport").RequestStreamTransport.WEB_BR_MQTT,this.$1=e!=null?e:r("BladeRunnerSocket").get(),t&&(this.$2=t)}var t=e.prototype;return t.createStream=function(t,n,r,o){return this.$3(t,n,r,o)},t.requestStream=function(t,r,o,a){var e=this.$3(t,r,o,a);return e.send(),n("cr:2046346")!=null&&n("cr:2046346").startPulsarTest(),e},t.logInfo=function(t){r("BladeRunnerLogger").info(t)},t.bumpCounter=function(t){r("BladeRunnerLogger").bumpCounter(t)},t.$3=function(t,n,a,i){var e=new(o("BladeRunnerTypesInternal")).GatewayStreamRequest;return e.streamId=this.$1.getNextStreamId(),e.requestType=o("BladeRunnerTypes").StreamRequestType.BLADE_RUNNER,e.headers=r("BladeRunnerConfig").patchRequestHeaders(t),e.extraHeader=JSON.stringify(e.headers),e.payload=n!=null?r("Base64").encode(n):null,i!=null&&(i.transport="WEB_RS_MQTT"),e.instrumentationData=o("RequestStreamE2ESampling").validateInstrumentationData(e.headers||{},i),e.e2eLogger=o("RequestStreamE2ELogger").createStreamLogger(e.headers,e.instrumentationData,this.$2),new(r("BladeRunnerSocketStream"))(a,e,this.$1)},e})();l.default=e}),98);
__d("CometAltpayJsSdkIframeAllowedDomains.experimental",["cr:27561"],(function(t,n,r,o,a,i,l){"use strict";l.default=n("cr:27561")}),98);
__d("isCometAltpayJsSdkIframeAllowedDomain",["CometAltpayJsSdkIframeAllowedDomains.experimental","URI"],(function(t,n,r,o,a,i,l){"use strict";var e,s=Object.freeze(r("CometAltpayJsSdkIframeAllowedDomains.experimental")),u=Object.freeze(s.allowed_domains);function c(){var t=new(e||(e=r("URI")))(window.location.href);if(u==null||u.length<=0)return!1;var n=u.some(function(n){var o=new(e||(e=r("URI")))(n);return o==null?!1:t.isSameOrigin(o)});return!!n}l.default=c}),98);
__d("BlueCompatBroker",["Env","URI","isCometAltpayJsSdkIframeAllowedDomain","isFacebookURI","isMessengerDotComURI","isWorkDotMetaDotComURI","isWorkplaceDotComURI"],(function(t,n,r,o,a,i){"use strict";var e,l,s,u=new Map,c=!1,d=function(r){var t=new(e||(e=n("URI")))(r);return n("isFacebookURI")(t)||n("isWorkplaceDotComURI")(t)||n("isMessengerDotComURI")(t)||n("isWorkDotMetaDotComURI")(t)},m={dispatch:function(t){var e=m.getMessageEventString(t,"compatAction");if(e!=null){var n=u.get(e);n&&n(t)}},getMessageEventString:function(t,n){var e=t.data;if(typeof e=="object"){var r=e==null?void 0:e[n];if(typeof r=="string")return r}return""},init:function(t){if(t===void 0&&(t=""),!c){document.body&&(document.body.style.overflow="auto");var e=n("isCometAltpayJsSdkIframeAllowedDomain")()?"https://secure.facebook.com/":document.referrer,r=e.indexOf("/",8),o=e.substring(0,r);if(d(o)){var a=new MessageChannel,i=t!==""?t:(l||(l=n("Env"))).iframeKey;s=a.port1,s.onmessage=m.dispatch,window.parent.postMessage({compatAction:"CompatSetup",iframeKey:i},o+"/",[a.port2])}try{window.__REACT_DEVTOOLS_GLOBAL_HOOK__=window.parent.__REACT_DEVTOOLS_GLOBAL_HOOK__}catch(e){}c=!0}},register:function(t,n){u.set(t,n)},clear:function(t){u.delete(t)},sendMessage:function(t){c||m.init(),s&&s.postMessage(babelHelpers.extends({},t))}};a.exports=m}),null);
__d("MessengerEnvironment",["CurrentEnvironment"],(function(t,n,r,o,a,i,l){"use strict";var e=babelHelpers.extends({},r("CurrentEnvironment"),{messengerui:!1,roomschatui:!1,setMessengerUI:function(n){e.messengerui=n},setRoomsChatUI:function(n){e.roomschatui=n}}),s=e;l.default=s}),98);
__d("BlueCompatRouter",["BlueCompatBroker","Env","MessengerEnvironment","URI","areEqual","gkx","isCdnURI"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c=function(n,r){var e,o=t.__fbNativeClearTimeout||window.clearTimeout,a=t.__fbNativeSetTimeout||window.setTimeout;return function(){var t=this,i=arguments,l=function(){e=null,n.apply(t,i)};o(e),e=a(l,r)}},d={convertUri:function(n){if(n==null||n==="")return new(e||(e=r("URI")));var t=new(e||(e=r("URI")))(n);return t.getDomain().endsWith("messenger.com")?t.setDomain(t.getDomain().replace(/messenger\.com/i,"facebook.com")).setPath("/messages"+t.getPath()):t},goFragment:function(n){if((s||(s=r("Env"))).isCQuick){var t=d.convertUri(n);if(t.getFragment()){var o=(e||(e=r("URI"))).getRequestURI(!1,!1);if((u||(u=r("areEqual")))(new(e||(e=r("URI")))(o).setFragment("").getQualifiedURI(),new(e||(e=r("URI")))(t).setFragment("").getQualifiedURI()))return!0}}return!1},go:function(n,o){if((s||(s=r("Env"))).isCQuick){var t=new(e||(e=r("URI")))(n),a=d.convertUri(n),i=a.getQualifiedURI();if(r("isCdnURI")(a)||i.getPath().startsWith("/compat"))return!1;var l=(function(){if(r("MessengerEnvironment").messengerui&&i.getPath().startsWith("/messages"))return[!1,"/messages"];if(t.getPath().startsWith("/settings")&&i.getPath().startsWith("/settings")&&(r("gkx")("20836")||i.getSubdomain()!==t.getSubdomain())){var e=i.getQueryData().tab;return e!=null?[!1,"/settings/"+e]:[!1,"/settings"]}return t.getPath().startsWith("/games")&&i.getPath().startsWith("/games")?[!1,"/games/web"]:t.getPath().startsWith("/notes")&&i.getPath().startsWith("/notes")?[!1,"/notes"]:t.getPath().startsWith("/latest/posts")&&i.getPath().startsWith("/latest/posts")?[!1,"/business"]:/\/[A-Za-z\-0-9]+\/settings/.test(t.getPath())?[!1,"/pages/settings"]:/\/[A-Za-z\-0-9]+\/insights/.test(t.getPath())?[!1,"/insights"]:[!0,""]})(),u=l[0],c=l[1];return m({compatAction:"route",maintainKey:c,replace:o,uri:String(i)}),u}return!1},startChat:function(t,n){return d.sendMessage({compatAction:"startchat",tabId:t,isPage:n})},chatListener:function(t,n,r){t.addEventListener("click",function(e){e.preventDefault(),d.startChat(n,r)})},sendMessage:function(t){return(s||(s=r("Env"))).isCQuick?(r("BlueCompatBroker").init(),r("BlueCompatBroker").sendMessage(t),!0):!1}},m=c(d.sendMessage,250),p=d;l.default=p}),98);
__d("DeferredComponent.react",["createCancelableFunction","react"],(function(t,n,r,o,a,i){var e=["deferredPlaceholder","deferredComponent","onComponentLoad","deferredForcePlaceholder"],l,s=l||(l=n("react")),u=(function(t){"use strict";function r(e,n){var r;r=t.call(this,e,n)||this,r.cancelableModulesLoaded=function(){},r.$1=function(e){r.setState({ComponentClass:e},function(){r.props.onComponentLoad&&r.props.onComponentLoad(e)})};var o=null;function a(e){o=e}return r.props.deferredComponent(a),r.state={ComponentClass:o},r}babelHelpers.inheritsLoose(r,t);var o=r.prototype;return o.componentDidMount=function(){this.cancelableModulesLoaded=n("createCancelableFunction")(this.$1),this.props.deferredComponent(this.cancelableModulesLoaded)},o.componentWillUnmount=function(){this.cancelableModulesLoaded.cancel()},o.render=function(){var t=this.state.ComponentClass;if(!t||this.props.deferredForcePlaceholder)return this.props.deferredPlaceholder;var n=this.props,r=n.deferredPlaceholder,o=n.deferredComponent,a=n.onComponentLoad,i=n.deferredForcePlaceholder,l=babelHelpers.objectWithoutPropertiesLoose(n,e);return s.jsx(t,babelHelpers.extends({},l))},r})(s.Component);a.exports=u}),null);
__d("PerfUtils",["cr:7792","performanceNow","react"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=s||(s=o("react")),c=u.Component;function d(e,t,n){var r=(function(r){function o(){return r.apply(this,arguments)||this}babelHelpers.inheritsLoose(o,r);var a=o.prototype;return a.componentDidMount=function(){t()},a.render=function(){return n?u.jsx(e,babelHelpers.extends({},this.props,{ref:n})):u.jsx(e,babelHelpers.extends({},this.props))},o})(c);return r}function m(t,o,a){var i=1e4,l=(e||(e=r("performanceNow")))()-a;if(l<i)return t;var s=i/1e3,d=Math.round(l)/1e3,m=(function(e){function r(){return e.apply(this,arguments)||this}babelHelpers.inheritsLoose(r,e);var a=r.prototype;return a.componentDidMount=function(){""+o+s+d},a.render=function(){return u.jsx(n("cr:7792").SlowBootloadBorder,{moduleId:o,timeLimitSecs:s,timeSpentSecs:d,children:u.jsx(t,babelHelpers.extends({},this.props))})},r})(c);return m}l.appendListener=d,l.markRedInDev=m}),98);
__d("BootloadedComponent.react",["DeferredComponent.react","JSResource","PerfUtils","TimeSlice","cr:2448","performanceNow","react"],(function(t,n,r,o,a,i,l){var e=["bootloadLoader"],s=["bootloadLoader","isContinuation","bootloadPlaceholder","bootloadForcePlaceholder"],u,c,d=c||(c=o("react")),m=d.Component,p=(function(t){function n(){return t.apply(this,arguments)||this}return babelHelpers.inheritsLoose(n,t),n.create=function(n){var t=(function(t){function r(){return t.apply(this,arguments)||this}babelHelpers.inheritsLoose(r,t);var o=r.prototype;return o.render=function(){var t=this.props,r=t.bootloadLoader,o=babelHelpers.objectWithoutPropertiesLoose(t,e);return d.jsx(g,babelHelpers.extends({bootloadLoader:n,bootloadPlaceholder:d.jsx("div",{})},o))},r})(d.Component);return t.displayName="BootloadedComponent("+n.getModuleId()+")",t},n})(m);function _(e){var t=e.children,r=e.resource;return n("cr:2448")(r),t}var f=(function(e){function t(t){var n;return n=e.call(this,t)||this,n.$BootloadedComponent$p_1=function(e){var t=n.props.bootloadLoader.getModuleIfRequireable();if(t!=null){e(t);return}var a=n.props.isContinuation,i,l=a?r("TimeSlice").PropagationType.CONTINUATION:r("TimeSlice").PropagationType.EXECUTION;r("TimeSlice").guard(r("JSResource").loadAll,"BootloadedComponent load all JSResource",{propagationType:l})([n.props.bootloadLoader],function(t){t=n.props.onComponentDidMount?o("PerfUtils").appendListener(t,n.props.onComponentDidMount):t,e(t)})},t.onBootloaderWillMount&&t.onBootloaderWillMount(),n}babelHelpers.inheritsLoose(t,e);var n=t.prototype;return n.render=function(){var e=this.props,t=e.bootloadLoader,n=e.isContinuation,o=e.bootloadPlaceholder,a=e.bootloadForcePlaceholder,i=babelHelpers.objectWithoutPropertiesLoose(e,s),l=d.jsx(r("DeferredComponent.react"),babelHelpers.extends({deferredPlaceholder:o,deferredComponent:this.$BootloadedComponent$p_1,deferredForcePlaceholder:a},i));return d.jsx(_,{resource:t,children:l})},t})(p);f.defaultProps={isContinuation:!0};var g=f,h=g;l.default=h}),98);
__d("CometSSRClientRender",[],(function(t,n,r,o,a,i){"use strict";var e="CometSSRClientRenderError";function l(t){throw e+": "+t}i.CometSSRClientRenderErrorSentinel=e,i.CometSSRClientRender=l}),66);
__d("suspendOrThrowIfUsedInSSR",["CometSSRClientRender","ExecutionEnvironment"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(t){if(!(e||(e=r("ExecutionEnvironment"))).isInBrowser)throw o("CometSSRClientRender").CometSSRClientRender(t)}l.default=s}),98);
__d("BootloaderResource",["ExecutionEnvironment","suspendOrThrowIfUsedInSSR"],(function(t,n,r,o,a,i,l){var e,s,u={};function c(e){e.load()}function d(t){var n=t.getModuleIfRequireable();if(n==null){!(e||(e=r("ExecutionEnvironment"))).isInBrowser&&!t.isAvailableInSSR_DO_NOT_USE()&&(s||(s=r("suspendOrThrowIfUsedInSSR")))("Loading of bootloaded and T3 components is disabled during SSR");var o=t.getModuleId();if(!u[o]){var a=u[o]=t.load();a.finally(function(){delete u[o]})}throw u[o]}return n}l.preload=c,l.read=d}),98);
__d("Button",["csx","cx","invariant","CSS","DOM","DataStore","Event","Parent","emptyFunction","isNode"],(function(t,n,r,o,a,i,l,s,u,c){var e="uiButtonDisabled",d="uiButtonDepressed",m="_42fr",p="_42fs",_="button:blocker",f="href",g="ajaxify";function h(e,t){var n=o("DataStore").get(e,_);t?n&&(n.remove(),o("DataStore").remove(e,_)):n||o("DataStore").set(e,_,r("Event").listen(e,"click",r("emptyFunction").thatReturnsFalse,r("Event").Priority.URGENT))}function y(e){var t=o("Parent").byClass(e,"uiButton")||o("Parent").bySelector(e,"._42ft");if(!t)throw new Error("invalid use case");return t}function C(e){return r("DOM").isNodeOfType(e,"a")}function b(e){return r("DOM").isNodeOfType(e,"button")}function v(e){return o("CSS").matchesSelector(e,"._42ft")}var S={getInputElement:function(t){if(t=y(t),C(t))throw new Error("invalid use case");return b(t)?(t instanceof HTMLButtonElement||c(0,21261),t):r("DOM").find(t,"input")},isEnabled:function(n){return!(o("CSS").hasClass(y(n),e)||o("CSS").hasClass(y(n),m))},setEnabled:function(n,r){n=y(n);var t=v(n)?m:e;if(o("CSS").conditionClass(n,t,!r),C(n)){var a=n.getAttribute("href"),i=n.getAttribute("ajaxify"),l=o("DataStore").get(n,f,"#"),s=o("DataStore").get(n,g);r?(a||n.setAttribute("href",l),!i&&s&&n.setAttribute("ajaxify",s),n.removeAttribute("tabIndex")):(a&&a!==l&&o("DataStore").set(n,f,a),i&&i!==s&&o("DataStore").set(n,g,i),n.removeAttribute("href"),n.removeAttribute("ajaxify"),n.setAttribute("tabIndex","-1")),h(n,r)}else{var u=S.getInputElement(n);u.disabled=!r,h(u,r)}},setDepressed:function(t,n){t=y(t);var e=v(t)?p:d;o("CSS").conditionClass(t,e,n)},isDepressed:function(t){t=y(t);var e=v(t)?p:d;return o("CSS").hasClass(t,e)},setLabel:function(t,n){if(t=y(t),v(t)){var e=[];n&&e.push(n);for(var a=r("DOM").scry(t,".img"),i=0;i<a.length;i++){var l=a[i],s=l.parentNode;s.classList&&(s.classList.contains("_4o_3")||s.classList.contains("_-xe"))?t.firstChild===s?e.unshift(s):e.push(s):t.firstChild==l?e.unshift(l):e.push(l)}r("DOM").setContent(t,e)}else if(C(t)){var u=r("DOM").find(t,"span.uiButtonText");r("DOM").setContent(u,n)}else S.getInputElement(t).value=n;var c=v(t)?"_42fv":"uiButtonNoText";o("CSS").conditionClass(t,c,!n)},getIcon:function(t){return t=y(t),r("DOM").scry(t,".img")[0]},setIcon:function(t,n){if(!(n&&!r("isNode")(n))){var e=S.getIcon(t);if(!n){e&&r("DOM").remove(e);return}o("CSS").addClass(n,"customimg"),e!=n&&(e?r("DOM").replace(e,n):r("DOM").prependContent(y(t),n))}}},R=S;l.default=R}),98);
__d("CSSFade",["cx","invariant","Style","cr:5662","cr:6108","cr:6669","requestAnimationFrameAcrossTransitions"],(function(t,n,r,o,a,i,l,s){"use strict";var e="css-fade-animation",u="css-show-animation",c="_4rh4",d="CSSFade_hide",m="CSSFade_show",p=document.createElement("div").animate!==void 0,_={cancel:function(){}};function f(e,t){e!=null||s(0,5875);var r=n("cr:6669").get(e,t);return r&&r.cancel(),r}function g(e,t,n){var r,o=(e==null||(r=e.style)==null?void 0:r.animation)||"",a=t+"s "+n;return o.length>5&&(a=o.slice(0,-1)+(", "+a)),a}function h(e,t){var n,r=(e==null||(n=e.style)==null?void 0:n.animation)||"",o=r.split(","),a=o.findIndex(function(e){return e.indexOf(t)>-1});return a!==-1&&o.splice(a,1),o.join(",")}var y={show:function(r,o){o===void 0&&(o={});var t=o.duration!=null?o.duration/1e3:.3;f(r,e),f(r,u),n("cr:6108").removeClass(r,o.invisible?"invisible_elem":"hidden_elem"),n("requestAnimationFrameAcrossTransitions")(function(){r.style.animation=g(r,t,m)});var a=n("cr:5662").listen(r,"animationend",function(){o.callback&&o.callback(),r.style.animation=h(r,m)}),i={cancel:function(){r.style.animation=h(r,m),a.remove(),i.cancel=function(){}}};return n("cr:6669").set(r,u,i),i},hide:function(r,o){o===void 0&&(o={});var t=function(){n("cr:6108").addClass(r,o.invisible?"invisible_elem":"hidden_elem"),o.callback&&o.callback(),r.style.animation=h(r,d)};if(o.simple)return t(),_;var a=o.duration!=null?o.duration/1e3:.3;f(r,u),f(r,e),n("requestAnimationFrameAcrossTransitions")(function(){r.style.animation=g(r,a,d)});var i=n("cr:5662").listen(r,"animationend",t),l={cancel:function(){r.style.animation=h(r,d),i.remove(),l.cancel=function(){}}};return n("cr:6669").set(r,e,l),l}},C={show:function(r,o){o===void 0&&(o={});var t=o.duration!=null?o.duration:300;f(r,e),f(r,u),n("cr:6108").removeClass(r,o.invisible?"invisible_elem":"hidden_elem"),n("Style").set(r,"opacity","1");var a=o.peekStateFade?"0.6":"0",i=r.animate([{opacity:a},{opacity:"1.0"}],{duration:t});return o.callback&&(i.onfinish=o.callback),n("cr:6669").set(r,u,i),i},hide:function(r,o){o===void 0&&(o={});var t=o.duration!=null?o.duration:300;if(f(r,u),o.simple===!0)return n("cr:6108").addClass(r,o.invisible?"invisible_elem":"hidden_elem"),_;f(r,e),n("Style").set(r,"opacity","0");var a=o.peekStateFade?"0.4":"0",i=r.animate([{opacity:"1.0"},{opacity:a}],{duration:t});return i.onfinish=function(){n("cr:6108").addClass(r,o.invisible?"invisible_elem":"hidden_elem"),o.callback&&o.callback()},n("cr:6669").set(r,e,i),i}};a.exports=p?C:y}),null);
__d("ChannelConstants",[],(function(t,n,r,o,a,i){var e="channel/",l={CHANNEL_MANUAL_RECONNECT_DEFER_MSEC:2e3,MUTE_WARNING_TIME_MSEC:25e3,WARNING_COUNTDOWN_THRESHOLD_MSEC:15e3,ON_SHUTDOWN:e+"shutdown",ON_INVALID_HISTORY:e+"invalid_history",ON_CONFIG:e+"config",ON_ENTER_STATE:e+"enter_state",ON_EXIT_STATE:e+"exit_state",ATTEMPT_RECONNECT:e+"attempt_reconnect",RTI_SESSION:e+"new_rti_address",CONSOLE_LOG:e+"message:console_log",GET_RTI_SESSION_REQUEST:e+"rti_session_request",SKYWALKER:e+"skywalker",CHANNEL_ESTABLISHED:e+"established",OK:"ok",ERROR:"error",ERROR_MAX:"error_max",ERROR_MISSING:"error_missing",ERROR_MSG_TYPE:"error_msg_type",ERROR_SHUTDOWN:"error_shutdown",ERROR_STALE:"error_stale",SYS_OWNER:"sys_owner",SYS_NONOWNER:"sys_nonowner",SYS_ONLINE:"sys_online",SYS_OFFLINE:"sys_offline",SYS_TIMETRAVEL:"sys_timetravel",HINT_AUTH:"shutdown auth",HINT_CONN:"shutdown conn",HINT_DISABLED:"shutdown disabled",HINT_INVALID_STATE:"shutdown invalid state",HINT_MAINT:"shutdown maint",HINT_UNSUPPORTED:"shutdown unsupported",reason_Unknown:0,reason_AsyncError:1,reason_TooLong:2,reason_Refresh:3,reason_RefreshDelay:4,reason_UIRestart:5,reason_NeedSeq:6,reason_PrevFailed:7,reason_IFrameLoadGiveUp:8,reason_IFrameLoadRetry:9,reason_IFrameLoadRetryWorked:10,reason_PageTransitionRetry:11,reason_IFrameLoadMaxSubdomain:12,reason_NoChannelInfo:13,reason_NoChannelHost:14,CAPABILITY_VOIP_INTEROP:8,CAPABILITY_ACTIVE_ON_DESKTOP_APP:16384,CAPABILITY_PLAYING_INSTANT_GAME:2097152,SUBSCRIBE:"subscribe",UNSUBSCRIBE:"unsubscribe",FAKE_DFF:"fake_dff",THROTTLED:e+"throttled",JUMPSTART:e+"jumpstart",ENTITY_PRESENCE_ACTIVE_PING:"entity_presence/active_ping",ENTITY_PRESENCE_SKIPPED_PING:"entity_presence/skipped_ping",SUBSCRIPTION_STATE:{SUBSCRIBE:"s",MUTATE_CONTEXT:"m",UNSUBSCRIBE:"u"},DEFAULT_MAX_SUBSCRIPTIONS:300,DEFAULT_EVICTION_BATCH_SIZE:20,DEFAULT_MAX_SUBSCRIPTION_FLUSH_BATCH_SIZE:300,DEFAULT_MAX_CONSECUTIVE_FLUSH_FAILURES:3,getArbiterType:function(n){return e+"message:"+n},getRTISkywalkerArbiterType:function(n,r){return e+"skywalker:"+n+":"+r}};a.exports=l}),null);
__d("PresenceUtil",["CurrentUser","randomInt"],(function(t,n,r,o,a,i,l){var e=r("randomInt")(0,4294967295)+1;function s(){return e}function u(){return r("CurrentUser").isLoggedInNow()}l.getSessionID=s,l.hasUserCookie=u}),98);
__d("PresencePrivacy",["Arbiter","ArbiterMixin","AsyncRequest","Bootloader","ChannelConstants","CurrentUser","PresencePrivacyInitialData","PresenceUtil","mixin"],(function(t,n,r,o,a,i,l){var e,s="/ajax/chat/privacy/settings.php",u="/ajax/chat/privacy/online_policy.php",c="/ajax/chat/privacy/visibility.php",d="friend_visibility",m="visibility",p="online_policy",_=babelHelpers.extends({},(e=o("PresencePrivacyInitialData")).privacyData),f=e.visibility,g=babelHelpers.extends({},e.privacyData),h=f,y=e.onlinePolicy,C=y,b=[],v=!1,S=(function(e){function t(){for(var t,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return t=e.call.apply(e,[this].concat(r))||this,t.WHITELISTED=1,t.BLACKLISTED=-1,t.UNLISTED=0,t.ONLINE=1,t.OFFLINE=0,t.ONLINE_TO_WHITELIST=0,t.ONLINE_TO_BLACKLIST=1,babelHelpers.assertThisInitialized(t)||babelHelpers.assertThisInitialized(t)}babelHelpers.inheritsLoose(t,e);var n=t.prototype;return n.init=function(t,n,r){},n.setVisibility=function(t){h=f,I(t);var e={visibility:t},n={type:m,visibility:t},r=w(c,e,n);return x(r,n),t},n.getVisibility=function(){return f},n.setOnlinePolicy=function(t){C=y,T(t);var e={online_policy:t},n={type:p,online_policy:t},r=w(u,e,n);return x(r,n),t},n.getOnlinePolicy=function(){return y},n.getFriendVisibility=function(t){return _[t]||R.UNLISTED},n.getFriendsVisibility=function(){return _},n.isUserOffline=function(){return this.getVisibility()===R.OFFLINE},n.allows=function(t){return this.isUserOffline()?!1:this.allowsIfViewerIsOnline(t)},n.allowsIfViewerIsOnline=function(t){var e=this.getOnlinePolicy();return e===R.ONLINE_TO_WHITELIST?_[t]==R.WHITELISTED:_[t]!=R.BLACKLISTED},n.getOnlinePolicyStr=function(){if(this.isUserOffline())return"offline";var e=this.getOnlinePolicy();return e===R.ONLINE_TO_WHITELIST?"online_to_whitelist":e===R.ONLINE_TO_BLACKLIST?"online_to_blacklist":"unknown"},n.setFriendsVisibility=function(t,n){if(t.length>0){for(var e={},r=0;r<t.length;r++){var o=t[r];g[o]=_[o],e[o]=n}L(e);var a=n;a==R.UNLISTED&&(a=g[t[0]]);var i={users:t,setting:n,setting_type:a},l={type:d,settings:e},u=w(s,i,l);x(u,l)}return n},n.setFriendVisibilityMap=function(t,n){for(var e in t)g[e]=_[e];L(t);var r={type:d,settings:t};x(M(n,r),r)},n.allow=function(t){if(this.allows(t))throw new Error("allow() should only be called for users that are not already allowed");if(this.getVisibility()===R.OFFLINE)throw new Error("allow() should only be called when the user is already online");var e=this.getOnlinePolicy()===R.ONLINE_TO_WHITELIST?R.WHITELISTED:R.UNLISTED;return this.setFriendsVisibility([t],e)},n.disallow=function(t){if(!this.allows(t))throw new Error("disallow() should only be called for users that are not already disallowed");if(this.getVisibility()===R.OFFLINE)throw new Error("disallow() should only be called when the user is already online");var e=this.getOnlinePolicy()===R.ONLINE_TO_BLACKLIST?R.BLACKLISTED:R.UNLISTED;return this.setFriendsVisibility([t],e)},n.getBlacklist=function(){var e=[];for(var t in _)_[t]===R.BLACKLISTED&&e.push(t);return e},n.getWhitelist=function(){var e=[];for(var t in _)_[t]===R.WHITELISTED&&e.push(t);return e},n.getMapForTest=function(){return _},n.setMapForTest=function(t){_=t},t})(r("mixin")(r("ArbiterMixin"))),R=new S;function L(e){var t;for(t in e){var n=e[t];if(t==r("CurrentUser").getID())throw new Error("Invalid to set current user's visibility");switch(n){case R.WHITELISTED:case R.BLACKLISTED:case R.UNLISTED:break;default:throw new Error("Invalid state: "+n)}}for(t in e)_[t]=e[t];R.inform("privacy-changed")}function E(e,t){var n={};n[e]=t,L(n)}function k(e){r("Bootloader").loadModules(["MessengerMQTTPresenceReporting"],function(t){t.reportChatVisibility(!!e)},"PresencePrivacy")}function I(e){switch(e){case R.ONLINE:case R.OFFLINE:break;default:throw new Error("Invalid visibility: "+e)}f=e,k(e),R.inform("privacy-changed"),R.inform("privacy-user-presence-changed")}function T(e){switch(e){case R.ONLINE_TO_WHITELIST:case R.ONLINE_TO_BLACKLIST:break;default:throw new Error("Invalid default online policy: "+e)}y=e,R.inform("privacy-user-presence-changed"),R.inform("privacy-changed")}function D(e,t){v=!0,e.send()}function x(e,t){if(b.push({request:e,data:t}),!v){var n=b.shift();D(n.request,n.data)}}function $(e,t){var n=e.type;if(n===d){R.inform("privacy-availability-changed");for(var r in e.settings)g[r]=e.settings[r]}else n===m?h=e.visibility:n===p&&(C=e.online_policy),R.inform("privacy-user-presence-response")}function P(e,t){f!==h&&I(h),y!==C&&T(C),Object.assign(_,g),R.inform("privacy-changed"),b=[]}function N(e){if(v=!1,b.length>0){var t=b.shift();D(t.request,t.data)}}function M(e,t){if(o("PresenceUtil")!=null){var n=e.getData();n.window_id=o("PresenceUtil").getSessionID(),e.setData(n)}return e.setHandler(function(e){return $(t,e)}).setErrorHandler(function(e){return P(t,e)}).setTransportErrorHandler(function(e){return P(t,e)}).setFinallyHandler(function(e){return N(e)}).setAllowCrossPageTransition(!0),e}function w(e,t,n){return M(new(r("AsyncRequest"))(e).setData(t),n)}function A(e,t){var n=t.obj;if(n.viewer_id!=r("CurrentUser").getID())throw new Error("Viewer got from the channel is not the real viewer");if(n.window_id!==o("PresenceUtil").getSessionID()){var a=n.data;if(n.event=="access_control_entry")a.target_ids.forEach(function(e){E(e,a.setting),g[e]=a.setting});else{if(n.event=="visibility_update"){var i=a.visibility?R.ONLINE:R.OFFLINE;I(i),h=i}else n.event=="online_policy_update"&&(T(a.online_policy),C=a.online_policy);R.inform("privacy-user-presence-response")}}}R.inform("privacy-changed"),R.inform("privacy-user-presence-changed","state"),r("Arbiter").subscribe(o("ChannelConstants").getArbiterType("privacy_changed"),A),r("Arbiter").subscribe(o("ChannelConstants").ON_CONFIG,function(e,t){var n=t.getConfig("visibility",null);if(n!==null&&typeof n!="undefined"){var r=n?R.ONLINE:R.OFFLINE;I(r)}});var F=R;l.default=F}),98);
__d("ChatVisibility",["Arbiter","PresencePrivacy"],(function(t,n,r,o,a,i){var e={isOnline:function(){return n("PresencePrivacy").getVisibility()===n("PresencePrivacy").ONLINE},hasBlackbirdEnabled:function(){return e.isVisibleToMostFriends()||e.isVisibleToSomeFriends()},isVisibleToMostFriends:function(){return n("PresencePrivacy").getOnlinePolicy()===n("PresencePrivacy").ONLINE_TO_BLACKLIST&&n("PresencePrivacy").getBlacklist().length>0},isVisibleToSomeFriends:function(){return n("PresencePrivacy").getOnlinePolicy()===n("PresencePrivacy").ONLINE_TO_WHITELIST&&n("PresencePrivacy").getWhitelist().length>0},goOnline:function(t){n("PresencePrivacy").getVisibility()===n("PresencePrivacy").OFFLINE&&(n("PresencePrivacy").setVisibility(n("PresencePrivacy").ONLINE),n("Arbiter").inform("chat-visibility/go-online")),t&&t()},goOffline:function(t){n("PresencePrivacy").getVisibility()===n("PresencePrivacy").ONLINE&&(n("PresencePrivacy").setVisibility(n("PresencePrivacy").OFFLINE),n("Arbiter").inform("chat-visibility/go-offline")),t&&t()},toggleVisibility:function(){e.isOnline()?e.goOffline():e.goOnline()}};a.exports=e}),null);
__d("ClickableArea.react",["Focus","ReactDOM_DEPRECATED","react"],(function(t,n,r,o,a,i,l){var e=["children","onClick"],s,u=s||(s=o("react")),c=(function(t){function n(){return t.apply(this,arguments)||this}babelHelpers.inheritsLoose(n,t);var r=n.prototype;return r.componentDidMount=function(){if(this.props.buttonRef){var e=this.props.buttonRef();o("Focus").relocate(o("ReactDOM_DEPRECATED").findDOMNode_DEPRECATED(e),o("ReactDOM_DEPRECATED").findDOMNode_DEPRECATED(this))}},r.render=function(){var t=this.props,n=t.children,r=t.onClick,o=babelHelpers.objectWithoutPropertiesLoose(t,e);return u.cloneElement(u.Children.only(n),babelHelpers.extends({},o,{onClick:r}))},n})(u.Component);l.default=c}),98);
__d("CometAltpayJsSdkIframeAllowedDomainsJSModuleWrapper",["CometAltpayJsSdkIframeAllowedDomains"],(function(t,n,r,o,a,i,l){"use strict";l.default=r("CometAltpayJsSdkIframeAllowedDomains")}),98);
__d("CometHeroInteractionContext",["hero-tracing-placeholder"],(function(t,n,r,o,a,i,l){"use strict";l.default=o("hero-tracing-placeholder").HeroInteractionContext}),98);
__d("TWriteBuffer",[],(function(t,n,r,o,a,i){var e=(function(){function e(t){t===void 0&&(t=e.DEFAULT_BYTE_BUFFER_SIZE),this.$1=new DataView(new ArrayBuffer(t)),this.$2=0}var t=e.prototype;return t.write=function(t){this.$2+t.length>this.$1.byteLength&&this.$3(this.$2+t.length);for(var e=0;e<t.length;e++)this.$1.setUint8(this.$2+e,t[e]);return this.$2+=t.length,t.length},t.writeByte=function(t){return this.$2+1>this.$1.byteLength&&this.$3(this.$2+1),this.$1.setUint8(this.$2,t),this.$2++,1},t.writeFloatBE=function(t){return this.$2+Float32Array.BYTES_PER_ELEMENT>this.$1.byteLength&&this.$3(this.$2+Float32Array.BYTES_PER_ELEMENT),this.$1.setFloat32(this.$2,t),this.$2+=Float32Array.BYTES_PER_ELEMENT,Float32Array.BYTES_PER_ELEMENT},t.writeDoubleBE=function(t){return this.$2+Float64Array.BYTES_PER_ELEMENT>this.$1.byteLength&&this.$3(this.$2+Float64Array.BYTES_PER_ELEMENT),this.$1.setFloat64(this.$2,t),this.$2+=Float64Array.BYTES_PER_ELEMENT,Float64Array.BYTES_PER_ELEMENT},t.toByteArray=function(){var e=new Uint8Array(this.$1.buffer,0,this.$2);return e},t.currentSize=function(){return this.$2},t.getUnderlyingDataView=function(){return this.$1},t.$3=function(t){var e=t*2;if(!Number.isSafeInteger(e))throw new Error("unable to resize");for(var n=new DataView(new ArrayBuffer(e)),r=0;r<this.$2;r++)n.setUint8(r,this.$1.getUint8(r));this.$1=n},t.readByte=function(){throw new Error("operation not supported")},t.readBytes=function(t){throw new Error("operation not supported")},t.readFloatBE=function(){throw new Error("operation not supported")},t.readDoubleBE=function(){throw new Error("operation not supported")},e})();e.DEFAULT_BYTE_BUFFER_SIZE=16,i.default=e}),66);
__d("StringToUtf8",["TWriteBuffer"],(function(t,n,r,o,a,i,l){var e=function(t){for(var e=new(r("TWriteBuffer"))(t.length),n,o=0;o<t.length;o++)if(n=t.charCodeAt(o),n<128)e.writeByte(n);else if(n<2048)e.writeByte(n>>6|192),e.writeByte(n&63|128);else if((n&64512)==55296){if(o+1>=t.length)throw new Error("UTF-16 string is truncated: ["+n.toString(16)+"]");if((t.charCodeAt(o+1)&64512)!==56320)throw new Error("Invalid UTF-16 string: ["+n.toString(16)+", "+t.charCodeAt(o+1).toString(16)+"]");n=65536+((n&1023)<<10)+(t.charCodeAt(++o)&1023),e.writeByte(n>>18|240),e.writeByte(n>>12&63|128),e.writeByte(n>>6&63|128),e.writeByte(n&63|128)}else e.writeByte(n>>12|224),e.writeByte(n>>6&63|128),e.writeByte(n&63|128);return e.toByteArray()};l.StringToUtf8=e}),98);
__d("ThriftTypes",[],(function(t,n,r,o,a,i){var e=Object.freeze({STOP:0,VOID:1,BOOL:2,BYTE:3,I08:3,DOUBLE:4,I16:6,I32:8,I64:10,STRING:11,STRUCT:12,MAP:13,SET:14,LIST:15,FLOAT:19}),l=e;i.default=l}),66);
__d("Utf8ToString",[],(function(t,n,r,o,a,i){var e=function(t,n){throw new Error(t+": ["+n.map(function(e){return e.toString(16)}).toString()+"]")},l=function(n){e("Invalid UTF-8 sequence",n)},s=function(n,r){e("Not enough bytes for "+n+"-byte sequence",r)},u=function(t){for(var e=0,n=[];e<t.length;){var r=t[e++];if(r<128)n.push(String.fromCharCode(r));else if(r>=128&&r<194)l([r]);else if(r>=194&&r<224){e>=t.length&&s(2,[r]);var o=t[e++];(o&192)!==128&&l([r,o]),n.push(String.fromCharCode((r&31)<<6|o&63))}else if(r>=240&&r<245){e+2>=t.length&&s(4,[r]);var a=t[e++],i=t[e++],u=t[e++];(r==240&&(!(a>=144&&a<192)||(i&192)!==128||(u&192)!==128)||r>=241&&r<244&&((a&192)!==128||(i&192)!==128||(u&192)!==128)||r==244&&(!(a>=128&&a<144)||(i&192)!==128||(u&192)!==128))&&l([r,a,i,u]);var c=((r&7)<<18|(a&63)<<12|(i&63)<<6|u&63)-65536;n.push(String.fromCharCode(55296+(c>>10))),n.push(String.fromCharCode(56320+(c&1023)))}else if(r>=245)l([r]);else{e+1>=t.length&&s(3,[r]);var d=t[e++],m=t[e++];r==224?d>=160&&d<192||l([r,d,m]):r>=225&&r<237?d>=128&&d<192||l([r,d,m]):r==237?d>=128&&d<160||l([r,d,m]):r>=238&&r<240&&(d>=128&&d<192||l([r,d,m])),m>=128&&m<192||l([r,d,m]),n.push(String.fromCharCode((r&15)<<12|(d&63)<<6|m&63))}}return n.join("")};i.Utf8ToString=u}),66);
__d("jsbi",[],(function(t,n,r,o,a,i){(function(e,t){typeof i=="object"&&typeof a!="undefined"?a.exports=t():typeof define=="function"&&define.amd?define(t):e.JSBI=t()})(this,function(){"use strict";function e(t){return e=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(t)}function t(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){for(var n,r=0;r<t.length;r++)n=t[r],n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}function r(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}function o(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&i(e,t)}function a(e){return a=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},a(e)}function i(e,t){return i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},i(e,t)}function l(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}function s(){return s=l()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var o=Function.bind.apply(e,r),a=new o;return n&&i(a,n.prototype),a},s.apply(null,arguments)}function u(e){return Function.toString.call(e).indexOf("[native code]")!==-1}function c(e){var t=typeof Map=="function"?new Map:void 0;return c=function(e){function n(){return s(e,arguments,a(this).constructor)}if(e===null||!u(e))return e;if(typeof e!="function")throw new TypeError("Super expression must either be null or a function");if(typeof t!="undefined"){if(t.has(e))return t.get(e);t.set(e,n)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),i(n,e)},c(e)}function d(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function m(e,t){return t&&(typeof t=="object"||typeof t=="function")?t:d(e)}var p=(function(n){var i=Math.abs,l=Math.max,s=Math.imul,u=Math.clz32;function c(e,n){var r;if(t(this,c),e>c.__kMaxLength)throw new RangeError("Maximum BigInt size exceeded");return r=m(this,a(c).call(this,e)),r.sign=n,r}return o(c,n),r(c,[{key:"toDebugString",value:function(){var e=["BigInt["],t=!0,n=!1,r=void 0;try{for(var o,a,i=this[Symbol.iterator]();!(t=(o=i.next()).done);t=!0)a=o.value,e.push((a&&(a>>>0).toString(16))+", ")}catch(e){n=!0,r=e}finally{try{t||i.return==null||i.return()}finally{if(n)throw r}}return e.push("]"),e.join("")}},{key:"toString",value:function(){var e=0<arguments.length&&arguments[0]!==void 0?arguments[0]:10;if(2>e||36<e)throw new RangeError("toString() radix argument must be between 2 and 36");return this.length===0?"0":(e&e-1)==0?c.__toStringBasePowerOfTwo(this,e):c.__toStringGeneric(this,e,!1)}},{key:"__copy",value:function(){for(var e=new c(this.length,this.sign),t=0;t<this.length;t++)e[t]=this[t];return e}},{key:"__trim",value:function(){for(var e=this.length,t=this[e-1];t===0;)e--,t=this[e-1],this.pop();return e===0&&(this.sign=!1),this}},{key:"__initializeDigits",value:function(){for(var e=0;e<this.length;e++)this[e]=0}},{key:"__clzmsd",value:function(){return u(this[this.length-1])}},{key:"__inplaceMultiplyAdd",value:function(e,t,n){n>this.length&&(n=this.length);for(var r=65535&e,o=e>>>16,a=0,i=65535&t,l=t>>>16,u=0;u<n;u++){var c=this.__digit(u),d=65535&c,m=c>>>16,p=s(d,r),_=s(d,o),f=s(m,r),g=s(m,o),h=i+(65535&p),y=l+a+(h>>>16)+(p>>>16)+(65535&_)+(65535&f);i=(_>>>16)+(f>>>16)+(65535&g)+(y>>>16),a=i>>>16,i&=65535,l=g>>>16,this.__setDigit(u,65535&h|y<<16)}if(a!==0||i!==0||l!==0)throw new Error("implementation bug")}},{key:"__inplaceAdd",value:function(e,t,n){for(var r,o=0,a=0;a<n;a++)r=this.__halfDigit(t+a)+e.__halfDigit(a)+o,o=r>>>16,this.__setHalfDigit(t+a,r);return o}},{key:"__inplaceSub",value:function(e,t,n){var r=0;if(1&t){t>>=1;for(var o=this.__digit(t),a=65535&o,i=0;i<n-1>>>1;i++){var l=e.__digit(i),s=(o>>>16)-(65535&l)-r;r=1&s>>>16,this.__setDigit(t+i,s<<16|65535&a),o=this.__digit(t+i+1),a=(65535&o)-(l>>>16)-r,r=1&a>>>16}var u=e.__digit(i),c=(o>>>16)-(65535&u)-r;if(r=1&c>>>16,this.__setDigit(t+i,c<<16|65535&a),t+i+1>=this.length)throw new RangeError("out of bounds");(1&n)==0&&(o=this.__digit(t+i+1),a=(65535&o)-(u>>>16)-r,r=1&a>>>16,this.__setDigit(t+e.length,4294901760&o|65535&a))}else{t>>=1;for(var d=0;d<e.length-1;d++){var m=this.__digit(t+d),p=e.__digit(d),_=(65535&m)-(65535&p)-r;r=1&_>>>16;var f=(m>>>16)-(p>>>16)-r;r=1&f>>>16,this.__setDigit(t+d,f<<16|65535&_)}var g=this.__digit(t+d),h=e.__digit(d),y=(65535&g)-(65535&h)-r;r=1&y>>>16;var C=0;(1&n)==0&&(C=(g>>>16)-(h>>>16)-r,r=1&C>>>16),this.__setDigit(t+d,C<<16|65535&y)}return r}},{key:"__inplaceRightShift",value:function(e){if(e!==0){for(var t,n=this.__digit(0)>>>e,r=this.length-1,o=0;o<r;o++)t=this.__digit(o+1),this.__setDigit(o,t<<32-e|n),n=t>>>e;this.__setDigit(r,n)}}},{key:"__digit",value:function(e){return this[e]}},{key:"__unsignedDigit",value:function(e){return this[e]>>>0}},{key:"__setDigit",value:function(e,t){this[e]=0|t}},{key:"__setDigitGrow",value:function(e,t){this[e]=0|t}},{key:"__halfDigitLength",value:function(){var e=this.length;return 65535>=this.__unsignedDigit(e-1)?2*e-1:2*e}},{key:"__halfDigit",value:function(e){return 65535&this[e>>>1]>>>((1&e)<<4)}},{key:"__setHalfDigit",value:function(e,t){var n=e>>>1,r=this.__digit(n),o=1&e?65535&r|t<<16:4294901760&r|65535&t;this.__setDigit(n,o)}}],[{key:"BigInt",value:function(t){var n=Math.floor,r=Number.isFinite;if(typeof t=="number"){if(t===0)return c.__zero();if((0|t)===t)return 0>t?c.__oneDigit(-t,!0):c.__oneDigit(t,!1);if(!r(t)||n(t)!==t)throw new RangeError("The number "+t+" cannot be converted to BigInt because it is not an integer");return c.__fromDouble(t)}if(typeof t=="string"){var o=c.__fromString(t);if(o===null)throw new SyntaxError("Cannot convert "+t+" to a BigInt");return o}if(typeof t=="boolean")return t===!0?c.__oneDigit(1,!1):c.__zero();if(e(t)==="object"){if(t.constructor===c)return t;var a=c.__toPrimitive(t);return c.BigInt(a)}throw new TypeError("Cannot convert "+t+" to a BigInt")}},{key:"toNumber",value:function(e){var t=e.length;if(t===0)return 0;if(t===1){var n=e.__unsignedDigit(0);return e.sign?-n:n}var r=e.__digit(t-1),o=u(r),a=32*t-o;if(1024<a)return e.sign?-1/0:1/0;var i=a-1,l=r,s=t-1,d=o+1,m=d===32?0:l<<d;m>>>=12;var p=d-12,_=12<=d?0:l<<20+d,f=20+d;0<p&&0<s&&(s--,l=e.__digit(s),m|=l>>>32-p,_=l<<p,f=p),0<f&&0<s&&(s--,l=e.__digit(s),_|=l>>>32-f,f-=32);var g=c.__decideRounding(e,f,s,l);if((g===1||g===0&&(1&_)==1)&&(_=_+1>>>0,_===0&&(m++,m>>>20!=0&&(m=0,i++,1023<i))))return e.sign?-1/0:1/0;var h=e.sign?-2147483648:0;return i=i+1023<<20,c.__kBitConversionInts[1]=h|i|m,c.__kBitConversionInts[0]=_,c.__kBitConversionDouble[0]}},{key:"unaryMinus",value:function(e){if(e.length===0)return e;var t=e.__copy();return t.sign=!e.sign,t}},{key:"bitwiseNot",value:function(e){return e.sign?c.__absoluteSubOne(e).__trim():c.__absoluteAddOne(e,!0)}},{key:"exponentiate",value:function(e,t){if(t.sign)throw new RangeError("Exponent must be positive");if(t.length===0)return c.__oneDigit(1,!1);if(e.length===0)return e;if(e.length===1&&e.__digit(0)===1)return e.sign&&(1&t.__digit(0))==0?c.unaryMinus(e):e;if(1<t.length)throw new RangeError("BigInt too big");var n=t.__unsignedDigit(0);if(n===1)return e;if(n>=c.__kMaxLengthBits)throw new RangeError("BigInt too big");if(e.length===1&&e.__digit(0)===2){var r=1+(n>>>5),o=e.sign&&(1&n)!=0,a=new c(r,o);a.__initializeDigits();var i=1<<(31&n);return a.__setDigit(r-1,i),a}var l=null,s=e;for((1&n)!=0&&(l=e),n>>=1;n!==0;n>>=1)s=c.multiply(s,s),(1&n)!=0&&(l===null?l=s:l=c.multiply(l,s));return l}},{key:"multiply",value:function(e,t){if(e.length===0)return e;if(t.length===0)return t;var n=e.length+t.length;32<=e.__clzmsd()+t.__clzmsd()&&n--;var r=new c(n,e.sign!==t.sign);r.__initializeDigits();for(var o=0;o<e.length;o++)c.__multiplyAccumulate(t,e.__digit(o),r,o);return r.__trim()}},{key:"divide",value:function(e,t){if(t.length===0)throw new RangeError("Division by zero");if(0>c.__absoluteCompare(e,t))return c.__zero();var n,r=e.sign!==t.sign,o=t.__unsignedDigit(0);if(t.length===1&&65535>=o){if(o===1)return r===e.sign?e:c.unaryMinus(e);n=c.__absoluteDivSmall(e,o,null)}else n=c.__absoluteDivLarge(e,t,!0,!1);return n.sign=r,n.__trim()}},{key:"remainder",value:function(t,n){if(n.length===0)throw new RangeError("Division by zero");if(0>c.__absoluteCompare(t,n))return t;var e=n.__unsignedDigit(0);if(n.length===1&&65535>=e){if(e===1)return c.__zero();var r=c.__absoluteModSmall(t,e);return r===0?c.__zero():c.__oneDigit(r,t.sign)}var o=c.__absoluteDivLarge(t,n,!1,!0);return o.sign=t.sign,o.__trim()}},{key:"add",value:function(e,t){var n=e.sign;return n===t.sign?c.__absoluteAdd(e,t,n):0<=c.__absoluteCompare(e,t)?c.__absoluteSub(e,t,n):c.__absoluteSub(t,e,!n)}},{key:"subtract",value:function(e,t){var n=e.sign;return n===t.sign?0<=c.__absoluteCompare(e,t)?c.__absoluteSub(e,t,n):c.__absoluteSub(t,e,!n):c.__absoluteAdd(e,t,n)}},{key:"leftShift",value:function(e,t){return t.length===0||e.length===0?e:t.sign?c.__rightShiftByAbsolute(e,t):c.__leftShiftByAbsolute(e,t)}},{key:"signedRightShift",value:function(e,t){return t.length===0||e.length===0?e:t.sign?c.__leftShiftByAbsolute(e,t):c.__rightShiftByAbsolute(e,t)}},{key:"unsignedRightShift",value:function(){throw new TypeError("BigInts have no unsigned right shift; use >> instead")}},{key:"lessThan",value:function(e,t){return 0>c.__compareToBigInt(e,t)}},{key:"lessThanOrEqual",value:function(e,t){return 0>=c.__compareToBigInt(e,t)}},{key:"greaterThan",value:function(e,t){return 0<c.__compareToBigInt(e,t)}},{key:"greaterThanOrEqual",value:function(e,t){return 0<=c.__compareToBigInt(e,t)}},{key:"equal",value:function(e,t){if(e.sign!==t.sign||e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(e.__digit(n)!==t.__digit(n))return!1;return!0}},{key:"notEqual",value:function(e,t){return!c.equal(e,t)}},{key:"bitwiseAnd",value:function(e,t){if(!e.sign&&!t.sign)return c.__absoluteAnd(e,t).__trim();if(e.sign&&t.sign){var n=l(e.length,t.length)+1,r=c.__absoluteSubOne(e,n),o=c.__absoluteSubOne(t);return r=c.__absoluteOr(r,o,r),c.__absoluteAddOne(r,!0,r).__trim()}if(e.sign){var a=[t,e];e=a[0],t=a[1]}return c.__absoluteAndNot(e,c.__absoluteSubOne(t)).__trim()}},{key:"bitwiseXor",value:function(e,t){if(!e.sign&&!t.sign)return c.__absoluteXor(e,t).__trim();if(e.sign&&t.sign){var n=l(e.length,t.length),r=c.__absoluteSubOne(e,n),o=c.__absoluteSubOne(t);return c.__absoluteXor(r,o,r).__trim()}var a=l(e.length,t.length)+1;if(e.sign){var i=[t,e];e=i[0],t=i[1]}var s=c.__absoluteSubOne(t,a);return s=c.__absoluteXor(s,e,s),c.__absoluteAddOne(s,!0,s).__trim()}},{key:"bitwiseOr",value:function(e,t){var n=l(e.length,t.length);if(!e.sign&&!t.sign)return c.__absoluteOr(e,t).__trim();if(e.sign&&t.sign){var r=c.__absoluteSubOne(e,n),o=c.__absoluteSubOne(t);return r=c.__absoluteAnd(r,o,r),c.__absoluteAddOne(r,!0,r).__trim()}if(e.sign){var a=[t,e];e=a[0],t=a[1]}var i=c.__absoluteSubOne(t,n);return i=c.__absoluteAndNot(i,e,i),c.__absoluteAddOne(i,!0,i).__trim()}},{key:"asIntN",value:function(e,t){if(t.length===0)return t;if(e===0)return c.__zero();if(e>=c.__kMaxLengthBits)return t;var n=e+31>>>5;if(t.length<n)return t;var r=t.__unsignedDigit(n-1),o=1<<(31&e-1);if(t.length===n&&r<o)return t;if((r&o)!==o)return c.__truncateToNBits(e,t);if(!t.sign)return c.__truncateAndSubFromPowerOfTwo(e,t,!0);if((r&o-1)==0){for(var a=n-2;0<=a;a--)if(t.__digit(a)!==0)return c.__truncateAndSubFromPowerOfTwo(e,t,!1);return t.length===n&&r===o?t:c.__truncateToNBits(e,t)}return c.__truncateAndSubFromPowerOfTwo(e,t,!1)}},{key:"asUintN",value:function(e,t){if(t.length===0)return t;if(e===0)return c.__zero();if(t.sign){if(e>c.__kMaxLengthBits)throw new RangeError("BigInt too big");return c.__truncateAndSubFromPowerOfTwo(e,t,!1)}if(e>=c.__kMaxLengthBits)return t;var n=e+31>>>5;if(t.length<n)return t;var r=31&e;if(t.length==n){if(r==0)return t;var o=t.__digit(n-1);if(!(o>>>r))return t}return c.__truncateToNBits(e,t)}},{key:"ADD",value:function(e,t){if(e=c.__toPrimitive(e),t=c.__toPrimitive(t),typeof e=="string")return typeof t!="string"&&(t=t.toString()),e+t;if(typeof t=="string")return e.toString()+t;if(e=c.__toNumeric(e),t=c.__toNumeric(t),c.__isBigInt(e)&&c.__isBigInt(t))return c.add(e,t);if(typeof e=="number"&&typeof t=="number")return e+t;throw new TypeError("Cannot mix BigInt and other types, use explicit conversions")}},{key:"LT",value:function(e,t){return c.__compare(e,t,0)}},{key:"LE",value:function(e,t){return c.__compare(e,t,1)}},{key:"GT",value:function(e,t){return c.__compare(e,t,2)}},{key:"GE",value:function(e,t){return c.__compare(e,t,3)}},{key:"EQ",value:function(t,n){for(;;){if(c.__isBigInt(t))return c.__isBigInt(n)?c.equal(t,n):c.EQ(n,t);if(typeof t=="number"){if(c.__isBigInt(n))return c.__equalToNumber(n,t);if(e(n)!=="object")return t==n;n=c.__toPrimitive(n)}else if(typeof t=="string"){if(c.__isBigInt(n))return t=c.__fromString(t),t!==null&&c.equal(t,n);if(e(n)!=="object")return t==n;n=c.__toPrimitive(n)}else if(typeof t=="boolean"){if(c.__isBigInt(n))return c.__equalToNumber(n,+t);if(e(n)!=="object")return t==n;n=c.__toPrimitive(n)}else if(e(t)==="symbol"){if(c.__isBigInt(n))return!1;if(e(n)!=="object")return t==n;n=c.__toPrimitive(n)}else if(e(t)==="object"){if(e(n)==="object"&&n.constructor!==c)return t==n;t=c.__toPrimitive(t)}else return t==n}}},{key:"NE",value:function(e,t){return!c.EQ(e,t)}},{key:"__zero",value:function(){return new c(0,!1)}},{key:"__oneDigit",value:function(e,t){var n=new c(1,t);return n.__setDigit(0,e),n}},{key:"__decideRounding",value:function(e,t,n,r){if(0<t)return-1;var o;if(0>t)o=-t-1;else{if(n===0)return-1;n--,r=e.__digit(n),o=31}var a=1<<o;if((r&a)==0)return-1;if(a-=1,(r&a)!=0)return 1;for(;0<n;)if(n--,e.__digit(n)!==0)return 1;return 0}},{key:"__fromDouble",value:function(e){c.__kBitConversionDouble[0]=e;var t,n=2047&c.__kBitConversionInts[1]>>>20,r=n-1023,o=(r>>>5)+1,a=new c(o,0>e),i=1048575&c.__kBitConversionInts[1]|1048576,l=c.__kBitConversionInts[0],s=20,u=31&r,d=0;if(u<s){var m=s-u;d=m+32,t=i>>>m,i=i<<32-m|l>>>m,l<<=32-m}else if(u===s)d=32,t=i,i=l;else{var p=u-s;d=32-p,t=i<<p|l>>>32-p,i=l<<p}a.__setDigit(o-1,t);for(var _=o-2;0<=_;_--)0<d?(d-=32,t=i,i=l):t=0,a.__setDigit(_,t);return a.__trim()}},{key:"__isWhitespace",value:function(e){return 13>=e&&9<=e||(159>=e?e==32:131071>=e?e==160||e==5760:196607>=e?(e&=131071,10>=e||e==40||e==41||e==47||e==95||e==4096):e==65279)}},{key:"__fromString",value:function(e){var t=1<arguments.length&&arguments[1]!==void 0?arguments[1]:0,n=0,r=e.length,o=0;if(o===r)return c.__zero();for(var a=e.charCodeAt(o);c.__isWhitespace(a);){if(++o===r)return c.__zero();a=e.charCodeAt(o)}if(a===43){if(++o===r)return null;a=e.charCodeAt(o),n=1}else if(a===45){if(++o===r)return null;a=e.charCodeAt(o),n=-1}if(t===0){if(t=10,a===48){if(++o===r)return c.__zero();if(a=e.charCodeAt(o),a===88||a===120){if(t=16,++o===r)return null;a=e.charCodeAt(o)}else if(a===79||a===111){if(t=8,++o===r)return null;a=e.charCodeAt(o)}else if(a===66||a===98){if(t=2,++o===r)return null;a=e.charCodeAt(o)}}}else if(t===16&&a===48){if(++o===r)return c.__zero();if(a=e.charCodeAt(o),a===88||a===120){if(++o===r)return null;a=e.charCodeAt(o)}}for(;a===48;){if(++o===r)return c.__zero();a=e.charCodeAt(o)}var i=r-o,l=c.__kMaxBitsPerChar[t],s=c.__kBitsPerCharTableMultiplier-1;if(i>1073741824/l)return null;var u=l*i+s>>>c.__kBitsPerCharTableShift,d=new c(u+31>>>5,!1),m=10>t?t:10,p=10<t?t-10:0;if((t&t-1)==0){l>>=c.__kBitsPerCharTableShift;var _=[],f=[],g=!1;do{for(var h,y=0,C=0;;){if(h=void 0,a-48>>>0<m)h=a-48;else if((32|a)-97>>>0<p)h=(32|a)-87;else{g=!0;break}if(C+=l,y=y<<l|h,++o===r){g=!0;break}if(a=e.charCodeAt(o),32<C+l)break}_.push(y),f.push(C)}while(!g);c.__fillFromParts(d,_,f)}else{d.__initializeDigits();var b=!1,v=0;do{for(var S,R=0,L=1;;){if(S=void 0,a-48>>>0<m)S=a-48;else if((32|a)-97>>>0<p)S=(32|a)-87;else{b=!0;break}var E=L*t;if(4294967295<E)break;if(L=E,R=R*t+S,v++,++o===r){b=!0;break}a=e.charCodeAt(o)}s=32*c.__kBitsPerCharTableMultiplier-1;var k=l*v+s>>>c.__kBitsPerCharTableShift+5;d.__inplaceMultiplyAdd(L,R,k)}while(!b)}if(o!==r){if(!c.__isWhitespace(a))return null;for(o++;o<r;o++)if(a=e.charCodeAt(o),!c.__isWhitespace(a))return null}return n!==0&&t!==10?null:(d.sign=n===-1,d.__trim())}},{key:"__fillFromParts",value:function(e,t,n){for(var r=0,o=0,a=0,i=t.length-1;0<=i;i--){var l=t[i],s=n[i];o|=l<<a,a+=s,a===32?(e.__setDigit(r++,o),a=0,o=0):32<a&&(e.__setDigit(r++,o),a-=32,o=l>>>s-a)}if(o!==0){if(r>=e.length)throw new Error("implementation bug");e.__setDigit(r++,o)}for(;r<e.length;r++)e.__setDigit(r,0)}},{key:"__toStringBasePowerOfTwo",value:function(e,t){var n=e.length,r=t-1;r=(85&r>>>1)+(85&r),r=(51&r>>>2)+(51&r),r=(15&r>>>4)+(15&r);var o=r,a=t-1,i=e.__digit(n-1),l=u(i),s=0|(32*n-l+o-1)/o;if(e.sign&&s++,268435456<s)throw new Error("string too long");for(var d=Array(s),m=s-1,p=0,_=0,f=0;f<n-1;f++){var g=e.__digit(f),h=(p|g<<_)&a;d[m--]=c.__kConversionChars[h];var y=o-_;for(p=g>>>y,_=32-y;_>=o;)d[m--]=c.__kConversionChars[p&a],p>>>=o,_-=o}var C=(p|i<<_)&a;for(d[m--]=c.__kConversionChars[C],p=i>>>o-_;p!==0;)d[m--]=c.__kConversionChars[p&a],p>>>=o;if(e.sign&&(d[m--]="-"),m!==-1)throw new Error("implementation bug");return d.join("")}},{key:"__toStringGeneric",value:function(e,t,n){var r=e.length;if(r===0)return"";if(r===1){var o=e.__unsignedDigit(0).toString(t);return n===!1&&e.sign&&(o="-"+o),o}var a=32*r-u(e.__digit(r-1)),i=c.__kMaxBitsPerChar[t],l=i-1,s=a*c.__kBitsPerCharTableMultiplier;s+=l-1,s=0|s/l;var d,m,p=s+1>>1,_=c.exponentiate(c.__oneDigit(t,!1),c.__oneDigit(p,!1)),f=_.__unsignedDigit(0);if(_.length===1&&65535>=f){d=new c(e.length,!1),d.__initializeDigits();for(var g,h=0,y=2*e.length-1;0<=y;y--)g=h<<16|e.__halfDigit(y),d.__setHalfDigit(y,0|g/f),h=0|g%f;m=h.toString(t)}else{var C=c.__absoluteDivLarge(e,_,!0,!0);d=C.quotient;var b=C.remainder.__trim();m=c.__toStringGeneric(b,t,!0)}d.__trim();for(var v=c.__toStringGeneric(d,t,!0);m.length<p;)m="0"+m;return n===!1&&e.sign&&(v="-"+v),v+m}},{key:"__unequalSign",value:function(e){return e?-1:1}},{key:"__absoluteGreater",value:function(e){return e?-1:1}},{key:"__absoluteLess",value:function(e){return e?1:-1}},{key:"__compareToBigInt",value:function(e,t){var n=e.sign;if(n!==t.sign)return c.__unequalSign(n);var r=c.__absoluteCompare(e,t);return 0<r?c.__absoluteGreater(n):0>r?c.__absoluteLess(n):0}},{key:"__compareToNumber",value:function(e,t){if(!0|t){var n=e.sign,r=0>t;if(n!==r)return c.__unequalSign(n);if(e.length===0){if(r)throw new Error("implementation bug");return t===0?0:-1}if(1<e.length)return c.__absoluteGreater(n);var o=i(t),a=e.__unsignedDigit(0);return a>o?c.__absoluteGreater(n):a<o?c.__absoluteLess(n):0}return c.__compareToDouble(e,t)}},{key:"__compareToDouble",value:function(e,t){if(t!==t)return t;if(t===1/0)return-1;if(t===-1/0)return 1;var n=e.sign;if(n!==0>t)return c.__unequalSign(n);if(t===0)throw new Error("implementation bug: should be handled elsewhere");if(e.length===0)return-1;c.__kBitConversionDouble[0]=t;var r=2047&c.__kBitConversionInts[1]>>>20;if(r==2047)throw new Error("implementation bug: handled elsewhere");var o=r-1023;if(0>o)return c.__absoluteGreater(n);var a=e.length,i=e.__digit(a-1),l=u(i),s=32*a-l,d=o+1;if(s<d)return c.__absoluteLess(n);if(s>d)return c.__absoluteGreater(n);var m=1048576|1048575&c.__kBitConversionInts[1],p=c.__kBitConversionInts[0],_=20,f=31-l;if(f!==(s-1)%31)throw new Error("implementation bug");var g,h=0;if(f<_){var y=_-f;h=y+32,g=m>>>y,m=m<<32-y|p>>>y,p<<=32-y}else if(f===_)h=32,g=m,m=p;else{var C=f-_;h=32-C,g=m<<C|p>>>32-C,m=p<<C}if(i>>>=0,g>>>=0,i>g)return c.__absoluteGreater(n);if(i<g)return c.__absoluteLess(n);for(var b=a-2;0<=b;b--){0<h?(h-=32,g=m>>>0,m=p,p=0):g=0;var v=e.__unsignedDigit(b);if(v>g)return c.__absoluteGreater(n);if(v<g)return c.__absoluteLess(n)}if(m!==0||p!==0){if(h===0)throw new Error("implementation bug");return c.__absoluteLess(n)}return 0}},{key:"__equalToNumber",value:function(e,t){return t|t===0?t===0?e.length===0:e.length===1&&e.sign===0>t&&e.__unsignedDigit(0)===i(t):c.__compareToDouble(e,t)===0}},{key:"__comparisonResultToBool",value:function(e,t){switch(t){case 0:return 0>e;case 1:return 0>=e;case 2:return 0<e;case 3:return 0<=e}throw new Error("unreachable")}},{key:"__compare",value:function(e,t,n){if(e=c.__toPrimitive(e),t=c.__toPrimitive(t),typeof e=="string"&&typeof t=="string")switch(n){case 0:return e<t;case 1:return e<=t;case 2:return e>t;case 3:return e>=t}if(c.__isBigInt(e)&&typeof t=="string")return t=c.__fromString(t),t!==null&&c.__comparisonResultToBool(c.__compareToBigInt(e,t),n);if(typeof e=="string"&&c.__isBigInt(t))return e=c.__fromString(e),e!==null&&c.__comparisonResultToBool(c.__compareToBigInt(e,t),n);if(e=c.__toNumeric(e),t=c.__toNumeric(t),c.__isBigInt(e)){if(c.__isBigInt(t))return c.__comparisonResultToBool(c.__compareToBigInt(e,t),n);if(typeof t!="number")throw new Error("implementation bug");return c.__comparisonResultToBool(c.__compareToNumber(e,t),n)}if(typeof e!="number")throw new Error("implementation bug");if(c.__isBigInt(t))return c.__comparisonResultToBool(c.__compareToNumber(t,e),2^n);if(typeof t!="number")throw new Error("implementation bug");return n===0?e<t:n===1?e<=t:n===2?e>t:n===3?e>=t:void 0}},{key:"__absoluteAdd",value:function(e,t,n){if(e.length<t.length)return c.__absoluteAdd(t,e,n);if(e.length===0)return e;if(t.length===0)return e.sign===n?e:c.unaryMinus(e);var r=e.length;(e.__clzmsd()===0||t.length===e.length&&t.__clzmsd()===0)&&r++;for(var o=new c(r,n),a=0,i=0;i<t.length;i++){var l=t.__digit(i),s=e.__digit(i),u=(65535&s)+(65535&l)+a,d=(s>>>16)+(l>>>16)+(u>>>16);a=d>>>16,o.__setDigit(i,65535&u|d<<16)}for(;i<e.length;i++){var m=e.__digit(i),p=(65535&m)+a,_=(m>>>16)+(p>>>16);a=_>>>16,o.__setDigit(i,65535&p|_<<16)}return i<o.length&&o.__setDigit(i,a),o.__trim()}},{key:"__absoluteSub",value:function(e,t,n){if(e.length===0)return e;if(t.length===0)return e.sign===n?e:c.unaryMinus(e);for(var r=new c(e.length,n),o=0,a=0;a<t.length;a++){var i=e.__digit(a),l=t.__digit(a),s=(65535&i)-(65535&l)-o;o=1&s>>>16;var u=(i>>>16)-(l>>>16)-o;o=1&u>>>16,r.__setDigit(a,65535&s|u<<16)}for(;a<e.length;a++){var d=e.__digit(a),m=(65535&d)-o;o=1&m>>>16;var p=(d>>>16)-o;o=1&p>>>16,r.__setDigit(a,65535&m|p<<16)}return r.__trim()}},{key:"__absoluteAddOne",value:function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null,r=e.length;n===null?n=new c(r,t):n.sign=t;for(var o=!0,a=0;a<r;a++){var i=e.__digit(a),l=i===-1;o&&(i=0|i+1),o=l,n.__setDigit(a,i)}return o&&n.__setDigitGrow(r,1),n}},{key:"__absoluteSubOne",value:function(e,t){var n=e.length;t=t||n;for(var r=new c(t,!1),o=!0,a=0;a<n;a++){var i=e.__digit(a),l=i===0;o&&(i=0|i-1),o=l,r.__setDigit(a,i)}for(var s=n;s<t;s++)r.__setDigit(s,0);return r}},{key:"__absoluteAnd",value:function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null,r=e.length,o=t.length,a=o;if(r<o){a=r;var i=e,l=r;e=t,r=o,t=i,o=l}var s=a;n===null?n=new c(s,!1):s=n.length;for(var u=0;u<a;u++)n.__setDigit(u,e.__digit(u)&t.__digit(u));for(;u<s;u++)n.__setDigit(u,0);return n}},{key:"__absoluteAndNot",value:function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null,r=e.length,o=t.length,a=o;r<o&&(a=r);var i=r;n===null?n=new c(i,!1):i=n.length;for(var l=0;l<a;l++)n.__setDigit(l,e.__digit(l)&~t.__digit(l));for(;l<r;l++)n.__setDigit(l,e.__digit(l));for(;l<i;l++)n.__setDigit(l,0);return n}},{key:"__absoluteOr",value:function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null,r=e.length,o=t.length,a=o;if(r<o){a=r;var i=e,l=r;e=t,r=o,t=i,o=l}var s=r;n===null?n=new c(s,!1):s=n.length;for(var u=0;u<a;u++)n.__setDigit(u,e.__digit(u)|t.__digit(u));for(;u<r;u++)n.__setDigit(u,e.__digit(u));for(;u<s;u++)n.__setDigit(u,0);return n}},{key:"__absoluteXor",value:function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null,r=e.length,o=t.length,a=o;if(r<o){a=r;var i=e,l=r;e=t,r=o,t=i,o=l}var s=r;n===null?n=new c(s,!1):s=n.length;for(var u=0;u<a;u++)n.__setDigit(u,e.__digit(u)^t.__digit(u));for(;u<r;u++)n.__setDigit(u,e.__digit(u));for(;u<s;u++)n.__setDigit(u,0);return n}},{key:"__absoluteCompare",value:function(e,t){var n=e.length-t.length;if(n!=0)return n;for(var r=e.length-1;0<=r&&e.__digit(r)===t.__digit(r);)r--;return 0>r?0:e.__unsignedDigit(r)>t.__unsignedDigit(r)?1:-1}},{key:"__multiplyAccumulate",value:function(e,t,n,r){if(t!==0){for(var o=65535&t,a=t>>>16,i=0,l=0,u=0,c=0;c<e.length;c++,r++){var d=n.__digit(r),m=65535&d,p=d>>>16,_=e.__digit(c),f=65535&_,g=_>>>16,h=s(f,o),y=s(f,a),C=s(g,o),b=s(g,a);m+=l+(65535&h),p+=u+i+(m>>>16)+(h>>>16)+(65535&y)+(65535&C),i=p>>>16,l=(y>>>16)+(C>>>16)+(65535&b)+i,i=l>>>16,l&=65535,u=b>>>16,d=65535&m|p<<16,n.__setDigit(r,d)}for(;i!==0||l!==0||u!==0;r++){var v=n.__digit(r),S=(65535&v)+l,R=(v>>>16)+(S>>>16)+u+i;l=0,u=0,i=R>>>16,v=65535&S|R<<16,n.__setDigit(r,v)}}}},{key:"__internalMultiplyAdd",value:function(e,t,n,r,o){for(var a=n,i=0,l=0;l<r;l++){var u=e.__digit(l),c=s(65535&u,t),d=(65535&c)+i+a;a=d>>>16;var m=s(u>>>16,t),p=(65535&m)+(c>>>16)+a;a=p>>>16,i=m>>>16,o.__setDigit(l,p<<16|65535&d)}if(o.length>r)for(o.__setDigit(r++,a+i);r<o.length;)o.__setDigit(r++,0);else if(a+i!==0)throw new Error("implementation bug")}},{key:"__absoluteDivSmall",value:function(e,t,n){n===null&&(n=new c(e.length,!1));for(var r=0,o=2*e.length-1;0<=o;o-=2){var a=(r<<16|e.__halfDigit(o))>>>0,i=0|a/t;r=0|a%t,a=(r<<16|e.__halfDigit(o-1))>>>0;var l=0|a/t;r=0|a%t,n.__setDigit(o>>>1,i<<16|l)}return n}},{key:"__absoluteModSmall",value:function(e,t){for(var n,r=0,o=2*e.length-1;0<=o;o--)n=(r<<16|e.__halfDigit(o))>>>0,r=0|n%t;return r}},{key:"__absoluteDivLarge",value:function(e,t,n,r){var o=t.__halfDigitLength(),a=t.length,i=e.__halfDigitLength()-o,l=null;n&&(l=new c(i+2>>>1,!1),l.__initializeDigits());var u=new c(o+2>>>1,!1);u.__initializeDigits();var d=c.__clz16(t.__halfDigit(o-1));0<d&&(t=c.__specialLeftShift(t,d,0));for(var m=c.__specialLeftShift(e,d,1),p=t.__halfDigit(o-1),_=0,f=i;0<=f;f--){var g=65535,h=m.__halfDigit(f+o);if(h!==p){var y=(h<<16|m.__halfDigit(f+o-1))>>>0;g=0|y/p;for(var C=0|y%p,b=t.__halfDigit(o-2),v=m.__halfDigit(f+o-2);s(g,b)>>>0>(C<<16|v)>>>0&&(g--,C+=p,!(65535<C)););}c.__internalMultiplyAdd(t,g,0,a,u);var S=m.__inplaceSub(u,f,o+1);S!==0&&(S=m.__inplaceAdd(t,f,o),m.__setHalfDigit(f+o,m.__halfDigit(f+o)+S),g--),n&&(1&f?_=g<<16:l.__setDigit(f>>>1,_|g))}return r?(m.__inplaceRightShift(d),n?{quotient:l,remainder:m}:m):n?l:void 0}},{key:"__clz16",value:function(e){return u(e)-16}},{key:"__specialLeftShift",value:function(e,t,n){var r=e.length,o=new c(r+n,!1);if(t===0){for(var a=0;a<r;a++)o.__setDigit(a,e.__digit(a));return 0<n&&o.__setDigit(r,0),o}for(var i,l=0,s=0;s<r;s++)i=e.__digit(s),o.__setDigit(s,i<<t|l),l=i>>>32-t;return 0<n&&o.__setDigit(r,l),o}},{key:"__leftShiftByAbsolute",value:function(e,t){var n=c.__toShiftAmount(t);if(0>n)throw new RangeError("BigInt too big");var r=n>>>5,o=31&n,a=e.length,i=o!==0&&e.__digit(a-1)>>>32-o!=0,l=a+r+(i?1:0),s=new c(l,e.sign);if(o===0){for(var u=0;u<r;u++)s.__setDigit(u,0);for(;u<l;u++)s.__setDigit(u,e.__digit(u-r))}else{for(var d=0,m=0;m<r;m++)s.__setDigit(m,0);for(var p,_=0;_<a;_++)p=e.__digit(_),s.__setDigit(_+r,p<<o|d),d=p>>>32-o;if(i)s.__setDigit(a+r,d);else if(d!==0)throw new Error("implementation bug")}return s.__trim()}},{key:"__rightShiftByAbsolute",value:function(e,t){var n=e.length,r=e.sign,o=c.__toShiftAmount(t);if(0>o)return c.__rightShiftByMaximum(r);var a=o>>>5,i=31&o,l=n-a;if(0>=l)return c.__rightShiftByMaximum(r);var s=!1;if(r){if((e.__digit(a)&(1<<i)-1)!=0)s=!0;else for(var u=0;u<a;u++)if(e.__digit(u)!==0){s=!0;break}}if(s&&i===0){var d=e.__digit(n-1);~d==0&&l++}var m=new c(l,r);if(i===0)for(var p=a;p<n;p++)m.__setDigit(p-a,e.__digit(p));else{for(var _,f=e.__digit(a)>>>i,g=n-a-1,h=0;h<g;h++)_=e.__digit(h+a+1),m.__setDigit(h,_<<32-i|f),f=_>>>i;m.__setDigit(g,f)}return s&&(m=c.__absoluteAddOne(m,!0,m)),m.__trim()}},{key:"__rightShiftByMaximum",value:function(e){return e?c.__oneDigit(1,!0):c.__zero()}},{key:"__toShiftAmount",value:function(e){if(1<e.length)return-1;var t=e.__unsignedDigit(0);return t>c.__kMaxLengthBits?-1:t}},{key:"__toPrimitive",value:function(t){var n=1<arguments.length&&arguments[1]!==void 0?arguments[1]:"default";if(e(t)!=="object"||t.constructor===c)return t;var r=t[Symbol.toPrimitive];if(r){var o=r(n);if(e(o)!=="object")return o;throw new TypeError("Cannot convert object to primitive value")}var a=t.valueOf;if(a){var i=a.call(t);if(e(i)!=="object")return i}var l=t.toString;if(l){var s=l.call(t);if(e(s)!=="object")return s}throw new TypeError("Cannot convert object to primitive value")}},{key:"__toNumeric",value:function(e){return c.__isBigInt(e)?e:+e}},{key:"__isBigInt",value:function(t){return e(t)==="object"&&t.constructor===c}},{key:"__truncateToNBits",value:function(e,t){for(var n=e+31>>>5,r=new c(n,t.sign),o=n-1,a=0;a<o;a++)r.__setDigit(a,t.__digit(a));var i=t.__digit(o);if((31&e)!=0){var l=32-(31&e);i=i<<l>>>l}return r.__setDigit(o,i),r.__trim()}},{key:"__truncateAndSubFromPowerOfTwo",value:function(e,t,n){for(var r=Math.min,o=e+31>>>5,a=new c(o,n),i=0,l=o-1,s=0,u=r(l,t.length);i<u;i++){var d=t.__digit(i),m=0-(65535&d)-s;s=1&m>>>16;var p=0-(d>>>16)-s;s=1&p>>>16,a.__setDigit(i,65535&m|p<<16)}for(;i<l;i++)a.__setDigit(i,0|-s);var _,f=l<t.length?t.__digit(l):0,g=31&e;if(g===0){var h=0-(65535&f)-s;s=1&h>>>16;var y=0-(f>>>16)-s;_=65535&h|y<<16}else{var C=32-g;f=f<<C>>>C;var b=1<<32-C,v=(65535&b)-(65535&f)-s;s=1&v>>>16;var S=(b>>>16)-(f>>>16)-s;_=65535&v|S<<16,_&=b-1}return a.__setDigit(l,_),a.__trim()}},{key:"__digitPow",value:function(e,t){for(var n=1;0<t;)1&t&&(n*=e),t>>>=1,e*=e;return n}}]),c})(c(Array));return p.__kMaxLength=33554432,p.__kMaxLengthBits=p.__kMaxLength<<5,p.__kMaxBitsPerChar=[0,0,32,51,64,75,83,90,96,102,107,111,115,119,122,126,128,131,134,136,139,141,143,145,147,149,151,153,154,156,158,159,160,162,163,165,166],p.__kBitsPerCharTableShift=5,p.__kBitsPerCharTableMultiplier=1<<p.__kBitsPerCharTableShift,p.__kConversionChars=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],p.__kBitConversionBuffer=new ArrayBuffer(8),p.__kBitConversionDouble=new Float64Array(p.__kBitConversionBuffer),p.__kBitConversionInts=new Int32Array(p.__kBitConversionBuffer),p})}),null);
__d("TCompactProtocolPolyfill",["StringToUtf8","ThriftTypes","Utf8ToString","jsbi"],(function(t,n,r,o,a,i,l){var e,s,u=Object.freeze({CT_STOP:0,CT_BOOLEAN_TRUE:1,CT_BOOLEAN_FALSE:2,CT_BYTE:3,CT_I16:4,CT_I32:5,CT_I64:6,CT_DOUBLE:7,CT_BINARY:8,CT_LIST:9,CT_SET:10,CT_MAP:11,CT_STRUCT:12,CT_FLOAT:13}),c=Object.freeze({NONE:-1,CT_BOOLEAN_TRUE:u.CT_BOOLEAN_TRUE,CT_BOOLEAN_FALSE:u.CT_BOOLEAN_FALSE}),d=[u.CT_STOP,0,u.CT_BOOLEAN_TRUE,u.CT_BYTE,u.CT_DOUBLE,0,u.CT_I16,0,u.CT_I32,0,u.CT_I64,u.CT_BINARY,u.CT_STRUCT,u.CT_MAP,u.CT_SET,u.CT_LIST,0,0,0,u.CT_FLOAT],m=Math.pow(2,7)-1,p=-1*Math.pow(2,7),_=Math.pow(2,15)-1,f=-1*Math.pow(2,15),g=Math.pow(2,31)-1,h=-1*Math.pow(2,31),y=Math.pow(2,32)-1,C=(s=r("jsbi")).BigInt("9223372036854775807"),b=s.BigInt("-9223372036854775808"),v=s.BigInt("18446744073709551615"),S=s.BigInt(63),R=s.BigInt(1),L=s.BigInt(0),E=s.BigInt(7),k=s.BigInt(70),I=s.BigInt(127),T=s.BigInt(128),D=Math.pow(2,4),x=(function(){function t(e){this.$4=null,this.$5=null,this.$1=e,this.$2=[],this.$3=0,this.$6=new DataView(new ArrayBuffer(1))}var n=t.prototype;return n.readStructBegin=function(){this.$2.push(this.$3),this.$3=0},n.readStructEnd=function(){return this.$3=this.$2.pop(),0},n.writeStructBegin=function(t){return this.$2.push(this.$3),this.$3=0,0},n.writeStructEnd=function(){return this.$3=this.$2.pop(),0},n.writeFieldBegin=function(n){return n.ftype===(e||(e=r("ThriftTypes"))).BOOL?(this.$4={fid:n.fid,fname:n.fname,ftype:n.ftype},0):this.$7(n,c.NONE)},n.writeListBegin=function(t){return this.$8(t)},n.writeListEnd=function(){return 0},n.writeSetBegin=function(t){return this.$8(t)},n.writeSetEnd=function(){return 0},n.writeMapBegin=function(t){var e=0;if(t.size===0)e+=this.$1.writeByte(0);else if(e+=this.writeVarint32(t.size),t.ktype!=null&&t.vtype!=null)e+=this.$1.writeByte(this.$9(t.ktype)<<4|this.$9(t.vtype));else throw new Error("received invalid map info: "+JSON.stringify(t));return e},n.writeMapEnd=function(){return 0},n.$7=function(t,n){var e=0,r=n===c.NONE?this.$9(t.ftype):n;return t.fid>this.$3&&t.fid-this.$3<=D-1?e+=this.$1.writeByte(t.fid-this.$3<<4|r):(e+=this.$1.writeByte(r),e+=this.writeI16(t.fid)),this.$3=t.fid,e},n.$8=function(t){var e=0,n=this.$9(t.etype);return t.size<=D-2?e+=this.$1.writeByte(t.size<<4|n):(e+=this.$1.writeByte(240|n),e+=this.writeVarint32(t.size)),e},n.readFieldBegin=function(){var t=this.$1.readByte(),n=t&15;if(n===(e||(e=r("ThriftTypes"))).STOP)return{ftype:(e||(e=r("ThriftTypes"))).STOP,fid:0};var o=(t&240)>>>4,a;o===0?a=this.readI16():a=this.$3+o;var i=this.$10(n);return(n===u.CT_BOOLEAN_TRUE||n===u.CT_BOOLEAN_FALSE)&&(this.$5=n===u.CT_BOOLEAN_TRUE),this.$3=a,{ftype:i,fid:a}},n.readListBegin=function(){return this.$11()},n.readListEnd=function(){return 0},n.readSetBegin=function(){return this.$11()},n.readSetEnd=function(){return 0},n.readMapBegin=function(){var e=this.readVarint32();if(e>0){var t=this.$1.readByte(),n=this.$12(t>>4,"readMapBegin:key"),r=this.$12(t&15,"readMapBegin:value");return{ktype:this.$10(n),vtype:this.$10(r),size:e}}return{size:e}},n.readMapEnd=function(){return 0},n.$12=function(t,n){if(t<0||t>13)throw new Error(n+" read invalid compact type: "+t);return t},n.$11=function(){var e=this.$1.readByte(),t=this.$12(e&15,"_readListOrSetBegin"),n=this.$10(t),r=e>>4&15;return r===15&&(r=this.readVarint32()),{etype:n,size:r}},n.readFieldEnd=function(){return 0},n.readByte=function(){return this.$6.setUint8(0,this.$1.readByte()),this.$6.getInt8(0)},n.writeByte=function(t){if(t<p||t>m)throw new Error("byte to write is out of range: "+t);return this.$6.setInt8(0,t),this.$1.writeByte(this.$6.getUint8(0))},n.readFloat=function(){return this.$1.readFloatBE()},n.writeFloat=function(t){return this.$1.writeFloatBE(t)},n.readDouble=function(){return this.$1.readDoubleBE()},n.writeDouble=function(t){return this.$1.writeDoubleBE(t)},n.writeString=function(t){return this.writeBinary(o("StringToUtf8").StringToUtf8(t))},n.skip=function(n){switch(n){case(e||(e=r("ThriftTypes"))).STOP:return;case(e||(e=r("ThriftTypes"))).BOOL:this.readBool();break;case(e||(e=r("ThriftTypes"))).BYTE:this.readByte();break;case(e||(e=r("ThriftTypes"))).DOUBLE:this.readDouble();break;case(e||(e=r("ThriftTypes"))).I16:this.readI16();break;case(e||(e=r("ThriftTypes"))).I32:this.readI32();break;case(e||(e=r("ThriftTypes"))).I64:this.readI64();break;case(e||(e=r("ThriftTypes"))).STRING:this.readString();break;case(e||(e=r("ThriftTypes"))).STRUCT:{this.readStructBegin();for(var t;t=this.readFieldBegin(),t.ftype!==(e||(e=r("ThriftTypes"))).STOP;)this.skip(t.ftype);this.readStructEnd();break}case(e||(e=r("ThriftTypes"))).MAP:{var o=this.readMapBegin();if(o.size>0&&o.ktype!=null&&o.vtype!=null)for(var a=o.ktype,i=o.vtype,l=0;l<o.size;l++)this.skip(a),this.skip(i);break}case(e||(e=r("ThriftTypes"))).SET:case(e||(e=r("ThriftTypes"))).LIST:{for(var s=this.$11(),u=0;u<s.size;u++)this.skip(s.etype);break}case(e||(e=r("ThriftTypes"))).FLOAT:this.readFloat();break;default:throw new Error("encoutered unknow thrift type: "+n+" in skip")}},n.toByteArray=function(){return this.$1.toByteArray()},n.writeFieldEnd=function(){return 0},n.writeFieldStop=function(){return this.$1.writeByte((e||(e=r("ThriftTypes"))).STOP)},n.writeI16=function(t){if(t<f||t>_)throw new Error("trying to write i16 out of range: "+t);return this.writeVarint32(this.i32ToZigzag(t))},n.readI16=function(){var e=this.zigzagToI32(this.readVarint32());if(e<f||e>_)throw new Error("read invalid i16: "+e);return e},n.writeI32=function(t){if(t<h||t>g)throw new Error("i32 out of range: "+t);return this.writeVarint32(this.i32ToZigzag(t))},n.readI32=function(){return this.zigzagToI32(this.readVarint32())},n.writeI64=function(t){return this.writeVarint64(this.i64ToZigzag(t))},n.readI64=function(){return this.zigzagToI64(this.readVarint64())},n.readBool=function(){var e;return this.$5!=null?(e=this.$5,this.$5=null):e=this.$1.readByte()===u.CT_BOOLEAN_TRUE,e},n.writeBool=function(t){var e=0;return this.$4!=null?(e+=this.$7(this.$4,t?c.CT_BOOLEAN_TRUE:c.CT_BOOLEAN_FALSE),this.$4=null):e+=this.$1.writeByte(t?u.CT_BOOLEAN_TRUE:u.CT_BOOLEAN_FALSE),e},n.readBinary=function(){var e=this.readVarint32();return e===0?new Uint8Array(0):this.$1.readBytes(e)},n.writeBinary=function(t){var e=0;return e+=this.writeVarint32(t.length),e+=this.$1.write(t),e},n.i32ToZigzag=function(t){if(t<h||t>g)throw new Error("number: "+t+" is out of range of i32");return(t<<1^(t<0?4294967295:0))>>>0},n.zigzagToI32=function(t){if(t<0||t>y)throw new Error("number: "+t+" is out of range of uint32");return t>>>1^-1*(t&1)},n.i64ToZigzag=function(t){if(r("jsbi").greaterThan(t,C)||r("jsbi").lessThan(t,b))throw new Error("i64 out of range: "+t.toString());return r("jsbi").bitwiseXor(r("jsbi").signedRightShift(t,S),r("jsbi").leftShift(t,R))},n.zigzagToI64=function(t){if(r("jsbi").lessThan(t,0)||r("jsbi").greaterThan(t,v))throw new Error("invalid uint64: "+t.toString());return r("jsbi").equal(r("jsbi").bitwiseAnd(t,R),R)?r("jsbi").bitwiseNot(r("jsbi").signedRightShift(t,R)):r("jsbi").signedRightShift(t,R)},n.writeVarint32=function(t){if(t<0||t>y)throw new Error("writeVarint32 received out of range uint32: "+t);for(var e=t,n=0;;)if(e>>>7)this.$1.writeByte(e&127|128),n++,e>>>=7;else{this.$1.writeByte(e),n++;break}return n},n.readVarint32=function(){for(var e=0,t=0,n;;){if(n=this.$1.readByte(),e=(e|(n&127)<<t)>>>0,t+=7,(n&128)==0){if(t===35&&(n&240)!=0)throw new Error("result exceeded 32 bit limit");break}if(t>28)throw new Error("result exceeded 32 bit limit")}return e},n.writeVarint64=function(t){if(r("jsbi").lessThan(t,L)||r("jsbi").greaterThan(t,v))throw new Error("invalid uint64: "+t.toString());for(var e=t,n=0;;)if(r("jsbi").equal(r("jsbi").signedRightShift(e,E),L)){this.$1.writeByte(r("jsbi").toNumber(e)),n++;break}else{var o,a=(o=r("jsbi")).toNumber(o.bitwiseOr(o.bitwiseAnd(e,I),T));this.$1.writeByte(a),n++,e=o.signedRightShift(e,E)}return n},n.readVarint64=function(){for(var e=L,t=L,n;;){var o;if(n=(o=r("jsbi")).BigInt(this.$1.readByte()),e=o.bitwiseOr(e,o.leftShift(o.bitwiseAnd(n,I),t)),t=o.add(t,E),r("jsbi").equal(r("jsbi").bitwiseAnd(n,T),L)){if(r("jsbi").equal(t,k)&&r("jsbi").notEqual(n,R))throw new Error("result exceeded 64 bit limit");break}if(r("jsbi").greaterThan(t,S))throw new Error("result exceeded 64 bit limit")}return e},n.readString=function(){return o("Utf8ToString").Utf8ToString(this.readBinary())},n.getLastFieldId=function(){return this.$3},n.getLastField=function(){return this.$2},n.getBooleanFieldInfo=function(){return this.$4},n.getBooleanValue=function(){return this.$5},n.$9=function(t){return d[t]},n.$10=function(n){switch(n){case u.CT_STOP:return(e||(e=r("ThriftTypes"))).STOP;case u.CT_BOOLEAN_FALSE:case u.CT_BOOLEAN_TRUE:return(e||(e=r("ThriftTypes"))).BOOL;case u.CT_BYTE:return(e||(e=r("ThriftTypes"))).BYTE;case u.CT_I16:return(e||(e=r("ThriftTypes"))).I16;case u.CT_I32:return(e||(e=r("ThriftTypes"))).I32;case u.CT_I64:return(e||(e=r("ThriftTypes"))).I64;case u.CT_DOUBLE:return(e||(e=r("ThriftTypes"))).DOUBLE;case u.CT_FLOAT:return(e||(e=r("ThriftTypes"))).FLOAT;case u.CT_BINARY:return(e||(e=r("ThriftTypes"))).STRING;case u.CT_LIST:return(e||(e=r("ThriftTypes"))).LIST;case u.CT_SET:return(e||(e=r("ThriftTypes"))).SET;case u.CT_MAP:return(e||(e=r("ThriftTypes"))).MAP;case u.CT_STRUCT:return(e||(e=r("ThriftTypes"))).STRUCT;default:throw new Error("don't know what type")}},t})();l.default=x}),98);
__d("TNoOpWriteBuffer",[],(function(t,n,r,o,a,i){var e=(function(){function e(){this.$1=0}var t=e.prototype;return t.write=function(t){return this.$1+=t.length,t.length},t.writeByte=function(t){return this.$1++,1},t.writeFloatBE=function(t){return this.$1+=Float32Array.BYTES_PER_ELEMENT,Float32Array.BYTES_PER_ELEMENT},t.writeDoubleBE=function(t){return this.$1+=Float64Array.BYTES_PER_ELEMENT,Float64Array.BYTES_PER_ELEMENT},t.toByteArray=function(){throw new Error("operation not supported")},t.currentSize=function(){return this.$1},t.readByte=function(){throw new Error("operation not supported")},t.readBytes=function(t){throw new Error("operation not supported")},t.readFloatBE=function(){throw new Error("operation not supported")},t.readDoubleBE=function(){throw new Error("operation not supported")},e})();i.default=e}),66);
__d("TReadBuffer",[],(function(t,n,r,o,a,i){var e=(function(){function e(e){this.$1=e,this.$2=0}var t=e.prototype;return t.readByte=function(){if(this.$2<this.$1.length)return this.$1[this.$2++];throw new Error("no available byte to read")},t.readBytes=function(t){if(t<0)throw new Error("cannot readBytes of negative length: "+t);if(t+this.$2>this.$1.length)throw new Error("not enough bytes to read");var e=new Uint8Array(this.$1.buffer,this.$3(),t);return this.$2+=t,e},t.readFloatBE=function(){if(Float32Array.BYTES_PER_ELEMENT+this.$2>this.$1.length)throw new Error("not enough bytes to read");var e=new DataView(this.$1.buffer).getFloat32(this.$3());return this.$2+=Float32Array.BYTES_PER_ELEMENT,e},t.readDoubleBE=function(){if(Float64Array.BYTES_PER_ELEMENT+this.$2>this.$1.length)throw new Error("not enough bytes to read");var e=new DataView(this.$1.buffer).getFloat64(this.$3());return this.$2+=Float64Array.BYTES_PER_ELEMENT,e},t.$3=function(){return this.$2+this.$1.byteOffset},t.getCurrentCursor=function(){return this.$2},t.writeByte=function(t){throw new Error("operation not supported")},t.write=function(t){throw new Error("operation not supported")},t.toByteArray=function(){throw new Error("operation not supported")},t.writeFloatBE=function(t){throw new Error("operation not supported")},t.writeDoubleBE=function(t){throw new Error("operation not supported")},e})();i.default=e}),66);
__d("CompactSerializerPolyfill",["TCompactProtocolPolyfill","TNoOpWriteBuffer","TReadBuffer","TWriteBuffer"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t){var n=new(r("TReadBuffer"))(e),o=new(r("TCompactProtocolPolyfill"))(n);return t(o)}function s(t,n,r){try{return e(t,n)}catch(e){r!=null&&r(e)}return null}function u(e,t,n){n===void 0&&(n=!1);var o;if(n){var a=new(r("TNoOpWriteBuffer")),i=new(r("TCompactProtocolPolyfill"))(a);t(e,i),o=new(r("TWriteBuffer"))(a.currentSize())}else o=new(r("TWriteBuffer"));var l=new(r("TCompactProtocolPolyfill"))(o);return t(e,l),l.toByteArray()}function c(e,t,n,r){n===void 0&&(n=!1);try{return u(e,t,n)}catch(e){r!=null&&r(e)}return null}l.deserialize=e,l.deserializeNoThrow=s,l.serialize=u,l.serializeNoThrow=c}),98);
__d("ContextualConfigConstants",[],(function(t,n,r,o,a,i){"use strict";var e=1e3,l=", ",s={SAME:"same",NULL:"null",NNULL:"nnull",CATCH_ALL:"catch_all",EQ:"eq",NEQ:"neq",LT:"lt",LTE:"lte",GT:"gt",GTE:"gte",COR:"cor",CONTAINS:"contains",REGEX:"regex",IN:"in",NIN:"nin"},u={DENSE:"dense",MULTI_OUTPUT_RESOLVED:"multi-output-resolved",TABLE:"table"},c=[],d=[],m=[],p={BAD_BOOLEAN_FORMAT:"Bad boolean format",BAD_CONFIG:"Bad config",BAD_CONTEXT_IDENTIFIER:"Bad context identifier",BAD_CONTEXT_VALUE:"Bad context value",BAD_MONITORED_CONTEXTS:"Bad monitored contexts",BAD_NUMBER_FORMAT:"Bad number format",BAD_OUTPUT_NAME:"Bad output name",BAD_OUTPUT_TYPE:"Bad output type",BAD_VALUE_ORDER:"Bad values order",DUPLICATE_OUTPUT_NAME:"Duplicate output name",ILLEGAL_BOOLEAN_STRATEGY:"Illegal boolean strategy",ILLEGAL_BUCKET_VALUES:"Illegal bucket values",ILLEGAL_NUMERIC_STRATEGY:"Illegal numeric strategy",ILLEGAL_STRING_STRATEGY:"Illegal string strategy",INVALID_BOOLEAN:"Invalid boolean",INVALID_FLOAT:"Invalid float",INVALID_INTEGER:"Invalid integer",INVALID_STRING:"Invalid string",INVALID_VALUE_TYPE:"Invalid value type",MISMATCH_NUMBER_OF_VALUES:"Mismatching number of values",MISSING_BUCKETS:"Missing buckets",MISSING_BUCKET_MATCH:"Missing bucket match",MISSING_BUCKET_NAME:"Missing bucket name",MISSING_BUCKET_STRATEGY:"Missing bucket strategy",MISSING_CONTEXT_IN_CONFIG:"Missing context in config",MISSING_DEFAULT_VALUE:"Missing default value",MISSING_OUTPUTS_DEFINITION:"Missing outputs field definition",MISSING_RESULTS:"Missing results",MISSING_TABLE:"Missing table",MISSING_TABLE_ITEM_BUCKET:"Missing table item bucket",MISSING_TABLE_ITEM_VALUES:"Missing table item values",MISSING_VECTOR:"Missing vector",REGEX_SYNTAX_ERROR:"Regex syntax error",REQUESTED_PARAM_NOT_FOUND:"Requested param not found",RESULTS_VECTOR_SIZE_MISMATCH:"Results vector size mismatch",UNDECLARED_OUTPUT_PARAM:"Undeclared output param",UNKNOWN_BUCKET_DEFINITION:"Unknown bucket definition",UNKNOWN_CONFIG_TYPE:"Unknown config type",UNSUPPORTED_CONFIG_VERSION:"Unsupported config version"},_=10,f=", ",g={BOOL:"BOOL",FLOAT:"FLOAT",INT:"INT",STRING:"STRING"};i.ANALYTICS_SAMPLE_RATE=e,i.BUCKET_DELIMITER=l,i.CONTEXT_BUCKET_STRATEGY=s,i.CONFIG_TYPE=u,i.EMPTY_RESOLVED_CONTEXTS=c,i.EMPTY_RESOLVED_MONITORS=d,i.EMPTY_RESULT_PARAMS=m,i.ERROR=p,i.JSON_SUB_SAMPLE_RATE=_,i.LIST_DELIMITER=f,i.TYPE=g}),66);
__d("ContextualConfigResolvedContextsUtils",[],(function(t,n,r,o,a,i){"use strict";var e=function(t){var e=[];for(var n of t){var r=n.bucketIndex;if(r==null)break;e.push(r)}return e},l=function(t){var e=[];for(var n of t){var r=n.bucketName;if(r===void 0)break;e.push(r)}return e},s=function(t){return t.name},u=function(t){return t.map(s)},c=function(t){var e=[];for(var n of t){var r=n.value;if(r===void 0)break;e.push(r)}return e};i.getBucketIndices=e,i.getBucketNames=l,i.getContextNames=u,i.getContextValues=c}),66);
__d("ContextualConfigCollateExposureData",["ContextualConfigConstants","ContextualConfigResolvedContextsUtils"],(function(t,n,r,o,a,i,l){"use strict";var e=["cfg_ver_timestamp","policy_id","version","sample_rate"],s=function(t){return t.join(o("ContextualConfigConstants").LIST_DELIMITER)},u=function(n,r){for(var t of e)r[t]!=null&&(n[t]=r[t]);r.name&&(n.config_name=r.name)},c=function(t,n){var e=n[0],r=n[1],a=n[2],i=n[3];e!=null&&(t.exception=e.message),t.result=s(r.map(function(e){return e.value}))||"INVALID",t.context=s(o("ContextualConfigResolvedContextsUtils").getContextNames(a)),t.context_value=s(o("ContextualConfigResolvedContextsUtils").getContextValues(a)),t.bucket_name=s(o("ContextualConfigResolvedContextsUtils").getBucketNames(a)),t.monitor=s(o("ContextualConfigResolvedContextsUtils").getContextNames(i)),t.monitor_value=s(o("ContextualConfigResolvedContextsUtils").getContextValues(i))};function d(e,t,n){var r={sample_rate:o("ContextualConfigConstants").ANALYTICS_SAMPLE_RATE};return u(r,e),c(r,t),n&&(r.config_contents=JSON.stringify(e)),r}l.default=d}),98);
__d("ContextualConfigExposureEvent",["Random"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(){function e(e,t,n){this.$2=e,this.$4=o("Random").random()<1/e.sample_rate,this.$3=t,this.$1=n}var t=e.prototype;return t.getData=function(){return this.$2},t.log=function(t){var e=this.$2,n=this.$3,r=this.$4;return t&&n(e),r&&this.$1(e),this},t.isSampled=function(){return this.$4},e})();l.default=e}),98);
__d("ContextualConfigExposureLoggerFactory",["ContextualConfigExposureEvent"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(){function e(e,t){this.$2=e,this.$1=t}var t=e.prototype;return t.createEvent=function(t){var e=new(r("ContextualConfigExposureEvent"))(t,this.$2,this.$1);return e},e})();function s(t,n){return new e(t,n)}l.default=s}),98);
__d("MarauderLogger",["Banzai","CacheStorage","MarauderConfig"],(function(t,n,r,o,a,i){var e="client_event",l="navigation",s=18e4,u="marauder",c="marauder_last_event_time",d="marauder_last_session_id",m={},p=[],_=!1,f=null,g=null,h=null,y=0,C,b,v=!1,S=null;function R(){P().set(c,L())}n("Banzai").subscribe(n("Banzai").SHUTDOWN,R);function L(){return C=C||P().get(c)||0,C}function E(){v||(b=P().get(d),v=!0);var e=Date.now();return(!b||e-s>L())&&(b=e.toString(16)+"-"+(~~(Math.random()*16777215)).toString(16),P().set(d,b)),b}function k(){var e;return{user_agent:window.navigator.userAgent,screen_height:window.screen.availHeight,screen_width:window.screen.availWidth,density:(e=window.screen.devicePixelRatio)!=null?e:null,platform:window.navigator.platform||null,locale:window.navigator.language||null}}function I(){return{locale:navigator.language}}function T(e,t,n,r,o,a,i){var l=i!=null&&i!=0?i:Date.now();C=i!=null&&i!=0?Date.now():l;var s=t!=null&&t!=""?t:f;return{name:e,time:l/1e3,module:s,obj_type:r,obj_id:o,uuid:a,extra:n}}function D(e,t,n){return T("content",null,{flags:t},null,null,e,n)}function x(e){var t=window.__mrdr;if(t)for(var n in t){var r=t[n];if(r[3]!==0){if(delete t[n],n==="1")if(h!==null)n=h;else continue;e.push(D(n,1,r[1])),e.push(D(n,2,r[2])),e.push(D(n,3,r[3]))}}}function $(t,r){if(x(t),t.length!==0){_&&t.push(T("counters",null,m));var o=n("Banzai").BASIC;r==="vital"&&(o=n("Banzai").VITAL);var a=n("MarauderConfig").gk_enabled;if(y===0&&a&&(t.push(T("device_status",null,I())),o={delay:5e3}),r==="signal"&&(o={signal:!0}),a&&Math.random()<.01&&t.push(T("device_info",null,k())),h!==null)for(var i=0;i<t.length;i++){var l=t[i];l.uuid==null&&(l.uuid=h)}var s={app_ver:n("MarauderConfig").app_version,data:t,device_id:void 0,log_type:e,seq:y++,session_id:E()},c=P().get("device_id");c&&(s.device_id=c),m={},_=!1,n("Banzai").post(u,s,o)}}function P(){return S||(S=new(n("CacheStorage"))("localstorage","")),S}function N(e){m[e]||(m[e]=0),m[e]++,_=!0}function M(e,t,n,r,o,a,i,l){$([T(e,t,n,r,o,a,i)],l)}function w(e,t){f!==t&&(p.push(T(l,f,{dest_module:t,source_url:g,destination_url:e})),f=t,g=e)}function A(e,t){f!==t&&(h=null,w(e,t))}function F(e,t,n){M(t?"show_module":"hide_module",e,n)}function O(e){f=e}function B(){return f}function W(e){h===null&&(h=e,e!==null&&($(p),p=[]))}a.exports={count:N,log:M,navigateTo:A,navigateWithinSession:w,toggleModule:F,setUUID:W,setNavigationModule:O,getNavigationModule:B}}),null);
__d("ContextualConfigExposureLogger",["ContextualConfigExposureLoggerFactory","MarauderLogger"],(function(t,n,r,o,a,i,l){"use strict";var e=function(t){},s=function(t){o("MarauderLogger").log("contextual_config_exposure","",t)},u=r("ContextualConfigExposureLoggerFactory")(e,s);l.default=u}),98);
__d("ContextualConfigAssert",[],(function(t,n,r,o,a,i){"use strict";function e(e,t){if(e===!1)throw new Error(t)}i.default=e}),66);
__d("ContextualConfigValidators",["ContextualConfigConstants"],(function(t,n,r,o,a,i,l){"use strict";var e=function(t){return Array.isArray(t)},s=function(t){return typeof t=="boolean"},u=function(t){return t!=null},c=function(t){return(function(e){return Object.prototype.hasOwnProperty.call(t,e)})},d=function(t){return p(t)&&t%1===0},m=function(t){return _(t)&&t.length>0},p=function(t){return typeof t=="number"&&!isNaN(t)&&t!==1/0&&t!==-1/0},_=function(t){return typeof t=="string"},f=function(t){switch(t){case o("ContextualConfigConstants").TYPE.BOOL:case o("ContextualConfigConstants").TYPE.FLOAT:case o("ContextualConfigConstants").TYPE.INT:case o("ContextualConfigConstants").TYPE.STRING:return!0;default:return!1}};l.isArray=e,l.isBoolean=s,l.isDefined=u,l.isKey=c,l.isInteger=d,l.isNonEmptyString=m,l.isNumber=p,l.isString=_,l.isType=f}),98);
__d("ContextualConfigParseBoolean",["ContextualConfigConstants"],(function(t,n,r,o,a,i,l){"use strict";function e(e){switch(e.toUpperCase()){case"TRUE":return!0;case"FALSE":return!1;default:throw new Error(o("ContextualConfigConstants").ERROR.BAD_BOOLEAN_FORMAT)}}l.default=e}),98);
__d("ContextualConfigParsePredBoolean",["ContextualConfigConstants","ContextualConfigParseBoolean"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t){var n;switch(t){case o("ContextualConfigConstants").CONTEXT_BUCKET_STRATEGY.SAME:var a=r("ContextualConfigParseBoolean")(e);n=function(t){return t===a};break;case o("ContextualConfigConstants").CONTEXT_BUCKET_STRATEGY.NULL:n=function(t){return t==null};break;case o("ContextualConfigConstants").CONTEXT_BUCKET_STRATEGY.NNULL:n=function(t){return t!=null};break;case o("ContextualConfigConstants").CONTEXT_BUCKET_STRATEGY.CATCH_ALL:n=function(t){return!0};break;default:throw new Error(o("ContextualConfigConstants").ERROR.ILLEGAL_BOOLEAN_STRATEGY)}return function(e){return n(e)}}l.default=e}),98);
__d("ContextualConfigParseFloat",["ContextualConfigAssert","ContextualConfigConstants","ContextualConfigValidators"],(function(t,n,r,o,a,i,l){"use strict";var e,s=/^[-\+]?([1-9]\d*|0)(\.\d+)?$/,u=function(t){return s.test(t)};function c(t){(e||(e=r("ContextualConfigAssert")))(u(t),o("ContextualConfigConstants").ERROR.BAD_NUMBER_FORMAT);var n=parseFloat(t);return e(o("ContextualConfigValidators").isNumber(n),o("ContextualConfigConstants").ERROR.BAD_NUMBER_FORMAT),n}l.default=c}),98);
__d("ContextualConfigParseInteger",["ContextualConfigAssert","ContextualConfigConstants","ContextualConfigValidators"],(function(t,n,r,o,a,i,l){"use strict";var e,s=/^[-\+]?([1-9]\d*|0)$/,u=function(t){return s.test(t)};function c(t){(e||(e=r("ContextualConfigAssert")))(u(t),o("ContextualConfigConstants").ERROR.BAD_NUMBER_FORMAT);var n=parseInt(t,10);return e(o("ContextualConfigValidators").isNumber(n),o("ContextualConfigConstants").ERROR.BAD_NUMBER_FORMAT),n}l.default=c}),98);
__d("ContextualConfigPredAssertions",["ContextualConfigAssert","ContextualConfigConstants"],(function(t,n,r,o,a,i,l){"use strict";var e,s=function(n){return(e||(e=r("ContextualConfigAssert")))(n>0,o("ContextualConfigConstants").ERROR.MISMATCH_NUMBER_OF_VALUES)},u=function(n,a){return(e||(e=r("ContextualConfigAssert")))(n===a,o("ContextualConfigConstants").ERROR.MISMATCH_NUMBER_OF_VALUES)},c=function(n,a){return(e||(e=r("ContextualConfigAssert")))(n<a,o("ContextualConfigConstants").ERROR.BAD_VALUE_ORDER)};l.assertHasValues=s,l.assertNumberOfValues=u,l.assertValueOrder=c}),98);
__d("ContextualConfigParsePredNumeric",["ContextualConfigConstants","ContextualConfigParseFloat","ContextualConfigParseInteger","ContextualConfigPredAssertions","ContextualConfigValidators"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(t,n,a,i){var l=a.map(i?r("ContextualConfigParseInteger"):e||(e=r("ContextualConfigParseFloat"))),s;switch(n){case o("ContextualConfigConstants").CONTEXT_BUCKET_STRATEGY.SAME:var u=i?r("ContextualConfigParseInteger")(t):(e||(e=r("ContextualConfigParseFloat")))(t);s=function(t){return i&&!o("ContextualConfigValidators").isInteger(t)?!1:t===u};break;case o("ContextualConfigConstants").CONTEXT_BUCKET_STRATEGY.NULL:s=function(t){return t==null};break;case o("ContextualConfigConstants").CONTEXT_BUCKET_STRATEGY.NNULL:s=function(t){return t!=null};break;case o("ContextualConfigConstants").CONTEXT_BUCKET_STRATEGY.CATCH_ALL:s=function(t){return!0};break;case o("ContextualConfigConstants").CONTEXT_BUCKET_STRATEGY.COR:o("ContextualConfigPredAssertions").assertNumberOfValues(l.length,2),o("ContextualConfigPredAssertions").assertValueOrder(l[0],l[1]),s=function(t){return typeof t!="number"||i&&!o("ContextualConfigValidators").isInteger(t)?!1:t>=l[0]&&t<l[1]};break;case o("ContextualConfigConstants").CONTEXT_BUCKET_STRATEGY.LT:o("ContextualConfigPredAssertions").assertNumberOfValues(l.length,1),s=function(t){return typeof t!="number"||i&&!o("ContextualConfigValidators").isInteger(t)?!1:t<l[0]};break;case o("ContextualConfigConstants").CONTEXT_BUCKET_STRATEGY.LTE:o("ContextualConfigPredAssertions").assertNumberOfValues(l.length,1),s=function(t){return typeof t!="number"||i&&!o("ContextualConfigValidators").isInteger(t)?!1:t<=l[0]};break;case o("ContextualConfigConstants").CONTEXT_BUCKET_STRATEGY.EQ:o("ContextualConfigPredAssertions").assertNumberOfValues(l.length,1),s=function(t){return typeof t!="number"||i&&!o("ContextualConfigValidators").isInteger(t)?!1:t===l[0]};break;case o("ContextualConfigConstants").CONTEXT_BUCKET_STRATEGY.NEQ:o("ContextualConfigPredAssertions").assertNumberOfValues(l.length,1),s=function(t){return typeof t!="number"||i&&!o("ContextualConfigValidators").isInteger(t)?!1:t!==l[0]};break;case o("ContextualConfigConstants").CONTEXT_BUCKET_STRATEGY.GT:o("ContextualConfigPredAssertions").assertNumberOfValues(l.length,1),s=function(t){return typeof t!="number"||i&&!o("ContextualConfigValidators").isInteger(t)?!1:t>l[0]};break;case o("ContextualConfigConstants").CONTEXT_BUCKET_STRATEGY.GTE:o("ContextualConfigPredAssertions").assertNumberOfValues(l.length,1),s=function(t){return typeof t!="number"||i&&!o("ContextualConfigValidators").isInteger(t)?!1:t>=l[0]};break;default:throw new Error(o("ContextualConfigConstants").ERROR.ILLEGAL_NUMERIC_STRATEGY)}return function(e){return s(e)}}l.default=s}),98);
__d("ContextualConfigParseRegExp",["ContextualConfigConstants"],(function(t,n,r,o,a,i,l){"use strict";var e=/^\/(.+)\/(.*)$/;function s(t){try{var n=t.match(e);return n!=null?new RegExp(n[1],n[2]):new RegExp(t)}catch(e){throw new Error(o("ContextualConfigConstants").ERROR.REGEX_SYNTAX_ERROR)}}l.default=s}),98);
__d("ContextualConfigParsePredString",["ContextualConfigConstants","ContextualConfigParseRegExp","ContextualConfigPredAssertions"],(function(t,n,r,o,a,i,l){"use strict";var e=function(t){if(typeof t!="string")throw new Error(o("ContextualConfigConstants").ERROR.INVALID_VALUE_TYPE);return t},s=function(n){var t=[];for(var r of n)t.push(e(r));return t};function u(e,t,n){var a=s(n),i;switch(t){case o("ContextualConfigConstants").CONTEXT_BUCKET_STRATEGY.SAME:i=function(n){return typeof n!="string"?!1:n===e};break;case o("ContextualConfigConstants").CONTEXT_BUCKET_STRATEGY.NULL:i=function(t){return t==null};break;case o("ContextualConfigConstants").CONTEXT_BUCKET_STRATEGY.NNULL:i=function(t){return t!=null};break;case o("ContextualConfigConstants").CONTEXT_BUCKET_STRATEGY.CATCH_ALL:i=function(t){return!0};break;case o("ContextualConfigConstants").CONTEXT_BUCKET_STRATEGY.IN:o("ContextualConfigPredAssertions").assertHasValues(a.length),i=function(t){return typeof t!="string"?!1:a.indexOf(t)!==-1};break;case o("ContextualConfigConstants").CONTEXT_BUCKET_STRATEGY.NIN:o("ContextualConfigPredAssertions").assertHasValues(a.length),i=function(t){return typeof t!="string"?!1:a.indexOf(t)===-1};break;case o("ContextualConfigConstants").CONTEXT_BUCKET_STRATEGY.CONTAINS:o("ContextualConfigPredAssertions").assertNumberOfValues(a.length,1),i=function(t){return typeof t!="string"?!1:t.indexOf(a[0])!==-1};break;case o("ContextualConfigConstants").CONTEXT_BUCKET_STRATEGY.REGEX:o("ContextualConfigPredAssertions").assertNumberOfValues(a.length,1);var l=r("ContextualConfigParseRegExp")(a[0]);i=function(t){return typeof t!="string"?!1:l.test(t)};break;default:throw new Error(o("ContextualConfigConstants").ERROR.ILLEGAL_STRING_STRATEGY)}return function(e){return i(e)}}l.default=u}),98);
__d("ContextualConfigParseContextBuckets",["ContextualConfigAssert","ContextualConfigConstants","ContextualConfigParsePredBoolean","ContextualConfigParsePredNumeric","ContextualConfigParsePredString","ContextualConfigValidators"],(function(t,n,r,o,a,i,l){"use strict";var e,s=function(n){return(e||(e=r("ContextualConfigAssert")))(o("ContextualConfigValidators").isDefined(n),o("ContextualConfigConstants").ERROR.MISSING_BUCKETS)},u=function(n){return(e||(e=r("ContextualConfigAssert")))(o("ContextualConfigValidators").isArray(n),o("ContextualConfigConstants").ERROR.MISSING_BUCKETS)},c=o("ContextualConfigValidators").isKey(o("ContextualConfigConstants").CONTEXT_BUCKET_STRATEGY),d=function(n){return(e||(e=r("ContextualConfigAssert")))(o("ContextualConfigValidators").isString(n)&&c(n.toUpperCase()),o("ContextualConfigConstants").ERROR.MISSING_BUCKET_STRATEGY)},m=function(n){return(e||(e=r("ContextualConfigAssert")))(o("ContextualConfigValidators").isArray(n),o("ContextualConfigConstants").ERROR.ILLEGAL_BUCKET_VALUES)},p=function(n){return(e||(e=r("ContextualConfigAssert")))(o("ContextualConfigValidators").isNonEmptyString(n),o("ContextualConfigConstants").ERROR.MISSING_BUCKET_NAME)},_=function(t,n){var e=n.name;p(e);var a=n.strategy;d(a);var i=n.values||[];switch(m(i),t){case o("ContextualConfigConstants").TYPE.BOOL:return r("ContextualConfigParsePredBoolean")(e,a);case o("ContextualConfigConstants").TYPE.FLOAT:return r("ContextualConfigParsePredNumeric")(e,a,i,!1);case o("ContextualConfigConstants").TYPE.INT:return r("ContextualConfigParsePredNumeric")(e,a,i,!0);case o("ContextualConfigConstants").TYPE.STRING:return r("ContextualConfigParsePredString")(e,a,i);default:throw new Error(o("ContextualConfigConstants").ERROR.UNKNOWN_BUCKET_DEFINITION)}},f=function(t,n){s(n);var e=n.name;return p(e),{name:e,pred:_(t,n)}};function g(e,t){return u(t),t.map(function(t){return f(e,t)})}l.default=g}),98);
__d("ContextualConfigParseContexts",["ContextualConfigAssert","ContextualConfigConstants","ContextualConfigParseContextBuckets","ContextualConfigValidators"],(function(t,n,r,o,a,i,l){"use strict";var e,s=function(n){return(e||(e=r("ContextualConfigAssert")))(o("ContextualConfigValidators").isDefined(n),o("ContextualConfigConstants").ERROR.BAD_CONTEXT_IDENTIFIER)},u=function(n){return(e||(e=r("ContextualConfigAssert")))(o("ContextualConfigValidators").isArray(n)&&n.length>0,o("ContextualConfigConstants").ERROR.MISSING_CONTEXT_IN_CONFIG)},c=function(n){return(e||(e=r("ContextualConfigAssert")))(o("ContextualConfigValidators").isNonEmptyString(n),o("ContextualConfigConstants").ERROR.BAD_CONTEXT_IDENTIFIER)},d=function(n){return(e||(e=r("ContextualConfigAssert")))(o("ContextualConfigValidators").isType(n),o("ContextualConfigConstants").ERROR.BAD_CONTEXT_IDENTIFIER)},m=function(t){s(t);var e=t.name,n=t.type,o=t.buckets;return c(e),d(n),{name:e,type:n,buckets:r("ContextualConfigParseContextBuckets")(n,o)}};function p(e){return u(e),e.map(m)}l.default=p}),98);
__d("ContextualConfigIsEqualParams",[],(function(t,n,r,o,a,i){"use strict";function e(e,t){if(e.length!=t.length)return!1;for(var n=0;n<e.length;n+=1){var r=e[n],o=t[n];if(r.name!==o.name||r.type!==o.type)return!1}return!0}i.default=e}),66);
__d("ContextualConfigParseResultParamValue",["ContextualConfigAssert","ContextualConfigConstants","ContextualConfigParseBoolean","ContextualConfigParseFloat","ContextualConfigParseInteger","ContextualConfigValidators"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=function(n){return(e||(e=r("ContextualConfigAssert")))(o("ContextualConfigValidators").isString(n),o("ContextualConfigConstants").ERROR.INVALID_STRING)};function c(e,t){switch(u(t),e){case o("ContextualConfigConstants").TYPE.BOOL:return r("ContextualConfigParseBoolean")(t);case o("ContextualConfigConstants").TYPE.FLOAT:return(s||(s=r("ContextualConfigParseFloat")))(t);case o("ContextualConfigConstants").TYPE.INT:return r("ContextualConfigParseInteger")(t);case o("ContextualConfigConstants").TYPE.STRING:return t;default:throw new Error(o("ContextualConfigConstants").ERROR.INVALID_VALUE_TYPE)}}l.default=c}),98);
__d("ContextualConfigParseResultParams",["ContextualConfigAssert","ContextualConfigConstants","ContextualConfigParseResultParamValue","ContextualConfigValidators"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=function(n){return(e||(e=r("ContextualConfigAssert")))(o("ContextualConfigValidators").isArray(n),o("ContextualConfigConstants").ERROR.MISSING_RESULTS)},c=function(n){return(e||(e=r("ContextualConfigAssert")))(o("ContextualConfigValidators").isDefined(n),o("ContextualConfigConstants").ERROR.BAD_CONTEXT_VALUE)},d=function(n){return(e||(e=r("ContextualConfigAssert")))(o("ContextualConfigValidators").isNonEmptyString(n),o("ContextualConfigConstants").ERROR.BAD_CONTEXT_VALUE)},m=function(n){return(e||(e=r("ContextualConfigAssert")))(o("ContextualConfigValidators").isType(n),o("ContextualConfigConstants").ERROR.BAD_CONTEXT_VALUE)},p=function(t,n){for(var e of t)if(e.name===n)return e.type;throw new Error(o("ContextualConfigConstants").ERROR.UNDECLARED_OUTPUT_PARAM)},_=function(t){return(function(e){c(e);var n=e.name;d(n);var o=p(t,n);m(o);var a=(s||(s=r("ContextualConfigParseResultParamValue")))(o,e.value);return{name:n,type:o,value:a}})};function f(e,t){return u(t),t.map(_(e))}l.default=f}),98);
__d("ContextualConfigParseDenseResultParams",["ContextualConfigAssert","ContextualConfigConstants","ContextualConfigIsEqualParams","ContextualConfigParseResultParams"],(function(t,n,r,o,a,i,l){"use strict";var e,s=function(n,a){return(e||(e=r("ContextualConfigAssert")))(r("ContextualConfigIsEqualParams")(n,a),o("ContextualConfigConstants").ERROR.RESULTS_VECTOR_SIZE_MISMATCH)};function u(e,t){var n=r("ContextualConfigParseResultParams")(e,t.map(function(t,n){return{name:e[n].name,value:t}}));return s(e,n),n}l.default=u}),98);
__d("ContextualConfigParseDenseDefaults",["ContextualConfigConstants","ContextualConfigParseDenseResultParams"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t){try{return r("ContextualConfigParseDenseResultParams")(e,t)}catch(e){throw new Error(o("ContextualConfigConstants").ERROR.MISSING_DEFAULT_VALUE)}}l.default=e}),98);
__d("ContextualConfigParseMonitors",["ContextualConfigAssert","ContextualConfigConstants","ContextualConfigValidators"],(function(t,n,r,o,a,i,l){"use strict";var e,s=function(n){return(e||(e=r("ContextualConfigAssert")))(o("ContextualConfigValidators").isDefined(n),o("ContextualConfigConstants").ERROR.BAD_CONTEXT_IDENTIFIER)},u=function(n){return(e||(e=r("ContextualConfigAssert")))(o("ContextualConfigValidators").isArray(n),o("ContextualConfigConstants").ERROR.BAD_MONITORED_CONTEXTS)},c=function(n){return(e||(e=r("ContextualConfigAssert")))(o("ContextualConfigValidators").isNonEmptyString(n),o("ContextualConfigConstants").ERROR.BAD_CONTEXT_IDENTIFIER)},d=function(n){return(e||(e=r("ContextualConfigAssert")))(o("ContextualConfigValidators").isType(n),o("ContextualConfigConstants").ERROR.BAD_CONTEXT_IDENTIFIER)},m=function(t){s(t);var e=t.name,n=t.type;return c(e),d(n),{name:e,type:n}};function p(e){return u(e),e.map(m)}l.default=p}),98);
__d("ContextualConfigParseOutputParams",["ContextualConfigAssert","ContextualConfigConstants","ContextualConfigValidators"],(function(t,n,r,o,a,i,l){var e,s=function(n){return(e||(e=r("ContextualConfigAssert")))(o("ContextualConfigValidators").isArray(n),o("ContextualConfigConstants").ERROR.MISSING_OUTPUTS_DEFINITION)},u=function(n){return(e||(e=r("ContextualConfigAssert")))(o("ContextualConfigValidators").isType(n),o("ContextualConfigConstants").ERROR.BAD_OUTPUT_TYPE)},c=function(n){return(e||(e=r("ContextualConfigAssert")))(o("ContextualConfigValidators").isNonEmptyString(n),o("ContextualConfigConstants").ERROR.BAD_OUTPUT_NAME)},d=function(n){return(e||(e=r("ContextualConfigAssert")))(m(n),o("ContextualConfigConstants").ERROR.DUPLICATE_OUTPUT_NAME)},m=function(t){var e={};for(var n of t){if(e[n.name])return!1;e[n.name]=!0}return!0},p=function(t){return c(t.name),u(t.type),t};function _(e){s(e);var t=e.map(p);return d(t),t}l.default=_}),98);
__d("ContextualConfigParseVector",["ContextualConfigAssert","ContextualConfigConstants","ContextualConfigParseResultParamValue","ContextualConfigValidators"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=function(n){return(e||(e=r("ContextualConfigAssert")))(o("ContextualConfigValidators").isArray(n),o("ContextualConfigConstants").ERROR.MISSING_VECTOR)},c=function(n,a){return(e||(e=r("ContextualConfigAssert")))(n===a,o("ContextualConfigConstants").ERROR.RESULTS_VECTOR_SIZE_MISMATCH)},d=function(t,n){c(t.length,n.length);for(var e=0;e<t.length;e+=1){var o=t[e].type,a=n[e];(s||(s=r("ContextualConfigParseResultParamValue")))(o,a)}},m=function(t){return t.reduce(function(e,t){var n=t.buckets;return e*n.length},1)};function p(e,t,n){u(n);var r=m(t),o=e.length;c(r*o,n.length);for(var a=0;a<r;a+=1){var i=a*o;d(e,n.slice(i,i+o))}return n}l.default=p}),98);
__d("ContextualConfigResolveContexts",["ContextualConfigConstants"],(function(t,n,r,o,a,i,l){"use strict";var e=function(t,n){for(var e=0;e<t.length;e+=1){var r=t[e];try{if(r.pred(n))return[r.name,e]}catch(e){return null}}return null};function s(t,n,r){var a=null,i=t.map(function(t){var i=t.name,l={name:i};if(a!=null)return l;var s;if(r[i]!=null?s=r[i]:n[i]!=null?s=n[i]():s=null,l.value=s,t.buckets!=null){var u=e(t.buckets,s);if(u==null)return a=new Error(o("ContextualConfigConstants").ERROR.MISSING_BUCKET_MATCH),l;var c=u[0],d=u[1];l.bucketName=c,l.bucketIndex=d}return l});return[a,i]}l.default=s}),98);
__d("DenseContextualConfig",["ContextualConfigAssert","ContextualConfigConstants","ContextualConfigParseContexts","ContextualConfigParseDenseDefaults","ContextualConfigParseDenseResultParams","ContextualConfigParseMonitors","ContextualConfigParseOutputParams","ContextualConfigParseVector","ContextualConfigResolveContexts","ContextualConfigResolvedContextsUtils","ContextualConfigValidators","getErrorSafe"],(function(t,n,r,o,a,i,l){"use strict";var e,s=function(n){return(e||(e=r("ContextualConfigAssert")))(o("ContextualConfigValidators").isDefined(n),o("ContextualConfigConstants").ERROR.BAD_CONFIG)},u=function(t){for(var e=[],n=1,r=t.length-1;r>=0;r-=1)e.push(n),n*=t[r].buckets.length;return e.reverse()},c=function(t,n,o,a){try{var e=n.slice(o,o+t.length);return[null,r("ContextualConfigParseDenseResultParams")(t,e)]}catch(e){return[r("getErrorSafe")(e),a]}},d=function(n,o,a){try{var t=a.reduce(function(t,o,a){return(e||(e=r("ContextualConfigAssert")))(a<n.length,"Auxillery index out of range."),t+n[a]*o},0);return[null,t*o]}catch(e){return[r("getErrorSafe")(e),-1]}},m=(function(){function e(e,t){s(e),this.globalContextProviders=babelHelpers.extends({},t);var n=r("ContextualConfigParseOutputParams")(e.outputs),o=r("ContextualConfigParseContexts")(e.contexts);this.aux=u(o),this.contexts=o,this.defaults=r("ContextualConfigParseDenseDefaults")(n,e.vectorDefaults),this.monitors=e.monitors!=null?r("ContextualConfigParseMonitors")(e.monitors):[],this.outputs=n,this.vector=r("ContextualConfigParseVector")(n,o,e.vector)}var t=e.prototype;return t.resolve=function(t){try{return this.unsafeResolve(t)}catch(e){return[r("getErrorSafe")(e),this.defaults,o("ContextualConfigConstants").EMPTY_RESOLVED_CONTEXTS,o("ContextualConfigConstants").EMPTY_RESOLVED_MONITORS]}},t.unsafeResolve=function(t){var e=this.aux,n=this.globalContextProviders,a=this.contexts,i=this.defaults,l=this.monitors,s=this.outputs,u=this.vector,m=r("ContextualConfigResolveContexts")(a,n,t),p=m[0],_=m[1];if(p!=null)return[p,i,_,o("ContextualConfigConstants").EMPTY_RESOLVED_MONITORS];var f=d(e,s.length,o("ContextualConfigResolvedContextsUtils").getBucketIndices(_)),g=f[0],h=f[1];if(g!=null)return[g,i,_,o("ContextualConfigConstants").EMPTY_RESOLVED_MONITORS];var y=c(s,u,h,i),C=y[0],b=y[1];if(C!=null)return[C,b,_,o("ContextualConfigConstants").EMPTY_RESOLVED_MONITORS];var v=r("ContextualConfigResolveContexts")(l,n,t),S=v[0],R=v[1];return S!=null?[S,b,_,o("ContextualConfigConstants").EMPTY_RESOLVED_MONITORS]:[null,b,_,R]},e})();l.default=m}),98);
__d("MultiOutputResolvedContextualConfig",["ContextualConfigAssert","ContextualConfigConstants","ContextualConfigParseMonitors","ContextualConfigParseOutputParams","ContextualConfigParseResultParams","ContextualConfigResolveContexts","ContextualConfigValidators","getErrorSafe"],(function(t,n,r,o,a,i,l){"use strict";var e,s=function(n){return(e||(e=r("ContextualConfigAssert")))(o("ContextualConfigValidators").isDefined(n),o("ContextualConfigConstants").ERROR.BAD_CONFIG)},u=(function(){function e(e,t){s(e),this.globalContextProviders=babelHelpers.extends({},t);var n=r("ContextualConfigParseOutputParams")(e.outputs);this.monitors=e.monitors!=null?r("ContextualConfigParseMonitors")(e.monitors):[],this.values=r("ContextualConfigParseResultParams")(n,e.values)}var t=e.prototype;return t.resolve=function(t){try{return this.unsafeResolve(t)}catch(e){return[r("getErrorSafe")(e),this.values,o("ContextualConfigConstants").EMPTY_RESOLVED_CONTEXTS,o("ContextualConfigConstants").EMPTY_RESOLVED_MONITORS]}},t.unsafeResolve=function(t){var e=this.globalContextProviders,n=this.monitors,a=this.values,i=r("ContextualConfigResolveContexts")(n,e,t),l=i[0],s=i[1];return l!=null?[l,a,o("ContextualConfigConstants").EMPTY_RESOLVED_CONTEXTS,o("ContextualConfigConstants").EMPTY_RESOLVED_MONITORS]:[null,a,o("ContextualConfigConstants").EMPTY_RESOLVED_CONTEXTS,s]},e})();l.default=u}),98);
__d("ContextualConfigMergePartialResultParams",[],(function(t,n,r,o,a,i){"use strict";function e(e,t){var n={};for(var r of t)n[r.name]=r;var o=[];for(var a of e){var i=n[a.name];o.push(i!=null&&i.name===a.name&&i.type===a.type?i:a)}return o}i.default=e}),66);
__d("ContextualConfigParseDefaults",["ContextualConfigAssert","ContextualConfigConstants","ContextualConfigIsEqualParams","ContextualConfigParseResultParams"],(function(t,n,r,o,a,i,l){"use strict";var e,s=function(n,a){return(e||(e=r("ContextualConfigAssert")))(r("ContextualConfigIsEqualParams")(n,a),o("ContextualConfigConstants").ERROR.MISSING_DEFAULT_VALUE)};function u(e,t){var n=r("ContextualConfigParseResultParams")(e,t);return s(e,n),n}l.default=u}),98);
__d("ContextualConfigParseTable",["ContextualConfigAssert","ContextualConfigConstants","ContextualConfigParseResultParams","ContextualConfigValidators"],(function(t,n,r,o,a,i,l){"use strict";var e,s=function(n){return(e||(e=r("ContextualConfigAssert")))(o("ContextualConfigValidators").isArray(n),o("ContextualConfigConstants").ERROR.MISSING_TABLE)},u=function(n){return(e||(e=r("ContextualConfigAssert")))(o("ContextualConfigValidators").isDefined(n),o("ContextualConfigConstants").ERROR.MISSING_TABLE)},c=function(n){return(e||(e=r("ContextualConfigAssert")))(o("ContextualConfigValidators").isNonEmptyString(n),o("ContextualConfigConstants").ERROR.MISSING_TABLE_ITEM_BUCKET)},d=function(n){return(e||(e=r("ContextualConfigAssert")))(o("ContextualConfigValidators").isArray(n),o("ContextualConfigConstants").ERROR.MISSING_TABLE_ITEM_VALUES)},m=function(t,n){u(n);var e=n.bucket,o=n.values;return c(e),d(o),{bucket:e,values:r("ContextualConfigParseResultParams")(t,o)}};function p(e,t){return s(t),t.reduce(function(t,n){var r=m(e,n);return t[r.bucket]=r.values,t},{})}l.default=p}),98);
__d("TableContextualConfig",["ContextualConfigAssert","ContextualConfigConstants","ContextualConfigMergePartialResultParams","ContextualConfigParseContexts","ContextualConfigParseDefaults","ContextualConfigParseMonitors","ContextualConfigParseOutputParams","ContextualConfigParseTable","ContextualConfigResolveContexts","ContextualConfigResolvedContextsUtils","ContextualConfigValidators"],(function(t,n,r,o,a,i,l){"use strict";var e,s=[],u=function(n){return(e||(e=r("ContextualConfigAssert")))(o("ContextualConfigValidators").isDefined(n),o("ContextualConfigConstants").ERROR.BAD_CONFIG)},c=(function(){function e(e,t){u(e),this.globalContextProviders=babelHelpers.extends({},t);var n=r("ContextualConfigParseOutputParams")(e.outputs);this.contexts=r("ContextualConfigParseContexts")(e.contexts),this.defaults=r("ContextualConfigParseDefaults")(n,e.defaults),this.monitors=e.monitors!=null?r("ContextualConfigParseMonitors")(e.monitors):[],this.table=r("ContextualConfigParseTable")(n,e.table)}var t=e.prototype;return t.resolve=function(t){try{return this.unsafeResolve(t)}catch(e){return[e,this.defaults,o("ContextualConfigConstants").EMPTY_RESOLVED_CONTEXTS,o("ContextualConfigConstants").EMPTY_RESOLVED_MONITORS]}},t.unsafeResolve=function(t){var e=this.globalContextProviders,n=this.contexts,a=this.defaults,i=this.monitors,l=this.table,u=r("ContextualConfigResolveContexts")(n,e,t),c=u[0],d=u[1];if(c!=null)return[c,a,d,[]];var m=o("ContextualConfigResolvedContextsUtils").getBucketNames(d).join(o("ContextualConfigConstants").BUCKET_DELIMITER),p=l[m]||s,_=r("ContextualConfigMergePartialResultParams")(a,p),f=r("ContextualConfigResolveContexts")(i,e,t),g=f[0],h=f[1];return g!=null?[g,_,d,[]]:[null,_,d,h]},e})();l.default=c}),98);
__d("ContextualConfigParseConfig",["ContextualConfigAssert","ContextualConfigConstants","ContextualConfigValidators","DenseContextualConfig","MultiOutputResolvedContextualConfig","TableContextualConfig"],(function(t,n,r,o,a,i,l){"use strict";var e,s=[1],u=function(n){return(e||(e=r("ContextualConfigAssert")))(o("ContextualConfigValidators").isDefined(n)&&o("ContextualConfigValidators").isDefined(n.version),o("ContextualConfigConstants").ERROR.BAD_CONFIG)},c=function(n){return(e||(e=r("ContextualConfigAssert")))(s.indexOf(n)!==-1,o("ContextualConfigConstants").ERROR.UNSUPPORTED_CONFIG_VERSION)};function d(e,t){switch(u(e),c(e.version),e.cctype){case o("ContextualConfigConstants").CONFIG_TYPE.DENSE:return new(r("DenseContextualConfig"))(e,t);case o("ContextualConfigConstants").CONFIG_TYPE.MULTI_OUTPUT_RESOLVED:return new(r("MultiOutputResolvedContextualConfig"))(e,t);case o("ContextualConfigConstants").CONFIG_TYPE.TABLE:return new(r("TableContextualConfig"))(e,t);default:throw new Error(o("ContextualConfigConstants").ERROR.UNKNOWN_CONFIG_TYPE)}}l.default=d}),98);
__d("ContextualConfigWarn",[],(function(t,n,r,o,a,i){"use strict";function e(e){}i.default=e}),66);
__d("ContextualConfigResult",["ContextualConfigConstants","ContextualConfigWarn","getErrorSafe"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(){function e(e){this.$1=e.reduce(function(e,t){var n=t.name,r=t.value;return e[n]=r,e},{}),this.$2=e}var t=e.prototype;return t.get=function(t,n){try{var e=this.$1[t];return typeof e!=typeof n?(r("ContextualConfigWarn")(o("ContextualConfigConstants").ERROR.REQUESTED_PARAM_NOT_FOUND),n):e}catch(e){return r("ContextualConfigWarn")(r("getErrorSafe")(e).message),n}},t.getParams=function(){return this.$2},e})();l.default=e}),98);
__d("ErrorContextualConfig",["ContextualConfigConstants"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(){function e(e){this.error=e}var t=e.prototype;return t.resolve=function(t){return[this.error,o("ContextualConfigConstants").EMPTY_RESULT_PARAMS,o("ContextualConfigConstants").EMPTY_RESOLVED_CONTEXTS,o("ContextualConfigConstants").EMPTY_RESOLVED_MONITORS]},e})();l.default=e}),98);
__d("ContextualConfig",["ContextualConfigCollateExposureData","ContextualConfigConstants","ContextualConfigExposureLogger","ContextualConfigParseConfig","ContextualConfigResult","ErrorContextualConfig","Random","getErrorSafe"],(function(t,n,r,o,a,i,l){"use strict";var e=1/o("ContextualConfigConstants").JSON_SUB_SAMPLE_RATE,s=1,u=(function(){function t(e,t){t===void 0&&(t={}),this.isDebugLoggingEnabled=!1,this.$3=!1,this.$4=e,this.$2=t}var n=t.prototype;return n.$5=function(){if(this.$1)return this.$1;var e=this.$2,t=this.$4,n;try{n=r("ContextualConfigParseConfig")(t,e)}catch(e){n=new(r("ErrorContextualConfig"))(r("getErrorSafe")(e))}return this.$1=n,n},n.$6=function(n){var t=this.isDebugLoggingEnabled,a=this.$3,i=!a&&o("Random").random()<e;i&&(this.$3=!0);var l=r("ContextualConfigCollateExposureData")(this.$4,n,i),s=r("ContextualConfigExposureLogger").createEvent(l);s.log(t)},n.resolve=function(t){t===void 0&&(t={});var e=this.$1||this.$5(),n=e.resolve(t);return this.$6(n),new(r("ContextualConfigResult"))(n[s])},t})();l.default=u}),98);
__d("ContextualDialogARIA",["DOM","getOrCreateDOMID"],(function(t,n,r,o,a,i){var e=(function(){"use strict";function e(e){this._layer=e}var t=e.prototype;return t.enable=function(){this._subscription=this._layer.subscribe("beforeshow",this._addAriaAttribute.bind(this))},t.disable=function(){this._subscription.unsubscribe(),this._subscription=null},t._addAriaAttribute=function(){var e=this._layer.getCausalElement();if(e){var t=n("DOM").scry(this._layer.getRoot(),".accessible_elem");t.length&&e.setAttribute("aria-describedby",n("getOrCreateDOMID")(t[0]))}},e})();a.exports=e}),null);
__d("flattenArray",[],(function(t,n,r,o,a,i){function e(e){var t=[];return l(e,t),t}function l(e,t){for(var n=e.length,r=0;n--;){var o=e[r++];Array.isArray(o)?l(o,t):t.push(o)}}i.default=e}),66);
__d("JSXDOM",["FbtResultBase","cr:6114","flattenArray"],(function(t,n,r,o,a,i){var e=["a","blockquote","br","button","canvas","checkbox","dd","div","dl","dt","em","form","h1","h2","h3","h4","h5","h6","hr","i","iframe","img","input","label","li","option","p","pre","select","span","strong","table","tbody","thead","td","textarea","th","tr","ul","video"],l={};e.forEach(function(e){var t=function(r,o){return arguments.length>2&&(o=Array.prototype.slice.call(arguments,1)),!o&&r&&(o=r.children,delete r.children),o&&(o=Array.isArray(o)?o:[o],o=o.map(function(e){return e instanceof n("FbtResultBase")?e.flattenToArray():e}),o=n("flattenArray")(o)),n("cr:6114").create(e,r,o)};l[e]=t}),a.exports=l}),null);
__d("ContextualDialogArrow",["cx","AbstractContextualDialogArrowBehavior","CSS","JSXDOM"],(function(t,n,r,o,a,i,l,s){var e=(function(e){function t(){return e.apply(this,arguments)||this}babelHelpers.inheritsLoose(t,e);var n=t.prototype;return n.__getArrow=function(){return r("JSXDOM").i({className:"_53io"})},n.enable=function(){e.prototype.enable.call(this);var t=this.__layer.getContentRoot();o("CSS").addClass(t,"_5v-0")},n.disable=function(){e.prototype.disable.call(this);var t=this.__layer.getContentRoot();o("CSS").removeClass(t,"_5v-0")},t})(r("AbstractContextualDialogArrowBehavior"));l.default=e}),98);
__d("ContextualDialogDefaultTheme",["cx"],(function(t,n,r,o,a,i,l,s){var e="_53ip",u={offset:15,length:16};l.wrapperClassName=e,l.arrowDimensions=u}),98);
__d("ContextualDialogFitInViewport_PUSHSAFE",["Style","Vector"],(function(t,n,r,o,a,i){var e=50,l=10,s=(function(){"use strict";function t(e){this._layer=e,this._contentHeight=null,this._contextY=null}var r=t.prototype;return r.enable=function(){var e=this,t=this._layer.getArrowDimensions();this._arrowOffset=t.offset;var n=t.length;this._arrowBuffer=this._arrowOffset+n,this._subscription=this._layer.subscribe(["reposition"],function(t,n){!e._layer.isFixed()||n.isVertical()||e._adjustPosition()})},r.disable=function(){this._subscription.unsubscribe(),this._subscription=null},r._getContentHeight=function(){return n("Vector").getElementDimensions(this._layer._contentWrapper).y},r._getContextY=function(){return n("Vector").getElementPosition(this._layer.getContext(),"viewport").y},r._adjustPosition=function(){var t=this._getContextY(),r=this._getContentHeight();if(!(t===this._contextY&&r===this._contentHeight)){this._contextY=t,this._contentHeight=r;var o=n("Vector").getViewportDimensions().y,a=Math.min(Math.max(0,t+r+l-o),Math.max(0,t-e),r-this._arrowOffset-this._arrowBuffer);n("Style").set(this._layer.getContent(),"top",-a+"px")}},t})();a.exports=s}),null);
__d("ContextualDialogKeepInViewport",["AbstractContextualDialogKeepInViewportBehavior","Style"],(function(t,n,r,o,a,i){var e=(function(e){"use strict";function t(){return e.apply(this,arguments)||this}babelHelpers.inheritsLoose(t,e);var r=t.prototype;return r.__adjustForScroll=function(t,r){var e=t.getContent();n("Style").set(e,"top",-r+"px")},t})(n("AbstractContextualDialogKeepInViewportBehavior"));a.exports=e}),null);
__d("ContextualLayerAlignmentEnum",["keyMirror","objectValues","prop-types"],(function(t,n,r,o,a,i,l){"use strict";var e=r("keyMirror")({left:null,center:null,right:null}),s=r("objectValues")(e),u=r("prop-types").oneOf(s),c=babelHelpers.extends({},e,{values:s,propType:u});l.default=c}),98);
__d("ContextualLayerPositionEnum",["keyMirror","objectValues","prop-types"],(function(t,n,r,o,a,i,l){"use strict";var e=r("keyMirror")({above:null,below:null,left:null,right:null}),s=r("objectValues")(e),u=r("prop-types").oneOf(s),c=babelHelpers.extends({},e,{values:s,propType:u});l.default=c}),98);
__d("ContextualLayerOrientation",["ContextualLayerAlignmentEnum","ContextualLayerPositionEnum","emptyFunction","err","gkx"],(function(t,n,r,o,a,i,l){"use strict";var e={above:"below",below:"above",left:"right",right:"left"},s=r("gkx")("17507"),u=(function(){function t(){this.$1={$2:"left",$3:0,$4:0,$5:0,$6:"above",$7:s,$8:!0},this.$9=this.$1.$2,this.$10=this.$1.$3,this.$11=this.$1.$4,this.$12=this.$1.$5,this.$13=this.$1.$6,this.$14=this.$1.$7,this.$15=this.$1.$8}var n=t.prototype;return n.setPosition=function(t){return this.$13=c(t),this},n.setAlignment=function(t){return this.$9=d(t),this},n.getOppositePosition=function(){return e[this.getPosition()]},n.invalidate=function(){return this.$15=!1,this},n.getPosition=function(){return this.$13||"above"},n.getAlignment=function(){return this.$9||"left"},n.getOffsetX=function(){var e=this.$11||0;return this.isVertical()?this.$1.$2!==this.$9&&(e*=-1):this.$1.$6!==this.$13&&(e*=-1),e},n.getOffsetY=function(){var e=this.$12||0;return this.isVertical()&&this.$1.$6!==this.$13&&(e*=-1),e},n.getClassName=function(){var e=this.getAlignment(),t=this.getPosition();return t==="below"?e==="left"?"uiContextualLayerBelowLeft":e==="right"?"uiContextualLayerBelowRight":"uiContextualLayerBelowCenter":t==="above"?e==="left"?"uiContextualLayerAboveLeft":e==="right"?"uiContextualLayerAboveRight":"uiContextualLayerAboveCenter":t==="left"?"uiContextualLayerLeft":"uiContextualLayerRight"},n.isValid=function(){return this.$15},n.isVertical=function(){return this.getPosition()==="above"||this.getPosition()==="below"},n.reset=function(){return this.$9=this.$1.$2,this.$10=this.$1.$3,this.$11=this.$1.$4,this.$12=this.$1.$5,this.$13=this.$1.$6,this.$14=this.$1.$7,this.$15=this.$1.$8,this},n.setDefaultPosition=function(t){var e=this.$1.$6;return this.$1.$6=c(t),e!==t},n.setDefaultAlignment=function(t){var e=this.$1.$2;return this.$1.$2=d(t),e!==t},n.setDefaultOffsetX=function(t){var e=this.$1.$4;return this.$1.$4=t,e!==t},n.setArrowOffset=function(t){var e=this.$1.$3;return this.$1.$3=t,e!==t},n.getArrowOffset=function(){return this.$1.$3||0},n.setDefaultOffsetY=function(t){var e=this.$1.$5;return this.$1.$5=t,e!==t},n.setPreferMoreContentShownRect=function(t){var e=this.$1.$7;return this.$1.$7=t,e!==t},n.getPreferMoreContentShownRect=function(){return this.$1.$7},t})(),c=r("emptyFunction").thatReturnsArgument,d=r("emptyFunction").thatReturnsArgument;l.default=u}),98);
__d("SVGChecker",[],(function(t,n,r,o,a,i){a.exports={isSVG:function(t){return!!t.ownerSVGElement||t.tagName.toLowerCase()==="svg"},isDisplayed:function(t){try{var e=t.getBBox();if(e&&(e.height===0||e.width===0))return!1}catch(e){return!1}return!0}}}),null);
__d("debounceCore",["TimeSlice"],(function(t,n,r,o,a,i,l){function e(e,t,n,o,a,i){n===void 0&&(n=null),o===void 0&&(o=setTimeout),a===void 0&&(a=clearTimeout),i===void 0&&(i=!1);var l,s=!0;function u(){for(var c=arguments.length,d=new Array(c),m=0;m<c;m++)d[m]=arguments[m];var p;if(i){if(p=r("TimeSlice").guard(function(){s=!0,l=null},"debounceCore"),!s){a(l),l=o(p,t);return}s=!1,e.apply(n,d)}else u.reset(),p=r("TimeSlice").guard(function(){l=null,e.apply(n,d)},"debounceCore");p.__SMmeta=e.__SMmeta,l=o(p,t)}return u.reset=function(){a(l),l=null,s=!0},u.isPending=function(){return l!=null},u}l.default=e}),98);
__d("debounce",["clearTimeout","debounceCore","setTimeout"],(function(t,n,r,o,a,i,l){function e(e,t,n,o,a){t===void 0&&(t=100);var i=function(t,n,a){return r("setTimeout")(t,n,a,!o)};return r("debounceCore")(e,t,n,i,r("clearTimeout"),a)}l.default=e}),98);
__d("getOwnObjectValues",[],(function(t,n,r,o,a,i){function e(e){return Object.keys(e).map(function(t){return e[t]})}i.default=e}),66);
__d("ContextualLayer",["ARIA","Arbiter","Bootloader","CSS","CometVisualCompletionAttributes","ContextualLayerOrientation","ContextualThing","DOM","DataStore","Event","Layer","Locale","Parent","Rect","SVGChecker","Scroll","Style","Vector","containsNode","cr:971473","debounce","getOffsetParent","getOrCreateDOMID","getOverlayZIndex","getOwnObjectValues","gkx","isElementNode","removeFromArray","throttle"],(function(t,n,r,o,a,i){function e(e){return e.getPosition()==="left"||e.isVertical()&&e.getAlignment()==="right"}var l=(function(t){"use strict";function r(){return t.apply(this,arguments)||this}babelHelpers.inheritsLoose(r,t);var o=r.prototype;return o._configure=function(n,r){n.dialogRole!=="dialog"&&(this._dialogRole=n.dialogRole),n.shouldSetARIAProperties===!1&&(this._shouldSetARIAProperties=n.shouldSetARIAProperties),n.label&&(this._label=n.label),n.labelledBy&&(this._labelledBy=n.labelledBy),t.prototype._configure.call(this,n,r),n.context?this.setContext(n.context):n.contextID?this._setContextID(n.contextID):n.contextSelector&&(this._setContextSelector(n.contextSelector),this._setARIAProperties()),this.setPosition(n.position),this.setAlignment(n.alignment),this.setOffsetX(n.offsetX),this.setOffsetY(n.offsetY),this.setArrowDimensions(n.arrowDimensions),this._content=r},o._getDefaultBehaviors=function(){var e=r.getDefaultBehaviorsAsObject();return t.prototype._getDefaultBehaviors.call(this).concat(n("getOwnObjectValues")(e))},o._buildWrapper=function(t,r){return this._contentWrapper=n("DOM").create("div",{className:"uiContextualLayer"},r),this._dialogRole&&this._contentWrapper.setAttribute("role",this._dialogRole),this._labelledBy?this._contentWrapper.setAttribute("aria-labelledby",this._labelledBy):this._label&&this._contentWrapper.setAttribute("aria-label",this._label),this._dialogRole==="alert"&&this._contentWrapper.setAttribute("aria-atomic","true"),n("DOM").create("div",babelHelpers.extends({className:"uiContextualLayerPositioner","data-testid":t["data-testid"]},t.excludeFromHeroVC?n("CometVisualCompletionAttributes").IGNORE:{}),this._contentWrapper)},o.getInsertParent=function(){var e=this._insertParent;if(!e){var r=this.getContext();r&&(e=n("Parent").byClass(r,"uiContextualLayerParent"))}return e||t.prototype.getInsertParent.call(this)},o.setContent=function(t){return this._content=t,n("DOM").setContent(this._contentWrapper,this._content),this._shown&&this._updatePosition(),this},o.setContext=function(t){return this.setContextWithBounds(t,null)},o.setContextWithBounds=function(t,r){if(this._contextNode===t&&r&&this._contextBounds&&r.isEqualTo(this._contextBounds))return this;this._contextNode=t;var e=r&&this._contextBounds&&r.t===this._contextBounds.t&&r.r===this._contextBounds.r&&r.b===this._contextBounds.b&&r.l===this._contextBounds.l;return e?this:(this._contextBounds=r||null,this._contextSelector="#"+n("getOrCreateDOMID")(t),this._contextScrollParent=null,this._shown&&(n("ContextualThing").register(this.getRoot(),this._contextNode),this._updatePosition()),this._setParentSubscription(),this._setARIAProperties(),this)},o.shouldSetARIAProperties=function(t){return this._shouldSetARIAProperties=t,this},o._setARIAProperties=function(){var e=this;return this._shouldSetARIAProperties?(this._dialogRole==="dialog"?n("ARIA").setPopup(this.getCausalElement(),this.getRoot()):this._dialogRole==="region"&&n("Bootloader").loadModules(["ContextualLayerInlineTabOrder"],function(t){e.hasBehavior(t)||e.enableBehavior(t)},"ContextualLayer"),this):this},o._setContextID=function(t){this._contextSelector="#"+t,this._contextNode=null},o._setContextSelector=function(t){this._contextSelector=t,this._contextNode=null},o.getCausalElement=function(){return t.prototype.getCausalElement.call(this)||this.getContext()},o._setParentSubscription=function(){for(var e=this.getContext(),t=null;e!=null&&(t=n("DataStore").get(e,"layer"),!(t&&typeof t=="object"));)e=e.parentNode;t!==this._parentLayer&&(this._parentLayer&&this._parentSubscription&&(this._parentLayer.unsubscribe(this._parentSubscription),this._parentSubscription=null),t&&(this._parentSubscription=t.subscribe("hide",this.hide.bind(this))),this._parentLayer=t)},o.setPosition=function(t){return this.getOrientation().setDefaultPosition(t)&&this._shown&&this._updatePosition(),this},o.setAlignment=function(t){return this.getOrientation().setDefaultAlignment(t)&&this._shown&&this._updatePosition(),this},o.setOffsetX=function(t){return this.getOrientation().setDefaultOffsetX(t)&&this._shown&&this._updatePosition(),this},o.setArrowDimensions=function(t){return t&&this.getOrientation().setArrowOffset(t.offset)&&this._shown&&this._updatePosition(),this},o.setOffsetY=function(t){return this.getOrientation().setDefaultOffsetY(t)&&this._shown&&this._updatePosition(),this},o.getPosition=function(){return this.getOrientation().getPosition()},o.getOrientation=function(){return this._orientation||(this._orientation=new(n("ContextualLayerOrientation"))),this._orientation},o.getContentRoot=function(){return this._contentWrapper},o.getContent=function(){return this._content},o.getContext=function(){var e;return!this._contextNode&&this._contextSelector&&(this._contextNode=n("DOM").find(document,this._contextSelector)),(e=this._contextNode)!=null?e:null},o.getContextBounds=function(t){if(this._contextBounds)return this._contextBounds.convertTo(t);var e=this.getContext();return n("Rect").newFromVectors(n("Vector").getElementPosition(e,t),n("Vector").getElementDimensions(e))},o.getContextScrollParent=function(){return this._contextScrollParent?n("isElementNode")(this._contextScrollParent)&&!n("containsNode")(document.documentElement,this._contextScrollParent)&&(this._contextScrollParent=n("Style").getScrollParent(this.getContext())):this._contextScrollParent=n("Style").getScrollParent(this.getContext()),this._contextScrollParent},o.setInsertParent=function(n){return this._insertScrollParent=null,t.prototype.setInsertParent.call(this,n)},o.getInsertScrollParent=function(){return this._insertScrollParent||(this._insertScrollParent=n("Style").getScrollParent(this.getInsertParent())),this._insertScrollParent},o.show=function(){var e=this;if(this._shown)return this;if(t.prototype.show.call(this),n("Arbiter").inform("contextualLayer/toggle",{show:!0,contentRoot:this.getRoot()}),this._shown){if(!this.getContext())return this;n("ContextualThing").register(this.getRoot(),this.getContext()),s.push(this),this._resizeListener=this._resizeListener||n("Event").listen(window,"resize",n("throttle")(function(){e._shown&&e.updatePosition()}))}return this},o.finishHide=function(){return n("removeFromArray")(s,this),this._resizeListener&&this._resizeListener.remove(),this._resizeListener=null,this._insertScrollParent=null,n("Arbiter").inform("contextualLayer/toggle",{show:!1,contentRoot:this.getRoot()}),t.prototype.finishHide.call(this)},o.isFixed=function(){return n("Style").isFixed(this.getContext())&&!n("Style").isFixed(this.getInsertParent())},o.updatePosition=function(){var t=this.getContext();if(!t)return!1;var r=this.isFixed();if(!r&&!(t.offsetParent||n("SVGChecker").isSVG(t)&&n("SVGChecker").isDisplayed(t)))return!1;var o=this.getRoot();if(o==null||this._contentWrapper==null)return!1;var a=n("Vector").getLayoutViewportDimensions().x;n("Style").set(o,"width",a+"px"),n("gkx")("25981")&&(n("Style").set(o,"left",""),n("Style").set(o,"right",""),n("Style").set(o,"top",""));var i=this.getOrientation();if(this.inform("adjust",i.reset()),!i.isValid())return!1;this._updateWrapperPosition(i),this._updateWrapperClass(i),n("CSS").conditionClass(o,"uiContextualLayerPositionerFixed",r);var l,s,u=r?"viewport":"document",c=r?document.documentElement:n("getOffsetParent")(o);if(r)l=new(n("Vector"))(0,0),s=a;else if(c===document.documentElement)l=new(n("Vector"))(0,0),s=document.documentElement.clientWidth;else if(o.offsetParent)l=n("Vector").getElementPosition(c,u),s=c.offsetWidth,c!==document.body&&(l=l.sub(new(n("Vector"))(n("Scroll").getLeft(c),n("Scroll").getTop(c))));else return!1;var d=this.getContextBounds(u),m=d.l-l.x,p=d.t-l.y,_=d.h(),f=d.w(),g=n("Locale").isRTL();i.getPosition()==="below"&&(p+=_),(i.getPosition()==="right"||i.isVertical()&&i.getAlignment()==="right")!=g&&(m+=f),!i.isVertical()&&i.getAlignment()==="center"&&(p+=d.h()/2-this.getContentRoot().offsetHeight/2);var h=i.getOffsetX();i.isVertical()&&i.getAlignment()==="center"&&(h+=(f-this.getContentRoot().offsetWidth)/2),g&&(h*=-1);var y="left",C=Math.floor(m+h);e(i)!==g&&(y="right",C=s-C),n("Style").set(o,y,C+"px"),n("Style").set(o,y==="left"?"right":"left","");var b=this.getInsertScrollParent(),v,S=0;b!==window?(v=b.clientWidth,S=n("Vector").getElementPosition(b).x):v=document.documentElement.clientWidth;var R=n("Vector").getElementPosition(o).x-S,L=0,E=window.devicePixelRatio!==Math.round(window.devicePixelRatio);L=E?1:0,n("gkx")("25983")&&(L=1),y==="left"&&v-R>0?n("Style").set(o,"width",v-R-L+"px"):y==="right"&&R+o.offsetWidth>0?n("Style").set(o,"width",R+o.offsetWidth-L+"px"):n("Style").set(o,"width",""),n("Style").set(o,"top",p+i.getOffsetY()+"px");var k=n("getOverlayZIndex")(t,this.getInsertParent());return n("Style").set(o,"z-index",k>200?k:""),this.inform("reposition",i),!0},o._updatePosition=function(){var e=this;if(this._debouncedUpdatePosition){this._debouncedUpdatePosition();return}return this._debouncedUpdatePosition=n("debounce")(function(){e._shown&&e.updatePosition(),delete e._debouncedUpdatePosition}),this.updatePosition()},o._updateWrapperPosition=function(r){var t=r.getPosition()==="above";n("Style").set(this._contentWrapper,"bottom",t?"0":null);var o=n("Locale").isRTL()?"left":"right",a=e(r);n("Style").set(this._contentWrapper,o,a?"0":null)},o._updateWrapperClass=function(t){var e=t.getClassName();e!==this._orientationClass&&(this._orientationClass&&n("CSS").removeClass(this._contentWrapper,this._orientationClass),this._orientationClass=e,n("CSS").addClass(this._contentWrapper,e))},o.simulateOrientation=function(t,r){var e=t.getClassName();if(e===this._orientationClass)return r();this._orientationClass&&n("CSS").removeClass(this._contentWrapper,this._orientationClass),n("CSS").addClass(this._contentWrapper,e);var o=r();return n("CSS").removeClass(this._contentWrapper,e),this._orientationClass&&n("CSS").addClass(this._contentWrapper,this._orientationClass),o},o.destroy=function(){return t.prototype.destroy.call(this),this._contentWrapper=null,this._content=null,this},o.getArrowDimensions=function(){return this._config.arrowDimensions||{offset:0,length:0}},r.getDefaultBehaviorsAsObject=function(){return n("cr:971473")==null?{}:{LayerHideOnTransition:n("cr:971473")}},r})(n("Layer")),s=[];n("Arbiter").subscribe("reflow",function(){s.forEach(function(e){e.updatePosition()===!1&&e.hide()})}),Object.assign(l.prototype,{_contentWrapper:null,_content:null,_contextNode:null,_contextBounds:null,_contextSelector:null,_dialogRole:"dialog",_label:null,_labelledBy:[],_parentLayer:null,_parentSubscription:null,_orientation:null,_orientationClass:null,_shouldSetARIAProperties:!0}),a.exports=l}),null);
__d("LayerHideSources",[],(function(t,n,r,o,a,i){var e=Object.freeze({BLUR:"blur",ESCAPE:"escape",LAYER_CANCEL_BUTTON:"layerCancelButton",LAYER_HIDE_BUTTON:"layerHideButton",TRANSITION:"transition"}),l=e;i.default=l}),66);
__d("LayerButtons",["csx","Button","Event","LayerHideSources","Parent"],(function(t,n,r,o,a,i,l){var e=(function(){"use strict";function e(e){this.$2=null,this.$1=e}var t=e.prototype;return t.enable=function(){this.$2=n("Event").listen(this.$1.getRoot(),"click",this.$3.bind(this))},t.disable=function(){this.$2.remove(),this.$2=null},t.$3=function(t){var e=t.getTarget(),r=n("Parent").byClass(e,"layerHide");if(r){this.$1.hide(n("LayerHideSources").LAYER_HIDE_BUTTON);return}var o=n("Parent").byClass(e,"layerConfirm");if(o){if(this.$4(o)&&!n("Button").isEnabled(o)||this.$5(o))return;this.$1.inform("confirm",o)===!1&&t.prevent();return}var a=n("Parent").byClass(e,"layerCancel");if(a){if(this.$4(a)&&!n("Button").isEnabled(a)||this.$5(a))return;this.$1.inform("cancel",a)!==!1&&this.$1.hide(n("LayerHideSources").LAYER_CANCEL_BUTTON),t.prevent();return}var i=n("Parent").byClass(e,"layerButton");if(i){if(this.$4(i)&&!n("Button").isEnabled(i)||this.$5(i))return;this.$1.inform("button",i)===!1&&t.prevent()}},t.$5=function(t){var e=n("Parent").byClass(t,"uiLayer"),r=this.$1.getRoot();return!!(e&&r!==e)},t.$4=function(t){return!!(n("Parent").byClass(t,"uiButton")||n("Parent").bySelector(t,"._42ft"))},e})();a.exports=e}),null);
__d("LayerFormHooks",["Event"],(function(t,n,r,o,a,i){var e=(function(){"use strict";function e(e){this.$2=null,this.$1=e}var t=e.prototype;return t.enable=function(){var e=this.$1.getRoot();this.$2=[n("Event").listen(e,"submit",this.$3.bind(this)),n("Event").listen(e,"success",this.$4.bind(this)),n("Event").listen(e,"error",this.$5.bind(this))]},t.disable=function(){this.$2.forEach(function(e){e.remove()}),this.$2=null},t.$3=function(t){this.$1.inform("submit",t)===!1&&t.kill()},t.$4=function(t){this.$1.inform("success",t)===!1&&t.kill()},t.$5=function(t){var e=t.getData();this.$1.inform("error",{response:e.response})===!1&&t.kill()},e})();a.exports=e}),null);
__d("LayerMouseHooks",["Arbiter","ContextualThing","Event","Layer"],(function(t,n,r,o,a,i){var e=new(n("Arbiter")),l=(function(){"use strict";function t(e){this.$1=e,this.$2=[],this.$3=!1}var r=t.prototype;return r.enable=function(){var t=this;this.$2=[e.subscribe("mouseenter",this.$4.bind(this)),e.subscribe("mouseleave",this.$5.bind(this)),this.$1.subscribe("hide",function(){t.$3=!1})]},r.disable=function(){for(;this.$2.length;)this.$2.pop().unsubscribe();this.$2=[],this.$3=!1},r.$4=function(t,n){!this.$3&&this.$6(n)&&(this.$1.inform("mouseenter",n),this.$3=!0)},r.$5=function(t,n){this.$3&&(!n||!this.$6(n))&&(this.$1.inform("mouseleave",n),this.$3=!1)},r.$6=function(t){return n("ContextualThing").containsIncludingLayers(this.$1.getContentRoot(),t)},t})();n("Layer").subscribe("show",function(t,r){var o=r.getContentRoot(),a=[n("Event").listen(o,"mouseenter",function(){e.inform("mouseenter",o)}),n("Event").listen(o,"mouseleave",function(t){e.inform("mouseleave",t.getRelatedTarget())})],i=r.subscribe("hide",function(){for(;a.length;)a.pop().remove();i.unsubscribe(),a=i=null})}),a.exports=l}),null);
__d("LayerRefocusOnHide",["ContextualThing","DOM","DOMQuery","Focus","Parent","getActiveElement","nullthrows"],(function(t,n,r,o,a,i,l){var e=(function(){function e(e){this._layer=e}var t=e.prototype;return t.enable=function(){var e=this;this._subscription=this._layer.subscribe("hide",function(){return e._handle()})},t.disable=function(){r("nullthrows")(this._subscription).unsubscribe(),this._subscription=null},t._handle=function(){var e=r("getActiveElement")();if(e===document.body||o("DOMQuery").contains(this._layer.getRoot(),e)){for(var t=this._layer.getCausalElement();t&&!t.offsetWidth;){var n=o("Parent").byClass(t,"uiToggle");if(n&&n.offsetWidth)t=r("DOM").scry(n,'[rel="toggle"]')[0];else{var a=o("ContextualThing").getContext(t);a?t=a:t=t.parentNode}}t&&(t=t,o("Focus").set(t))}},e})();Object.assign(e.prototype,{_subscription:null}),l.default=e}),98);
__d("ContextualDialog",["csx","cx","invariant","AccessibleLayer","CSS","ContextualDialogARIA","ContextualDialogArrow","ContextualDialogDefaultTheme","ContextualDialogFitInViewport_PUSHSAFE","ContextualDialogKeepInViewport","ContextualLayer","DOM","Event","JSXDOM","LayerButtons","LayerFormHooks","LayerMouseHooks","LayerRefocusOnHide","Style","cr:971473","removeFromArray","shield"],(function(t,n,r,o,a,i,l,s,u,c){var e=0,d=300,m=(function(t){function a(e,n){var r;return r=t.call(this,e,n)||this,r._footer=null,r}babelHelpers.inheritsLoose(a,t);var i=a.prototype;return i._configure=function(n,a){Object.assign(n,n.theme||o("ContextualDialogDefaultTheme"));var e=n.arrowBehavior||r("ContextualDialogArrow");n.addedBehaviors=n.addedBehaviors||[],n.addedBehaviors.push(e),t.prototype._configure.call(this,n,a),this._footer=r("DOM").scry(a,"div._572u")[0],this._footer&&(this._footer.children.length===1&&this._footer.children[0].nodeName==="DIV"&&this._footer.children[0].children.length===0?this._footer.parentNode.removeChild(this._footer):o("CSS").addClass(this.getContentRoot(),"_kc")),n.hoverContext&&this._registerHoverHandlers(n.hoverContext,n.hoverShowDelay,n.hoverHideDelay)},i._registerHoverHandlers=function(n,o,a){var t=this,i=o,l=a;i==null&&(i=e),l==null&&(l=d);var s,u,c=function(n){window.clearTimeout(u),s=window.setTimeout(r("shield")(t.show,t),i)},m=function(n){t._isHoverLocked()||(window.clearTimeout(s),u=window.setTimeout(t.hide.bind(t),l))},p=r("Event").listen(n,"mouseenter",c),_=r("Event").listen(n,"mouseleave",m),f=this.subscribe("mouseenter",c),g=this.subscribe("mouseleave",m);this.subscribe("destroy",function(){window.clearTimeout(u),window.clearTimeout(s),p.remove(),_.remove(),f.unsubscribe(),g.unsubscribe()})},i._getDefaultBehaviors=function(){var e=t.prototype._getDefaultBehaviors.call(this);return n("cr:971473")!=null&&r("removeFromArray")(e,n("cr:971473")),e.concat([r("AccessibleLayer"),r("LayerRefocusOnHide"),r("ContextualDialogKeepInViewport"),r("ContextualDialogFitInViewport_PUSHSAFE"),r("LayerButtons"),r("LayerFormHooks"),r("LayerMouseHooks"),r("ContextualDialogARIA")])},i._buildWrapper=function(n,a){this._innerWrapper=r("JSXDOM").div(null,a);var e=t.prototype._buildWrapper.call(this,n,this._innerWrapper);if(n.wrapperClassName){var i=n.wrapperClassName.split(/\s+/);for(var l of i)o("CSS").addClass(e,l)}return this.replaceEntireLayerContents(a),this.getContent()===a||c(0,5783),this.setWidth(n.width),e},i.getContentRoot=function(){return this._innerWrapper||c(0,5784),this._innerWrapper},i.setContent=function(t){c(0,5785)},i.replaceEntireLayerContents=function(t){this._content=null,r("DOM").empty(this.getContentRoot()),this.setInnerContent(t)},i.setInnerContent=function(t){o("CSS").addClass(t,"_53ij"),this.getContent()?r("DOM").replace(this.getContent(),t):r("DOM").appendContent(this.getContentRoot(),t),this._content=t,this.isShown()&&this.updatePosition()},i.setWidth=function(t){return r("Style").set(this.getContentRoot(),"width",t?Math.floor(t)+"px":""),this},i.getFooter=function(){return this._footer},i.lockHover=function(){return this._hoverLocked=!0,this},i.unlockHover=function(){return this._hoverLocked=!1,this},i._isHoverLocked=function(){return!!this._hoverLocked},a.setContext=function(t,n){t.setContext(n)},a})(r("ContextualLayer"));l.default=m}),98);
__d("ContextualLayerHideOnScroll",["Event","setTimeout"],(function(t,n,r,o,a,i,l){var e=(function(){function e(e){this._layer=e}var t=e.prototype;return t.enable=function(){var e=this;this._subscriptions=[this._layer.subscribe("contextchange",function(){return e._handleContextChange()}),this._layer.subscribe("show",function(){return e.attach()}),this._layer.subscribe("hide",function(){return e.detach()})]},t.disable=function(){for(;this._subscriptions.length;)this._subscriptions.pop().unsubscribe();this.detach()},t.attach=function(){var e=this;if(!this._listener){var t=this._layer.getContextScrollParent();t!==window&&r("setTimeout")(function(){e._listener=r("Event").listen(t,"scroll",function(){e._layer.hide()})})}},t.detach=function(){this._listener&&this._listener.remove(),this._listener=null},t._handleContextChange=function(){this.detach(),this._layer.isShown()&&this.attach()},e})();Object.assign(e.prototype,{_subscriptions:[]}),l.default=e}),98);
__d("CurrentLocale",["IntlCurrentLocale"],(function(t,n,r,o,a,i,l){"use strict";var e={get:function(){return r("IntlCurrentLocale").code}},s=e;l.default=s}),98);
__d("DgwClientFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(t,n,r,o,a,i,l){"use strict";var e=r("getFalcoLogPolicy_DO_NOT_USE")("1755537"),s=o("FalcoLoggerInternal").create("dgw_client",e),u=s;l.default=u}),98);
__d("DGWLoggingContext",["$InternalEnum","DgwClientFalcoEvent","ODS","Random"],(function(t,n,r,o,a,i,l){"use strict";var e,s="dgw_client",u=n("$InternalEnum")({STREAM_GROUP_COMPONENT:"WebStreamGroup",GROUPED_STREAM_COMPONENT:"GroupedWebStream",WEBSOCKET_TRANSPORT_COMPONENT:"WebSocketTransport",ACK_MANAGER_COMPONENT:"WebStreamAckManager",CODEC_COMPONENT:"WebCodec",RAW_CLIENT:"RAWDGWClient",PINGER:"DGWPinger"}),c={VERBOSE:-1,INFO:0,WARNING:1,ERROR:2,FATAL:3};function d(e){switch(e){case u.GROUPED_STREAM_COMPONENT:case u.ACK_MANAGER_COMPONENT:return!0;default:return!1}}var m=(function(){function t(e,t,n,r,o,a,i){a===void 0&&(a=!1),i===void 0&&(i=!1),this.$5=""+e,this.$1=t,this.$4=n,this.$3=r,this.sgTransportId=o,this.$2=a,this.$6=i}t.bumpODSKey=function(n,r,a){if(a===void 0&&(a=1),!!o("Random").coinflip(a)){var t=n+"."+r;(e||(e=o("ODS"))).bumpEntityKey(3589,"dgw_web_client",t,a)}};var n=t.prototype;return n.bumpODSKey=function(n,r,a){if(a===void 0&&(a=1),!!o("Random").coinflip(a)){var t=this.$4+"."+n+"."+r;(e||(e=o("ODS"))).bumpEntityKey(3589,"dgw_web_client",t,a)}},n.logEvent=function(t,n,r,o,a){o===void 0&&(o=!1),this.$2||this.$7(t,n,null,c.INFO,r,o,a)},n.$7=function(t,n,o,a,i,l,s){var e=this;l===void 0&&(l=!1),!(l&&!this.$6)&&(d(t)&&this.$1!=null||!d(t)&&this.sgTransportId!=null)&&r("DgwClientFalcoEvent").log(function(){return{event:n,logging_id:s!=null?s:e.$1,dgw_version:e.$5,message:o,severity:a,uuid:e.$3,dgw_component:t,extra_info:i,destination_tier:e.$4,sg_transport_id:e.sgTransportId,source:2}})},n.logError=function(t,n,r,o,a,i){a===void 0&&(a=!1),this.$2||this.$7(t,n,r,c.ERROR,o,a,i)},n.logWarn=function(t,n,r,o,a){a===void 0&&(a=!1),this.$2||this.$7(t,n,r,c.WARNING,o,a)},t})();l.DGW_MODULE=s,l.DGWLoggingComponent=u,l.DGWLoggingContext=m}),98);
__d("DGWAckManager",["DGWLoggingContext","Promise","asyncToGeneratorRuntime","getErrorSafe"],(function(t,n,r,o,a,i,l){"use strict";var e,s=(function(){function e(e,t,n){var r=this;this.$3=n,this.sendId=e,this.$2=t,this.handleAckReceived=function(){r.stopTracking(!0)},this.$1=window.setTimeout(function(){r.stopTracking(!1)},t)}var t=e.prototype;return t.stopTracking=function(t){window.clearTimeout(this.$1),this.$3(t)},e})(),u=(function(){function t(e){this.$1=new Map,this.$2=e}var a=t.prototype;return a.waitForAck=(function(){var t=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t,a){this.$2.bumpODSKey(o("DGWLoggingContext").DGWLoggingComponent.ACK_MANAGER_COMPONENT,"ack_expected");var i=this.$1;try{var l=yield new(e||(e=n("Promise")))(function(e,n){i.set(t,new s(t,a,e))});return l===!0?this.$2.logEvent(o("DGWLoggingContext").DGWLoggingComponent.ACK_MANAGER_COMPONENT,"Received ACK","sendId:"+t,!0):(this.$2.bumpODSKey(o("DGWLoggingContext").DGWLoggingComponent.ACK_MANAGER_COMPONENT,"ack_timeout"),this.$2.logWarn(o("DGWLoggingContext").DGWLoggingComponent.ACK_MANAGER_COMPONENT,"ACK timeout","Request "+t+" timed out after "+a+"ms")),i.delete(t),l}catch(e){var u=r("getErrorSafe")(e);throw this.$2.bumpODSKey(o("DGWLoggingContext").DGWLoggingComponent.ACK_MANAGER_COMPONENT,"ack_error"),i.delete(t),u}});function a(e,n){return t.apply(this,arguments)}return a})(),a.handleAckReceived=function(t){this.$2.bumpODSKey(o("DGWLoggingContext").DGWLoggingComponent.ACK_MANAGER_COMPONENT,"ack_received");var e=this.$1.get(t);if(e===void 0){this.$2.bumpODSKey(o("DGWLoggingContext").DGWLoggingComponent.ACK_MANAGER_COMPONENT,"ack_received.not_tracked"),this.$2.logWarn(o("DGWLoggingContext").DGWLoggingComponent.ACK_MANAGER_COMPONENT,"untracked ACK","Received ACK for ackId "+t+" which was not being tracked");return}e.handleAckReceived()},a.clearPendingAcks=function(){var e=this;this.$2.logEvent(o("DGWLoggingContext").DGWLoggingComponent.ACK_MANAGER_COMPONENT,"Clearing pending acks","ACKs cleared size: "+this.$1.size),this.$1.forEach(function(t,n,r){e.$2.logEvent(o("DGWLoggingContext").DGWLoggingComponent.ACK_MANAGER_COMPONENT,"Clearing pending ACK with ackId "+t.sendId,null,!0),t.stopTracking(!1),r.delete(n)})},t})();l.DGWAckManager=u}),98);
__d("DGWAuth",["$InternalEnum","err"],(function(t,n,r,o,a,i,l){"use strict";var e=n("$InternalEnum")({TEST:"0:0",FACEBOOK:"1:0",INTERNALFB:"2:0",OCULUS:"3:0",ENTERPRISEFB:"7:0",RECRUITINGFB:"8:0",INSTAGRAM:"6:0",HORIZON_WEB:"12:0",SPARK_WEB:"13:0",ABRA:"15:0",GUEST:"19:0"});function s(t){if(t==="TEST")return e.TEST;if(t==="FACEBOOK")return e.FACEBOOK;if(t==="INTERNALFB")return e.INTERNALFB;if(t==="OCULUS")return e.OCULUS;if(t==="ENTERPRISEFB")return e.ENTERPRISEFB;if(t==="RECRUITINGFB")return e.RECRUITINGFB;if(t==="INSTAGRAM")return e.INSTAGRAM;if(t==="HORIZON_WEB")return e.HORIZON_WEB;if(t==="SPARK_WEB")return e.SPARK_WEB;if(t==="ABRA")return e.ABRA;if(t==="GUEST")return e.GUEST;throw r("err")("failed to convert string ("+t+") to DGWAuth Type")}function u(t){return t===e.FACEBOOK?"FACEBOOK":t===e.INTERNALFB?"INTERNALFB":t===e.OCULUS?"OCULUS":t===e.ENTERPRISEFB?"ENTERPRISEFB":t===e.RECRUITINGFB?"RECRUITINGFB":t===e.INSTAGRAM?"INSTAGRAM":t===e.HORIZON_WEB?"HORIZON_WEB":t===e.SPARK_WEB?"SPARK_WEB":t===e.ABRA?"ABRA":t===e.GUEST?"GUEST":"TEST"}l.DGWAuth=e,l.fromStringToDGWAuth=s,l.fromDGWAuthToString=u}),98);
__d("DGWStream",["$InternalEnum"],(function(t,n,r,o,a,i){"use strict";var e=n("$InternalEnum").Mirrored(["ABNORMAL_CLOSURE","GOING_AWAY","SERVER_INTERNAL_ERROR","PREMATURE_CLOSE","UNKNOWN_ERROR","KEEPALIVE_TIMEOUT","TRANSPORT_CLOSED_BEFORE_STREAM_INIT","TRANSPORT_ESTABLISHMENT_ERROR","TRANSPORT_ESTABLISHMENT_TIMEOUT","ESTABLISHMENT_TIMEOUT","UNAUTHENTICATED","UNAUTHORIZED","REJECTED","BAD_REQUEST","DGW_SERVER_ERROR","ESTABLISHMENT_ERROR","ACK_TIMEOUT"]);function l(t){switch(t){case e.UNAUTHENTICATED:case e.UNAUTHORIZED:case e.REJECTED:case e.BAD_REQUEST:case e.UNKNOWN_ERROR:case e.SERVER_INTERNAL_ERROR:return!1;default:return!0}}i.StreamError=e,i.isRetryableError=l}),66);
__d("DGWCppBridge",[],(function(t,n,r,o,a,i){var e=(function(){var e=typeof document!="undefined"&&document.currentScript?document.currentScript.src:void 0;return(function(t){t=t||{};var t=typeof t!="undefined"?t:{},n=(function(){function e(){}function t(e,t){return function(){e.apply(t,arguments)}}function n(e){if(!(this instanceof n))throw new TypeError("Promises must be constructed via new");if(typeof e!="function")throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],s(e,this)}function r(e,t){for(;e._state===3;)e=e._value;if(e._state===0){e._deferreds.push(t);return}e._handled=!0,n._immediateFn(function(){var n=e._state===1?t.onFulfilled:t.onRejected;if(n===null){(e._state===1?o:a)(t.promise,e._value);return}var r;try{r=n(e._value)}catch(e){a(t.promise,e);return}o(t.promise,r)})}function o(e,r){try{if(r===e)throw new TypeError("A promise cannot be resolved with itself.");if(r&&(typeof r=="object"||typeof r=="function")){var o=r.then;if(r instanceof n){e._state=3,e._value=r,i(e);return}else if(typeof o=="function"){s(t(o,r),e);return}}e._state=1,e._value=r,i(e)}catch(t){a(e,t)}}function a(e,t){e._state=2,e._value=t,i(e)}function i(e){e._state===2&&e._deferreds.length===0&&n._immediateFn(function(){e._handled||n._unhandledRejectionFn(e._value)});for(var t=0,o=e._deferreds.length;t<o;t++)r(e,e._deferreds[t]);e._deferreds=null}function l(e,t,n){this.onFulfilled=typeof e=="function"?e:null,this.onRejected=typeof t=="function"?t:null,this.promise=n}function s(e,t){var n=!1;try{e(function(e){n||(n=!0,o(t,e))},function(e){n||(n=!0,a(t,e))})}catch(e){if(n)return;n=!0,a(t,e)}}return n.prototype.catch=function(e){return this.then(null,e)},n.prototype.then=function(t,n){var o=new this.constructor(e);return r(this,new l(t,n,o)),o},n.all=function(e){return new n(function(t,n){if(!Array.isArray(e))return n(new TypeError("Promise.all accepts an array"));var r=Array.prototype.slice.call(e);if(r.length===0)return t([]);var o=r.length;function a(e,i){try{if(i&&(typeof i=="object"||typeof i=="function")){var l=i.then;if(typeof l=="function"){l.call(i,function(t){a(e,t)},n);return}}r[e]=i,--o===0&&t(r)}catch(e){n(e)}}for(var i=0;i<r.length;i++)a(i,r[i])})},n.resolve=function(e){return e&&typeof e=="object"&&e.constructor===n?e:new n(function(t){t(e)})},n.reject=function(e){return new n(function(t,n){n(e)})},n.race=function(e){return new n(function(t,r){if(!Array.isArray(e))return r(new TypeError("Promise.race accepts an array"));for(var o=0,a=e.length;o<a;o++)n.resolve(e[o]).then(t,r)})},n._immediateFn=typeof setImmediate=="function"&&function(e){setImmediate(e)}||function(e){setTimeout(e,0)},n._unhandledRejectionFn=function(t){},n})(),r,o;t.ready=new n(function(e,t){r=e,o=t});var a={},i;for(i in t)Object.prototype.hasOwnProperty.call(t,i)&&(a[i]=t[i]);var l=[],s="./this.program",u=function(t,n){throw n},c=!0,d=!1,m="";function p(e){return t.locateFile?t.locateFile(e,m):m+e}var _,f,g,h;typeof document!="undefined"&&document.currentScript&&(m=document.currentScript.src),e&&(m=e),m.indexOf("blob:")!==0?m=m.substr(0,m.lastIndexOf("/")+1):m="",_=function(t){try{var e=new XMLHttpRequest;return e.open("GET",t,!1),e.send(null),e.responseText}catch(e){var n=ge(t);if(n)return pe(n);throw e}},f=function(t,n,r){var e=new XMLHttpRequest;e.open("GET",t,!0),e.responseType="arraybuffer",e.onload=function(){if(e.status==200||e.status==0&&e.response){n(e.response);return}var o=ge(t);if(o){n(o.buffer);return}r()},e.onerror=r,e.send(null)},h=function(t){document.title=t};var y=t.print||console.log.bind(console),C=t.printErr||console.warn.bind(console);for(i in a)Object.prototype.hasOwnProperty.call(a,i)&&(t[i]=a[i]);a=null,t.arguments&&(l=t.arguments),t.thisProgram&&(s=t.thisProgram),t.quit&&(u=t.quit);var b;t.wasmBinary&&(b=t.wasmBinary);var v=t.noExitRuntime||!0,S={Memory:function(t){this.buffer=new ArrayBuffer(t.initial*65536)},Module:function(t){},Instance:function(t,n){this.exports=(function(t){function e(e){return e.set=function(e,t){this[e]=t},e.get=function(e){return this[e]},e}for(var n,r=new Uint8Array(123),o=25;o>=0;--o)r[48+o]=52+o,r[65+o]=o,r[97+o]=26+o;r[43]=62,r[47]=63;function a(e,t,n){for(var o,a,i=0,l=t,s=n.length,u=t+(s*3>>2)-(n[s-2]=="=")-(n[s-1]=="=");i<s;i+=4)o=r[n.charCodeAt(i+1)],a=r[n.charCodeAt(i+2)],e[l++]=r[n.charCodeAt(i)]<<2|o>>4,l<u&&(e[l++]=o<<4|a>>2),l<u&&(e[l++]=a<<6|r[n.charCodeAt(i+3)])}function i(e){a(n,1024,"U3Q5dHlwZV9pbmZvAAAAAOAEAAAABAAATjEwX19jeHhhYml2MTE2X19zaGltX3R5cGVfaW5mb0UAAAAACAUAABgEAAAQBAAATjEwX19jeHhhYml2MTE3X19jbGFzc190eXBlX2luZm9FAAAACAUAAEgEAAA8BAAATjEwX19jeHhhYml2MTE3X19wYmFzZV90eXBlX2luZm9FAAAACAUAAHgEAAA8BAAATjEwX19jeHhhYml2MTE5X19wb2ludGVyX3R5cGVfaW5mb0UACAUAAKgEAACcBAAAAAAAAGwEAAABAAAAAgAAAAMAAAAEAAAABQAAAAYAAAAHAAAACAAAAAAAAABQBQAAAQAAAAkAAAADAAAABAAAAAUAAAAKAAAACwAAAAwAAABOMTBfX2N4eGFiaXYxMjBfX3NpX2NsYXNzX3R5cGVfaW5mb0UAAAAACAUAACgFAABsBA=="),a(n,1372,"gAkQ")}function l(t){var r=t.a,o=r.buffer;r.grow=Le;var a=new Int8Array(o),l=new Int16Array(o),s=new Int32Array(o),u=new Uint8Array(o),c=new Uint16Array(o),d=new Uint32Array(o),m=new Float32Array(o),p=new Float64Array(o),_=Math.imul,f=Math.fround,g=Math.abs,h=Math.clz32,y=Math.min,C=Math.max,b=Math.floor,v=Math.ceil,S=Math.trunc,R=Math.sqrt,L=t.abort,E=NaN,k=1/0,I=t.b,T=1051008,D=0;function x(e,t,n,r,o,i){e=e|0,t=t|0,n=n|0,r=r|0,o=o|0,i=i|0;var m=0,p=0,f=0;m=T-80|0,T=m,s[m+72>>2]=e,s[m+68>>2]=t,s[m+64>>2]=n,s[m+60>>2]=r,s[m+56>>2]=o,s[m+52>>2]=i;e:{if(!s[m+52>>2]||!s[m+56>>2]|(!s[m+72>>2]|!s[m+68>>2]|(!s[m+64>>2]|!s[m+60>>2]))){s[m+76>>2]=5;break e}s[s[m+64>>2]>>2]=0,s[s[m+60>>2]>>2]=0,t=s[m+68>>2],n=s[m+56>>2],r=s[m+52>>2],e=T+-64|0,T=e,s[e+56>>2]=s[m+72>>2],s[e+52>>2]=t,s[e+48>>2]=n,s[e+44>>2]=r,s[e+40>>2]=0,s[e+36>>2]=s[e+56>>2];t:{n:{r:{for(;;){if(!s[e+52>>2])break n;if(s[e+32>>2]=s[e+36>>2],a[e+31|0]=u[s[e+36>>2]],s[e+52>>2]=s[e+52>>2]-1,s[e+36>>2]=s[e+36>>2]+1,u[e+31|0]==10||u[e+31|0]==2|u[e+31|0]==4|u[e+31|0]==9){s[e+40>>2]=s[e+40>>2]+1;continue}if(s[e+24>>2]=1,J(u[e+31|0])&1){if(p=e,f=ee(u[e+31|0])&1,a[p+23|0]=f,s[e+16>>2]=a[e+23|0]&1?1:2,d[e+52>>2]<d[e+16>>2]){s[s[e+48>>2]>>2]=s[e+32>>2],s[s[e+44>>2]>>2]=s[e+52>>2]+s[e+24>>2];break t}if(s[e+52>>2]=s[e+52>>2]-s[e+16>>2],s[e+24>>2]=s[e+16>>2]+s[e+24>>2],s[e+36>>2]=s[e+16>>2]+s[e+36>>2],!(u[e+31|0]!=14&&u[e+31|0]!=8)){s[e+40>>2]=s[e+40>>2]+1;continue}}if(d[e+52>>2]<3)break r;if(s[e+12>>2]=0,t=s[e+36>>2],n=u[t|0]|u[t+1|0]<<8,a[e+12|0]=n,a[e+13|0]=n>>>8,a[e+14|0]=u[t+2|0],s[e+52>>2]=s[e+52>>2]-3,s[e+24>>2]=s[e+24>>2]+3,s[e+36>>2]=s[e+36>>2]+3,d[e+12>>2]<=d[e+52>>2]){s[e+40>>2]=s[e+40>>2]+1,s[e+36>>2]=s[e+12>>2]+s[e+36>>2],s[e+52>>2]=s[e+52>>2]-s[e+12>>2];continue}break}s[s[e+48>>2]>>2]=s[e+32>>2],s[s[e+44>>2]>>2]=s[e+52>>2]+s[e+24>>2];break t}s[s[e+48>>2]>>2]=s[e+32>>2],s[s[e+44>>2]>>2]=s[e+52>>2]+s[e+24>>2];break t}s[s[e+44>>2]>>2]=s[e+52>>2]}if(s[e+60>>2]=s[e+40>>2],T=e- -64|0,s[m+48>>2]=s[e+60>>2],!s[m+48>>2]){s[m+76>>2]=0;break e}if(p=m,f=$(_(s[m+48>>2],20)),s[p+44>>2]=f,!s[m+44>>2]){s[m+76>>2]=3;break e}for(s[m+40>>2]=s[m+44>>2],s[m+36>>2]=s[m+72>>2],s[m+32>>2]=s[m+68>>2]-s[s[m+52>>2]>>2],s[m+28>>2]=0;;){if(d[m+28>>2]<d[m+48>>2]){if(d[m+32>>2]<1){V(s[m+44>>2],s[m+28>>2]),s[m+76>>2]=1;break e}a[m+27|0]=u[s[m+36>>2]],s[m+36>>2]=s[m+36>>2]+1,s[m+32>>2]=s[m+32>>2]-1;t:{if(!u[m+27|0]|u[m+27|0]==1|(u[m+27|0]==2|u[m+27|0]==3)|(u[m+27|0]==4|u[m+27|0]==9|u[m+27|0]==10)||J(u[m+27|0])&1)break t;V(s[m+44>>2],s[m+28>>2]),s[m+76>>2]=6;break e}e=s[m+40>>2],s[e>>2]=u[m+27|0]&15|s[e>>2]&-16;t:{if(u[m+27|0]==10||u[m+27|0]==2|u[m+27|0]==4|u[m+27|0]==9){e=s[m+40>>2],s[e>>2]=s[e>>2]&-268435441,s[m+40>>2]=s[m+40>>2]+20;break t}if(J(u[m+27|0])&1){e=T-48|0,T=e,s[e+40>>2]=s[m+40>>2],s[e+36>>2]=m+36,s[e+32>>2]=m+32;n:{if(!(J(s[s[e+40>>2]>>2]&15)&1)){s[e+44>>2]=1;break n}if(p=e,f=ee(s[s[e+40>>2]>>2]&15)&1,a[p+31|0]=f,s[e+24>>2]=a[e+31|0]&1?1:2,d[s[e+32>>2]>>2]<d[e+24>>2]){s[e+44>>2]=1;break n}if(ae(s[e+40>>2]+4|0,s[s[e+36>>2]>>2],s[e+24>>2]),t=s[e+36>>2],s[t>>2]=s[e+24>>2]+s[t>>2],t=s[e+32>>2],s[t>>2]=s[t>>2]-s[e+24>>2],(s[s[e+40>>2]>>2]&15)==8){t=s[e+40>>2],s[t>>2]=s[t>>2]&-268435441,s[e+44>>2]=0;break n}if((s[s[e+40>>2]>>2]&15)==14){t=s[e+40>>2],s[t>>2]=s[t>>2]&-268435441,s[e+44>>2]=0;break n}if(d[s[e+32>>2]>>2]<3){s[e+44>>2]=11;break n}if(s[e+20>>2]=0,t=s[s[e+36>>2]>>2],n=u[t|0]|u[t+1|0]<<8,a[e+20|0]=n,a[e+21|0]=n>>>8,a[e+22|0]=u[t+2|0],t=s[e+36>>2],s[t>>2]=s[t>>2]+3,t=s[e+32>>2],s[t>>2]=s[t>>2]-3,t=s[e+40>>2],s[t>>2]=s[t>>2]&-268435441|(s[e+20>>2]&16777215)<<4,d[s[e+32>>2]>>2]<d[e+20>>2]){s[e+44>>2]=11;break n}if((s[s[e+40>>2]>>2]&15)==15){if(s[s[e+40>>2]+12>>2]=s[e+20>>2],t=$(s[e+20>>2]),s[s[e+40>>2]+8>>2]=t,!s[s[e+40>>2]+8>>2]){s[e+44>>2]=3;break n}ae(s[s[e+40>>2]+8>>2],s[s[e+36>>2]>>2],s[e+20>>2]),t=s[e+36>>2],s[t>>2]=s[e+20>>2]+s[t>>2],t=s[e+32>>2],s[t>>2]=s[t>>2]-s[e+20>>2],s[e+44>>2]=0;break n}if((s[s[e+40>>2]>>2]&15)==5){if(s[s[e+40>>2]+12>>2]=s[e+20>>2],t=$(s[e+20>>2]),s[s[e+40>>2]+8>>2]=t,!s[s[e+40>>2]+8>>2]){s[e+44>>2]=3;break n}ae(s[s[e+40>>2]+8>>2],s[s[e+36>>2]>>2],s[e+20>>2]),t=s[e+36>>2],s[t>>2]=s[e+20>>2]+s[t>>2],t=s[e+32>>2],s[t>>2]=s[t>>2]-s[e+20>>2],s[e+44>>2]=0;break n}r:{if(!((s[s[e+40>>2]>>2]&15)!=6&&(s[s[e+40>>2]>>2]&15)!=7)){if(p=e,f=G(s[e+36>>2],s[e+32>>2],e+19|0,e+18|0),s[p+12>>2]=f,s[e+12>>2]){s[e+44>>2]=s[e+12>>2];break n}break r}if(!((s[s[e+40>>2]>>2]&15)!=13&&(s[s[e+40>>2]>>2]&15)!=12)){n=s[e+32>>2],t=T-32|0,s[t+24>>2]=s[e+36>>2],s[t+20>>2]=n,s[t+16>>2]=e+19,s[t+12>>2]=e+16,l[t+10>>1]=0;o:{if(d[s[t+20>>2]>>2]<2){s[t+28>>2]=1;break o}n=s[s[t+24>>2]>>2],n=u[n|0]|u[n+1|0]<<8,a[t+10|0]=n,a[t+11|0]=n>>>8,n=s[t+24>>2],s[n>>2]=s[n>>2]+2,n=s[t+20>>2],s[n>>2]=s[n>>2]-2,a[s[t+16>>2]]=(c[t+10>>1]&32768)==32768,l[s[t+12>>2]>>1]=c[t+10>>1]&32767,s[t+28>>2]=0}if(s[e+12>>2]=s[t+28>>2],s[e+12>>2]){s[e+44>>2]=s[e+12>>2];break n}}}if((s[s[e+40>>2]>>2]&15)==12){t=s[e+40>>2],l[t+8>>1]=l[t+8>>1]&1|c[e+16>>1]<<1,s[e+44>>2]=0;break n}if((s[s[e+40>>2]>>2]&15)==7){t=s[e+40>>2],a[t+8|0]=a[t+8|0]&1|u[e+18|0]<<1,s[e+44>>2]=0;break n}if((s[s[e+40>>2]>>2]&15)==13){n=s[e+32>>2],r=s[e+20>>2],o=s[e+40>>2]+12|0,i=s[e+40>>2],t=T-32|0,T=t,s[t+24>>2]=s[e+36>>2],s[t+20>>2]=n,s[t+16>>2]=r,s[t+12>>2]=o,s[t+8>>2]=i+16;r:{if(d[t+16>>2]<2){s[t+28>>2]=9;break r}if(s[s[t+8>>2]>>2]=s[t+16>>2]-2,d[s[t+20>>2]>>2]<d[s[t+8>>2]>>2]){s[t+28>>2]=1;break r}if(n=$(s[s[t+8>>2]>>2]),s[s[t+12>>2]>>2]=n,!s[s[t+12>>2]>>2]){s[t+28>>2]=3;break r}ae(s[s[t+12>>2]>>2],s[s[t+24>>2]>>2],s[s[t+8>>2]>>2]),n=s[t+24>>2],s[n>>2]=s[s[t+8>>2]>>2]+s[n>>2],n=s[t+20>>2],s[n>>2]=s[n>>2]-s[s[t+8>>2]>>2],s[t+28>>2]=0}if(T=t+32|0,s[e+8>>2]=s[t+28>>2],s[e+8>>2]){s[e+44>>2]=s[e+8>>2];break n}t=s[e+40>>2],l[t+8>>1]=a[e+19|0]&1|c[t+8>>1]&65534,t=s[e+40>>2],l[t+8>>1]=l[t+8>>1]&1|c[e+16>>1]<<1,s[e+44>>2]=0;break n}if((s[s[e+40>>2]>>2]&15)==6){if(p=e,f=q(s[e+36>>2],s[e+32>>2],s[e+20>>2],s[e+40>>2]+12|0,s[e+40>>2]+16|0),s[p+4>>2]=f,s[e+4>>2]){s[e+44>>2]=s[e+4>>2];break n}t=s[e+40>>2],a[t+8|0]=a[e+19|0]&1|u[t+8|0]&254,t=s[e+40>>2],a[t+8|0]=a[t+8|0]&1|u[e+18|0]<<1,s[e+44>>2]=0;break n}s[e+44>>2]=1}if(T=e+48|0,s[m+20>>2]=s[e+44>>2],!s[m+20>>2]){s[m+40>>2]=s[m+40>>2]+20;break t}V(s[m+44>>2],s[m+28>>2]),s[m+76>>2]=s[m+20>>2];break e}if(s[m+16>>2]=0,d[m+32>>2]<3){V(s[m+44>>2],s[m+28>>2]),s[m+76>>2]=1;break e}if(e=s[m+36>>2],t=u[e|0]|u[e+1|0]<<8,a[m+16|0]=t,a[m+17|0]=t>>>8,a[m+18|0]=u[e+2|0],s[m+36>>2]=s[m+36>>2]+3,s[m+32>>2]=s[m+32>>2]-3,!(s[m+16>>2]==1|u[m+27|0]!=1)){V(s[m+44>>2],s[m+28>>2]),s[m+76>>2]=7;break e}if(e=s[m+40>>2],s[e>>2]=s[e>>2]&-268435441|(s[m+16>>2]&16777215)<<4,u[m+27|0]==3){if(s[m+16>>2]!=1){V(s[m+44>>2],s[m+28>>2]),s[m+76>>2]=10;break e}if(a[m+15|0]=0,d[m+32>>2]<1){O(s[m+44>>2]),s[m+76>>2]=1;break e}a[m+15|0]=u[s[m+36>>2]],s[m+36>>2]=s[m+36>>2]+1,s[m+32>>2]=s[m+32>>2]-1;n:{if(u[m+15|0]<=4){a[s[m+40>>2]+4|0]=u[m+15|0];break n}a[s[m+40>>2]+4|0]=4}s[m+40>>2]=s[m+40>>2]+20;break t}if(p=m,f=G(m+36|0,m+32|0,m+14|0,m+13|0),s[p+8>>2]=f,s[m+8>>2]){V(s[m+44>>2],s[m+28>>2]),s[m+76>>2]=s[m+8>>2];break e}if(u[m+27|0]==1){e=s[m+40>>2],a[e+4|0]=a[e+4|0]&1|u[m+13|0]<<1,s[m+40>>2]=s[m+40>>2]+20;break t}if(!u[m+27|0]){if(p=m,f=q(m+36|0,m+32|0,s[m+16>>2],s[m+40>>2]+8|0,s[m+40>>2]+12|0),s[p+4>>2]=f,s[m+4>>2]){V(s[m+44>>2],s[m+28>>2]),s[m+76>>2]=s[m+4>>2];break e}e=s[m+40>>2],a[e+4|0]=a[m+14|0]&1|u[e+4|0]&254,e=s[m+40>>2],a[e+4|0]=a[e+4|0]&1|u[m+13|0]<<1,s[m+40>>2]=s[m+40>>2]+20}}s[m+28>>2]=s[m+28>>2]+1;continue}break}if(s[m+32>>2]){V(s[m+44>>2],s[m+48>>2]),s[m+76>>2]=1;break e}s[s[m+64>>2]>>2]=s[m+44>>2],s[s[m+60>>2]>>2]=s[m+48>>2],s[m+76>>2]=0}return T=m+80|0,s[m+76>>2]}function $(e){var t=0,n=0,r=0,o=0,a=0,i=0,l=0,u=0,c=0,d=0,m=0;c=8;e:{t:{if(e>>>0>4294967239)break t;for(;;){c=c>>>0>8?c:8,n=s[603],a=n,o=s[602],l=o,e=e>>>0>8?e+3&-4:8;n:{if(e>>>0<=127){i=(e>>>3|0)-1|0;break n}if(r=h(e),i=((e>>>29-r^4)-(r<<2)|0)+110|0,e>>>0<=4095)break n;r=((e>>>30-r^2)-(r<<1)|0)+71|0,i=r>>>0<63?r:63}if(t=i,r=t&31,(t&63)>>>0>=32?(t=0,n=n>>>r|0):(t=n>>>r|0,n=((1<<r)-1&n)<<32-r|l>>>r),r=t,n|t){for(;;){a=n,t=r;n:{if(t|n){o=t-1|0,u=o+1|0,l=o,o=n-1|0,l=(o|0)!=-1?u:l,o=h(n^o)+32|0,n=h(t^l),n=(n|0)==32?o:n,t=63-n|0,D=0-(n>>>0>63)|0;break n}D=0,t=64}o=t,t=o,n=t&31,(t&63)>>>0>=32?(t=0,l=r>>>n|0):(t=r>>>n|0,l=((1<<n)-1&r)<<32-n|a>>>n),r=t,i=o+i|0,a=i<<4,t=s[a+1384>>2],o=a+1376|0;n:{if((t|0)!=(o|0)){if(n=F(t,c,e),n)break t;n=s[t+4>>2],s[n+8>>2]=s[t+8>>2],s[s[t+8>>2]+4>>2]=n,s[t+8>>2]=o,n=a+1380|0,s[t+4>>2]=s[n>>2],s[n>>2]=t,s[s[t+4>>2]+8>>2]=t,i=i+1|0,n=(r&1)<<31|l>>>1,r=r>>>1|0;break n}d=s[603],t=i,u=t&63,n=u,a=n&31,n>>>0>=32?(n=0,o=-1>>>a|0):(n=-1>>>a|0,o=(1<<a)-1<<32-a|-1>>>a),o=o&-2,a=u&31,u>>>0>=32?(n=o<<a,u=0):(n=(1<<a)-1&o>>>32-a|n<<a,u=o<<a),a=n,o=0-t&63,n=o,t=n&31,n>>>0>=32?(n=-1<<t,t=0):(n=(1<<t)-1&-1>>>32-t|-1<<t,t=-1<<t),m=t&-2,t=o&31,o>>>0>=32?(o=0,t=n>>>t|0):(o=n>>>t|0,t=((1<<t)-1&n)<<32-t|m>>>t),n=t|u,D=a|o,s[602]=s[602]&n,s[603]=D&d,n=l^1}if(!(n|r))break}o=s[602],a=s[603]}n:{if(a|o){r=h(a),r=63-((r|0)==32?h(o)+32|0:r)<<4,t=r+1376|0,r=s[r+1384>>2];r:{if(!a&o>>>0<1073741824||(i=98,(t|0)==(r|0)))break r;for(;;){if(n=F(r,c,e),n)break t;if(r=s[r+8>>2],!i)break r;if(i=i-1|0,(t|0)==(r|0))break}}if(M(e+48|0))break n;if(!r|(t|0)==(r|0))break e;for(;;){if(n=F(r,c,e),n)break t;if(r=s[r+8>>2],(t|0)==(r|0))break}break e}if(!M(e+48|0))break e}if(n=0,e>>>0>4294967239)break t;for(r=c,t=0;;){if(i=t,r){r=r-1&r,t=t+1|0;continue}break}if(!(i>>>0<=1))break}}return n}return 0}function P(e,t,n,r,o,i,m){e=e|0,t=t|0,n=n|0,r=r|0,o=o|0,i=i|0,m=m|0;var p=0,_=0,f=0;p=T-32|0,T=p,l[p+26>>1]=e,s[p+20>>2]=t,s[p+16>>2]=n,a[p+15|0]=r,l[p+12>>1]=o,s[p+8>>2]=i,s[p+4>>2]=m;e:{if(!(!(a[p+15|0]&1)|c[p+12>>1]<=32767)){s[p+28>>2]=4;break e}t=s[p+20>>2],n=s[p+16>>2],r=s[p+8>>2],o=s[p+4>>2],i=a[p+15|0]&1,e=T+-64|0,T=e,s[e+56>>2]=p+26,s[e+52>>2]=t,s[e+48>>2]=n,s[e+44>>2]=r,s[e+40>>2]=o,a[e+39|0]=2,a[e+38|0]=13,s[e+32>>2]=p+12,a[e+31|0]=i,a[e+30|0]=2;t:{n:{if(!(!s[e+52>>2]|(!s[e+44>>2]|!s[e+40>>2]))&&d[e+48>>2]<=16777215)break n;s[e+60>>2]=5;break t}if(s[e+24>>2]=s[e+48>>2]+(u[e+39|0]+(u[e+30|0]+4|0)|0),_=e,f=$(s[e+24>>2]),s[_+20>>2]=f,!s[e+20>>2]){s[e+60>>2]=3;break t}if(s[e+16>>2]=s[e+20>>2],a[s[e+16>>2]]=u[e+38|0],s[e+16>>2]=s[e+16>>2]+1,ae(s[e+16>>2],s[e+56>>2],u[e+30|0]),s[e+16>>2]=u[e+30|0]+s[e+16>>2],s[e+12>>2]=u[e+39|0]+s[e+48>>2],d[e+12>>2]<d[e+48>>2]){O(s[e+20>>2]),s[e+60>>2]=9;break t}if(t=s[e+16>>2],n=u[e+12|0]|u[e+13|0]<<8,a[t|0]=n,a[t+1|0]=n>>>8,a[t+2|0]=u[e+14|0],s[e+16>>2]=s[e+16>>2]+3,a[e+31|0]&1)n:{if(u[e+38|0]==6){t=s[e+32>>2],a[t|0]=u[t|0]|128;break n}r:{if(u[e+38|0]==13){t=s[e+32>>2],l[t>>1]=c[t>>1]|32768;break r}O(s[e+20>>2]),s[e+60>>2]=1;break t}}ae(s[e+16>>2],s[e+32>>2],u[e+39|0]),s[e+16>>2]=u[e+39|0]+s[e+16>>2],ae(s[e+16>>2],s[e+52>>2],s[e+48>>2]),s[s[e+44>>2]>>2]=s[e+20>>2],s[s[e+40>>2]>>2]=s[e+24>>2],s[e+60>>2]=0}T=e- -64|0,s[p+28>>2]=s[e+60>>2]}return T=p+32|0,s[p+28>>2]}function N(e,t,n,r,o){e=e|0,t=t|0,n=n|0,r=r|0,o=o|0;var i=0,c=0,m=0;i=T-32|0,T=i,l[i+30>>1]=e,s[i+24>>2]=t,s[i+20>>2]=n,s[i+16>>2]=r,s[i+12>>2]=o,t=s[i+24>>2],n=s[i+20>>2],r=s[i+16>>2],o=s[i+12>>2],e=T-48|0,T=e,s[e+40>>2]=i+30,s[e+36>>2]=t,s[e+32>>2]=n,s[e+28>>2]=r,s[e+24>>2]=o,a[e+23|0]=2,a[e+22|0]=15;e:{if(!(s[e+24>>2]&&s[e+28>>2])){s[e+44>>2]=5;break e}if(s[s[e+28>>2]>>2]=0,s[s[e+24>>2]>>2]=0,!(d[e+32>>2]<=16777215&&s[e+36>>2])){s[e+44>>2]=5;break e}if(s[e+16>>2]=s[e+32>>2]+(u[e+23|0]+4|0),c=e,m=$(s[e+16>>2]),s[c+12>>2]=m,!s[e+12>>2]){s[e+44>>2]=3;break e}s[e+8>>2]=s[e+12>>2],a[s[e+8>>2]]=u[e+22|0],s[e+8>>2]=s[e+8>>2]+1,ae(s[e+8>>2],s[e+40>>2],u[e+23|0]),s[e+8>>2]=u[e+23|0]+s[e+8>>2],t=s[e+8>>2],n=u[e+32|0]|u[e+33|0]<<8,a[t|0]=n,a[t+1|0]=n>>>8,a[t+2|0]=u[e+34|0],s[e+8>>2]=s[e+8>>2]+3,ae(s[e+8>>2],s[e+36>>2],s[e+32>>2]),s[e+8>>2]=s[e+32>>2]+s[e+8>>2],s[s[e+28>>2]>>2]=s[e+12>>2],s[s[e+24>>2]>>2]=s[e+16>>2],s[e+44>>2]=0}return T=e+48|0,T=i+32|0,s[e+44>>2]}function M(e){var t=0,n=0,r=0,o=0,i=0,l=0;r=s[343],n=e+3&-4,t=r+n|0;e:{t:{if(t>>>0<=r>>>0&&n||t>>>0>Re()<<16>>>0&&!(I(t|0)|0))break t;s[343]=t;break e}s[604]=48,r=-1}if((r|0)!=-1){n=e+r|0,t=n-16|0,s[t+12>>2]=16,s[t>>2]=16,e=s[600],e?l=s[e+8>>2]:l=0;e:{t:{if((l|0)==(r|0)){if(o=r-(s[r-4>>2]&-2)|0,i=s[o-4>>2],s[e+8>>2]=n,e=o-(i&-2)|0,n=-16,!(a[(e+s[e>>2]|0)-4|0]&1))break t;n=s[e+4>>2],s[n+8>>2]=s[e+8>>2],s[s[e+8>>2]+4>>2]=n,t=t-e|0,s[e>>2]=t;break e}s[r+12>>2]=16,s[r>>2]=16,s[r+8>>2]=n,s[r+4>>2]=e,s[600]=r,n=16}e=r+n|0,t=t-e|0,s[e>>2]=t}s[((t&-4)+e|0)-4>>2]=t|1,l=e,o=s[e>>2]-8|0;e:{if(o>>>0<=127){t=(o>>>3|0)-1|0;break e}if(i=h(o),t=((o>>>29-i^4)-(i<<2)|0)+110|0,o>>>0<=4095)break e;t=((o>>>30-i^2)-(i<<1)|0)+71|0,t=t>>>0<63?t:63}n=t<<4,s[l+4>>2]=n+1376,n=n+1384|0,s[e+8>>2]=s[n>>2],s[n>>2]=e,s[s[e+8>>2]+4>>2]=e,n=s[603],e=t&31,(t&63)>>>0>=32?(t=1<<e,e=0):(t=(1<<e)-1&1>>>32-e,e=1<<e),s[602]=e|s[602],s[603]=t|n}return(r|0)!=-1}function w(e,t,n,r){e=e|0,t=t|0,n=n|0,r=r|0;var o=0,i=0,d=0;o=T-16|0,T=o,l[o+10>>1]=e,l[o+8>>1]=t,s[o+4>>2]=n,s[o>>2]=r;e:{if(c[o+8>>1]>32767){s[o+12>>2]=4;break e}t=s[o+4>>2],n=s[o>>2],e=T-48|0,T=e,s[e+40>>2]=o+10,s[e+36>>2]=t,s[e+32>>2]=n,a[e+31|0]=2,a[e+30|0]=12,s[e+24>>2]=o+8,a[e+23|0]=2;t:{if(!(s[e+32>>2]&&s[e+36>>2])){s[e+44>>2]=5;break t}if(s[e+16>>2]=u[e+31|0]+(u[e+23|0]+4|0),i=e,d=$(s[e+16>>2]),s[i+12>>2]=d,!s[e+12>>2]){s[e+44>>2]=3;break t}s[e+8>>2]=s[e+12>>2],a[s[e+8>>2]]=u[e+30|0],s[e+8>>2]=s[e+8>>2]+1,ae(s[e+8>>2],s[e+40>>2],u[e+23|0]),s[e+8>>2]=u[e+23|0]+s[e+8>>2],s[e+4>>2]=u[e+31|0],t=s[e+8>>2],n=u[e+4|0]|u[e+5|0]<<8,a[t|0]=n,a[t+1|0]=n>>>8,a[t+2|0]=u[e+6|0],s[e+8>>2]=s[e+8>>2]+3,ae(s[e+8>>2],s[e+24>>2],u[e+31|0]),s[s[e+32>>2]>>2]=s[e+16>>2],s[s[e+36>>2]>>2]=s[e+12>>2],s[e+44>>2]=0}T=e+48|0,s[o+12>>2]=s[e+44>>2]}return T=o+16|0,s[o+12>>2]}function A(e,t,n){e=e|0,t=t|0,n=n|0;var r=0,o=0,a=0,i=0,l=0;a=T+-64|0,T=a,o=1;e:{if(j(e,t,0)||(o=0,!t))break e;r=T+-64|0,T=r,o=s[t>>2],i=s[o-4>>2],l=s[o-8>>2],s[r+20>>2]=0,s[r+16>>2]=1084,s[r+12>>2]=t,s[r+8>>2]=1132,o=0,ie(r+24|0,39),t=t+l|0;t:{if(j(i,1132,0)){s[r+56>>2]=1,Se[s[s[i>>2]+20>>2]](i,r+8|0,t,t,1,0),o=s[r+32>>2]==1?t:0;break t}Se[s[s[i>>2]+24>>2]](i,r+8|0,t,1,0);n:switch(s[r+44>>2]){case 0:o=s[r+48>>2]==1&&s[r+36>>2]==1&&s[r+40>>2]==1?s[r+28>>2]:0;break t;case 1:break n;default:break t}if(s[r+48>>2]|s[r+36>>2]!=1|s[r+40>>2]!=1&&s[r+32>>2]!=1)break t;o=s[r+24>>2]}if(T=r- -64|0,t=o,o=0,!t)break e;ie(a+8|4,52),s[a+56>>2]=1,s[a+20>>2]=-1,s[a+16>>2]=e,s[a+8>>2]=t,Se[s[s[t>>2]+28>>2]](t,a+8|0,s[n>>2],1),e=s[a+32>>2],(e|0)==1&&(s[n>>2]=s[a+24>>2]),o=(e|0)==1}return e=o,T=a- -64|0,e|0}function F(e,t,n){var r=0,o=0,a=0,i=0;if(r=e+4|0,o=(r+t|0)-1&0-t,t=s[e>>2],o+n>>>0<=(t+e|0)-4>>>0){a=s[e+4>>2],s[a+8>>2]=s[e+8>>2],s[s[e+8>>2]+4>>2]=a,(r|0)!=(o|0)&&(o=o-r|0,a=e-(s[e-4>>2]&-2)|0,r=o+s[a>>2]|0,s[a>>2]=r,s[(a+(r&-4)|0)-4>>2]=r,e=e+o|0,t=t-o|0,s[e>>2]=t);e:{if(n+24>>>0<=t>>>0){r=(e+n|0)+8|0,t=(t-n|0)-8|0,s[r>>2]=t,s[(r+(t&-4)|0)-4>>2]=t|1,i=r,a=s[r>>2]-8|0;t:{if(a>>>0<=127){o=(a>>>3|0)-1|0;break t}if(t=h(a),o=((a>>>29-t^4)-(t<<2)|0)+110|0,a>>>0<=4095)break t;t=((a>>>30-t^2)-(t<<1)|0)+71|0,o=t>>>0<63?t:63}t=o,o=t<<4,s[i+4>>2]=o+1376,o=o+1384|0,s[r+8>>2]=s[o>>2],s[o>>2]=r,s[s[r+8>>2]+4>>2]=r,o=s[603],r=t&31,(t&63)>>>0>=32?(t=1<<r,i=0):(t=(1<<r)-1&1>>>32-r,i=1<<r),s[602]=i|s[602],s[603]=t|o,t=n+8|0,s[e>>2]=t,s[((t&-4)+e|0)-4>>2]=t;break e}s[(e+t|0)-4>>2]=t}e=e+4|0}else e=0;return e}function O(e){var t=0,n=0,r=0,o=0,a=0;if(e){n=e-4|0,o=s[n>>2],r=o,t=n,a=s[e-8>>2],e=a&-2,(e|0)!=(a|0)&&(t=n-e|0,r=s[t+4>>2],s[r+8>>2]=s[t+8>>2],s[s[t+8>>2]+4>>2]=r,r=e+o|0),e=n+o|0,n=s[e>>2],(n|0)!=s[(e+n|0)-4>>2]&&(o=s[e+4>>2],s[o+8>>2]=s[e+8>>2],s[s[e+8>>2]+4>>2]=o,r=r+n|0),s[t>>2]=r,s[((r&-4)+t|0)-4>>2]=r|1,a=t,r=s[t>>2]-8|0;e:{if(r>>>0<=127){e=(r>>>3|0)-1|0;break e}if(o=h(r),e=((r>>>29-o^4)-(o<<2)|0)+110|0,r>>>0<=4095)break e;e=((r>>>30-o^2)-(o<<1)|0)+71|0,e=e>>>0<63?e:63}n=e<<4,s[a+4>>2]=n+1376,n=n+1384|0,s[t+8>>2]=s[n>>2],s[n>>2]=t,s[s[t+8>>2]+4>>2]=t,n=s[603],t=e&31,(e&63)>>>0>=32?(e=1<<t,t=0):(e=(1<<t)-1&1>>>32-t,t=1<<t),s[602]=t|s[602],s[603]=e|n}}function B(e,t,n){e=e|0,t=t|0,n=n|0;var r=0,o=0,i=0;r=T-48|0,T=r,s[r+40>>2]=e,s[r+36>>2]=t,s[r+32>>2]=n;e:{if(!(s[r+32>>2]&&s[r+36>>2])){s[r+44>>2]=5;break e}if(d[r+40>>2]>4){s[r+44>>2]=8;break e}if(s[r+28>>2]=5,o=r,i=$(s[r+28>>2]),s[o+24>>2]=i,!s[r+24>>2]){s[r+44>>2]=3;break e}s[r+20>>2]=s[r+24>>2],a[r+19|0]=3,a[s[r+20>>2]]=u[r+19|0],s[r+20>>2]=s[r+20>>2]+1,s[r+12>>2]=1,e=s[r+20>>2],t=u[r+12|0]|u[r+13|0]<<8,a[e|0]=t,a[e+1|0]=t>>>8,a[e+2|0]=u[r+14|0],s[r+20>>2]=s[r+20>>2]+3,a[r+11|0]=s[r+40>>2],a[s[r+20>>2]]=u[r+11|0],s[s[r+36>>2]>>2]=s[r+24>>2],s[s[r+32>>2]>>2]=s[r+28>>2],s[r+44>>2]=0}return T=r+48|0,s[r+44>>2]}function W(e,t,n,r,o){if(e=e|0,t=t|0,n=n|0,r=r|0,o=o|0,j(e,s[t+8>>2],o)){se(t,n,r);return}e:{if(j(e,s[t>>2],o)){if(!(s[t+20>>2]!=(n|0)&&s[t+16>>2]!=(n|0))){if((r|0)!=1)break e;s[t+32>>2]=1;return}s[t+32>>2]=r;t:{if(s[t+44>>2]==4)break t;if(l[t+52>>1]=0,e=s[e+8>>2],Se[s[s[e>>2]+20>>2]](e,t,n,n,1,o),u[t+53|0]){if(s[t+44>>2]=3,!u[t+52|0])break t;break e}s[t+44>>2]=4}if(s[t+20>>2]=n,s[t+40>>2]=s[t+40>>2]+1,s[t+36>>2]!=1|s[t+24>>2]!=2)break e;a[t+54|0]=1;return}e=s[e+8>>2],Se[s[s[e>>2]+24>>2]](e,t,n,r,o)}}function q(e,t,n,r,o){var a=0;a=T-32|0,T=a,s[a+24>>2]=e,s[a+20>>2]=t,s[a+16>>2]=n,s[a+12>>2]=r,s[a+8>>2]=o;e:{if(d[a+16>>2]<1){s[a+28>>2]=9;break e}if(s[s[a+8>>2]>>2]=s[a+16>>2]-1,d[s[a+20>>2]>>2]<d[s[a+8>>2]>>2]){s[a+28>>2]=1;break e}if(e=$(s[s[a+8>>2]>>2]),s[s[a+12>>2]>>2]=e,!s[s[a+12>>2]>>2]){s[a+28>>2]=3;break e}ae(s[s[a+12>>2]>>2],s[s[a+24>>2]>>2],s[s[a+8>>2]>>2]),e=s[a+24>>2],s[e>>2]=s[s[a+8>>2]>>2]+s[e>>2],e=s[a+20>>2],s[e>>2]=s[e>>2]-s[s[a+8>>2]>>2],s[a+28>>2]=0}return T=a+32|0,s[a+28>>2]}function U(e,t,n){e=e|0,t=t|0,n=n|0;var r=0,o=0,i=0;r=T-32|0,T=r,l[r+26>>1]=e,s[r+20>>2]=t,s[r+16>>2]=n,s[s[r+16>>2]>>2]=3,o=r,i=$(s[s[r+16>>2]>>2]),s[o+12>>2]=i;e:{if(!s[r+12>>2]){s[r+28>>2]=3;break e}s[s[r+20>>2]>>2]=s[r+12>>2],a[r+11|0]=14,a[s[r+12>>2]]=u[r+11|0],s[r+12>>2]=s[r+12>>2]+1,e=s[r+12>>2],t=u[r+26|0]|u[r+27|0]<<8,a[e|0]=t,a[e+1|0]=t>>>8,s[r+28>>2]=0}return T=r+32|0,s[r+28>>2]}function V(e,t){var n=0;for(n=T-16|0,T=n,s[n+12>>2]=e,s[n+8>>2]=t,s[n+4>>2]=0;;){if(d[n+4>>2]<d[n+8>>2]){s[n>>2]=s[n+12>>2]+_(s[n+4>>2],20);e:{if(!(s[s[n>>2]>>2]&15)){O(s[s[n>>2]+8>>2]);break e}t:{if((s[s[n>>2]>>2]&15)==5){O(s[s[n>>2]+8>>2]);break t}(s[s[n>>2]>>2]&15)==6&&O(s[s[n>>2]+12>>2])}}s[n+4>>2]=s[n+4>>2]+1;continue}break}O(s[n+12>>2]),T=n+16|0}function H(e,t,n,r){a[e+53|0]=1;e:{if(s[e+4>>2]!=(n|0))break e;if(a[e+52|0]=1,n=s[e+16>>2],!n){if(s[e+36>>2]=1,s[e+24>>2]=r,s[e+16>>2]=t,(r|0)!=1|s[e+48>>2]!=1)break e;a[e+54|0]=1;return}if((t|0)==(n|0)){if(n=s[e+24>>2],(n|0)==2&&(s[e+24>>2]=r,n=r),s[e+48>>2]!=1|(n|0)!=1)break e;a[e+54|0]=1;return}a[e+54|0]=1,s[e+36>>2]=s[e+36>>2]+1}}function G(e,t,n,r){var o=0;o=T-32|0,s[o+24>>2]=e,s[o+20>>2]=t,s[o+16>>2]=n,s[o+12>>2]=r,a[o+11|0]=0;e:{if(d[s[o+20>>2]>>2]<1){s[o+28>>2]=1;break e}a[o+11|0]=u[s[s[o+24>>2]>>2]],e=s[o+24>>2],s[e>>2]=s[e>>2]+1,e=s[o+20>>2],s[e>>2]=s[e>>2]-1,a[s[o+16>>2]]=(u[o+11|0]&128)==128,a[s[o+12>>2]]=u[o+11|0]&127,s[o+28>>2]=0}return s[o+28>>2]}function z(e,t,n,r,o){if(e=e|0,t=t|0,n=n|0,r=r|0,o=o|0,j(e,s[t+8>>2],o)){se(t,n,r);return}e:{if(!j(e,s[t>>2],o))break e;if(!(s[t+20>>2]!=(n|0)&&s[t+16>>2]!=(n|0))){if((r|0)!=1)break e;s[t+32>>2]=1;return}s[t+20>>2]=n,s[t+32>>2]=r,s[t+40>>2]=s[t+40>>2]+1,s[t+36>>2]!=1|s[t+24>>2]!=2||(a[t+54|0]=1),s[t+44>>2]=4}}function j(e,t,n){var r=0;if(!n)return s[e+4>>2]==s[t+4>>2];if((e|0)==(t|0))return 1;n=s[e+4>>2],e=u[n|0],t=s[t+4>>2],r=u[t|0];e:{if(!e|(r|0)!=(e|0))break e;for(;;){if(r=u[t+1|0],e=u[n+1|0],!e)break e;if(t=t+1|0,n=n+1|0,(e|0)!=(r|0))break}}return(e|0)==(r|0)}function K(e,t){e=e|0,t=t|0;var n=0,r=0,o=0;n=T-32|0,T=n,s[n+24>>2]=e,s[n+20>>2]=t,r=n,o=$(1),s[r+16>>2]=o;e:{if(!s[n+16>>2]){s[n+28>>2]=3;break e}a[n+15|0]=9,a[s[n+16>>2]]=u[n+15|0],s[s[n+24>>2]>>2]=s[n+16>>2],s[s[n+20>>2]>>2]=1,s[n+28>>2]=0}return T=n+32|0,s[n+28>>2]}function Q(e,t){e=e|0,t=t|0;var n=0,r=0,o=0;n=T-32|0,T=n,s[n+24>>2]=e,s[n+20>>2]=t,r=n,o=$(1),s[r+16>>2]=o;e:{if(!s[n+16>>2]){s[n+28>>2]=3;break e}a[n+15|0]=10,a[s[n+16>>2]]=u[n+15|0],s[s[n+24>>2]>>2]=s[n+16>>2],s[s[n+20>>2]>>2]=1,s[n+28>>2]=0}return T=n+32|0,s[n+28>>2]}function X(e,t){e=e|0,t=t|0;var n=0,r=0,o=0;n=T-32|0,T=n,s[n+24>>2]=e,s[n+20>>2]=t,r=n,o=$(1),s[r+16>>2]=o;e:{if(!s[n+16>>2]){s[n+28>>2]=3;break e}a[n+15|0]=2,a[s[n+16>>2]]=u[n+15|0],s[s[n+24>>2]>>2]=s[n+16>>2],s[s[n+20>>2]>>2]=1,s[n+28>>2]=0}return T=n+32|0,s[n+28>>2]}function Y(e,t){e=e|0,t=t|0;var n=0,r=0,o=0;n=T-32|0,T=n,s[n+24>>2]=e,s[n+20>>2]=t,r=n,o=$(1),s[r+16>>2]=o;e:{if(!s[n+16>>2]){s[n+28>>2]=3;break e}a[n+15|0]=4,a[s[n+16>>2]]=u[n+15|0],s[s[n+24>>2]>>2]=s[n+16>>2],s[s[n+20>>2]>>2]=1,s[n+28>>2]=0}return T=n+32|0,s[n+28>>2]}function J(e){var t=0;t=T-16|0,T=t,s[t+12>>2]=e,e=1;e:{if(ee(s[t+12>>2])&1||(e=1,s[t+12>>2]==15)||(e=1,s[t+12>>2]==13)||(e=1,s[t+12>>2]==12))break e;e=s[t+12>>2]==14}return T=t+16|0,e}function Z(e,t,n){var r=0;if(r=s[e+16>>2],!r){s[e+36>>2]=1,s[e+24>>2]=n,s[e+16>>2]=t;return}e:{if((t|0)==(r|0)){if(s[e+24>>2]!=2)break e;s[e+24>>2]=n;return}a[e+54|0]=1,s[e+24>>2]=2,s[e+36>>2]=s[e+36>>2]+1}}function ee(e){var t=0;t=T-16|0,s[t+12>>2]=e,e=1;e:{if(s[t+12>>2]==5||(e=1,s[t+12>>2]==6)||(e=1,s[t+12>>2]==7))break e;e=s[t+12>>2]==8}return e}function te(e,t,n,r,o,a){if(e=e|0,t=t|0,n=n|0,r=r|0,o=o|0,a=a|0,j(e,s[t+8>>2],a)){H(t,n,r,o);return}e=s[e+8>>2],Se[s[s[e>>2]+20>>2]](e,t,n,r,o,a)}function ne(){for(var e=0,t=0,n=0;t=e<<4,n=t+1376|0,s[t+1380>>2]=n,s[t+1384>>2]=n,e=e+1|0,(e|0)!=64;);M(48)}function re(e,t,n,r){if(e=e|0,t=t|0,n=n|0,r=r|0,j(e,s[t+8>>2],0)){Z(t,n,r);return}e=s[e+8>>2],Se[s[s[e>>2]+28>>2]](e,t,n,r)}function oe(e,t,n,r,o,a){e=e|0,t=t|0,n=n|0,r=r|0,o=o|0,a=a|0,j(e,s[t+8>>2],a)&&H(t,n,r,o)}function ae(e,t,n){if(n)for(;a[e|0]=u[t|0],e=e+1|0,t=t+1|0,n=n-1|0,!!n;);}function ie(e,t){if(t)for(;a[e|0]=0,e=e+1|0,t=t-1|0,!!t;);}function le(e,t,n,r){e=e|0,t=t|0,n=n|0,r=r|0,j(e,s[t+8>>2],0)&&Z(t,n,r)}function se(e,t,n){s[e+28>>2]==1|s[e+4>>2]!=(t|0)||(s[e+28>>2]=n)}function ue(e,t){return e=e|0,t=t|0,_(t,20)+e|0}function ce(e){return e=e|0,c[e+8>>1]>>>1|0}function de(e){return e=e|0,l[e+8>>1]&1}function me(e){return e=e|0,s[e+12>>2]}function pe(e){return e=e|0,s[e>>2]&15}function _e(e){return e=e|0,s[e+16>>2]}function fe(e){return e=e|0,c[e+4>>1]}function ge(e){return e=e|0,s[e+8>>2]}function he(e){return e=e|0,u[e+4|0]}function ye(e){return e=e|0,e|0}function Ce(e){return $(e)}function be(e){e=e|0,O(e)}function ve(e){e=e|0}n=u,i(t);var Se=e([null,ye,be,ve,ve,A,oe,z,le,be,te,W,re]);function Re(){return o.byteLength/65536|0}function Le(e){e=e|0;var t=Re()|0,i=t+e|0;if(t<i&&i<65536){var f=new ArrayBuffer(_(i,65536)),g=new Int8Array(f);g.set(a),a=new Int8Array(f),l=new Int16Array(f),s=new Int32Array(f),u=new Uint8Array(f),c=new Uint16Array(f),d=new Uint32Array(f),m=new Float32Array(f),p=new Float64Array(f),o=f,r.buffer=o,n=u}return t}return{c:ne,d:Ce,e:be,f:X,g:Y,h:B,i:N,j:U,k:P,l:w,m:K,n:Q,o:x,p:pe,q:he,r:ue,s:fe,t:ge,u:me,v:me,w:_e,x:ce,y:de,z:ce,A:Se}}return l(t)})(he)},instantiate:function(t,n){return{then:function(n){var e=new S.Module(t);n({instance:new S.Instance(e)})}}},RuntimeError:Error};b=[],typeof S!="object"&&ne("no native wasm support detected");var R,L=!1,E;function k(e,t){e||ne("Assertion failed: "+t)}function I(e,t){return e%t>0&&(e+=t-e%t),e}var T,D,x,$,P,N,M,w,A;function F(e){T=e,t.HEAP8=D=new Int8Array(e),t.HEAP16=$=new Int16Array(e),t.HEAP32=N=new Int32Array(e),t.HEAPU8=x=new Uint8Array(e),t.HEAPU16=P=new Uint16Array(e),t.HEAPU32=M=new Uint32Array(e),t.HEAPF32=w=new Float32Array(e),t.HEAPF64=A=new Float64Array(e)}var O=t.INITIAL_MEMORY||2097152;t.wasmMemory?R=t.wasmMemory:R=new S.Memory({initial:O/65536,maximum:32768}),R&&(T=R.buffer),O=T.byteLength,F(T);var B,W=[],q=[],U=[],V=!1;function H(){if(t.preRun)for(typeof t.preRun=="function"&&(t.preRun=[t.preRun]);t.preRun.length;)j(t.preRun.shift());ue(W)}function G(){V=!0,ue(q)}function z(){if(t.postRun)for(typeof t.postRun=="function"&&(t.postRun=[t.postRun]);t.postRun.length;)Q(t.postRun.shift());ue(U)}function j(e){W.unshift(e)}function K(e){q.unshift(e)}function Q(e){U.unshift(e)}if((!Math.imul||Math.imul(4294967295,5)!==-5)&&(Math.imul=function(t,n){var e=t>>>16,r=t&65535,o=n>>>16,a=n&65535;return r*a+(e*a+r*o<<16)|0}),!Math.fround){var X=new Float32Array(1);Math.fround=function(e){return X[0]=e,X[0]}}Math.clz32||(Math.clz32=function(e){var t=32,n=e>>16;return n&&(t-=16,e=n),n=e>>8,n&&(t-=8,e=n),n=e>>4,n&&(t-=4,e=n),n=e>>2,n&&(t-=2,e=n),n=e>>1,n?t-2:t-e}),Math.trunc||(Math.trunc=function(e){return e<0?Math.ceil(e):Math.floor(e)});var Y=0,J=null,Z=null;function ee(e){Y++,t.monitorRunDependencies&&t.monitorRunDependencies(Y)}function te(e){if(Y--,t.monitorRunDependencies&&t.monitorRunDependencies(Y),Y==0&&(J!==null&&(clearInterval(J),J=null),Z)){var n=Z;Z=null,n()}}t.preloadedImages={},t.preloadedAudios={};function ne(e){t.onAbort&&t.onAbort(e),e+="",C(e),L=!0,E=1,e="abort("+e+"). Build with -s ASSERTIONS=1 for more info.";var n=new S.RuntimeError(e);throw o(n),n}var re="data:application/octet-stream;base64,";function oe(e){return e.startsWith(re)}var ae="dgwcppbridge.wasm";oe(ae)||(ae=p(ae));function ie(e){try{if(e==ae&&b)return new Uint8Array(b);var t=ge(e);if(t)return t;if(g)return g(e);throw"both async and sync fetching of the wasm failed"}catch(e){ne(e)}}function le(){return!b&&(c||d)&&typeof fetch=="function"?fetch(ae,{credentials:"same-origin"}).then(function(e){if(!e.ok)throw"failed to load wasm binary file at '"+ae+"'";return e.arrayBuffer()}).catch(function(){return ie(ae)}):n.resolve().then(function(){return ie(ae)})}function se(){var e={a:he};function n(e,n){var r=e.exports;t.asm=r,B=t.asm.A,K(t.asm.c),te("wasm-instantiate")}ee("wasm-instantiate");function r(e){n(e.instance)}function a(t){return le().then(function(t){var n=S.instantiate(t,e);return n}).then(t,function(e){C("failed to asynchronously prepare wasm: "+e),ne(e)})}function i(){return!b&&typeof S.instantiateStreaming=="function"&&!oe(ae)&&typeof fetch=="function"?fetch(ae,{credentials:"same-origin"}).then(function(t){var n=S.instantiateStreaming(t,e);return n.then(r,function(e){return C("wasm streaming compile failed: "+e),C("falling back to ArrayBuffer instantiation"),a(r)})}):a(r)}if(t.instantiateWasm)try{var l=t.instantiateWasm(e,n);return l}catch(e){return C("Module.instantiateWasm callback failed with error: "+e),!1}return i().catch(o),{}}function ue(e){for(;e.length>0;){var n=e.shift();if(typeof n=="function"){n(t);continue}var r=n.func;typeof r=="number"?n.arg===void 0?B.get(r)():B.get(r)(n.arg):r(n.arg===void 0?null:n.arg)}}function ce(e){try{return R.grow(e-T.byteLength+65535>>>16),F(R.buffer),1}catch(e){}}function de(e){var t=x.length;e=e>>>0;var n=2147483648;if(e>n)return!1;for(var r=1;r<=4;r*=2){var o=t*(1+.2/r);o=Math.min(o,e+100663296);var a=Math.min(n,I(Math.max(e,o),65536)),i=ce(a);if(i)return!0}return!1}var me=!1;function pe(e){for(var t=[],n=0;n<e.length;n++){var r=e[n];r>255&&(r&=255),t.push(String.fromCharCode(r))}return t.join("")}var _e=typeof atob=="function"?atob:function(e){var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",n="",r,o,a,i,l,s,u,c=0;e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");do i=t.indexOf(e.charAt(c++)),l=t.indexOf(e.charAt(c++)),s=t.indexOf(e.charAt(c++)),u=t.indexOf(e.charAt(c++)),r=i<<2|l>>4,o=(l&15)<<4|s>>2,a=(s&3)<<6|u,n=n+String.fromCharCode(r),s!==64&&(n=n+String.fromCharCode(o)),u!==64&&(n=n+String.fromCharCode(a));while(c<e.length);return n};function fe(e){try{for(var t=_e(e),n=new Uint8Array(t.length),r=0;r<t.length;++r)n[r]=t.charCodeAt(r);return n}catch(e){throw new Error("Converting base64 string to bytes failed.")}}function ge(e){if(oe(e))return fe(e.slice(re.length))}var he={b:de,a:R},ye=se(),Ce=t.___wasm_call_ctors=function(){return(Ce=t.___wasm_call_ctors=t.asm.c).apply(null,arguments)},be=t.__malloc=function(){return(be=t.__malloc=t.asm.d).apply(null,arguments)},ve=t.__free=function(){return(ve=t.__free=t.asm.e).apply(null,arguments)},Se=t.__DgwCodecEncodeEmpty=function(){return(Se=t.__DgwCodecEncodeEmpty=t.asm.f).apply(null,arguments)},Re=t.__DgwCodecEncodeDeauth=function(){return(Re=t.__DgwCodecEncodeDeauth=t.asm.g).apply(null,arguments)},Le=t.__DgwCodecEncodeDrain=function(){return(Le=t.__DgwCodecEncodeDrain=t.asm.h).apply(null,arguments)},Ee=t.__DgwCodecEncodeStreamGroup_EstabStream=function(){return(Ee=t.__DgwCodecEncodeStreamGroup_EstabStream=t.asm.i).apply(null,arguments)},ke=t.__DgwCodecEncodeStreamGroup_EndOfData=function(){return(ke=t.__DgwCodecEncodeStreamGroup_EndOfData=t.asm.j).apply(null,arguments)},Ie=t.__DgwCodecEncodeStreamGroup_Data=function(){return(Ie=t.__DgwCodecEncodeStreamGroup_Data=t.asm.k).apply(null,arguments)},Te=t.__DgwCodecEncodeStreamGroup_Ack=function(){return(Te=t.__DgwCodecEncodeStreamGroup_Ack=t.asm.l).apply(null,arguments)},De=t.__DgwCodecEncodePing=function(){return(De=t.__DgwCodecEncodePing=t.asm.m).apply(null,arguments)},xe=t.__DgwCodecEncodePong=function(){return(xe=t.__DgwCodecEncodePong=t.asm.n).apply(null,arguments)},$e=t.__DgwCodecDecode=function(){return($e=t.__DgwCodecDecode=t.asm.o).apply(null,arguments)},Pe=t.__getFrameType=function(){return(Pe=t.__getFrameType=t.asm.p).apply(null,arguments)},Ne=t.__getDrainReasonFromDrainFrame=function(){return(Ne=t.__getDrainReasonFromDrainFrame=t.asm.q).apply(null,arguments)},Me=t.__getDGWFramePtr=function(){return(Me=t.__getDGWFramePtr=t.asm.r).apply(null,arguments)},we=t.__getStreamIdFromStreamGroupFrame=function(){return(we=t.__getStreamIdFromStreamGroupFrame=t.asm.s).apply(null,arguments)},Ae=t.__getEncodedParamsFromEstablishStreamFrame=function(){return(Ae=t.__getEncodedParamsFromEstablishStreamFrame=t.asm.t).apply(null,arguments)},Fe=t.__getEncodedParamsSizeFromEstablishStreamFrame=function(){return(Fe=t.__getEncodedParamsSizeFromEstablishStreamFrame=t.asm.u).apply(null,arguments)},Oe=t.__getDataFromGroupedStreamDataFrame=function(){return(Oe=t.__getDataFromGroupedStreamDataFrame=t.asm.v).apply(null,arguments)},Be=t.__getDataSizeFromGroupedStreamDataFrame=function(){return(Be=t.__getDataSizeFromGroupedStreamDataFrame=t.asm.w).apply(null,arguments)},We=t.__getAckIdFromGroupedStreamDataFrame=function(){return(We=t.__getAckIdFromGroupedStreamDataFrame=t.asm.x).apply(null,arguments)},qe=t.__getRequiresAckFromGroupedStreamDataFrame=function(){return(qe=t.__getRequiresAckFromGroupedStreamDataFrame=t.asm.y).apply(null,arguments)},Ue=t.__getAckIdFromGroupedStreamAckFrame=function(){return(Ue=t.__getAckIdFromGroupedStreamAckFrame=t.asm.z).apply(null,arguments)},Ve;Z=function e(){Ve||He(),Ve||(Z=e)};function He(e){if(e=e||l,Y>0||(H(),Y>0))return;function n(){Ve||(Ve=!0,t.calledRun=!0,!L&&(G(),r(t),t.onRuntimeInitialized&&t.onRuntimeInitialized(),z()))}t.setStatus?(t.setStatus("Running..."),setTimeout(function(){setTimeout(function(){t.setStatus("")},1),n()},1)):n()}if(t.run=He,t.preInit)for(typeof t.preInit=="function"&&(t.preInit=[t.preInit]);t.preInit.length>0;)t.preInit.pop()();return He(),t.ready})})();typeof i=="object"&&typeof a=="object"?a.exports=e:typeof define=="function"&&define.amd?define([],function(){return e}):typeof i=="object"&&(i.Module=e)}),null);
__d("DGWUtils",["Base64","DGWConstants","DGWCppBridge","DGWLoggingContext","Promise","Random","URI","asyncToGeneratorRuntime","getErrorSafe"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=4;function c(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=o("Random").random()*16|0,n=e==="x"?t:t&3|8;return n.toString(16)})}function d(e){var t=new TextDecoder,n=t.decode(e),o=r("Base64").encode(n),a=o.replace(/\+/gi,"-").replace(/\//gi,"_").replace(/=/gi,"");return a}var m=null,p=null;function _(){return p==null&&(p=(s||(s=n("Promise"))).resolve().then(function(){return r("DGWCppBridge")()}).then(function(e){m=e})),p}var f=(function(){function t(){}return t.initialize=(function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(){return _()});function t(){return e.apply(this,arguments)}return t})(),t.constructConnectUrl=function(n){var t,a,i=n.appId,l=n.appVersion,s=n.authType,u=n.deviceId,c=n.dgwVersion,m=n.fbId,p=n.tier,_=n.loggingId,f=n.headers,g=n.endpoint,h=n.serviceId,y=n.regionHint,C=n.establishStreamFrame,b=n.trafficTracing,v=n.authToken,S=(t={},t[(a=o("DGWConstants")).HEADER_CONSTANTS.HEADER_APPID]=i,t[a.HEADER_CONSTANTS.HEADER_APPVERSION]=l,t[a.HEADER_CONSTANTS.HEADER_AUTHTYPE]=s,t[a.HEADER_CONSTANTS.HEADER_DGW_VERSION]=""+c,t[a.HEADER_CONSTANTS.HEADER_UUID]=m,t[a.HEADER_CONSTANTS.HEADER_TARGET_TIER]=p,t);C!==void 0&&(S[o("DGWConstants").HEADER_CONSTANTS.HEADER_ESTABLISH_STREAM_FRAME_BASE64]=d(C)),_!==void 0&&(S[o("DGWConstants").HEADER_CONSTANTS.HEADER_LOGGING_ID]=_),y!==void 0&&(S[o("DGWConstants").HEADER_CONSTANTS.HEADER_REGIONHINT]=y),u!==void 0&&(S[o("DGWConstants").HEADER_CONSTANTS.HEADER_DEVICE_ID]=u),b!==void 0&&(S[o("DGWConstants").HEADER_CONSTANTS.TRAFFIC_TRACING]="debug:"+b),v!==void 0&&(S[o("DGWConstants").HEADER_CONSTANTS.HEADER_AUTHTOKEN]=v),Object.keys(f).forEach(function(e){var t=o("DGWConstants").HEADER_CONSTANTS.APPHEADER_PREFIX+e;Object.prototype.hasOwnProperty.call(S,t)||(S[t]=f[e])});var R=new(e||(e=r("URI")))(g);return R.setQueryData(S),R.setPath(R.getPath()+"/"+h),R.toString().length>2e3&&(delete S[o("DGWConstants").HEADER_CONSTANTS.HEADER_ESTABLISH_STREAM_FRAME_BASE64],R.setQueryData(S)),R.toStringRawQuery()},t})(),g=(function(){function e(e,t,n){this.$1=null,this.$2=e,this.$3=t,this.$4=n}e.initialize=(function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(){return _()});function t(){return e.apply(this,arguments)}return t})();var t=e.prototype;return t.malloc=function(t){try{var e=m.__malloc(t);if(e===0){var n;return(n=this.$2)==null||n.logError(o("DGWLoggingContext").DGWLoggingComponent.CODEC_COMPONENT,"wasm malloc failure","malloc returned 0"),-1}return e}catch(e){var a;return(a=this.$2)==null||a.logError(o("DGWLoggingContext").DGWLoggingComponent.CODEC_COMPONENT,"wasm malloc failure","exception during malloc",r("getErrorSafe")(e).message),-1}},t.free=function(t){m.__free(t)},t.append=function(t){if(this.$1==null){this.$1=t;return}var e=this.$1.length,n=new Uint8Array(e+t.length);n.set(this.$1,0),n.set(t,e),this.$1=n},t.processData=function(){var e=this;if(this.$1!=null){var t=this.$1.length,n=this.malloc(t);if(n!==-1){var r=m.HEAPU8.subarray(n,n+t);if(this.$1)for(var a=0;a<r.length;++a)r[a]=this.$1[a];var i=this.malloc(u*4);if(i!==-1){var l=i,s=l+u,c=s+u,d=c+u,p=m.__DgwCodecDecode(n,t,l,s,c,d);if(this.free(n),p!==o("DGWConstants").DgwCodecReturnCode.DgwCodecReturnCode_Success){var _;this.free(i),(_=this.$2)==null||_.logError(o("DGWLoggingContext").DGWLoggingComponent.CODEC_COMPONENT,"Codec Decode Failure","Failed to decode Frame(s). Received error code "+o("DGWConstants").DgwCodecReturnCodeToString(p));return}var f=m.HEAPU32.subarray(d/u,d/u+1)[0];if(this.$1==null){this.free(i);return}var g=this.$1.length-f;if(this.$1&&this.$1.length>g){var h;this.$1=new Uint8Array(((h=this.$1)==null?void 0:h.subarray(g))||[])}else this.$1=null;for(var y=m.HEAPU32.subarray(s/u,s/u+1)[0],C=m.HEAPU32.subarray(l/u,l/u+1)[0],b=[],v=function(){var t=m.__getDGWFramePtr(C,S),n=m.__getFrameType(t);switch(n){case o("DGWConstants").DgwFrameType.DgwFrameType_Drain:{var r,a=m.__getDrainReasonFromDrainFrame(t),i=o("DGWConstants").drainReasonToDrainReasonString(a);(r=e.$2)==null||r.logEvent(o("DGWLoggingContext").DGWLoggingComponent.CODEC_COMPONENT,"Received Drain Frame from server","DrainReason: "+i),b.push(function(){var t;return(t=e.$3)==null?void 0:t.receivedDrainSignal(i)});break}case o("DGWConstants").DgwFrameType.DgwFrameType_StreamGroup_EstabStream:{var l=m.__getStreamIdFromStreamGroupFrame(t),s=m.__getEncodedParamsFromEstablishStreamFrame(t),u=new Uint8Array(m.HEAPU8.subarray(s,s+m.__getEncodedParamsSizeFromEstablishStreamFrame(t)));e.free(s),b.push(function(){var t;return(t=e.$3)==null?void 0:t.onGroupedStreamEstablishStreamReceived(l,u)});break}case o("DGWConstants").DgwFrameType.DgwFrameType_StreamGroup_Data:{var c=m.__getStreamIdFromStreamGroupFrame(t),d=m.__getDataFromGroupedStreamDataFrame(t),p=new Uint8Array(m.HEAPU8.subarray(d,d+m.__getDataSizeFromGroupedStreamDataFrame(t)));e.free(d);var _=m.__getRequiresAckFromGroupedStreamDataFrame(t)?m.__getAckIdFromGroupedStreamDataFrame(t):null;b.push(function(){var t;return(t=e.$3)==null?void 0:t.onGroupedStreamDataReceived(c,p,_)});break}case o("DGWConstants").DgwFrameType.DgwFrameType_StreamGroup_Ack:{var f=m.__getStreamIdFromStreamGroupFrame(t),g=m.__getAckIdFromGroupedStreamAckFrame(t);b.push(function(){var t;return(t=e.$3)==null?void 0:t.onGroupedStreamAckReceived(f,g)});break}case o("DGWConstants").DgwFrameType.DgwFrameType_StreamGroup_EndOfData:{var h=m.__getStreamIdFromStreamGroupFrame(t);b.push(function(){var t;return(t=e.$3)==null?void 0:t.onGroupedStreamEndOfDataReceived(h)});break}case o("DGWConstants").DgwFrameType.DgwFrameType_Ping:{b.push(function(){var t;return(t=e.$3)==null?void 0:t.onPingReceived()});break}case o("DGWConstants").DgwFrameType.DgwFrameType_Pong:{b.push(function(){var t;return(t=e.$3)==null?void 0:t.onPongReceived()});break}default:break}e.free(t)},S=0;S<y;++S)v();this.free(i);for(var R=0;R<b.length;R++)b[R]()}}}},t.encodeData=function(t,n,r,a){var e=this.malloc(t.length);if(e===-1)return null;for(var i=m.HEAPU8.subarray(e,e+t.length),l=0;l<i.length;++l)i[l]=t[l];var s=this.malloc(u*2),c=s,d=s+u,p=m.__DgwCodecEncodeStreamGroup_Data(a,e,i.length,n,r,c,d);if(this.free(e),p!==o("DGWConstants").DgwCodecReturnCode.DgwCodecReturnCode_Success){var _;return(_=this.$2)==null||_.logError(o("DGWLoggingContext").DGWLoggingComponent.CODEC_COMPONENT,"Data Frame encode failure","Failed to decode DGW Data Frame. Received error code "+o("DGWConstants").DgwCodecReturnCodeToString(p)),null}var f=m.HEAPU32.subarray(c/u,c/u+1)[0],g=m.HEAPU32.subarray(d/u,d/u+1)[0],h=new Uint8Array(m.HEAPU8.subarray(f,f+g));return this.free(f),this.free(s),h},t.encodeAck=function(t,n){var e=this.malloc(u*2);if(e===-1)return null;var r=e,a=e+u,i=m.__DgwCodecEncodeStreamGroup_Ack(n,t,r,a);if(i!==o("DGWConstants").DgwCodecReturnCode.DgwCodecReturnCode_Success){var l;return(l=this.$2)==null||l.logError(o("DGWLoggingContext").DGWLoggingComponent.CODEC_COMPONENT,"ACK Frame encode failure","Failed to encode ACK Frame. Received error code "+o("DGWConstants").DgwCodecReturnCodeToString(i)),null}var s=m.HEAPU32.subarray(r/u,r/u+1)[0],c=m.HEAPU32.subarray(a/u,a/u+1)[0],d=new Uint8Array(m.HEAPU8.subarray(s,s+c));return this.free(s),this.free(e),d},t.encodeDrain=function(t){var e=this.malloc(u*2);if(e===-1)return null;var n=e,r=e+u,a=m.__DgwCodecEncodeDrain(t,n,r);if(a!==o("DGWConstants").DgwCodecReturnCode.DgwCodecReturnCode_Success){var i;return(i=this.$2)==null||i.logError(o("DGWLoggingContext").DGWLoggingComponent.CODEC_COMPONENT,"Drain Frame encode failure","Failed to encode Drain Frame. Received error code "+o("DGWConstants").DgwCodecReturnCodeToString(a)),null}var l=m.HEAPU32.subarray(n/u,n/u+1)[0],s=m.HEAPU32.subarray(r/u,r/u+1)[0],c=new Uint8Array(m.HEAPU8.subarray(l,l+s));return this.free(l),this.free(e),c},t.encodeEstablishStream=function(t,n){var e=this.malloc(n.length);if(e===-1)return null;for(var r=m.HEAPU8.subarray(e,e+n.length),a=0;a<n.length;++a)r[a]=n[a];var i=this.malloc(u*2),l=i,s=i+u,c=m.__DgwCodecEncodeStreamGroup_EstabStream(t,e,n.length,l,s);if(this.free(e),c!==o("DGWConstants").DgwCodecReturnCode.DgwCodecReturnCode_Success){var d;return(d=this.$2)==null||d.logError(o("DGWLoggingContext").DGWLoggingComponent.CODEC_COMPONENT,"EstablishStream Frame encode failure","Failed to encode EstablishStream Frame. Received error code "+o("DGWConstants").DgwCodecReturnCodeToString(c)+" for StreamId "+t),null}var p=m.HEAPU32.subarray(l/u,l/u+1)[0],_=m.HEAPU32.subarray(s/u,s/u+1)[0],f=new Uint8Array(m.HEAPU8.subarray(p,p+_));return this.free(p),this.free(i),f},t.encodeEndOfData=function(t){var e=this.malloc(u*2);if(e===-1)return null;var n=e,r=e+u,a=m.__DgwCodecEncodeStreamGroup_EndOfData(t,n,r);if(a!==o("DGWConstants").DgwCodecReturnCode.DgwCodecReturnCode_Success){var i;return(i=this.$2)==null||i.logError(o("DGWLoggingContext").DGWLoggingComponent.CODEC_COMPONENT,"EndOfData Frame encode failure","Failed to encode EndOfData Frame. Received error code "+o("DGWConstants").DgwCodecReturnCodeToString(a)),null}var l=m.HEAPU32.subarray(n/u,n/u+1)[0],s=m.HEAPU32.subarray(r/u,r/u+1)[0],c=new Uint8Array(m.HEAPU8.subarray(l,l+s));return this.free(l),this.free(e),c},t.encodePing=function(){var e=this.malloc(u*2);if(e===-1)return null;var t=e,n=e+u,r=m.__DgwCodecEncodePing(t,n);if(r!==o("DGWConstants").DgwCodecReturnCode.DgwCodecReturnCode_Success){var a;return(a=this.$2)==null||a.logError(o("DGWLoggingContext").DGWLoggingComponent.CODEC_COMPONENT,"Ping Frame encode failure","Failed to encode Ping Frame. Received error code "+o("DGWConstants").DgwCodecReturnCodeToString(r)),null}var i=m.HEAPU32.subarray(t/u,t/u+1)[0],l=m.HEAPU32.subarray(n/u,n/u+1)[0],s=new Uint8Array(m.HEAPU8.subarray(i,i+l));return this.free(i),this.free(e),s},t.encodePong=function(){if(this.$5!=null)return this.$5;var e=this.malloc(u*2);if(e===-1)return null;var t=e,n=e+u,r=m.__DgwCodecEncodePong(t,n);if(r!==o("DGWConstants").DgwCodecReturnCode.DgwCodecReturnCode_Success){var a;return(a=this.$2)==null||a.logError(o("DGWLoggingContext").DGWLoggingComponent.CODEC_COMPONENT,"Pong Frame encode failure","Failed to encode Pong Frame. Received error code "+o("DGWConstants").DgwCodecReturnCodeToString(r)),null}var i=m.HEAPU32.subarray(t/u,t/u+1)[0],l=m.HEAPU32.subarray(n/u,n/u+1)[0],s=new Uint8Array(m.HEAPU8.subarray(i,i+l));return this.free(i),this.free(e),this.$5=s,s},e})();l.uuidv4=c,l.Uint8ArrayToBase64UrlStr=d,l.DGWUtils=f,l.DGWCodec=g}),98);
__d("DGWExponentialBackoff",["Promise","asyncToGeneratorRuntime"],(function(t,n,r,o,a,i){"use strict";var e,l={maxRetries:5,baseRetryInterval:1e3,backoffFactor:Math.sqrt(2)},s=(function(e){function t(t,n){var r;return r=e.call(this,t)||this,r.errors=n,r}return babelHelpers.inheritsLoose(t,e),t})(babelHelpers.wrapNativeSuper(Error));function u(e,t){return c.apply(this,arguments)}function c(){return c=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t){t===void 0&&(t=l);try{return yield d(e,t)}catch(e){throw e.errors[e.errors.length-1]}}),c.apply(this,arguments)}function d(e,t){return m.apply(this,arguments)}function m(){return m=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t){for(var n=0,r=[],o=t.baseRetryInterval,a=t.backoffFactor;n<=t.maxRetries;){try{var i=yield e();return i}catch(e){r.push(e)}yield p(o*Math.pow(a,n)),++n}throw new s("Max call count exceeded",r)}),m.apply(this,arguments)}function p(e){return _.apply(this,arguments)}function _(){return _=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t){yield new(e||(e=n("Promise")))(function(e){return window.setTimeout(e,t)})}),_.apply(this,arguments)}i.callWithExponentialBackoff=u}),66);
__d("DGWGlobalLogger",["gkx","uuidv4"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(){function e(){var e=this;this.tabID=r("uuidv4")(),this.isTabClosed=!1,this.otherTabs=new Map,this.thisTab={realtime:0,lightspeed:0},this.broadcastChannel=this.$1("DGWGlobalLogger"),this.broadcastChannel.onmessage=function(t){var n=JSON.parse(String(t.data)),r=!e.otherTabs.has(n.key);n.event==="DELETE"?e.otherTabs.delete(n.key):n.event==="UPDATE"&&n.value!=null&&(e.otherTabs.set(n.key,n.value),r&&e.$2())}}var t=e.prototype;return t.$1=function(t){return window.BroadcastChannel!=null?new BroadcastChannel(t):{onmessage:function(t){},postMessage:function(t){}}},t.streamRequested=function(t){switch(t){case"realtime":this.thisTab.realtime++;break;case"lightspeed":this.thisTab.lightspeed++;break}this.$2()},t.streamClosed=function(t){switch(t){case"realtime":this.thisTab.realtime=Math.max(0,this.thisTab.realtime-1);break;case"lightspeed":this.thisTab.lightspeed=Math.max(0,this.thisTab.lightspeed-1);break}this.$2()},t.tabClosed=function(){if(!this.isTabClosed){this.isTabClosed=!0;var e={key:this.tabID,event:"DELETE"};this.broadcastChannel.postMessage(JSON.stringify(e))}},t.getGlobalState=function(){var e={realtime:this.thisTab.realtime,lightspeed:this.thisTab.lightspeed};return this.otherTabs.forEach(function(t){e.realtime+=t.realtime,e.lightspeed+=t.lightspeed}),e},t.$2=function(){var e={key:this.tabID,event:"UPDATE",value:this.thisTab};this.broadcastChannel.postMessage(JSON.stringify(e))},e})(),s=r("gkx")("4337")?new e:{streamRequested:function(){},streamClosed:function(){},tabClosed:function(){},getGlobalState:function(){return{realtime:-1,lightspeed:-1}}},u=function(){return s};l.getInstance=u}),98);
__d("DGWPinger",["DGWLoggingContext"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(){function e(e,t,n){this.$1=e,this.$4=t,this.$5=n,this.$3=!1}var t=e.prototype;return t.$6=function(){var e=this;if(this.$3){var t;(t=o("DGWLoggingContext")).DGWLoggingContext.bumpODSKey(t.DGWLoggingComponent.PINGER,"timeout_fired.reset"),this.$3=!1,this.$4(),t.DGWLoggingContext.bumpODSKey(t.DGWLoggingComponent.PINGER,"timeout.newtimeout"),this.$2=window.setTimeout(function(){e.$6()},this.$1)}else o("DGWLoggingContext").DGWLoggingContext.bumpODSKey(o("DGWLoggingContext").DGWLoggingComponent.PINGER,"timeout_fired.disconnect"),this.$5()},t.reset=function(){var e=this;this.$3=!0,this.$2&&(o("DGWLoggingContext").DGWLoggingContext.bumpODSKey(o("DGWLoggingContext").DGWLoggingComponent.PINGER,"reset"),window.clearTimeout(this.$2),this.$2=null),this.$1>0&&(o("DGWLoggingContext").DGWLoggingContext.bumpODSKey(o("DGWLoggingContext").DGWLoggingComponent.PINGER,"reset.newtimeout"),this.$2=window.setTimeout(function(){e.$6()},this.$1))},t.cancel=function(){this.$2&&(o("DGWLoggingContext").DGWLoggingContext.bumpODSKey(o("DGWLoggingContext").DGWLoggingComponent.PINGER,"canceled"),window.clearTimeout(this.$2),this.$2=null)},e})();l.DGWPinger=e}),98);
__d("DGWStreamGroupCallbacks",["$InternalEnum"],(function(t,n,r,o,a,i){"use strict";var e=n("$InternalEnum")({TRANSPORT_SERVER_INTERNAL_ERROR:0,TRANSPORT_ABNORMAL_CLOSURE:1,TRANSPORT_GOING_AWAY:2,TRANSPORT_UNKNOWN_ERROR:3,TRANSPORT_KEEPALIVE_TIMEOUT:4,TRANSPORT_UNAUTHORIZED:5,TRANSPORT_REJECTED:6,TRANSPORT_BAD_REQUEST:7,TRANSPORT_DGW_SERVER_ERROR:8,TRANSPORT_NORMAL_CLOSURE:9});function l(t){switch(t){case e.TRANSPORT_SERVER_INTERNAL_ERROR:return"TRANSPORT_SERVER_INTERNAL_ERROR";case e.TRANSPORT_ABNORMAL_CLOSURE:return"TRANSPORT_ABNORMAL_CLOSURE";case e.TRANSPORT_GOING_AWAY:return"TRANSPORT_GOING_AWAY";case e.TRANSPORT_UNKNOWN_ERROR:return"TRANSPORT_UNKNOWN_ERROR";case e.TRANSPORT_KEEPALIVE_TIMEOUT:return"TRANSPORT_KEEPALIVE_TIMEOUT";case e.TRANSPORT_UNAUTHORIZED:return"TRANSPORT_UNAUTHORIZED";case e.TRANSPORT_REJECTED:return"TRANSPORT_REJECTED";case e.TRANSPORT_BAD_REQUEST:return"TRANSPORT_BAD_REQUEST";case e.TRANSPORT_DGW_SERVER_ERROR:return"TRANSPORT_DGW_SERVER_ERROR";case e.TRANSPORT_NORMAL_CLOSURE:return"TRANSPORT_NORMAL_CLOSURE"}}function s(t){switch(t){case e.TRANSPORT_UNAUTHORIZED:return!1;default:return!0}}var u=(function(){function e(){}var t=e.prototype;return t.onStreamGroupError=function(){},t.onStreamGroupMustDrain=function(){},t.onStreamGroupTransportClose=function(){},e})();i.DGWStreamGroupError=e,i.dgwStreamGroupErrorToString=l,i.isRetryableError=s,i.NoOpDGWStreamGroupCallbacks=u}),66);
__d("DGWTransportEvents",["DGWLoggingContext","NetworkStatus"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(){function e(e){this.$3=e}var t=e.prototype;return t.transportEstablished=function(t){this.$3.logEvent(o("DGWLoggingContext").DGWLoggingComponent.WEBSOCKET_TRANSPORT_COMPONENT,"open",t),this.$2=Date.now(),this.$3.bumpODSKey(o("DGWLoggingContext").DGWLoggingComponent.WEBSOCKET_TRANSPORT_COMPONENT,"stream_group_establishment_success")},t.transportPingSent=function(t){this.$3.logEvent(o("DGWLoggingContext").DGWLoggingComponent.WEBSOCKET_TRANSPORT_COMPONENT,"Ping Frame Sent",t,!0)},t.transportPongReceived=function(t){this.$3.logEvent(o("DGWLoggingContext").DGWLoggingComponent.WEBSOCKET_TRANSPORT_COMPONENT,"Pong Frame Received",t,!0)},t.transportEstablishmentPending=function(){this.$1=Date.now(),this.$3.logEvent(o("DGWLoggingContext").DGWLoggingComponent.WEBSOCKET_TRANSPORT_COMPONENT,"transportPending",null,!0),this.$3.bumpODSKey(o("DGWLoggingContext").DGWLoggingComponent.WEBSOCKET_TRANSPORT_COMPONENT,"stream_group_establishment_pending")},t.transportClosed=function(t,n,r){this.$4=Date.now(),t?(this.$3.bumpODSKey(o("DGWLoggingContext").DGWLoggingComponent.WEBSOCKET_TRANSPORT_COMPONENT,"transport_close_graceful"),this.$3.logEvent(o("DGWLoggingContext").DGWLoggingComponent.WEBSOCKET_TRANSPORT_COMPONENT,"Transport closed gracefully",null,!0)):(this.$3.bumpODSKey(o("DGWLoggingContext").DGWLoggingComponent.WEBSOCKET_TRANSPORT_COMPONENT,"transport_close_with_error"),this.$3.logError(o("DGWLoggingContext").DGWLoggingComponent.WEBSOCKET_TRANSPORT_COMPONENT,"Transport closed abnormally",n,r))},t.transportEstablishmentFailure=function(t){this.$3.logError(o("DGWLoggingContext").DGWLoggingComponent.WEBSOCKET_TRANSPORT_COMPONENT,"WebSocket transport establishment failure","WebSocket close code: "+t.code+" reason: "+t.reason+" wasClean: "+String(t.wasClean)),this.$3.bumpODSKey(o("DGWLoggingContext").DGWLoggingComponent.WEBSOCKET_TRANSPORT_COMPONENT,"stream_group_establishment_failure")},t.streamEstablishmentTimeout=function(t,n,a){this.$3.logError(o("DGWLoggingContext").DGWLoggingComponent.WEBSOCKET_TRANSPORT_COMPONENT,"Grouped Stream establishment timeout",t,"streamId:"+n+", onLine:"+String(r("NetworkStatus").isOnline()),!1,a),this.$3.bumpODSKey(o("DGWLoggingContext").DGWLoggingComponent.WEBSOCKET_TRANSPORT_COMPONENT,"stream_establishment_timeout")},t.streamEstablishmentPending=function(t,n){this.$3.logEvent(o("DGWLoggingContext").DGWLoggingComponent.WEBSOCKET_TRANSPORT_COMPONENT,"Grouped Stream establishment pending","streamId:"+t,!0,n),this.$3.bumpODSKey(o("DGWLoggingContext").DGWLoggingComponent.WEBSOCKET_TRANSPORT_COMPONENT,"stream_establishment_pending")},t.streamEstablishmentSuccess=function(t,n){this.$3.logEvent(o("DGWLoggingContext").DGWLoggingComponent.WEBSOCKET_TRANSPORT_COMPONENT,"Grouped Stream establishment success","streamId:"+t,!0,n),this.$3.bumpODSKey(o("DGWLoggingContext").DGWLoggingComponent.WEBSOCKET_TRANSPORT_COMPONENT,"stream_establishment_success")},t.transportError=function(t,n,r){this.$3.logError(o("DGWLoggingContext").DGWLoggingComponent.WEBSOCKET_TRANSPORT_COMPONENT,t,n,r)},t.receivedFrameForInactiveStream=function(t,n,r){this.$3.logWarn(o("DGWLoggingContext").DGWLoggingComponent.WEBSOCKET_TRANSPORT_COMPONENT,"Frame received for inactive stream","frameType: "+t+", streamID: "+n,r)},t.ranOutOfStreamIds=function(t){this.$3.logWarn(o("DGWLoggingContext").DGWLoggingComponent.WEBSOCKET_TRANSPORT_COMPONENT,"Hit max StreamId limit","Hit max StreamId limit",t)},e})();l.DGWTransportEvents=e}),98);
__d("DGWWebSocketTransport",[],(function(t,n,r,o,a,i){"use strict";function e(e){var t=new WebSocket(e);return t.binaryType="arraybuffer",t.onopen=function(){},t.onclose=function(){},t.onerror=function(){},t}i.getWebSocketConnection=e}),66);
__d("DGWStreamEvents",[],(function(t,n,r,o,a,i){"use strict";var e=(function(){function e(e,t,n){this.$4=new Map,this.$5=new Map,this.$6=e,this.$1=t,n!=null&&(this.$8="streamId:"+n+"::")}var t=e.prototype;return t.dataSent=function(t,n,r){var e,o=n?"sendWithAckRequested":"sendWithoutAckRequested";this.$6.logEvent(this.$1,o,((e=this.$8)!=null?e:"")+"sendId:"+r+", payloadSize:"+t,!0),this.$4.set(r,{ackRequested:n,payloadSize:t,sendTimestamp:Date.now()})},t.ackReceived=function(t){var e;this.$6.logEvent(this.$1,"AckReceived",((e=this.$8)!=null?e:"")+"sendId:"+t,!0),this.$6.bumpODSKey(this.$1,"ack_received");var n=this.$4.get(t);n!=null&&(n.ackReceivedTimestamp=Date.now())},t.ackSent=function(t){var e;this.$6.bumpODSKey(this.$1,"ack_sent"),this.$6.logEvent(this.$1,"ACK sent",((e=this.$8)!=null?e:"")+"ackId:"+t,!0)},t.drainSent=function(t){var e;this.$6.logEvent(this.$1,"Drain sent",((e=this.$8)!=null?e:"")+"drainReason: "+t)},t.dataReceived=function(t,n,r){var e;this.$6.bumpODSKey(this.$1,"data_received"),this.$6.logEvent(this.$1,"Data received",((e=this.$8)!=null?e:"")+"sendId:"+(r!=null?r:"null")+", ackRequested:"+n.toString()+", payloadSize:"+t,!0),r!=null&&this.$5.set(r,{ackRequested:n,payloadSize:t,receiveTimestamp:Date.now()})},t.endOfDataReceived=function(){this.$6.bumpODSKey(this.$1,"end_of_data_received"),this.$6.logEvent(this.$1,"EndOfDataReceived",this.$8,!0)},t.endOfDataSent=function(){this.$6.bumpODSKey(this.$1,"end_of_data_sent"),this.$6.logEvent(this.$1,"EndOfDataSent",this.$8,!0)},t.streamClosed=function(t,n){this.$7=Date.now();var e=this.$9();if(t){var r;this.$6.bumpODSKey(this.$1,"stream_closed_gracefully"),this.$6.logEvent(this.$1,"Stream closed gracefully",""+((r=this.$8)!=null?r:"")+e)}else{var o;this.$6.bumpODSKey(this.$1,"stream_closed_with_error"),this.$6.logError(this.$1,"Stream closed abnormally",n,""+((o=this.$8)!=null?o:"")+e)}},t.connectionEstablishmentFailure=function(t){this.$6.logEvent(this.$1,"WebSocket connection establishment failure","WebSocket close code: "+t)},t.streamEstablishmentFailure=function(t,n){var e;this.$6.logError(this.$1,"Failed to establish DGW Stream","Last seen error: "+t.toString(),""+((e=this.$8)!=null?e:"")+n),this.$6.bumpODSKey(this.$1,"stream_establishment_failure")},t.error=function(t,n){var e={msg:n,state:this.$9()};this.$6.logError(this.$1,t,JSON.stringify(e),this.$8)},t.$9=function(){var e={currentNetworkCondition:window.navigator&&window.navigator.onLine===!0,establishRequestTimestamp:this.$2,establishedTimestamp:this.$3,streamClosedTimestamp:this.$7,sendHistory:JSON.stringify(Array.from(this.$4.entries())),receiveHistory:JSON.stringify(Array.from(this.$5.entries()))};return JSON.stringify(e)},e})();i.DGWStreamEvents=e}),66);
__d("PerfFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(t,n,r,o,a,i,l){"use strict";var e=r("getFalcoLogPolicy_DO_NOT_USE")("1744178"),s=o("FalcoLoggerInternal").create("perf",e),u=s;l.default=u}),98);
__d("PerfXSharedFields",["CurrentLocale","Locale","SiteData","getErrorSafe"],(function(t,n,r,o,a,i,l){var e=typeof window!="undefined"?window:self,s={addCommonValues:function(n){var t=e==null?void 0:e.navigator;try{t&&typeof t.hardwareConcurrency=="number"&&(n.num_cores=Math.floor(t.hardwareConcurrency)),t&&t.deviceMemory&&(n.ram_gb=t.deviceMemory),t&&t.connection&&(typeof t.connection.downlink=="number"&&(n.downlink_megabits=t.connection.downlink),typeof t.connection.effectiveType=="string"&&(n.effective_connection_type=t.connection.effectiveType),typeof t.connection.rtt=="number"&&(n.rtt_ms=t.connection.rtt))}catch(e){if(r("getErrorSafe")(e).message!=="can't access dead object")throw r("getErrorSafe")(e)}return n.client_push_phase=r("SiteData").push_phase,n.client_revision=r("SiteData").client_revision,r("SiteData").server_revision!=null&&(n.server_revision=r("SiteData").server_revision),n.locale=r("CurrentLocale").get(),n.isRTL=Number(o("Locale").isRTL()),n},getCommonData:function(){var e={};return s.addCommonValues(e),e}},u=s;l.default=u}),98);
__d("QPLCoreHelpers",[],(function(t,n,r,o,a,i){"use strict";function e(e,t,n,r,o,a,i){var l,s,u,c="unreliable";o!=null&&(c+="_"+o);var d={string:(l={},l.join_id=e,l.qpl_join__source_clock=c,l.qpl__source="client_js",l),int:(s={},s.qpl_join__absolute_time_origin_ms=t,s),bool:(u={},u.qpl_join__source_is_primary=n,u)};if(r!=null&&d.int&&(d.int.qpl_join__close_session_after_seconds=r),a!=null){var m;d.string_array=(m={},m.qpl_join__namespaces=a,m)}return i!=null&&d.int&&(d.int.qpl_join__action_priority=i),d}function l(e){switch(e){case 1:return"join_request_";case 0:return"join_request_";case 3:return"join_response_";case 2:return"join_response_";default:return null}}function s(e,t){var n=l(e);return n==null?null:n+t}i.generateJoinAnnotations=e,i.getAlignmentPointNamePrefix=l,i.getAlignmentPointName=s}),66);
__d("QPLEvent",[],(function(t,n,r,o,a,i){"use strict";function e(e){return e.i}function l(e){var t;return(t=e.r)!=null?t:0}function s(e){var t;return(t=e.m)!=null?t:1}i.getMarkerId=e,i.getSampleRate=l,i.getSamplingMethod=s}),66);
__d("DoublyLinkedListMap",[],(function(t,n,r,o,a,i){var e=(function(){"use strict";function e(){this._head=null,this._tail=null,this._nodes={},this._nodeCount=0}var t=e.prototype;return t.get=function(t){var e,n=(e=this._nodes[t])==null?void 0:e.data;return n||null},t.getIndex=function(t){for(var e=this._head,n=0;e;e=e.next,n++)if(e.key===t)return n;return null},t._insert=function(t,n,r,o){r&&!this._nodes[r]&&(r=null);var e;r&&this._nodes[r]?e=this._nodes[r]:e=o?this._head:this._tail;var a={data:n,key:t,next:null,prev:null};return e&&(this.remove(t),o?(a.prev=e.prev,e.prev&&(e.prev.next=a),e.prev=a,a.next=e):(a.next=e.next,e.next&&(e.next.prev=a),e.next=a,a.prev=e)),a.prev===null&&(this._head=a),a.next===null&&(this._tail=a),this._nodes[t]=a,this._nodeCount++,this},t.insertBefore=function(t,n,r){return this._insert(t,n,r,!0)},t.insertAfter=function(t,n,r){return this._insert(t,n,r,!1)},t.prepend=function(t,n){return this.insertBefore(t,n,this._head&&this._head.key)},t.append=function(t,n){return this.insertAfter(t,n,this._tail&&this._tail.key)},t.remove=function(t){var e=this._nodes[t];if(e){var n=e.next,r=e.prev;n&&(n.prev=r),r&&(r.next=n),this._head===e&&(this._head=n),this._tail===e&&(this._tail=r),delete this._nodes[t],this._nodeCount--}return this},t.find=function(t){for(var e=this._head;e;e=e.next)if(t(e.data))return e.key;return null},t.reduce=function(t,n){for(var e=this._head;e;e=e.next)n=t(e.data,n);return n},t.exists=function(t){return!!this._nodes[t]},t.isEmpty=function(){return!this._head},t.reset=function(){this._head=null,this._tail=null,this._nodes={},this._nodeCount=0},t.map=function(t){for(var e=this._head;e;e=e.next)t(e.data)},t.getCount=function(){return this._nodeCount},t.getHead=function(){var e;return(e=this._head)==null?void 0:e.data},t.getTail=function(){var e;return(e=this._tail)==null?void 0:e.data},t.getNext=function(t){var e;return(e=this._nodes[t])==null||(e=e.next)==null?void 0:e.data},t.getPrev=function(t){var e;return(e=this._nodes[t])==null||(e=e.prev)==null?void 0:e.data},t.getHeadKey=function(){var e;return(e=this._head)==null?void 0:e.key},t.getTailKey=function(){var e;return(e=this._tail)==null?void 0:e.key},e})();a.exports=e}),null);
__d("QPLMarkerMap",["DoublyLinkedListMap"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(){function e(e){var t=e===void 0?{}:e,n=t.totalLimit,o=n===void 0?null:n,a=t.perMarkerLimit,i=a===void 0?null:a;this.size=0,this.$1={},this.$4=o,this.$5=i,this.$3=new Map,this.$2=new(r("DoublyLinkedListMap"))}var t=e.prototype;return t.set=function(t,n,r){var e=this.$1[t];if(e===void 0){var o={};e=o,this.$1[t]=e}var a=Object.prototype.hasOwnProperty.call(e,n);a||(this.$6(t),this.$7()),this.$8(t,n),a||this.size++,e[n]=r},t.delete=function(t,n){var e=this.$1[t];e===void 0||!Object.prototype.hasOwnProperty.call(e,n)||(this.$9(t,n),delete e[n],this.size--,Object.keys(e).length===0&&delete this.$1[t])},t.get=function(t,n){var e=this.$1[t];if(e!==void 0)return e[n]},t.has=function(t,n){var e=this.$1[t];return e===void 0?!1:Object.prototype.hasOwnProperty.call(e,n)},t.forEach=function(t){var e=0;for(var n in this.$1){var r=Number(n),o=this.$1[r];for(var a in o){var i=Number(a);t(o[i],r,i,e++)}}},t.toString=function(){try{return JSON.stringify(this.$1)}catch(e){return"{}"}},t.$8=function(t,n){var e={markerId:t,instanceKey:n},r=this.$10(t,n),o=this.$4!=null,a=this.$5!=null;o&&(this.$2.remove(r),this.$2.append(r,e));var i=this.$11(t);a&&(i.remove(r),i.append(r,e))},t.$9=function(t,n){var e=this.$10(t,n),r=this.$4!=null,o=this.$5!=null;if(r&&this.$2.remove(e),o){var a=this.$3.get(t);a&&(a.remove(e),a.isEmpty()&&this.$3.delete(t))}},t.$6=function(t){var e=this.$5;if(e!=null){var n=this.$11(t);n.getCount()>=e&&this.$12(n)}},t.$7=function(){var e=this.$4;e!=null&&this.size>=e&&this.$12(this.$2)},t.$12=function(t){var e=t.getHeadKey();if(e!=null){var n=t.get(e);n&&this.delete(n.markerId,n.instanceKey)}},t.$10=function(t,n){return t+":"+n},t.$11=function(t){var e=this.$3.get(t);return e||(e=new(r("DoublyLinkedListMap")),this.$3.set(t,e)),e},e})();l.default=e}),98);
__d("QPLTimestamp",[],(function(t,n,r,o,a,i){"use strict";function e(e){if(e===0)return"0";var t=e.toFixed(6).split(".",2),n=t[0],r=t[1];return n==="0"?r.replace(/^0+/,""):n+r}function l(t,n){var r=n-t;return e(r)}i.timestampToSerializedNanoseconds=e,i.calculateDurationAsNanoseconds=l}),66);
__d("crc32",[],(function(t,n,r,o,a,i){function e(e){for(var t=-1,n=0,r=e.length;n<r;n++)t=t>>>8^l[(t^e.charCodeAt(n))&255];return~t}var l=[0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918e3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117];t.Int32Array!==void 0&&(l=new Int32Array(l)),i.default=e}),66);
__d("QPLUtils",["crc32"],(function(t,n,r,o,a,i,l){"use strict";function e(e){return r("crc32")(e)>>>0}function s(t){return t!=null?e(t):0}l.unsignedCrc32=e,l.deriveInstanceKey=s}),98);
__d("QuickPerformanceLoggerTypes",[],(function(t,n,r,o,a,i){"use strict";var e=1,l=3;i.EVENT_BASED_SAMPLING=e,i.USER_BASED_SAMPLING=l}),66);
__d("QPLCore",["QPLCoreHelpers","QPLEvent","QPLMarkerMap","QPLTimestamp","QPLUtils","QuickPerformanceLoggerTypes","uuidv4"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(e){if(e==null)return e;var t={};for(var n in e)t[n]=String(e[n]);return t}function u(e){if(e==null)return e;var t={};for(var n in e)t[n]=e[n].map(String);return t}function c(e,t,n,r){var o,a=t[e];if(!a||Object.entries(a).length===0)return null;var i={};return Object.keys(a).forEach(function(e){var t=a[e];t==null||t.length===0?delete a[e]:r?i[e]=r(t):i[e]=t}),o={},o[e]=babelHelpers.extends({},n&&n[e],i),o}function d(e,t){if(e==null)return t;var n=babelHelpers.extends({},t,c("string",e,t),c("int",e,t,Math.trunc),c("double",e,t),c("bool",e,t),c("string_array",e,t),c("int_array",e,t,function(e){return e.map(Math.trunc)}),c("double_array",e,t),c("bool_array",e,t));return Object.keys(n).forEach(function(e){var t=n[e];(t==null||Object.entries(t).length===0)&&delete n[e]}),Object.entries(n).length!==0?n:null}function m(e,t){var n={};g.isMarkerTracked(t)&&(n.tracked_for_loss=!0),typeof t.absoluteTimeOrigin=="number"&&(n.absolute_time_origin_ns=o("QPLTimestamp").timestampToSerializedNanoseconds(t.absoluteTimeOrigin));var r=babelHelpers.extends({},e,n);return r}function p(e,t){if(!t)return e;var n={};return t.string&&(n.annotations=t.string),t.int&&(n.annotations_int=s(t.int)),t.double&&(n.annotations_double=t.double),t.bool&&(n.annotations_bool=t.bool),t.string_array&&(n.annotations_string_array=t.string_array),t.int_array&&(n.annotations_int_array=u(t.int_array)),t.double_array&&(n.annotations_double_array=t.double_array),t.bool_array&&(n.annotations_bool_array=t.bool_array),babelHelpers.extends({},e,n)}var _=new Map([[o("QuickPerformanceLoggerTypes").EVENT_BASED_SAMPLING,"random_sampling"],[o("QuickPerformanceLoggerTypes").USER_BASED_SAMPLING,"per_user"]]);function f(e,t){return e===0?!1:e<=1?!0:typeof t=="string"?o("QPLUtils").unsignedCrc32(t)%e===0:Math.random()*e<=1}var g=(function(){function t(e){var t;this.$2=1,this.$3=100,this.$4=new Map,this.$5=new Map,this.$6=null,this.$8=new Map,this.activeMarkers=new Map,this.$1=e,this.$7=e.logger,this.$5=(t=e.listenersWithMarker)!=null?t:new Map,this.$9=new(r("QPLMarkerMap"))}var n=t.prototype;return n.$10=function(t,n){try{return n()}catch(e){this.$1.onError&&this.$1.onError(t,e)}},n.getMarker=function(n,r){var t=this;return this.$10("getMarker",function(){var a=t.$11((e||(e=o("QPLEvent"))).getMarkerId(n));if(!a)return null;var i=a.get(r);return i||null})},n.isMarkerOn=function(n,r){var t,a=this;return r===void 0&&(r=0),(t=this.$10("isMarkerOn",function(){var t=a.$11((e||(e=o("QPLEvent"))).getMarkerId(n));if(!t)return!1;var i=t.get(r);return!!i}))!=null?t:!1},t.isMarkerTracked=function(t){return t.trackedForLoss===!0||t.type===2},n.$11=function(t){return this.activeMarkers.get(t)},n.addMarker=function(t,n,r){var e=this.activeMarkers.get(t);e||(e=new Map,this.activeMarkers.set(t,e)),e.set(n,r)},n.deleteMarker=function(t,n){var e;(e=this.activeMarkers.get(t))==null||e.delete(n),this.$12(t,n)},n.markerStart=function(r,a,i,l){var n=this;a===void 0&&(a=0),i===void 0&&(i=this.currentTimestamp());var s=l===void 0?{}:l,u=s.cancelExisting,c=u===void 0?!1:u,d=s.cancelOnUnload,m=d===void 0?!1:d,p=s.trackedForLoss,_=p===void 0?!1:p,f=s.type,g=f===void 0?1:f,h=s.samplingBasis,y=h===void 0?null:h,C=s.qplInternalDoNotUseAbsoluteTimeOrigin,b=s.timeoutMS,v=b===void 0?null:b,S=s.onMarkerTimeout__DoNotUse,R=S===void 0?null:S,L=s.enableE2ETracing,E=L===void 0?!1:L,k=s.crashResilient,I=k===void 0?!1:k;this.$10("markerStart",function(){var l=n.getMarker(r,a);if(l){var s=Math.round(i-l.timestamp);c&&(n.markerAnnotate(r,{string:{cancelType:"DUPLICATE_EVENT"},int:{time_between_markers_ms:s}},{instanceKey:a}),n.markerEnd(r,4,a,i))}var u=n.$13(r,y),d=u[0],p=u[1],f=u[2],h=null;E&&(h=n.$1.e2eTracingIDGenerator?n.$1.e2eTracingIDGenerator(r):null);var b={event:r,passesSampling:d,timestamp:i,sampleRate:p,samplingMethod:f,points:[],cancelOnUnload:m,trackedForLoss:_,type:g,timeoutMS:v,e2eTracingID:h,isCrashResilient:I};if(typeof C=="number"&&(b.absoluteTimeOrigin=C),n.$4.forEach(function(e){e.onMarkerStart&&e.onMarkerStart(r,a,i)}),n.$5.forEach(function(e){e.onMarkerStartWithMarker(r,a,i,b)}),d&&(n.addMarker((e||(e=o("QPLEvent"))).getMarkerId(r),a,b),v!=null&&n.$14(r,a,v,R)),d&&t.isMarkerTracked(b)&&n.$15({marker_id:27787271,action_id:51,sample_rate:1,annotations_int:{tracked_marker_id:String((e||(e=o("QPLEvent"))).getMarkerId(r))},marker_type:1}),h!==null){var S;n.markerAnnotate(r,{string:(S={},S.qpl_e2e__tracing_id=h,S)},{instanceKey:a})}d&&n.$4.forEach(function(e){e.onMarkerStarted&&e.onMarkerStarted(r,a,i,n.$16(b))})})},n.$16=function(t){if(t==null){var e={isCrashResilient:!1};return e}return{isCrashResilient:t.isCrashResilient}},n.$17=function(t,n){this.$9.delete(t,n)},n.$18=function(t,n,r){this.$9.set(t,n,r)},n.$12=function(t,n){var e,r=this.$9.get(t,n);r&&(e=this.$1.runtimeAbstractionLayer)!=null&&e.clearTimeout&&(this.$1.runtimeAbstractionLayer.clearTimeout(r),this.$17(t,n))},n.$14=function(n,r,a,i){var t=this,l=(e||(e=o("QPLEvent"))).getMarkerId(n);try{var s,u;if(this.$12(l,r),!((s=this.$1.runtimeAbstractionLayer)!=null&&s.setTimeout))return;var c=(u=this.$1.runtimeAbstractionLayer)==null?void 0:u.setTimeout(function(){i!=null&&i(n,r),t.$4.forEach(function(e){e.onTimeoutEvent!=null&&e.onTimeoutEvent({event:n,instanceKey:r,passesSampling:!0})}),t.$17(l,r),t.markerEnd(n,113,r)},a);this.$18(l,r,c)}catch(e){}},n.markerAnnotate=function(t,n,r){var e=this,o=r===void 0?{}:r,a=o.instanceKey,i=a===void 0?0:a;this.$10("markerAnnotate",function(){e.$4.forEach(function(e){Object.keys(n).forEach(function(r){var o=n[r];o&&Object.keys(o).forEach(function(n){e.onAnnotation&&e.onAnnotation(t,i,n,o[n],r)})})});var r=e.getMarker(t,i);r&&(r.annotations=d(n,r.annotations))})},n.markerPoint=function(t,n,r){var e=this,o=r===void 0?{}:r,a=o.instanceKey,i=a===void 0?0:a,l=o.data,s=o.timestamp,u=s===void 0?this.currentTimestamp():s;this.$10("markerPoint",function(){e.$4.forEach(function(e){e.onMarkerPoint&&e.onMarkerPoint(t,i,n,l,u)});var r=e.getMarker(t,i);if(r){var o={name:n,timeSinceStart:Math.trunc(u-r.timestamp)},a=d(l);a&&(o.data=a),r.points.push(o)}})},n.markerEnd=function(n,r,a,i){var t=this;a===void 0&&(a=0),i===void 0&&(i=this.currentTimestamp()),this.$10("markerEnd",function(){var l=t.getMarker(n,a);if(!l){t.$4.forEach(function(e){var o={durationMs:0,passesSampling:!1};e.onMarkerEnd&&e.onMarkerEnd(r,n,a,i,babelHelpers.extends({},o,t.$16(l)))});return}var c=r,d=t.$19(l,l.timestamp,i);d&&r===2&&(c=5947);var f=l.points.map(function(e){return e.data?{name:e.name,timeSinceStart:String(e.timeSinceStart),data:(function(t,n,r,o,a,i,l,c){var d={};if(((t=e.data)==null?void 0:t.string)!=null&&(d.string=e.data.string),((n=e.data)==null?void 0:n.string_array)!=null&&(d.string_array=e.data.string_array),((r=e.data)==null?void 0:r.int)!=null){var m;d.int=s((m=e.data)==null?void 0:m.int)}if(((o=e.data)==null?void 0:o.int_array)!=null){var p;d.int_array=u((p=e.data)==null?void 0:p.int_array)}return((a=e.data)==null?void 0:a.double)!=null&&(d.double=e.data.double),((i=e.data)==null?void 0:i.double_array)!=null&&(d.double_array=e.data.double_array),((l=e.data)==null?void 0:l.bool)!=null&&(d.bool=e.data.bool),((c=e.data)==null?void 0:c.bool_array)!=null&&(d.bool_array=e.data.bool_array),d})()}:{name:e.name,timeSinceStart:String(e.timeSinceStart)}}),g={marker_id:(e||(e=o("QPLEvent"))).getMarkerId(n),action_id:c,instance_id:a,sample_rate:l.sampleRate,method:_.get(l.samplingMethod),duration_ns:o("QPLTimestamp").calculateDurationAsNanoseconds(l.timestamp,i),points:f,metadata:{application_analytics:{time_since_qpl_module_init:i-t.$1.moduleLoadTimestamp}},marker_type:l.type,flags:1,unique_marker_id_debug_only:l.uniqueMarkerDebugId},h=p(g,l.annotations),y=m(h,l);t.$4.forEach(function(e){var t={durationMs:l?i-l.timestamp:0,logData:y,passesSampling:l.passesSampling,isCrashResilient:l.isCrashResilient};e.onMarkerEnd&&e.onMarkerEnd(c,n,a,i,t)}),l.passesSampling&&(l.timestampIsApproximate!==!0&&t.$15(y),t.$6===(e||(e=o("QPLEvent"))).getMarkerId(n)&&t.$1.onDebuggingIdEnded&&t.$1.onDebuggingIdEnded()),t.deleteMarker(e.getMarkerId(n),a)})},n.markerDrop=function(n,r){var t=this;r===void 0&&(r=0),this.$10("markerDrop",function(){var a=t.getMarker(n,r);t.deleteMarker((e||(e=o("QPLEvent"))).getMarkerId(n),r);var i=t.currentTimestamp();t.$4.forEach(function(e){if(e.onMarkerDrop){var o;e.onMarkerDrop(n,r,i,babelHelpers.extends({passesSampling:(o=a==null?void 0:a.passesSampling)!=null?o:!1},t.$16(a)))}})})},n.markEvent=function(n,r,a,i){var t=this,l=i===void 0?{}:i,s=l.timestamp,u=s===void 0?this.currentTimestamp():s,c=l.annotations;this.$10("markEvent",function(){var i;if(t.$4.forEach(function(e){e.onMarkEvent&&e.onMarkEvent({event:n,timestamp:u,annotations:c})}),!((i=t.$1.quickLogConfigHelper)!=null&&i.isKillswitchOn())){var l=t.$13(n),s=l[0],m=l[1],f=l[2];if(s){var g=d(typeof c=="function"?c():c),h={marker_id:(e||(e=o("QPLEvent"))).getMarkerId(n),action_id:51,instance_id:0,sample_rate:m,method:_.get(f),da_type:r,da_level:a,metadata:{application_analytics:{time_since_qpl_module_init:u-t.$1.moduleLoadTimestamp}},marker_type:1,flags:1};t.$15(p(h,g))}}})},n.markerStartForJoin=function(t,n,r){var e=this,a=r===void 0?{}:r,i=a.instanceKey,l=i===void 0?0:i,s=a.cancelExisting,u=s===void 0?!1:s,c=a.cancelOnUnload,d=c===void 0?!1:c,m=a.trackedForLoss,p=m===void 0?!1:m,_=a.type,f=_===void 0?1:_,g=a.qplInternalDoNotUseAbsoluteTimeOrigin,h=g===void 0?null:g,y=a.timeoutMS,C=y===void 0?null:y,b=a.monotonicTimestamp,v=b===void 0?this.currentTimestamp():b,S=a.absoluteTimeOriginMs,R=S===void 0?this.currentUnixTimestamp():S,L=a.sourceIsPrimary,E=L===void 0?!1:L,k=a.closeSession,I=a.onMarkerTimeout__DoNotUse,T=a.unreliableSourceClockProcessId,D=a.crashResilient,x=a.joinNamespaces,$=a.actionPriority;this.$10("markerStartForJoin",function(){e.markerStart(t,l,v,{cancelExisting:u,cancelOnUnload:d,trackedForLoss:p,type:f,samplingBasis:n,qplInternalDoNotUseAbsoluteTimeOrigin:h,timeoutMS:C,onMarkerTimeout__DoNotUse:I,crashResilient:D});var r=o("QPLCoreHelpers").generateJoinAnnotations(n,R,E,k,T,x,$);e.markerAnnotate(t,r,{instanceKey:l})})},n.addAlignmentPointForJoin=function(t,n,r){var e=this,a=r===void 0?{}:r,i=a.instanceKey,l=i===void 0?0:i,s=a.requestId,u=s===void 0?"default_id":s,c=a.timestamp,d=c===void 0?this.currentTimestamp():c;this.$10("addAlignmentPointForJoin",function(){var r=o("QPLCoreHelpers").getAlignmentPointName(n,u);r!=null&&e.markerPoint(t,r,{instanceKey:l,timestamp:d})})},n.setAlwaysOnSampleRate=function(t,n){this.$8.set(t,n)},n.setDefaultSampleRate=function(t){this.$3=t},n.currentTimestamp=function(){var e,t=this;return(e=this.$10("currentTimestamp",function(){return t.$1.monotonicNowMs()}))!=null?e:0},n.currentUnixTimestamp=function(){var e,t=this;return(e=this.$10("currentUnixTimestamp",function(){return t.$1.unixNowMs()}))!=null?e:0},n.enableDebug=function(t){this.$6=t},n.disableDebug=function(){this.$6=null},n.addListener=function(t){var e,n=this;return(e=this.$10("addListener",function(){var e=n.$2++;return n.$4.set(e,t),{dispose:function(){n.$4.delete(e)}}}))!=null?e:{dispose:function(){}}},n.$13=function(n,r){var t,a;if(this.$1.unsampleAllEvents&&this.$1.unsampleAllEvents()||this.$6===(e||(e=o("QPLEvent"))).getMarkerId(n))return[!0,1,o("QuickPerformanceLoggerTypes").EVENT_BASED_SAMPLING];var i=(e||(e=o("QPLEvent"))).getSampleRate(n),l=e.getSamplingMethod(n);if(this.$8.get(n)==null&&i!==0&&l===o("QuickPerformanceLoggerTypes").USER_BASED_SAMPLING)return[!0,i!=null?i:1,o("QuickPerformanceLoggerTypes").USER_BASED_SAMPLING];var s=(t=(a=this.$8.get(n))!=null?a:i)!=null?t:this.$3,u=l!=null?l:o("QuickPerformanceLoggerTypes").EVENT_BASED_SAMPLING,c=f(s,r);return[c,s,u]},n.$15=function(t){this.$4.forEach(function(e){e.onUploadEvent&&e.onUploadEvent(t)});var e=this.$1.decorateEventBeforeUpload?this.$1.decorateEventBeforeUpload(t):t;this.$1.sendEvent(t,e)},n.$19=function(t,n,r){if(t.timeoutMS==null)return!1;var e=r-n;return e>=t.timeoutMS},n.getActiveMarkerIds=function(t){var e,n=this,r=t.type;return(e=this.$10("getActiveMarkerIds",function(){var e=new Set;return n.activeMarkers.forEach(function(t,n){t.forEach(function(t){if(t.type===r){e.add(n);return}})}),Array.from(e)}))!=null?e:[]},n.getActiveE2ETraceIds=function(){var e,t=this;return(e=this.$10("getActiveE2ETraceIds",function(){var e=new Map;return t.activeMarkers.forEach(function(t,n){var r=new Map;t.forEach(function(e,t){e.e2eTracingID!=null&&r.set(t,{e2eTraceID:e.e2eTracingID,qplEvent:e.event})}),r.size>0&&e.set(n,r)}),e}))!=null?e:new Map},n.getActiveE2ETraceIdsAsArray=function(){var e,t=this;return(e=this.$10("getActiveE2ETraceIdsAsArray",function(){var e=[];return t.activeMarkers.forEach(function(t,n){t.forEach(function(t,n){t.e2eTracingID!=null&&e.push(t.e2eTracingID)})}),e}))!=null?e:[]},n.forEachMarkerInstance=function(t,n){var e=this;this.$10("forEachMarkerInstance",function(){var r=e.$11(t);if(r)for(var o of r.entries()){var a=o[0],i=o[1];n(a,i.event)}})},n.getMarkerStartTs=function(t,n){var e=this,r=n===void 0?{}:n,o=r.instanceKey,a=o===void 0?0:o;return this.$10("getMarkerStartTs",function(){var n=e.getMarker(t,a);if(n)return n.timestamp})},n.markerLogDebugPoints=function(n,a){var t=this,i=a===void 0?{}:a,l=i.instanceKey,s=l===void 0?0:l;this.$10("markerLogDebugPoints",function(){var a=(e||(e=o("QPLEvent"))).getMarkerId(n),i=t.getMarker(n,s);if(i){var l=r("uuidv4")();i.uniqueMarkerDebugId=l}})},t})();g.normalizeAnnotations=d,l.default=g}),98);
__d("QPLInspector",[],(function(t,n,r,o,a,i){var e=(function(){function e(){this.$1=[],this.$2={}}var t=e.prototype;return t.appendLog=function(t){for(var e in this.$2)!Object.prototype.hasOwnProperty.call(this.$2,e)||t.marker_id!==e||this.$2[t.marker_id].forEach(function(e){return e(t)});this.$1.push(t)},t.dumpLogs=function(){return this.$1},t.addListener=function(t,n){Object.prototype.hasOwnProperty.call(this.$2,t)||(this.$2[t]=[]),this.$2[t].push(n),this.$1.forEach(function(e){e.marker_id===t&&n(e)})},t.removeListener=function(t,n){var e=this.$2[t].indexOf(n);e!==-1&&this.$2[t].splice(e,1)},e})(),l=new e;i.default=l}),66);
__d("QuickPerformanceLogger",["Arbiter","Env","FBLogger","ODS","PerfFalcoEvent","PerfXSharedFields","Promise","QPLCore","QPLEvent","QPLInspector","Run","WebStorage","clearTimeout","cr:12180","cr:1984081","cr:686","getErrorSafe","gkx","guid","performanceAbsoluteNow","performanceNavigationStart","performanceNow","setTimeout"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c,d,m,p,_,f=typeof window!="undefined"?window:self;function g(t,n){r("FBLogger")("qpl").catching(r("getErrorSafe")(n)).MUSTFIX(e||(e=babelHelpers.taggedTemplateLiteralLoose(["QPL error in ",""])),t)}function h(e){var t=r("PerfXSharedFields").getCommonData(),n={memory_stats:{total_mem:t.ram_gb!=null?t.ram_gb*1073741824:null},network_stats:{downlink_megabits:t.downlink_megabits,network_subtype:t.effective_connection_type,rtt_ms:t.rtt_ms},sitedata_info:{client_push_phase:t.client_push_phase,client_revision:t.client_revision,server_revision:t.server_revision},locale_info:{locale:t.locale,isRTL:t.isRTL}};if(r("gkx")("20836")&&(n.workplace_info={is_gemini:r("gkx")("21050")}),r("gkx")("21051")&&typeof f.__sapienzMetadataCallback__=="function"){var o=f.__sapienzMetadataCallback__();n.sapienz={request_id:String(o.requestId),config_name:String(o.configName)}}return babelHelpers.extends({},e,{metadata:babelHelpers.extends({},e.metadata,n)})}function y(e,t,n){return{i:e,m:n,r:t}}function C(e,t){return new(_||(_=n("Promise")))(function(){var n=t||e;typeof f.__je2e_recordQPLMarker=="function"&&f.__je2e_recordQPLMarker(n),(p||(p=r("Env"))).enable_qplinspector===!0&&r("QPLInspector").appendLog(n),r("gkx")("21053")||r("gkx")("20935")||r("gkx")("5679")?r("PerfFalcoEvent").logImmediately(function(){return n}):r("gkx")("2160")||r("gkx")("21055")||r("gkx")("1624")?r("PerfFalcoEvent").logCritical(function(){return n}):r("PerfFalcoEvent").log(function(){return n})})}function b(e){var t=(s||(s=o("QPLEvent"))).getMarkerId(e),n=t+"_"+r("guid")();return(m||(m=o("ODS"))).bumpEntityKey(2401,"obc.www.all","qpl.e2e_tracing_id_generated."+t),n}function v(e){var t=babelHelpers.extends({},e,{config_type:r("gkx")("21056")?"alpha_beta":"prod"});return h(t)}function S(){return(p||(p=r("Env"))).enable_qplinspector===!0||typeof f.__je2e_recordQPLMarker=="function"||r("gkx")("21057")}function R(){r("Arbiter").inform("qpl_debugger_finished")}var L=(u||(u=r("performanceAbsoluteNow")))();typeof f.__je2e_felabsTracePlugin_setQplInit=="function"&&f.__je2e_felabsTracePlugin_setQplInit((c||(c=r("performanceNow")))());var E={debug:function(t,n,r){},warn:function(t){r("FBLogger")("qpl").blameToPreviousDirectory().warn(t)}},k="qpl",I=(function(e){function t(){var t;t=e.call(this,{decorateEventBeforeUpload:v,unsampleAllEvents:S,onDebuggingIdEnded:R,monotonicNowMs:u||(u=r("performanceAbsoluteNow")),unixNowMs:u||(u=r("performanceAbsoluteNow")),moduleLoadTimestamp:L,logger:E,sendEvent:C,e2eTracingIDGenerator:b,runtimeAbstractionLayer:{setTimeout:r("setTimeout"),clearTimeout:r("clearTimeout")},debugLoggingEnabled:(p||(p=r("Env"))).qpl_debug_logging,onError:g})||this;var n=r("gkx")("21055")?r("gkx")("21058")?function(e){return o("Run").onBeforeUnload(e,!1)}:o("Run").onBeforeUnload:o("Run").onUnload;return n(function(){t.$QuickPerformanceLogger$p_1(),t.$QuickPerformanceLogger$p_2(706,{respectUnloadPolicy:!0,timestamp:t.currentTimestamp()})}),t.$QuickPerformanceLogger$p_3(),t.initQplFlipperPlugin(),t.initQplSapienzPlugin(),t.initQplUserTimingPlugin(),t}babelHelpers.inheritsLoose(t,e);var a=t.prototype;return a.$QuickPerformanceLogger$p_3=function(){var e=this,t=(d||(d=r("WebStorage"))).getSessionStorageForRead();if(!t){this.$QuickPerformanceLogger$p_4("#loadSavedState","sessionStorage is not available");return}var n=t.getItem(k);if(n!=null){t.removeItem(k);var o=JSON.parse(n);if(o==null){this.$QuickPerformanceLogger$p_4("#loadSavedState","Saved state failed to deserialize");return}if(o.markers==null||o.markers.length===0){this.$QuickPerformanceLogger$p_4("#loadSavedState","No saved markers found");return}o.markers.forEach(function(t){var n=t[0],r=t[1],o=t[2];e.addMarker(n,r,o),e.$QuickPerformanceLogger$p_4("#loadSavedState","Marker "+n+" (instanceKey: "+r+") resumed")})}},a.$QuickPerformanceLogger$p_1=function(){var e=this,t=[];if(this.activeMarkers.forEach(function(e,n){e.forEach(function(e,r){e.resumeAfterNavigation===!0&&(delete e.resumeAfterNavigation,t.push([n,r,e]))})}),t.length>0){var n={markers:t},o=(d||(d=r("WebStorage"))).getSessionStorage(),a=d.setItemGuarded(o,k,JSON.stringify(n));a&&(t.forEach(function(t){var n=t[0],r=t[1],o=t[2],a=y(n,o.sampleRate,o.samplingMethod);e.markerEnd(a,96,r)}),this.$QuickPerformanceLogger$p_4("#storeSavedState","Failed to store saved state: "+a.message),r("FBLogger")("qpl").catching(a).warn("Failed to store QPL state: "+JSON.stringify(n,null,2))),t.forEach(function(t){var n=t[0],r=t[1];e.deleteMarker(n,r)})}},a.markerStoreBeforeNavigation=function(t,n){var e=n===void 0?{}:n,r=e.instanceKey,a=r===void 0?0:r,i=(s||(s=o("QPLEvent"))).getMarkerId(t),l=this.getMarker(t,a);if(!l){this.$QuickPerformanceLogger$p_4("markerStoreBeforeNavigation","Failed to set marker to store on page unload. Could not find marker "+i+", instancekey="+a);return}l.resumeAfterNavigation=!0,this.$QuickPerformanceLogger$p_4("markerStoreBeforeNavigation","Set marker "+i+" to store on page unload, instancekey="+a)},a.markerStartFromNavStart=function(t,n,o){n===void 0&&(n=0);var e=o===void 0?{}:o,a=e.cancelExisting,i=a===void 0?!1:a,l=e.cancelOnUnload,s=l===void 0?!1:l,u=e.trackedForLoss,c=u===void 0?!1:u,d=e.type,m=d===void 0?1:d,p=e.qplInternalDoNotUseConvertToTimeOnServer,_=e.onMarkerTimeout__DoNotUse,f=e.timeoutMS,g=f===void 0?null:f,h=e.crashResilient,y=h===void 0?!1:h,C=r("performanceNavigationStart")(),b=typeof p=="function"?p(C):void 0;if(this.markerStart(t,n,C,{cancelExisting:i,cancelOnUnload:s,trackedForLoss:c,type:m,qplInternalDoNotUseAbsoluteTimeOrigin:b,onMarkerTimeout__DoNotUse:_,timeoutMS:g,crashResilient:y}),r("performanceNavigationStart").isPolyfilled){var v=this.getMarker(t,n);v&&(v.timestampIsApproximate=!0)}},a.markerStartForJoinFromNavStart=function(t,n,o){var e=o===void 0?{}:o,a=e.instanceKey,i=a===void 0?0:a,l=e.cancelExisting,s=l===void 0?!1:l,u=e.cancelOnUnload,c=u===void 0?!1:u,d=e.trackedForLoss,m=d===void 0?!1:d,p=e.type,_=p===void 0?1:p,f=e.qplInternalDoNotUseConvertToTimeOnServer,g=e.absoluteTimeOriginMs,h=e.sourceIsPrimary,y=h===void 0?!1:h,C=e.closeSession,b=e.unreliableSourceClockProcessId,v=e.onMarkerTimeout__DoNotUse,S=e.timeoutMS,R=e.crashResilient,L=R===void 0?!1:R,E=r("performanceNavigationStart")(),k=typeof f=="function"?f(E):void 0;if(this.markerStartForJoin(t,n,{instanceKey:i,cancelExisting:s,cancelOnUnload:c,trackedForLoss:m,type:_,qplInternalDoNotUseAbsoluteTimeOrigin:k,monotonicTimestamp:E,absoluteTimeOriginMs:g,sourceIsPrimary:y,closeSession:C,unreliableSourceClockProcessId:b,timeoutMS:S,onMarkerTimeout__DoNotUse:v,crashResilient:L}),r("performanceNavigationStart").isPolyfilled){var I=this.getMarker(t,i);I&&(I.timestampIsApproximate=!0)}},a.$QuickPerformanceLogger$p_2=function(t,n){var e=this,r=n===void 0?{}:n,o=r.timestamp,a=r.respectUnloadPolicy;this.activeMarkers.forEach(function(n,r){n.forEach(function(n,i){if(!a||n.cancelOnUnload===!0){var l=y(r,n.sampleRate,n.samplingMethod);e.markerEnd(l,t,i,o)}})})},a.$QuickPerformanceLogger$p_4=function(t,n,r){E.debug(t,n,r)},a.initQplFlipperPlugin=function(){n("cr:686")!=null&&this.addListener(n("cr:686").qplFlipperPlugin.listener())},a.initQplSapienzPlugin=function(){n("cr:1984081")!=null&&this.addListener(n("cr:1984081").getQplSapienzListener())},a.initQplUserTimingPlugin=function(){n("cr:12180")!=null&&this.addListener(n("cr:12180").getQplUserTimingListener())},t})(r("QPLCore")),T=new I;i.exports=T}),34);
__d("qpl",["FBLogger","QPLHasteSupportDataStorage"],(function(t,n,r,o,a,i,l){"use strict";var e={},s={_:function(n,o){var t=e[o];if(t==null){var a=r("QPLHasteSupportDataStorage").get(o);a==null?(r("FBLogger")("staticresources").mustfix("Failed to find a Haste-supplied config for the QPL event identified by token `%s`.",o),t={i:n}):t=babelHelpers.extends({i:n},a),e[o]=t}return t}},u=s;l.default=u}),98);
__d("GroupedStream",["DGWAckManager","DGWConstants","DGWLoggingContext","DGWStream","DGWStreamEvents","Promise","QuickPerformanceLogger","Random","asyncToGeneratorRuntime","qpl"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=r("qpl")._(701242292,"2919"),c=(function(){function t(e,t,n,a,i,l,c){this.$1=e,this.$3=!1,this.$4=!1,this.$5=!1,this.$6=t,this.$7=n,this.$8=a,this.$2=l,this.$9=i,this.$10=new(o("DGWAckManager")).DGWAckManager(this.$9),this.$12=new(o("DGWStreamEvents")).DGWStreamEvents(this.$9,o("DGWLoggingContext").DGWLoggingComponent.GROUPED_STREAM_COMPONENT,this.$1),this.$11=0,this.$13=c,this.$14=Date.now()+(Math.round(o("Random").random()*1e4)+1e4),(s||(s=r("QuickPerformanceLogger"))).markerStart(u,this.$14)}var a=t.prototype;return a.send=(function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t){var n=this.$11++%o("DGWConstants").MAX_ACK_ID,r=this.$15(e,!0,n);if(!this.$16(r,!0,n))return!1;var a=yield this.$10.waitForAck(n,t!=null?t:o("DGWConstants").DEFAULT_ACK_TIMEOUT_MS);return a});function t(t,n){return e.apply(this,arguments)}return t})(),a.sendFrame=(function(){var t=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t,r,a){var i=this.$11++%o("DGWConstants").MAX_ACK_ID,l=this.$15(r,!0,i);if(l==null)return!1;var s=new Uint8Array(t.length+l.length);if(s.set(t),s.set(l,t.length),!this.$16(s,!0,i))return!1;var u=yield this.$10.waitForAck(i,a!=null?a:o("DGWConstants").DEFAULT_ACK_TIMEOUT_MS);return this.__markerPoint(u?"ack_recevied":"ack_timeout"),u||(this.__endMarker(3),(e||(e=n("Promise"))).reject(o("DGWStream").StreamError.ACK_TIMEOUT))});function r(e,n,r){return t.apply(this,arguments)}return r})(),a.sendAndForget=function(t){var e=this.$15(t,!1,0);return this.$16(e,!1,0)},a.sendFrameAndForget=function(t,n){var e=this.$15(n,!1,0);if(e==null)return!1;var r=new Uint8Array(t.length+e.length);return r.set(t),r.set(e,t.length),this.$16(r,!1,0)},a.close=function(){var e=this.$2.encodeEndOfData(this.$1);if(e==null){this.$9.logError(o("DGWLoggingContext").DGWLoggingComponent.GROUPED_STREAM_COMPONENT,"Failed to encode EndOfData","streamId: "+this.$1);return}var t=this.$8.send(e);if(!t){this.$9.logError(o("DGWLoggingContext").DGWLoggingComponent.GROUPED_STREAM_COMPONENT,"Failed to send EndOfData","streamId: "+this.$1+". StreamGroupTransport not open during send");return}this.$12.endOfDataSent(),this.$5=!0,this.$4&&this.$17()},a.loggingContext=function(){return this.$9},a.__sendDrain=function(t){var e=o("DGWConstants").drainReasonToDrainReasonString(t);if(this.$5)return!1;var n=this.$2.encodeDrain(t);if(n==null)return!1;this.$12.drainSent(e);var r=this.$8.send(n);return r},a.__transportCloseHook=function(t){this.$13(),this.$10.clearPendingAcks(),t?(this.$12.error("Received StreamError","StreamErrorType: "+t),this.$6.onError(t)):this.$5&&this.$4?this.$17():(this.$12.streamClosed(!1,"Stream closed: ClosedLocally: "+this.$5.toString()+", EndOfDataReceived: "+this.$4.toString()),this.$6.onError(o("DGWStream").StreamError.PREMATURE_CLOSE))},a.$17=function(){this.$13(),this.$12.streamClosed(!0,"Graceful close"),this.$6.onClose(this)},a.__dataReceivedHook=function(t,n){this.$12.dataReceived(t.length,n!=null,n),n!=null&&this.$18(n),this.$6.onDataReceived(t)},a.__ackReceivedHook=function(t){this.$12.ackReceived(t),this.$10.handleAckReceived(t)},a.__drainReceivedHook=function(t){this.$3===!1&&(this.$6.onStreamMustDrain(this,t),this.$3=!0)},a.__endOfDataHook=function(){this.$12.endOfDataReceived(),this.$4=!0,this.$5?this.$17():this.$6.onServerHasFinishedSendingData(this)},a.__markerPoint=function(t){var e=this.$14;(s||(s=r("QuickPerformanceLogger"))).markerPoint(u,t,{instanceKey:e})},a.__markerAnnotate=function(t){var e=this.$14;(s||(s=r("QuickPerformanceLogger"))).markerAnnotate(u,t,{instanceKey:e})},a.__endMarker=function(t){(s||(s=r("QuickPerformanceLogger"))).markerEnd(u,t,this.$14)},a.$15=function(t,n,r){return this.$2.encodeData(t,n,r,this.$1)},a.$16=function(t,n,r){if(this.__markerPoint("send_data_start"),this.$5)return this.$9.logError(o("DGWLoggingContext").DGWLoggingComponent.GROUPED_STREAM_COMPONENT,"Failed to send data","Stream closed locally"),!1;if(t==null)return!1;var e=this.$8.send(t);return e?(this.__markerPoint("send_data_end"),this.$12.dataSent(t.length,n,r),!0):(this.$9.logError(o("DGWLoggingContext").DGWLoggingComponent.GROUPED_STREAM_COMPONENT,"Failed to send data","ClosedLocally: "+this.$5.toString()),!1)},a.$18=function(t){var e=this.$2.encodeAck(t,this.$1);if(e==null)return this.$9.logError(o("DGWLoggingContext").DGWLoggingComponent.GROUPED_STREAM_COMPONENT,"Failed to encode ACK","ackId: "+t),!1;var n=this.$8.send(e);return n?(this.$12.ackSent(t),!0):(this.$9.logError(o("DGWLoggingContext").DGWLoggingComponent.GROUPED_STREAM_COMPONENT,"Failed to send ACK","ackId: "+t),!1)},t})();l.GroupedStream=c}),98);
__d("StreamIdGenerator",["err"],(function(t,n,r,o,a,i,l){"use strict";var e=65535,s=(function(){function t(){this.$1=new Set,this.$2=0}var n=t.prototype;return n.getNextStreamId=function(){var t;if(!this.streamIdAvailable())throw r("err")("Max number of stream IDs reached");if(this.$2<=e)return this.$2++;var n=(t=this.$1.values().next().value)!=null?t:0;return this.$1.delete(n),n},n.putBackStreamId=function(t){this.$1.add(t)},n.streamIdAvailable=function(){return this.$1.size>0||this.$2<=e},t})();l.MAX_STREAM_ID=e,l.StreamIdGeneratorImpl=s}),98);
__d("StreamGroupWebSocketTransport",["DGWConstants","DGWExponentialBackoff","DGWGlobalLogger","DGWLoggingContext","DGWPinger","DGWStream","DGWStreamGroupCallbacks","DGWTransportEvents","DGWUtils","DGWWebSocketTransport","GroupedStream","Promise","QuickPerformanceLogger","Random","Run","StreamIdGenerator","asyncToGeneratorRuntime","err","getErrorSafe","qex","qpl"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c=r("qpl")._(701238781,"3037"),d=(e=r("qex")._("2103"))!=null?e:!1,m=function(t,n,r,a,i){var e=this;this.groupedStream=t,this.$1=window.setTimeout(function(){r(o("DGWStream").StreamError.ESTABLISHMENT_TIMEOUT)},a),this.handleEstablishFrameReceived=function(){window.clearTimeout(e.$1),n(e.groupedStream)},this.abortStream=function(e){i(),r(e)}},p=(function(){function e(t,n,a,i,l,s,d,m){var p=this,_;this.$18=-1,this.$15=l,this.$17=this.__getStreamIdGenerator(),this.$5=new Map,this.$6=new Map,this.$7=i.keepAliveMs,this.$8=!1,this.$9=!1,this.$3=!0,this.$4=!1,this.$20=!1,this.$21=!1,this.$13=a,this.$11=new TextEncoder,this.$12=new TextDecoder,this.$14=i;var f={onDataReceived:function(){},handleAckReceived:function(){},receivedDrainSignal:function(t){p.$9||(p.$9=!0,p.$15(),p.$13.transportClosed(!0,""),p.$14.streamGroupCallbacks.onStreamGroupMustDrain(t),p.$5.forEach(function(e){e.__drainReceivedHook(t)}),p.onClose(o("DGWConstants").WebsocketCloseCodes.GRACEFUL_CLOSE))},onGroupedStreamDataReceived:function(t,n,r){if(p.$5.has(t)){var e=p.$5.get(t);e==null||e.__dataReceivedHook(n,r)}else p.$13.receivedFrameForInactiveStream("Data",t,"sendAckID: "+(r!=null?r:"null"))},onGroupedStreamAckReceived:function(t,n){if(p.$5.has(t)){var e=p.$5.get(t);e==null||e.__ackReceivedHook(n)}else p.$13.receivedFrameForInactiveStream("ACK",t,"ackId: "+(n!=null?n:"null"))},onGroupedStreamEndOfDataReceived:function(t){if(p.$5.has(t)){var e=p.$5.get(t);e==null||e.__endOfDataHook()}else p.$13.receivedFrameForInactiveStream("EndOfData",t)},onGroupedStreamEstablishStreamReceived:function(t,n){if(p.$6.has(t)){var e=p.$6.get(t);p.$6.delete(t);var r=JSON.parse(p.$12.decode(n));(r.code===void 0||r.code!==200)&&(e==null||e.abortStream(o("DGWStream").StreamError.ABNORMAL_CLOSURE)),e==null||e.handleEstablishFrameReceived()}else p.$13.receivedFrameForInactiveStream("EstablishStream",t,"EstablishStream received for non-inflight stream")},onPingReceived:function(){var e=p.$2.encodePing();e!=null&&p.send(e)},onPongReceived:function(){p.$3=!1,p.$21||(p.$21=!0,p.__markerPoint("auth_success")),p.$13.transportPongReceived("readyState:"+p.$1.readyState+", bufferedAmount:"+p.$1.bufferedAmount)}};this.$2=new(o("DGWUtils")).DGWCodec(s,f,i.dgwVersion),this.$19=Date.now()+(Math.round(o("Random").random()*1e4)+1e4),this.$22=o("DGWGlobalLogger").getInstance(),this.$23=(_=i.connectTimeoutMs)!=null?_:2e4;var g=o("Run").onUnload(function(){p.$22.tabClosed()});if(i.enableFirstStreamOnWsHandshake){var h,y,C,b;if(d===void 0)throw r("err")("Missing grouped stream options");if(m===void 0)throw r("err")("Missing grouped stream callbacks");var v=this.$17.getNextStreamId(),S=this.createEstablishStreamFrame(v,d),R=o("DGWUtils").DGWUtils.constructConnectUrl({appId:i.appId,appVersion:i.appVersion,authType:i.authType,deviceId:(h=i.deviceId)!=null?h:void 0,dgwVersion:i.dgwVersion,fbId:i.fbId,tier:i.tier,loggingId:(y=i.loggingId)!=null?y:void 0,headers:e.__prefixAppHeaders(i.headers),endpoint:i.connectEndpoint,serviceId:i.serviceId,regionHint:(C=i.regionHint)!=null?C:void 0,establishStreamFrame:S,authToken:(b=i.authToken)!=null?b:void 0});if(this.$1=n(R),!R.includes(o("DGWConstants").HEADER_CONSTANTS.HEADER_ESTABLISH_STREAM_FRAME_BASE64))return;var L=new(o("DGWLoggingContext")).DGWLoggingContext(this.$14.dgwVersion,d.loggingId,this.$14.serviceId,this.$14.fbId,this.$14.loggingId,d.disableFalcoLogging),E=this.__createGroupedStream(v,m,d,L);this.$16=this.waitForEstablishStream(v,E,d,function(e){p.$5.set(v,e)},function(){p.$17.putBackStreamId(v)})}else this.$1=n(t);this.$22.streamRequested(i.serviceId),(u||(u=r("QuickPerformanceLogger"))).markerStart(c,this.$19),this.__markerAnnotate({string:{serviceId:this.$14.serviceId,streamGroupId:this.$14.loggingId}})}var t=e.prototype;return t.send=function(t){try{return this.$1.send(t),!0}catch(e){return this.$13.transportError("Failed to send over transport","readyState: "+this.$1.readyState,r("getErrorSafe")(e).message),!1}},t.close=function(){var e;this.$22.streamClosed(this.$14.serviceId),this.__markerPoint("teardown"),this.$8=!0,(e=this.$10)==null||e.cancel(),this.$1.onopen=function(e){},this.$1.onmessage=function(e){},this.$1.onerror=function(e){},this.$1.onclose=function(e){},this.$15(),this.$1.close()},t.onClose=function(t){var e;this.$22.streamClosed(this.$14.serviceId),this.__markerPoint("abort"),this.__markerAnnotate({int:{abort_code:t}}),this.$8=!0,(e=this.$10)==null||e.cancel(),this.$1.close(t)},t.abort=function(t,n,r,o,a){this.$8||(this.$22.streamClosed(this.$14.serviceId),this.$8=!0,this.$13.transportClosed(!1,o,a),this.$5.forEach(function(e){e.__transportCloseHook(n)}),this.$6.forEach(function(e){e.abortStream(n)}),this.$14.streamGroupCallbacks.onStreamGroupError(t),this.$5.clear(),this.$6.clear(),this.$15(),this.onClose(r))},e.getTransportWithInitialStream=(function(){var t=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t,n,r,a,i,l){yield o("DGWUtils").DGWCodec.initialize();var s=new(o("DGWTransportEvents")).DGWTransportEvents(a);s.transportEstablishmentPending();var u=function(){return e.$24("",r,s,i,a,t,n)};try{var c=yield o("DGWExponentialBackoff").callWithExponentialBackoff(u,l),d=c.$16!=null?c.$16:c.establishGroupedStream(n,t,new(o("DGWLoggingContext")).DGWLoggingContext(r.dgwVersion,t.loggingId,r.serviceId,r.fbId,r.loggingId,t.disableFalcoLogging));return{transport:c,streamPromise:d}}catch(e){throw e}});function r(e,n,r,o,a,i){return t.apply(this,arguments)}return r})(),e.getTransport_DEPRECATED=(function(){var t=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t,n,r,a,i){yield o("DGWUtils").DGWCodec.initialize();var l=new(o("DGWTransportEvents")).DGWTransportEvents(r);l.transportEstablishmentPending();var s=function(){return e.$24(t,n,l,a,r)};try{return yield o("DGWExponentialBackoff").callWithExponentialBackoff(s,i)}catch(e){throw e}});function r(e,n,r,o,a){return t.apply(this,arguments)}return r})(),t.establishGroupedStream=(function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t,o,a,i,l){var u=this;i===void 0&&(i=!0);var c=this.getStreamId(),d=this.createEstablishStreamFrame(c,t),m=this.__createGroupedStream(c,e,t,o);m.__markerAnnotate({string:{serviceId:this.$14.serviceId,streamGroupId:this.$14.loggingId,streamId:t.streamTraceId}}),l!=null&&m.__markerAnnotate(l);var p=this.waitForEstablishStream(c,m,t,function(e){u.$5.set(c,e)},function(){u.$17.putBackStreamId(c)});if(a!=null){var _;m.__markerPoint("send_payload_start"),m.__markerAnnotate({int:{establishStreamPayloadSize:a.byteLength}});var f=(_=t.ackTimeoutMs)!=null?_:3e4,g=i?yield m.sendFrame(d,a,f):m.sendFrameAndForget(d,a);return g?(m.__markerPoint("send_payload_end"),m.__endMarker(2),(s||(s=n("Promise"))).resolve(m)):(m.__endMarker(3),(s||(s=n("Promise"))).reject("Failed to send data when establishing stream"))}if(m.__markerPoint("send_establish_stream_start"),!this.send(d))throw m.__endMarker(3),r("err")("Websocket connection closed before stream established");m.__markerPoint("send_establish_stream_end");var h=yield p;return m.__endMarker(2),h});function t(t,n,r,o,a,i){return e.apply(this,arguments)}return t})(),e.__prefixAppHeaders=function(t){return Object.keys(t).reduce(function(e,n){return e[""+o("DGWConstants").HEADER_CONSTANTS.APPHEADER_PREFIX+n]=t[n],e},{})},t.waitForEstablishStream=(function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t,r,o,a){var i=this;this.$13.streamEstablishmentPending(e,r.loggingId);try{var l=yield new(s||(s=n("Promise")))(function(n,r){i.$6.set(e,new m(t,n,r,3e4,function(){i.streamEndCallback(e)}))});return o(t),this.$13.streamEstablishmentSuccess(e,r.loggingId),l}catch(t){throw a(),this.$13.streamEstablishmentTimeout("Stream establishment timeout. readyState: "+this.$1.readyState,e,r.loggingId),t}});function t(t,n,r,o,a){return e.apply(this,arguments)}return t})(),e.$24=(function(){var t=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t,n,r,a,i,l,s){var u=new e(t,o("DGWWebSocketTransport").getWebSocketConnection,r,n,a,i,l,s);u.$1.onmessage=e.$25(u),u.$1.onopen=function(){u.__markerPoint("onopen"),r.transportEstablished(t),u.$10!=null&&u.$10.cancel(),u.$7!=null&&(u.$10=new(o("DGWPinger")).DGWPinger(u.$7,function(){u.$26()},function(){u.abort(o("DGWStreamGroupCallbacks").DGWStreamGroupError.TRANSPORT_KEEPALIVE_TIMEOUT,o("DGWStream").StreamError.KEEPALIVE_TIMEOUT,o("DGWConstants").WebsocketCloseCodes.KEEPALIVE_TIMEOUT,"Aborting transport because of keepalive timeout","readyState:"+u.$1.readyState+", bufferedAmount:"+u.$1.bufferedAmount)}))},u.$1.onerror=function(){u.__markerPoint("onerror"),u.$13.transportError("onerror","readyState: "+u.$1.readyState)},u.$1.onclose=e.$27(u);var c=yield e.getTransportPromise(u);return c});function r(e,n,r,o,a,i,l){return t.apply(this,arguments)}return r})(),e.getTransportPromise=(function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){var t,r=new(s||(s=n("Promise")))(function(n,r){t=window.setTimeout(function(){e.$15(),e.$13.transportClosed(!1,"TIMEOUT"),e.__markerPoint("connect_timeout"),e.close(),r(o("DGWStream").StreamError.TRANSPORT_ESTABLISHMENT_TIMEOUT)},e.$23)}),a=new s(function(t,n){var r=e.$1.onerror,a=e.$1.onmessage,i=e.$1.onclose;e.$1.onerror=function(){r(),e.close(),d||n(o("DGWStream").StreamError.ESTABLISHMENT_ERROR)},e.$1.onclose=function(e){i(e),e.code===o("DGWConstants").WebsocketCloseCodes.UNAUTHORIZED?n(o("DGWStream").StreamError.UNAUTHORIZED):n(e.code+":"+e.reason)},e.$1.onmessage=function(n){a(n),e.$3||(e.__markerPoint("connect_success"),t(e))}});try{return yield(s||(s=n("Promise"))).race([a,r])}finally{t!=null&&window.clearTimeout(t)}});function t(t){return e.apply(this,arguments)}return t})(),e.$25=function(t){return function(e){var n;if(t.$2==null){var r;(r=t.$13)==null||r.transportError("Codec Not Ready","Received message before codec was initialized or after close");return}if(t.$20||(t.$20=!0,t.__markerPoint("onmessage")),(n=t.$10)==null||n.reset(),!(e.data instanceof ArrayBuffer)){var o;(o=t.$13)==null||o.transportError("Incorrect Data Protocol","Received "+typeof e.data+" instead of ArrayBuffer");return}t.$2.append(new Uint8Array(e.data)),t.$2.processData()}},e.$27=function(t){return function(e){var n,r=t.$22.getGlobalState();if(t.__markerPoint("onclose"),t.__markerAnnotate({string:{reason:e.reason},int:{code:e.code,realtimeWebSockets:r.realtime,lightspeedWebSockets:r.lightspeed}}),t.__endMarker(e.code===o("DGWConstants").WebsocketCloseCodes.GRACEFUL_CLOSE?2:3),(n=t.$10)==null||n.cancel(),!(t.$8===!0||t.$4)){if(t.$22.streamClosed(t.$14.serviceId),t.$8=!0,t.$3===!0){t.$13.transportEstablishmentFailure(e),t.$5.clear(),t.$15();return}if(t.$15(),t.$3=!0,e.code!==o("DGWConstants").WebsocketCloseCodes.GRACEFUL_CLOSE){t.$13.transportClosed(!1,"Websocket connection failure with code: "+e.code+" reason: "+e.reason+" wasClean: "+String(e.wasClean));var a=o("DGWStreamGroupCallbacks").DGWStreamGroupError.TRANSPORT_UNKNOWN_ERROR,i=o("DGWStream").StreamError.UNKNOWN_ERROR;switch(e.code){case o("DGWConstants").WebsocketCloseCodes.NORMAL_CLOSURE:a=o("DGWStreamGroupCallbacks").DGWStreamGroupError.TRANSPORT_NORMAL_CLOSURE,i=o("DGWStream").StreamError.ABNORMAL_CLOSURE;break;case o("DGWConstants").WebsocketCloseCodes.ABNORMAL_CLOSURE:a=o("DGWStreamGroupCallbacks").DGWStreamGroupError.TRANSPORT_ABNORMAL_CLOSURE,i=o("DGWStream").StreamError.ABNORMAL_CLOSURE;break;case o("DGWConstants").WebsocketCloseCodes.SERVER_INTERNAL_ERROR:a=o("DGWStreamGroupCallbacks").DGWStreamGroupError.TRANSPORT_SERVER_INTERNAL_ERROR,i=o("DGWStream").StreamError.SERVER_INTERNAL_ERROR;break;case o("DGWConstants").WebsocketCloseCodes.GOING_AWAY:a=o("DGWStreamGroupCallbacks").DGWStreamGroupError.TRANSPORT_GOING_AWAY,i=o("DGWStream").StreamError.GOING_AWAY;break;case o("DGWConstants").WebsocketCloseCodes.UNAUTHORIZED:a=o("DGWStreamGroupCallbacks").DGWStreamGroupError.TRANSPORT_UNAUTHORIZED,i=o("DGWStream").StreamError.UNAUTHORIZED;break;case o("DGWConstants").WebsocketCloseCodes.REJECTED:a=o("DGWStreamGroupCallbacks").DGWStreamGroupError.TRANSPORT_REJECTED,i=o("DGWStream").StreamError.REJECTED;break;case o("DGWConstants").WebsocketCloseCodes.BAD_REQUEST:a=o("DGWStreamGroupCallbacks").DGWStreamGroupError.TRANSPORT_BAD_REQUEST,i=o("DGWStream").StreamError.BAD_REQUEST;break;case o("DGWConstants").WebsocketCloseCodes.DGW_SERVER_ERROR:a=o("DGWStreamGroupCallbacks").DGWStreamGroupError.TRANSPORT_SERVER_INTERNAL_ERROR,i=o("DGWStream").StreamError.DGW_SERVER_ERROR,a=o("DGWStreamGroupCallbacks").DGWStreamGroupError.TRANSPORT_DGW_SERVER_ERROR;break;default:a=o("DGWStreamGroupCallbacks").DGWStreamGroupError.TRANSPORT_UNKNOWN_ERROR,i=o("DGWStream").StreamError.UNKNOWN_ERROR;break}t.$14.streamGroupCallbacks.onStreamGroupError(a),t.$5.forEach(function(e){e.__transportCloseHook(i)}),t.$6.forEach(function(e){e.abortStream(i)})}else t.$13.transportClosed(!0,""),t.$14.streamGroupCallbacks.onStreamGroupTransportClose(),t.$5.forEach(function(e){e.__transportCloseHook()}),t.$6.forEach(function(e){e.abortStream(o("DGWStream").StreamError.TRANSPORT_CLOSED_BEFORE_STREAM_INIT)});t.$5.clear(),t.$6.clear()}}},t.$26=function(){var e=this.$2.encodePing();if(e==null)throw r("err")("Failed to encode Ping Frame");var t=this.send(e);this.$18=this.$1.bufferedAmount,this.$13.transportPingSent("readyState:"+this.$1.readyState+", bufferedAmount:"+this.$18+", payloadSize:"+(e==null?void 0:e.byteLength)+", sent:"+String(t))},t.isClosedLocally=function(){return this.$3||this.$8||this.$4},t.streamEndCallback=function(t){this.$5.delete(t),this.$6.delete(t),this.$17.putBackStreamId(t)},t.canCreateGroupedStream=function(){return this.$17.streamIdAvailable()},t.createEstablishStreamFrame=function(n,a){var t=e.__prefixAppHeaders(a.groupedStreamHeaders);a.streamTraceId!=null&&(t[o("DGWConstants").HEADER_CONSTANTS.HEADER_STREAM_TRACE_ID]=a.streamTraceId);var i=this.$2.encodeEstablishStream(n,new Uint8Array(this.$11.encode(JSON.stringify(t))));if(i==null)throw this.$17.putBackStreamId(n),r("err")("Failed to encode EstablishStreamFrame");return i},t.getStreamId=function(){try{return this.$17.getNextStreamId()}catch(e){throw this.$13.ranOutOfStreamIds("inFlightGroupedStreamSize: "+this.$6.size+" groupedStreamSize: "+this.$5.size),e}},t.__createGroupedStream=function(t,n,r,a){var e=this;return new(o("GroupedStream")).GroupedStream(t,n,r,this,a,this.$2,function(){e.streamEndCallback(t)})},t.__getStreamIdGenerator=function(){return new(o("StreamIdGenerator")).StreamIdGeneratorImpl},t.__markerPoint=function(t){var e=this.$19;(u||(u=r("QuickPerformanceLogger"))).markerPoint(c,t,{instanceKey:e})},t.__markerAnnotate=function(t){var e=this.$19;(u||(u=r("QuickPerformanceLogger"))).markerAnnotate(c,t,{instanceKey:e})},t.__endMarker=function(t){(u||(u=r("QuickPerformanceLogger"))).markerEnd(c,t,this.$19)},e})();l.StreamGroupWebSocketTransport=p}),98);
__d("StreamGroup",["DGWConstants","DGWLoggingContext","DGWUtils","StreamGroupWebSocketTransport","asyncToGeneratorRuntime","justknobx"],(function(t,n,r,o,a,i,l){"use strict";var e={maxRetries:r("justknobx")._("2595"),baseRetryInterval:1e3,backoffFactor:Math.sqrt(2)},s=(function(){function t(e,t,n,r,a,i,l,s,u){var c,d,m,p,_,f,g,h,y;this.$2=u,this.$1=u.getNewStreamGroupId();var C=(c=l.overrideUrl)!=null?c:a;this.$5=null,this.$3={appId:e,appVersion:t,authType:(d=l.authType)!=null?d:n,deviceId:l.deviceId,dgwVersion:r,headers:l.streamGroupAppHeaders,tier:(m=l.serviceTier)!=null?m:o("DGWConstants").DEFAULT_SERVICE_TIER,connectEndpoint:C,fbId:i,loggingId:l.loggingId,serviceId:l.serviceId,streamGroupCallbacks:s,keepAliveMs:l.keepAliveMs,regionHint:l.regionHint,enableFirstStreamOnWsHandshake:!1,authToken:l.authToken,connectTimeoutMs:l.connectTimeoutMs},this.$4=l,this.streamGroupLoggingContext=new(o("DGWLoggingContext")).DGWLoggingContext(this.$3.dgwVersion,null,this.$3.serviceId,this.$3.fbId,this.$4.loggingId,!1,(p=l.verboseLoggingEnabled)!=null?p:!1),this.$6=o("DGWUtils").DGWUtils.constructConnectUrl({appId:this.$3.appId,appVersion:this.$3.appVersion,authType:this.$3.authType,deviceId:(_=this.$3.deviceId)!=null?_:void 0,dgwVersion:this.$3.dgwVersion,fbId:this.$3.fbId,headers:babelHelpers.extends({},this.$3.headers),loggingId:(f=this.$3.loggingId)!=null?f:void 0,tier:this.$3.tier,serviceId:this.$3.serviceId,endpoint:this.$3.connectEndpoint,regionHint:(g=this.$3.regionHint)!=null?g:void 0,trafficTracing:(h=this.$4.trafficTracing)!=null?h:void 0,authToken:(y=this.$4.authToken)!=null?y:void 0})}var r=t.prototype;return r.initTransport=(function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(){var e=this,t={maxRetries:0,baseRetryInterval:1e3,backoffFactor:Math.sqrt(2)};this.$5=this.$5||o("StreamGroupWebSocketTransport").StreamGroupWebSocketTransport.getTransport_DEPRECATED(this.$6,this.$3,this.streamGroupLoggingContext,function(){e.$2.removeStreamGroupAndTransport(e.$1)},t);var n;try{n=yield this.$5,this.$5=null}catch(e){throw this.$5=null,e}return this.$2.containsStreamGroup(this.$1)||this.$2.setStreamGroupAndTransport(this.$1,n),n});function t(){return e.apply(this,arguments)}return t})(),r.establishStream=(function(){var t=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t,n,r,a,i){var l=this;if(this.$2.containsStreamGroup(this.$1)===!1)if(this.streamGroupLoggingContext.logEvent(o("DGWLoggingContext").DGWLoggingComponent.STREAM_GROUP_COMPONENT,"createTransportWhenEstablishStream"),this.$3.enableFirstStreamOnWsHandshake){var u=yield o("StreamGroupWebSocketTransport").StreamGroupWebSocketTransport.getTransportWithInitialStream(t,n,this.$3,this.streamGroupLoggingContext,function(){l.$2.removeStreamGroupAndTransport(l.$1)},e);return this.$2.setStreamGroupAndTransport(this.$1,u.transport),u.streamPromise}else{this.$5=this.$5||o("StreamGroupWebSocketTransport").StreamGroupWebSocketTransport.getTransport_DEPRECATED(this.$6,this.$3,this.streamGroupLoggingContext,function(){l.$2.removeStreamGroupAndTransport(l.$1)},e);var s;try{s=yield this.$5,this.$5=null}catch(e){throw this.$5=null,e}this.$2.containsStreamGroup(this.$1)||this.$2.setStreamGroupAndTransport(this.$1,s)}return this.establishStreamWithTransport(t,n,r,a,i)});function r(e,n,r,o,a){return t.apply(this,arguments)}return r})(),r.establishStreamWithTransport=(function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t,n,r,a){var i,l=e.loggingId;this.streamGroupLoggingContext.logEvent(o("DGWLoggingContext").DGWLoggingComponent.STREAM_GROUP_COMPONENT,"Establishing Grouped Stream","initialData:"+String(n!=null),!0,l);var s=yield this.$2.getStreamGroupTransport(this.$1).establishGroupedStream(t,e,new(o("DGWLoggingContext")).DGWLoggingContext(this.$3.dgwVersion,l,this.$3.serviceId,this.$3.fbId,this.$3.loggingId,e.disableFalcoLogging,(i=e.verboseLoggingEnabled)!=null?i:!1),n,r,a);return s});function t(t,n,r,o,a){return e.apply(this,arguments)}return t})(),r.canCreateGroupedStream=function(){var e=!0;if(this.$2.containsStreamGroup(this.$1)!==!1){var t=this.$2.getStreamGroupTransport(this.$1);e=t.canCreateGroupedStream()}return o("DGWLoggingContext").DGWLoggingContext.bumpODSKey(o("DGWLoggingContext").DGWLoggingComponent.STREAM_GROUP_COMPONENT,e?"can_create":"cannot_create"),e},r.close=function(){if(this.$2.containsStreamGroup(this.$1)){var e=this.$2.getStreamGroupTransport(this.$1);e.close()}},t})();l.StreamGroup=s}),98);
__d("StreamGroupRegistry",["Random","err"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(){function e(){this.$1=new Map,this.$2=new Set}var t=e.prototype;return t.setStreamGroupAndTransport=function(t,n){this.$1.set(t,n)},t.containsStreamGroup=function(t){return this.$1.has(t)},t.removeStreamGroupAndTransport=function(t){this.$1.delete(t)},t.getStreamGroupTransport=function(t){var e=this.$1.get(t);if(e==null)throw r("err")("No stream group transport");return e},t.getNewStreamGroupId=function(){for(var e=o("Random").uint32();this.$2.has(e);)e=o("Random").uint32();return this.$2.add(e),e},e})();l.StreamGroupRegistry=e}),98);
__d("RawDGWClient",["CurrentUser","DGWAuth","DGWLoggingContext","DGWStream","StreamGroup","StreamGroupRegistry","isFastRefreshEnabledForCurrentDomain"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(){function e(e){var t=e.appId,n=e.appVersion,r=e.authType,a=e.dgwVersion,i=e.endpoint,l=e.fbId,s=e.authToken,u=e.isUserLoggedIn;this.$1=t,this.$2=n,this.$3=r,this.$5=a,this.$6=i,this.$7=l,this.$8=new(o("StreamGroupRegistry")).StreamGroupRegistry,this.$4=s,this.$9=u}var t=e.prototype;return t.createStreamGroup=function(t,n){var e,r;this.handleUserChecks((e=n.authType)!=null?e:this.$3);var a=(r=n.authToken)!=null?r:this.$4;return a!=null&&this.$3===o("DGWAuth").DGWAuth.GUEST&&(n.authToken=a),new(o("StreamGroup")).StreamGroup(this.$1,this.$2,this.$3,this.$5,this.$6,this.$7,n,t,this.$8)},t.handleUserChecks=function(t){var e=this.$9!=null?this.$9:r("CurrentUser").isLoggedInNow();if(!e&&o("DGWAuth").fromDGWAuthToString(t)!=="GUEST"&&!r("isFastRefreshEnabledForCurrentDomain")())throw o("DGWLoggingContext").DGWLoggingContext.bumpODSKey(o("DGWLoggingContext").DGWLoggingComponent.RAW_CLIENT,"unauthenticated"),o("DGWStream").StreamError.UNAUTHENTICATED},e})();l.RawDGWClient=e}),98);
__d("DGWClient",["DGWAuth","DGWEnvUtil","DGWWebConfig","RawDGWClient","err"],(function(t,n,r,o,a,i,l){"use strict";var e,s=new(o("RawDGWClient")).RawDGWClient({appId:r("DGWWebConfig").appId,appVersion:r("DGWWebConfig").appVersion,authType:o("DGWAuth").fromStringToDGWAuth((e=r("DGWEnvUtil")).getDGWAuthType()),dgwVersion:e.getDGWVersion(),endpoint:e.getDGWEndpoint(),fbId:r("DGWWebConfig").fbId,authToken:e.getDGWAuthToken()});function u(){if(r("DGWEnvUtil").isDGWEnvCompatible())return s;throw r("err")("unsupported_environment_retry_with_mqtt")}l.default=u}),98);
__d("DGWRequestStreamUtils",["Base64","WebDriverConfig","cr:3024","gkx"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t,o,a){var i={};for(var l of Object.entries(e)){var s=l[0],u=l[1];typeof u=="string"?i["XRSS-"+s]=u:typeof u=="number"?i["XRSN-"+s]=u.toString():typeof u=="boolean"?i["XRSB-"+s]=u.toString():typeof u=="object"&&u!=null&&(i["XRSO-"+s]=r("Base64").encode(JSON.stringify(u)))}if(t&&(i["xrs-body"]="true"),o!=null&&o.length>0&&(i["xrs-instrumentation"]=r("Base64").encode(o)),i["XRS-Accept-Ack"]="RSAck",a!=null&&a.ackTimeoutSec!=null&&(i["XRS-SRAck-Timeout"]=a.ackTimeoutSec.toString()),i["XRSS-http_referer"]=window.location.href,r("WebDriverConfig").isTestRunning&&r("gkx")("20919")){var c=n("cr:3024")==null?void 0:n("cr:3024").get();c!=null&&(i["XRSB-is_test"]="true",i["XRSS-original_request_id"]=c)}return i}function s(e){return Object.keys(e).reduce(function(t,n){return(typeof e[n]=="string"||typeof e[n]=="boolean"||typeof e[n]=="number"||typeof e[n]=="object")&&(t[n]=e[n]),t},{})}function u(e){if(e.response&&e.response.instrumentation_data!=null&&e.response.instrumentation_data.length>0)try{var t,n=JSON.parse(new TextDecoder("utf-8").decode(e.response.instrumentation_data));return{auxId:n.auxId,dfTraceId:(t=n.dataFlowTracingData)==null?void 0:t.traceId}}catch(e){}return null}function c(e,t){var n=e.headers,r=e.body;if(t.kill_body===!0&&(r=null),t.new_body!=null&&(r=t.new_body),t.new_headers!=null)try{n=s(JSON.parse(t.new_headers))}catch(e){}if(t.patch_headers!=null)try{n=babelHelpers.extends({},n,s(JSON.parse(t.patch_headers)))}catch(e){}return{headers:n,body:r}}l.convertHeaders=e,l.cleanHeaders=s,l.getInstrumentationDataFieldsFromPayload=u,l.transformContextWithRewriteDelta=c}),98);
__d("DGWStreamHandler",[],(function(t,n,r,o,a,i){"use strict";var e=(function(){function e(e,t,n,r,o){this.$2=e,this.$3=t,this.$4=n,this.$5=r,this.$6=o,this.$1=!0}var t=e.prototype;return t.onClose=function(t){this.$1&&this.$2(t)},t.onDataReceived=function(t){this.$1&&this.$3(t)},t.onError=function(t){this.$1&&this.$4(t)},t.onStreamMustDrain=function(t,n){this.$1&&this.$5(t,n)},t.onServerHasFinishedSendingData=function(t){this.$1&&this.$6(t)},t.stop=function(){this.$1=!1},t.isStopped=function(){return!this.$1},e})();i.default=e}),66);
__d("InflightAmends",["Deferred","err"],(function(t,n,r,o,a,i,l){"use strict";var e="inflight_amends_timeout",s="inflight_amends_duplicate_id",u=(function(){function t(e,t,n){this.$1=e,this.$3=t,this.$4=n,this.$2=new Map}var n=t.prototype;return n.add=function(n){var t=this;if(this.$2.has(n))throw r("err")(s);var o=new(r("Deferred")),a=Date.now(),i=setTimeout(function(){t.$2.has(n)&&t.reject(n,r("err")(e))},this.$1);return this.$2.set(n,{id:n,deferred:o,createdTimestampMs:a,timeoutId:i}),o.getPromise()},n.getPromise=function(t){var e;return(e=this.$5(t))==null?void 0:e.deferred.getPromise()},n.resolve=function(t,n){var e=this.$5(t);e&&(e.deferred.resolve==null||e.deferred.resolve(n),this.$3(e.id,Date.now()-e.createdTimestampMs),this.$6(e))},n.reject=function(t,n){var e=this.$5(t);e&&(e.deferred.reject==null||e.deferred.reject(n),this.$4(e.id,n),this.$6(e))},n.rejectAll=function(t){for(var e of this.$2.entries()){var n=e[0],r=e[1];this.reject(n,t)}},n.getSize=function(){return this.$2.size},n.getAllPromises=function(){var e=[];for(var t of this.$2.values())e.push(t.deferred.getPromise());return e},n.$6=function(t){clearTimeout(t.timeoutId),this.$2.delete(t.id)},n.$5=function(t){return this.$2.get(t)},t})();l.default=u}),98);
__d("RequestStreamCloseReason",["$InternalEnum"],(function(t,n,r,o,a,i){"use strict";var e=n("$InternalEnum").Mirrored(["UserIntention","StartStreamFailure","StreamError","RemoteTermination","ServerDataEnd","ServerDrain","ReestablishError","ClientError"]);i.RequestStreamCloseReason=e}),66);
__d("RequestStreamCommonRequestStreamCommonSerializers",["RequestStreamCommonRequestStreamCommonTypes","ThriftTypes","jsbi"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(){return{}}function u(){return{expected_existing_headers:"",patch_headers_if_match:""}}function c(){return{bytes:Uint8Array.of()}}function d(){return{message:""}}function m(){return{reason:o("RequestStreamCommonRequestStreamCommonTypes").TerminationReason.cast(0)}}function p(){return{}}function _(){return{stream_id:"0",last_sequencer:0,amendment_count:0,last_status:o("RequestStreamCommonRequestStreamCommonTypes").FlowStatus.cast(0)}}function f(){return{caller_timestamp_ms:"0"}}function g(){return{original_ping_timestamp_ms:"0"}}function h(){return{}}function y(t,n){n.writeStructBegin("ResponseRewriteRequest"),t.new_headers!=null&&(n.writeFieldBegin({fname:"new_headers",ftype:(e||(e=r("ThriftTypes"))).STRING,fid:1}),n.writeString(t.new_headers),n.writeFieldEnd()),t.new_body!=null&&(n.writeFieldBegin({fname:"new_body",ftype:(e||(e=r("ThriftTypes"))).STRING,fid:2}),n.writeBinary(t.new_body),n.writeFieldEnd()),t.patch_headers!=null&&(n.writeFieldBegin({fname:"patch_headers",ftype:(e||(e=r("ThriftTypes"))).STRING,fid:3}),n.writeString(t.patch_headers),n.writeFieldEnd()),t.kill_body!=null&&(n.writeFieldBegin({fname:"kill_body",ftype:(e||(e=r("ThriftTypes"))).BOOL,fid:4}),n.writeBool(t.kill_body),n.writeFieldEnd()),t.temporary!=null&&(n.writeFieldBegin({fname:"temporary",ftype:(e||(e=r("ThriftTypes"))).BOOL,fid:5}),n.writeBool(t.temporary),n.writeFieldEnd()),t.conditional_patch_headers!=null&&(n.writeFieldBegin({fname:"conditional_patch_headers",ftype:(e||(e=r("ThriftTypes"))).STRUCT,fid:6}),C(t.conditional_patch_headers,n),n.writeFieldEnd()),n.writeFieldStop(),n.writeStructEnd()}function C(t,n){if(n.writeStructBegin("ResponseRewriteConditionalPatchHeaders"),n.writeFieldBegin({fname:"expected_existing_headers",ftype:(e||(e=r("ThriftTypes"))).STRING,fid:1}),t.expected_existing_headers!=null)n.writeString(t.expected_existing_headers);else{var o="";n.writeString(o)}if(n.writeFieldEnd(),n.writeFieldBegin({fname:"patch_headers_if_match",ftype:e.STRING,fid:2}),t.patch_headers_if_match!=null)n.writeString(t.patch_headers_if_match);else{var a="";n.writeString(a)}n.writeFieldEnd(),t.patch_headers_otherwise!=null&&(n.writeFieldBegin({fname:"patch_headers_otherwise",ftype:(e||(e=r("ThriftTypes"))).STRING,fid:3}),n.writeString(t.patch_headers_otherwise),n.writeFieldEnd()),n.writeFieldStop(),n.writeStructEnd()}function b(t,n){if(n.writeStructBegin("ResponseData"),n.writeFieldBegin({fname:"bytes",ftype:(e||(e=r("ThriftTypes"))).STRING,fid:1}),t.bytes!=null)n.writeBinary(t.bytes);else{var o=Uint8Array.of();n.writeBinary(o)}n.writeFieldEnd(),t.metadata!=null&&(n.writeFieldBegin({fname:"metadata",ftype:(e||(e=r("ThriftTypes"))).STRING,fid:2}),n.writeString(t.metadata),n.writeFieldEnd()),n.writeFieldStop(),n.writeStructEnd()}function v(t,n){if(n.writeStructBegin("LogMessage"),n.writeFieldBegin({fname:"message",ftype:(e||(e=r("ThriftTypes"))).STRING,fid:1}),t.message!=null)n.writeString(t.message);else{var o="";n.writeString(o)}n.writeFieldEnd(),n.writeFieldStop(),n.writeStructEnd()}function S(t,n){if(n.writeStructBegin("Termination"),n.writeFieldBegin({fname:"reason",ftype:(e||(e=r("ThriftTypes"))).I32,fid:1}),t.reason!=null){var a;n.writeI32((a=t.reason)!=null?a:0)}else{var i=o("RequestStreamCommonRequestStreamCommonTypes").TerminationReason.cast(0);n.writeI32(i!=null?i:0)}n.writeFieldEnd(),t.message!=null&&(n.writeFieldBegin({fname:"message",ftype:(e||(e=r("ThriftTypes"))).STRING,fid:2}),n.writeString(t.message),n.writeFieldEnd()),t.retry_delay_ms!=null&&(n.writeFieldBegin({fname:"retry_delay_ms",ftype:(e||(e=r("ThriftTypes"))).I64,fid:3}),n.writeI64(r("jsbi").BigInt(t.retry_delay_ms)),n.writeFieldEnd()),n.writeFieldStop(),n.writeStructEnd()}function R(t,n){n.writeStructBegin("AmendStreamAck"),t.amendment_id!=null&&(n.writeFieldBegin({fname:"amendment_id",ftype:(e||(e=r("ThriftTypes"))).I64,fid:1}),n.writeI64(r("jsbi").BigInt(t.amendment_id)),n.writeFieldEnd()),t.accepted!=null&&(n.writeFieldBegin({fname:"accepted",ftype:(e||(e=r("ThriftTypes"))).BOOL,fid:2}),n.writeBool(t.accepted),n.writeFieldEnd()),t.result!=null&&(n.writeFieldBegin({fname:"result",ftype:(e||(e=r("ThriftTypes"))).STRING,fid:3}),n.writeBinary(t.result),n.writeFieldEnd()),n.writeFieldStop(),n.writeStructEnd()}function L(t,n){if(n.writeStructBegin("StreamCheck"),n.writeFieldBegin({fname:"stream_id",ftype:(e||(e=r("ThriftTypes"))).I64,fid:1}),t.stream_id!=null)n.writeI64(r("jsbi").BigInt(t.stream_id));else{var a="0";n.writeI64(r("jsbi").BigInt(a))}if(n.writeFieldEnd(),n.writeFieldBegin({fname:"last_sequencer",ftype:e.I32,fid:2}),t.last_sequencer!=null)n.writeI32(t.last_sequencer);else{var i=0;n.writeI32(i)}if(n.writeFieldEnd(),n.writeFieldBegin({fname:"amendment_count",ftype:e.I32,fid:4}),t.amendment_count!=null)n.writeI32(t.amendment_count);else{var l=0;n.writeI32(l)}if(n.writeFieldEnd(),n.writeFieldBegin({fname:"last_status",ftype:e.I32,fid:3}),t.last_status!=null){var s;n.writeI32((s=t.last_status)!=null?s:0)}else{var u=o("RequestStreamCommonRequestStreamCommonTypes").FlowStatus.cast(0);n.writeI32(u!=null?u:0)}n.writeFieldEnd(),n.writeFieldStop(),n.writeStructEnd()}function E(t,n){if(n.writeStructBegin("Ping"),n.writeFieldBegin({fname:"caller_timestamp_ms",ftype:(e||(e=r("ThriftTypes"))).I64,fid:1}),t.caller_timestamp_ms!=null)n.writeI64(r("jsbi").BigInt(t.caller_timestamp_ms));else{var o="0";n.writeI64(r("jsbi").BigInt(o))}if(n.writeFieldEnd(),t.streams_to_check!=null){n.writeFieldBegin({fname:"streams_to_check",ftype:(e||(e=r("ThriftTypes"))).LIST,fid:2}),n.writeListBegin({etype:e.STRUCT,size:t.streams_to_check.length});for(var a of t.streams_to_check)L(a,n);n.writeListEnd(),n.writeFieldEnd()}n.writeFieldStop(),n.writeStructEnd()}function k(t,n){if(n.writeStructBegin("Pong"),n.writeFieldBegin({fname:"original_ping_timestamp_ms",ftype:(e||(e=r("ThriftTypes"))).I64,fid:1}),t.original_ping_timestamp_ms!=null)n.writeI64(r("jsbi").BigInt(t.original_ping_timestamp_ms));else{var o="0";n.writeI64(r("jsbi").BigInt(o))}if(n.writeFieldEnd(),t.stream_ids_missing!=null){n.writeFieldBegin({fname:"stream_ids_missing",ftype:(e||(e=r("ThriftTypes"))).LIST,fid:2}),n.writeListBegin({etype:e.I64,size:t.stream_ids_missing.length});for(var a of t.stream_ids_missing)n.writeI64(r("jsbi").BigInt(a));n.writeListEnd(),n.writeFieldEnd()}if(t.stream_ids_behind!=null){n.writeFieldBegin({fname:"stream_ids_behind",ftype:(e||(e=r("ThriftTypes"))).LIST,fid:3}),n.writeListBegin({etype:e.I64,size:t.stream_ids_behind.length});for(var i of t.stream_ids_behind)n.writeI64(r("jsbi").BigInt(i));n.writeListEnd(),n.writeFieldEnd()}if(t.stream_ids_with_lost_amendments!=null){n.writeFieldBegin({fname:"stream_ids_with_lost_amendments",ftype:(e||(e=r("ThriftTypes"))).LIST,fid:4}),n.writeListBegin({etype:e.I64,size:t.stream_ids_with_lost_amendments.length});for(var l of t.stream_ids_with_lost_amendments)n.writeI64(r("jsbi").BigInt(l));n.writeListEnd(),n.writeFieldEnd()}if(t.stream_ids_with_wrong_status!=null){n.writeFieldBegin({fname:"stream_ids_with_wrong_status",ftype:(e||(e=r("ThriftTypes"))).LIST,fid:5}),n.writeListBegin({etype:e.I64,size:t.stream_ids_with_wrong_status.length});for(var s of t.stream_ids_with_wrong_status)n.writeI64(r("jsbi").BigInt(s));n.writeListEnd(),n.writeFieldEnd()}n.writeFieldStop(),n.writeStructEnd()}function I(t,n){if(n.writeStructBegin("StreamResponseDelta"),t.flow_status!=null){var o;n.writeFieldBegin({fname:"flow_status",ftype:(e||(e=r("ThriftTypes"))).I32,fid:1}),n.writeI32((o=t.flow_status)!=null?o:0),n.writeFieldEnd(),n.writeFieldStop(),n.writeStructEnd();return}if(t.log!=null){n.writeFieldBegin({fname:"log",ftype:(e||(e=r("ThriftTypes"))).STRUCT,fid:2}),v(t.log,n),n.writeFieldEnd(),n.writeFieldStop(),n.writeStructEnd();return}if(t.rewrite!=null){n.writeFieldBegin({fname:"rewrite",ftype:(e||(e=r("ThriftTypes"))).STRUCT,fid:3}),y(t.rewrite,n),n.writeFieldEnd(),n.writeFieldStop(),n.writeStructEnd();return}if(t.data!=null){n.writeFieldBegin({fname:"data",ftype:(e||(e=r("ThriftTypes"))).STRUCT,fid:4}),b(t.data,n),n.writeFieldEnd(),n.writeFieldStop(),n.writeStructEnd();return}if(t.termination!=null){n.writeFieldBegin({fname:"termination",ftype:(e||(e=r("ThriftTypes"))).STRUCT,fid:5}),S(t.termination,n),n.writeFieldEnd(),n.writeFieldStop(),n.writeStructEnd();return}if(t.amend_ack!=null){n.writeFieldBegin({fname:"amend_ack",ftype:(e||(e=r("ThriftTypes"))).STRUCT,fid:6}),R(t.amend_ack,n),n.writeFieldEnd(),n.writeFieldStop(),n.writeStructEnd();return}n.writeFieldStop(),n.writeStructEnd()}function T(t){var n={};for(t.readStructBegin();;){var o=t.readFieldBegin(),a=o.ftype,i=o.fid;if(a===(e||(e=r("ThriftTypes"))).STOP)break;switch(i){case 1:a===(e||(e=r("ThriftTypes"))).STRING?n.new_headers=t.readString():t.skip(a);break;case 2:a===(e||(e=r("ThriftTypes"))).STRING?n.new_body=t.readBinary():t.skip(a);break;case 3:a===(e||(e=r("ThriftTypes"))).STRING?n.patch_headers=t.readString():t.skip(a);break;case 4:a===(e||(e=r("ThriftTypes"))).BOOL?n.kill_body=t.readBool():t.skip(a);break;case 5:a===(e||(e=r("ThriftTypes"))).BOOL?n.temporary=t.readBool():t.skip(a);break;case 6:a===(e||(e=r("ThriftTypes"))).STRUCT?n.conditional_patch_headers=D(t):t.skip(a);break;default:t.skip(a)}t.readFieldEnd()}return t.readStructEnd(),n}function D(t){var n={};for(t.readStructBegin();;){var o=t.readFieldBegin(),a=o.ftype,i=o.fid;if(a===(e||(e=r("ThriftTypes"))).STOP)break;switch(i){case 1:a===(e||(e=r("ThriftTypes"))).STRING?n.expected_existing_headers=t.readString():t.skip(a);break;case 2:a===(e||(e=r("ThriftTypes"))).STRING?n.patch_headers_if_match=t.readString():t.skip(a);break;case 3:a===(e||(e=r("ThriftTypes"))).STRING?n.patch_headers_otherwise=t.readString():t.skip(a);break;default:t.skip(a)}t.readFieldEnd()}return t.readStructEnd(),n.expected_existing_headers===void 0&&(n.expected_existing_headers=""),n.patch_headers_if_match===void 0&&(n.patch_headers_if_match=""),n}function x(t){var n={};for(t.readStructBegin();;){var o=t.readFieldBegin(),a=o.ftype,i=o.fid;if(a===(e||(e=r("ThriftTypes"))).STOP)break;switch(i){case 1:a===(e||(e=r("ThriftTypes"))).STRING?n.bytes=t.readBinary():t.skip(a);break;case 2:a===(e||(e=r("ThriftTypes"))).STRING?n.metadata=t.readString():t.skip(a);break;default:t.skip(a)}t.readFieldEnd()}return t.readStructEnd(),n.bytes===void 0&&(n.bytes=Uint8Array.of()),n}function $(t){var n={};for(t.readStructBegin();;){var o=t.readFieldBegin(),a=o.ftype,i=o.fid;if(a===(e||(e=r("ThriftTypes"))).STOP)break;switch(i){case 1:a===(e||(e=r("ThriftTypes"))).STRING?n.message=t.readString():t.skip(a);break;default:t.skip(a)}t.readFieldEnd()}return t.readStructEnd(),n.message===void 0&&(n.message=""),n}function P(t){var n={};for(t.readStructBegin();;){var a=t.readFieldBegin(),i=a.ftype,l=a.fid;if(i===(e||(e=r("ThriftTypes"))).STOP)break;switch(l){case 1:i===(e||(e=r("ThriftTypes"))).I32?n.reason=o("RequestStreamCommonRequestStreamCommonTypes").TerminationReason.cast(t.readI32()):t.skip(i);break;case 2:i===(e||(e=r("ThriftTypes"))).STRING?n.message=t.readString():t.skip(i);break;case 3:i===(e||(e=r("ThriftTypes"))).I64?n.retry_delay_ms=t.readI64().toString():t.skip(i);break;default:t.skip(i)}t.readFieldEnd()}return t.readStructEnd(),n.reason===void 0&&(n.reason=o("RequestStreamCommonRequestStreamCommonTypes").TerminationReason.cast(0)),n}function N(t){var n={};for(t.readStructBegin();;){var o=t.readFieldBegin(),a=o.ftype,i=o.fid;if(a===(e||(e=r("ThriftTypes"))).STOP)break;switch(i){case 1:a===(e||(e=r("ThriftTypes"))).I64?n.amendment_id=t.readI64().toString():t.skip(a);break;case 2:a===(e||(e=r("ThriftTypes"))).BOOL?n.accepted=t.readBool():t.skip(a);break;case 3:a===(e||(e=r("ThriftTypes"))).STRING?n.result=t.readBinary():t.skip(a);break;default:t.skip(a)}t.readFieldEnd()}return t.readStructEnd(),n}function M(t){var n={};for(t.readStructBegin();;){var a=t.readFieldBegin(),i=a.ftype,l=a.fid;if(i===(e||(e=r("ThriftTypes"))).STOP)break;switch(l){case 1:i===(e||(e=r("ThriftTypes"))).I64?n.stream_id=t.readI64().toString():t.skip(i);break;case 2:i===(e||(e=r("ThriftTypes"))).I32?n.last_sequencer=t.readI32():t.skip(i);break;case 4:i===(e||(e=r("ThriftTypes"))).I32?n.amendment_count=t.readI32():t.skip(i);break;case 3:i===(e||(e=r("ThriftTypes"))).I32?n.last_status=o("RequestStreamCommonRequestStreamCommonTypes").FlowStatus.cast(t.readI32()):t.skip(i);break;default:t.skip(i)}t.readFieldEnd()}return t.readStructEnd(),n.stream_id===void 0&&(n.stream_id="0"),n.last_sequencer===void 0&&(n.last_sequencer=0),n.amendment_count===void 0&&(n.amendment_count=0),n.last_status===void 0&&(n.last_status=o("RequestStreamCommonRequestStreamCommonTypes").FlowStatus.cast(0)),n}function w(t){var n={};for(t.readStructBegin();;){var o=t.readFieldBegin(),a=o.ftype,i=o.fid;if(a===(e||(e=r("ThriftTypes"))).STOP)break;switch(i){case 1:a===(e||(e=r("ThriftTypes"))).I64?n.caller_timestamp_ms=t.readI64().toString():t.skip(a);break;case 2:if(a===(e||(e=r("ThriftTypes"))).LIST){n.streams_to_check=[];for(var l=t.readListBegin(),s=0;s<l.size;s++){var u=M(t);n.streams_to_check.push(u)}}else t.skip(a);break;default:t.skip(a)}t.readFieldEnd()}return t.readStructEnd(),n.caller_timestamp_ms===void 0&&(n.caller_timestamp_ms="0"),n}function A(t){var n={};for(t.readStructBegin();;){var o=t.readFieldBegin(),a=o.ftype,i=o.fid;if(a===(e||(e=r("ThriftTypes"))).STOP)break;switch(i){case 1:a===(e||(e=r("ThriftTypes"))).I64?n.original_ping_timestamp_ms=t.readI64().toString():t.skip(a);break;case 2:if(a===(e||(e=r("ThriftTypes"))).LIST){n.stream_ids_missing=[];for(var l=t.readListBegin(),s=0;s<l.size;s++){var u=t.readI64().toString();n.stream_ids_missing.push(u)}}else t.skip(a);break;case 3:if(a===(e||(e=r("ThriftTypes"))).LIST){n.stream_ids_behind=[];for(var c=t.readListBegin(),d=0;d<c.size;d++){var m=t.readI64().toString();n.stream_ids_behind.push(m)}}else t.skip(a);break;case 4:if(a===(e||(e=r("ThriftTypes"))).LIST){n.stream_ids_with_lost_amendments=[];for(var p=t.readListBegin(),_=0;_<p.size;_++){var f=t.readI64().toString();n.stream_ids_with_lost_amendments.push(f)}}else t.skip(a);break;case 5:if(a===(e||(e=r("ThriftTypes"))).LIST){n.stream_ids_with_wrong_status=[];for(var g=t.readListBegin(),h=0;h<g.size;h++){var y=t.readI64().toString();n.stream_ids_with_wrong_status.push(y)}}else t.skip(a);break;default:t.skip(a)}t.readFieldEnd()}return t.readStructEnd(),n.original_ping_timestamp_ms===void 0&&(n.original_ping_timestamp_ms="0"),n}function F(t){var n,a={};for(t.readStructBegin();;){var i=t.readFieldBegin(),l=i.ftype,s=i.fid;if(l===(e||(e=r("ThriftTypes"))).STOP)break;switch(s){case 1:if(l===(e||(e=r("ThriftTypes"))).I32)if(n==null)a.flow_status=o("RequestStreamCommonRequestStreamCommonTypes").FlowStatus.cast(t.readI32()),n="flow_status";else throw new Error("more than one field have been deserialized in union type: StreamResponseDelta; current field: flow_status, previous deserialized field: "+n);else t.skip(l);break;case 2:if(l===(e||(e=r("ThriftTypes"))).STRUCT)if(n==null)a.log=$(t),n="log";else throw new Error("more than one field have been deserialized in union type: StreamResponseDelta; current field: log, previous deserialized field: "+n);else t.skip(l);break;case 3:if(l===(e||(e=r("ThriftTypes"))).STRUCT)if(n==null)a.rewrite=T(t),n="rewrite";else throw new Error("more than one field have been deserialized in union type: StreamResponseDelta; current field: rewrite, previous deserialized field: "+n);else t.skip(l);break;case 4:if(l===(e||(e=r("ThriftTypes"))).STRUCT)if(n==null)a.data=x(t),n="data";else throw new Error("more than one field have been deserialized in union type: StreamResponseDelta; current field: data, previous deserialized field: "+n);else t.skip(l);break;case 5:if(l===(e||(e=r("ThriftTypes"))).STRUCT)if(n==null)a.termination=P(t),n="termination";else throw new Error("more than one field have been deserialized in union type: StreamResponseDelta; current field: termination, previous deserialized field: "+n);else t.skip(l);break;case 6:if(l===(e||(e=r("ThriftTypes"))).STRUCT)if(n==null)a.amend_ack=N(t),n="amend_ack";else throw new Error("more than one field have been deserialized in union type: StreamResponseDelta; current field: amend_ack, previous deserialized field: "+n);else t.skip(l);break;default:t.skip(l)}t.readFieldEnd()}return t.readStructEnd(),a}l.ResponseRewriteRequest$DefaultConstructor=s,l.ResponseRewriteConditionalPatchHeaders$DefaultConstructor=u,l.ResponseData$DefaultConstructor=c,l.LogMessage$DefaultConstructor=d,l.Termination$DefaultConstructor=m,l.AmendStreamAck$DefaultConstructor=p,l.StreamCheck$DefaultConstructor=_,l.Ping$DefaultConstructor=f,l.Pong$DefaultConstructor=g,l.StreamResponseDelta$DefaultConstructor=h,l.serializeResponseRewriteRequest=y,l.serializeResponseRewriteConditionalPatchHeaders=C,l.serializeResponseData=b,l.serializeLogMessage=v,l.serializeTermination=S,l.serializeAmendStreamAck=R,l.serializeStreamCheck=L,l.serializePing=E,l.serializePong=k,l.serializeStreamResponseDelta=I,l.deserializeResponseRewriteRequest=T,l.deserializeResponseRewriteConditionalPatchHeaders=D,l.deserializeResponseData=x,l.deserializeLogMessage=$,l.deserializeTermination=P,l.deserializeAmendStreamAck=N,l.deserializeStreamCheck=M,l.deserializePing=w,l.deserializePong=A,l.deserializeStreamResponseDelta=F}),98);
__d("RequestStreamSingleChannelSingleChannelRequestStreamTypes",["$InternalEnum"],(function(t,n,r,o,a,i){"use strict";var e=n("$InternalEnum")({Ignored:100,Success:200,Queued:250,UnknownStream:400,HandledUnknownResult:450,Failure:500}),l=n("$InternalEnum")({Request_headers:"request_headers",Request_body:"request_body",Amend:"amend",Ack:"ack",Response:"response",Ping:"ping",Pong:"pong"});a.exports={Ack:e,Payload$Types:l}}),null);
__d("RequestStreamSingleChannelSingleChannelRequestStreamSerializers",["RequestStreamCommonRequestStreamCommonSerializers","RequestStreamCommonRequestStreamCommonTypes","RequestStreamSingleChannelSingleChannelRequestStreamTypes","ThriftTypes","jsbi"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(){return{}}function u(){return{body:Uint8Array.of()}}function c(){return{amendment:Uint8Array.of()}}function d(){return{ack:o("RequestStreamSingleChannelSingleChannelRequestStreamTypes").Ack.cast(0)}}function m(){return{delta:[]}}function p(){return{}}function _(t,n){n.writeStructBegin("RequestStreamHeaders"),t.headers!=null&&(n.writeFieldBegin({fname:"headers",ftype:(e||(e=r("ThriftTypes"))).STRING,fid:1}),n.writeBinary(t.headers),n.writeFieldEnd()),t.instrumentation_data!=null&&(n.writeFieldBegin({fname:"instrumentation_data",ftype:(e||(e=r("ThriftTypes"))).STRING,fid:2}),n.writeBinary(t.instrumentation_data),n.writeFieldEnd()),n.writeFieldStop(),n.writeStructEnd()}function f(t,n){if(n.writeStructBegin("RequestStreamBody"),n.writeFieldBegin({fname:"body",ftype:(e||(e=r("ThriftTypes"))).STRING,fid:1}),t.body!=null)n.writeBinary(t.body);else{var o=Uint8Array.of();n.writeBinary(o)}n.writeFieldEnd(),n.writeFieldStop(),n.writeStructEnd()}function g(t,n){if(n.writeStructBegin("AmendStream"),t.amendment_id!=null&&(n.writeFieldBegin({fname:"amendment_id",ftype:(e||(e=r("ThriftTypes"))).I64,fid:1}),n.writeI64(r("jsbi").BigInt(t.amendment_id)),n.writeFieldEnd()),n.writeFieldBegin({fname:"amendment",ftype:(e||(e=r("ThriftTypes"))).STRING,fid:2}),t.amendment!=null)n.writeBinary(t.amendment);else{var o=Uint8Array.of();n.writeBinary(o)}n.writeFieldEnd(),t.is_query!=null&&(n.writeFieldBegin({fname:"is_query",ftype:(e||(e=r("ThriftTypes"))).BOOL,fid:3}),n.writeBool(t.is_query),n.writeFieldEnd()),t.instrumentation_data!=null&&(n.writeFieldBegin({fname:"instrumentation_data",ftype:(e||(e=r("ThriftTypes"))).STRING,fid:4}),n.writeBinary(t.instrumentation_data),n.writeFieldEnd()),n.writeFieldStop(),n.writeStructEnd()}function h(t,n){if(n.writeStructBegin("StreamResponseAck"),t.response_id!=null&&(n.writeFieldBegin({fname:"response_id",ftype:(e||(e=r("ThriftTypes"))).I64,fid:1}),n.writeI64(r("jsbi").BigInt(t.response_id)),n.writeFieldEnd()),n.writeFieldBegin({fname:"ack",ftype:(e||(e=r("ThriftTypes"))).I32,fid:2}),t.ack!=null){var a;n.writeI32((a=t.ack)!=null?a:0)}else{var i=o("RequestStreamSingleChannelSingleChannelRequestStreamTypes").Ack.cast(0);n.writeI32(i!=null?i:0)}n.writeFieldEnd(),t.query_result!=null&&(n.writeFieldBegin({fname:"query_result",ftype:(e||(e=r("ThriftTypes"))).STRING,fid:3}),n.writeBinary(t.query_result),n.writeFieldEnd()),n.writeFieldStop(),n.writeStructEnd()}function y(t,n){if(n.writeStructBegin("StreamResponse"),t.response_id!=null&&(n.writeFieldBegin({fname:"response_id",ftype:(e||(e=r("ThriftTypes"))).I64,fid:1}),n.writeI64(r("jsbi").BigInt(t.response_id)),n.writeFieldEnd()),n.writeFieldBegin({fname:"delta",ftype:(e||(e=r("ThriftTypes"))).LIST,fid:2}),t.delta!=null){n.writeListBegin({etype:(e||(e=r("ThriftTypes"))).STRUCT,size:t.delta.length});for(var a of t.delta)o("RequestStreamCommonRequestStreamCommonSerializers").serializeStreamResponseDelta(a,n);n.writeListEnd()}else{var i=[];n.writeListBegin({etype:(e||(e=r("ThriftTypes"))).STRUCT,size:i.length});for(var l of i)o("RequestStreamCommonRequestStreamCommonSerializers").serializeStreamResponseDelta(l,n);n.writeListEnd()}if(n.writeFieldEnd(),t.ack_level!=null){var s;n.writeFieldBegin({fname:"ack_level",ftype:(e||(e=r("ThriftTypes"))).I32,fid:3}),n.writeI32((s=t.ack_level)!=null?s:0),n.writeFieldEnd()}t.query_request!=null&&(n.writeFieldBegin({fname:"query_request",ftype:(e||(e=r("ThriftTypes"))).STRING,fid:4}),n.writeBinary(t.query_request),n.writeFieldEnd()),t.instrumentation_data!=null&&(n.writeFieldBegin({fname:"instrumentation_data",ftype:(e||(e=r("ThriftTypes"))).STRING,fid:5}),n.writeBinary(t.instrumentation_data),n.writeFieldEnd()),n.writeFieldStop(),n.writeStructEnd()}function C(t,n){if(n.writeStructBegin("Payload"),t.request_headers!=null){n.writeFieldBegin({fname:"request_headers",ftype:(e||(e=r("ThriftTypes"))).STRUCT,fid:1}),_(t.request_headers,n),n.writeFieldEnd(),n.writeFieldStop(),n.writeStructEnd();return}if(t.request_body!=null){n.writeFieldBegin({fname:"request_body",ftype:(e||(e=r("ThriftTypes"))).STRUCT,fid:2}),f(t.request_body,n),n.writeFieldEnd(),n.writeFieldStop(),n.writeStructEnd();return}if(t.amend!=null){n.writeFieldBegin({fname:"amend",ftype:(e||(e=r("ThriftTypes"))).STRUCT,fid:3}),g(t.amend,n),n.writeFieldEnd(),n.writeFieldStop(),n.writeStructEnd();return}if(t.ack!=null){n.writeFieldBegin({fname:"ack",ftype:(e||(e=r("ThriftTypes"))).STRUCT,fid:4}),h(t.ack,n),n.writeFieldEnd(),n.writeFieldStop(),n.writeStructEnd();return}if(t.response!=null){n.writeFieldBegin({fname:"response",ftype:(e||(e=r("ThriftTypes"))).STRUCT,fid:5}),y(t.response,n),n.writeFieldEnd(),n.writeFieldStop(),n.writeStructEnd();return}if(t.ping!=null){n.writeFieldBegin({fname:"ping",ftype:(e||(e=r("ThriftTypes"))).STRUCT,fid:6}),o("RequestStreamCommonRequestStreamCommonSerializers").serializePing(t.ping,n),n.writeFieldEnd(),n.writeFieldStop(),n.writeStructEnd();return}if(t.pong!=null){n.writeFieldBegin({fname:"pong",ftype:(e||(e=r("ThriftTypes"))).STRUCT,fid:7}),o("RequestStreamCommonRequestStreamCommonSerializers").serializePong(t.pong,n),n.writeFieldEnd(),n.writeFieldStop(),n.writeStructEnd();return}n.writeFieldStop(),n.writeStructEnd()}function b(t){var n={};for(t.readStructBegin();;){var o=t.readFieldBegin(),a=o.ftype,i=o.fid;if(a===(e||(e=r("ThriftTypes"))).STOP)break;switch(i){case 1:a===(e||(e=r("ThriftTypes"))).STRING?n.headers=t.readBinary():t.skip(a);break;case 2:a===(e||(e=r("ThriftTypes"))).STRING?n.instrumentation_data=t.readBinary():t.skip(a);break;default:t.skip(a)}t.readFieldEnd()}return t.readStructEnd(),n}function v(t){var n={};for(t.readStructBegin();;){var o=t.readFieldBegin(),a=o.ftype,i=o.fid;if(a===(e||(e=r("ThriftTypes"))).STOP)break;switch(i){case 1:a===(e||(e=r("ThriftTypes"))).STRING?n.body=t.readBinary():t.skip(a);break;default:t.skip(a)}t.readFieldEnd()}return t.readStructEnd(),n.body===void 0&&(n.body=Uint8Array.of()),n}function S(t){var n={};for(t.readStructBegin();;){var o=t.readFieldBegin(),a=o.ftype,i=o.fid;if(a===(e||(e=r("ThriftTypes"))).STOP)break;switch(i){case 1:a===(e||(e=r("ThriftTypes"))).I64?n.amendment_id=t.readI64().toString():t.skip(a);break;case 2:a===(e||(e=r("ThriftTypes"))).STRING?n.amendment=t.readBinary():t.skip(a);break;case 3:a===(e||(e=r("ThriftTypes"))).BOOL?n.is_query=t.readBool():t.skip(a);break;case 4:a===(e||(e=r("ThriftTypes"))).STRING?n.instrumentation_data=t.readBinary():t.skip(a);break;default:t.skip(a)}t.readFieldEnd()}return t.readStructEnd(),n.amendment===void 0&&(n.amendment=Uint8Array.of()),n}function R(t){var n={};for(t.readStructBegin();;){var a=t.readFieldBegin(),i=a.ftype,l=a.fid;if(i===(e||(e=r("ThriftTypes"))).STOP)break;switch(l){case 1:i===(e||(e=r("ThriftTypes"))).I64?n.response_id=t.readI64().toString():t.skip(i);break;case 2:i===(e||(e=r("ThriftTypes"))).I32?n.ack=o("RequestStreamSingleChannelSingleChannelRequestStreamTypes").Ack.cast(t.readI32()):t.skip(i);break;case 3:i===(e||(e=r("ThriftTypes"))).STRING?n.query_result=t.readBinary():t.skip(i);break;default:t.skip(i)}t.readFieldEnd()}return t.readStructEnd(),n.ack===void 0&&(n.ack=o("RequestStreamSingleChannelSingleChannelRequestStreamTypes").Ack.cast(0)),n}function L(t){var n={};for(t.readStructBegin();;){var a=t.readFieldBegin(),i=a.ftype,l=a.fid;if(i===(e||(e=r("ThriftTypes"))).STOP)break;switch(l){case 1:i===(e||(e=r("ThriftTypes"))).I64?n.response_id=t.readI64().toString():t.skip(i);break;case 2:if(i===(e||(e=r("ThriftTypes"))).LIST){n.delta=[];for(var s=t.readListBegin(),u=0;u<s.size;u++){var c=o("RequestStreamCommonRequestStreamCommonSerializers").deserializeStreamResponseDelta(t);n.delta.push(c)}}else t.skip(i);break;case 3:i===(e||(e=r("ThriftTypes"))).I32?n.ack_level=o("RequestStreamCommonRequestStreamCommonTypes").AckLevel.cast(t.readI32()):t.skip(i);break;case 4:i===(e||(e=r("ThriftTypes"))).STRING?n.query_request=t.readBinary():t.skip(i);break;case 5:i===(e||(e=r("ThriftTypes"))).STRING?n.instrumentation_data=t.readBinary():t.skip(i);break;default:t.skip(i)}t.readFieldEnd()}return t.readStructEnd(),n.delta===void 0&&(n.delta=[]),n}function E(t){var n,a={};for(t.readStructBegin();;){var i=t.readFieldBegin(),l=i.ftype,s=i.fid;if(l===(e||(e=r("ThriftTypes"))).STOP)break;switch(s){case 1:if(l===(e||(e=r("ThriftTypes"))).STRUCT)if(n==null)a.request_headers=b(t),n="request_headers";else throw new Error("more than one field have been deserialized in union type: Payload; current field: request_headers, previous deserialized field: "+n);else t.skip(l);break;case 2:if(l===(e||(e=r("ThriftTypes"))).STRUCT)if(n==null)a.request_body=v(t),n="request_body";else throw new Error("more than one field have been deserialized in union type: Payload; current field: request_body, previous deserialized field: "+n);else t.skip(l);break;case 3:if(l===(e||(e=r("ThriftTypes"))).STRUCT)if(n==null)a.amend=S(t),n="amend";else throw new Error("more than one field have been deserialized in union type: Payload; current field: amend, previous deserialized field: "+n);else t.skip(l);break;case 4:if(l===(e||(e=r("ThriftTypes"))).STRUCT)if(n==null)a.ack=R(t),n="ack";else throw new Error("more than one field have been deserialized in union type: Payload; current field: ack, previous deserialized field: "+n);else t.skip(l);break;case 5:if(l===(e||(e=r("ThriftTypes"))).STRUCT)if(n==null)a.response=L(t),n="response";else throw new Error("more than one field have been deserialized in union type: Payload; current field: response, previous deserialized field: "+n);else t.skip(l);break;case 6:if(l===(e||(e=r("ThriftTypes"))).STRUCT)if(n==null)a.ping=o("RequestStreamCommonRequestStreamCommonSerializers").deserializePing(t),n="ping";else throw new Error("more than one field have been deserialized in union type: Payload; current field: ping, previous deserialized field: "+n);else t.skip(l);break;case 7:if(l===(e||(e=r("ThriftTypes"))).STRUCT)if(n==null)a.pong=o("RequestStreamCommonRequestStreamCommonSerializers").deserializePong(t),n="pong";else throw new Error("more than one field have been deserialized in union type: Payload; current field: pong, previous deserialized field: "+n);else t.skip(l);break;default:t.skip(l)}t.readFieldEnd()}return t.readStructEnd(),a}l.RequestStreamHeaders$DefaultConstructor=s,l.RequestStreamBody$DefaultConstructor=u,l.AmendStream$DefaultConstructor=c,l.StreamResponseAck$DefaultConstructor=d,l.StreamResponse$DefaultConstructor=m,l.Payload$DefaultConstructor=p,l.serializeRequestStreamHeaders=_,l.serializeRequestStreamBody=f,l.serializeAmendStream=g,l.serializeStreamResponseAck=h,l.serializeStreamResponse=y,l.serializePayload=C,l.deserializeRequestStreamHeaders=b,l.deserializeRequestStreamBody=v,l.deserializeAmendStream=S,l.deserializeStreamResponseAck=R,l.deserializeStreamResponse=L,l.deserializePayload=E}),98);
__d("RequestStreamState",["RequestStreamCommonRequestStreamCommonTypes"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t){switch(t){case o("RequestStreamCommonRequestStreamCommonTypes").FlowStatus.Accepted:return e.seenAccepted||e.flowStatus===o("RequestStreamCommonRequestStreamCommonTypes").FlowStatus.Started?e:{flowStatus:o("RequestStreamCommonRequestStreamCommonTypes").FlowStatus.Accepted,seenAccepted:!0};default:return!e.seenAccepted||e.flowStatus===t?e:{flowStatus:t,seenAccepted:!0}}}l.getNextState=e}),98);
__d("StreamRetryState",[],(function(t,n,r,o,a,i){"use strict";var e=1e3,l=120*1e3,s=(function(){function t(){this.$1=0}var n=t.prototype;return n.resetErrorAndRetryCount=function(){this.$1=0},n.onRetry=function(){this.$1+=1},n.getRetryCount=function(){return this.$1},n.getBackoffDelayMs=function(){if(this.$1<=1)return 0;if(this.$1===2)return e*Math.random();var t=e*Math.pow(2,this.$1-3),n=t*Math.random(),r=t+n;return Math.min(r,l)},t})();i.default=s}),66);
__d("DGWRequestStreamRef",["CompactSerializerPolyfill","DGWRequestStreamUtils","DGWStream","DGWStreamHandler","InflightAmends","ODS","Promise","RequestStreamCloseReason","RequestStreamCommonRequestStreamCommonTypes","RequestStreamE2EClientLoggerEvent","RequestStreamE2EClientLoggerMessageType","RequestStreamE2ELogger","RequestStreamE2ESampling","RequestStreamSingleChannelSingleChannelRequestStreamSerializers","RequestStreamSingleChannelSingleChannelRequestStreamTypes","RequestStreamState","RequestStreamTransport","RtiWebRequestStreamClient","StreamRetryState","asyncToGeneratorRuntime","err","gkx","justknobx","qex"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c,d=4,m=0,p=1e3,_=2,f=r("gkx")("20915")?3e4:5e3,g="dgw_stream_send_ack_failure",h=(e=r("qex")._("2097"))!=null?e:!1,y=(s=r("qex")._("2100"))!=null?s:!1;function C(e){if(!e){var t=r("err")(g);throw t.stack,t}}function b(e,t){if(e==null||e.length===0)return null;var n=JSON.parse(e);return n.auxId=t,new TextEncoder().encode(JSON.stringify(n))}function v(e){var t={},n=e.delta;return n.forEach(function(e){if(e.flow_status)switch(t.type=o("RequestStreamCommonRequestStreamCommonTypes").StreamResponseDelta$Types.Flow_status,e.flow_status){case o("RequestStreamCommonRequestStreamCommonTypes").FlowStatus.Accepted:t.flow_status="Accepted";break;case o("RequestStreamCommonRequestStreamCommonTypes").FlowStatus.Started:t.flow_status="Started";break;case o("RequestStreamCommonRequestStreamCommonTypes").FlowStatus.Stopped:t.flow_status="Stopped";break}else e.log?t.type=o("RequestStreamCommonRequestStreamCommonTypes").StreamResponseDelta$Types.Log:e.rewrite?t.type=o("RequestStreamCommonRequestStreamCommonTypes").StreamResponseDelta$Types.Rewrite:e.data?t.type=o("RequestStreamCommonRequestStreamCommonTypes").StreamResponseDelta$Types.Data:e.termination?t.type=o("RequestStreamCommonRequestStreamCommonTypes").StreamResponseDelta$Types.Termination:e.amend_ack&&(t.type=o("RequestStreamCommonRequestStreamCommonTypes").StreamResponseDelta$Types.Amend_ack)}),t}var S=(function(){function e(e,t,n,a,i,l){var s=this,u,c,m;this.$6=null,this.$7={},this.$10=!1,this.$15=new(r("StreamRetryState")),this.$16=0,this.$17=0,this.$18=0,this.$21=0;var p=null;typeof t=="string"?p=new TextEncoder().encode(t):typeof t=="object"&&(p=t),this.$1={headers:e,body:p},this.$3=n,this.$4=a,this.$12=d,this.$9=!1,this.$14=!1,this.$20=l;var _=a==null?void 0:a.serviceId;i!=null&&(this.$22()||(i.dgwStreamGroupLoggingId=this.$20.getStreamGroupLoggingId(_)),i.dgwCountPriorStreamsInGroup=this.$20.guessStreamGroupPriorStreamCount(_),i.transport="WEB_RS_STARGATE"),this.$5=o("RequestStreamE2ESampling").validateInstrumentationData(e,i,a==null?void 0:a.requestLogContext,a==null?void 0:a.upsampleMultiplier),this.$22()?this.$7.disableFalcoLogging=!0:this.$6=o("RequestStreamE2ELogger").createStreamLogger(e,this.$5,o("RequestStreamTransport").RequestStreamTransport.WEB_RS_STARGATE),(a==null?void 0:a.deviceId)!=null&&(this.$7.deviceId=a.deviceId),this.$6&&(this.$7.loggingId=this.$6.getRequestId()),a&&a.overrideUrl!=null&&(this.$7.overrideUrl=a.overrideUrl),_!=null&&(this.$7.serviceId=_),this.$8={flowStatus:o("RequestStreamCommonRequestStreamCommonTypes").FlowStatus.Stopped,seenAccepted:!1},this.$19=new(r("InflightAmends"))(f,function(e,t){var n;(n=s.$6)==null||n.logE2EEvent(r("RequestStreamE2EClientLoggerMessageType").AMENDMENT_ACK,r("RequestStreamE2EClientLoggerEvent").RECEIVED,babelHelpers.extends({},s.$23(),{latency:t.toString()}),e)},function(e,t){if(t.message!==g){var n;(n=s.$6)==null||n.logE2EEvent(r("RequestStreamE2EClientLoggerMessageType").AMENDMENT_ACK,r("RequestStreamE2EClientLoggerEvent").FAILURE,babelHelpers.extends({},s.$23(),{reason:t.message}),e)}}),(u=this.$6)==null||u.logE2EEvent(r("RequestStreamE2EClientLoggerMessageType").REQUEST_STREAM,r("RequestStreamE2EClientLoggerEvent").RECEIVED,{data_size:(c=t==null||(m=t.length)==null?void 0:m.toString())!=null?c:"0"},"0","0")}var t=e.prototype;return t.getInstrumentationData=function(){return this.$5},t.getE2EClientLogger=function(){return this.$6},t.amendWithAck=function(t){var e=this.$24(t,!0);return e==null?(c||(c=n("Promise"))).resolve(!1):this.$19.getPromise(e)||(c||(c=n("Promise"))).resolve(!1)},t.amendWithoutAck=function(t){this.$24(t,!1)},t.cancel=function(){var e;(e=this.$6)==null||e.logE2EEvent(r("RequestStreamE2EClientLoggerMessageType").CANCEL,r("RequestStreamE2EClientLoggerEvent").RECEIVED),this.$9=!0,this.$25(o("RequestStreamCloseReason").RequestStreamCloseReason.UserIntention,"user cancel the stream",!0)},t.start=function(t){var e=this;t===void 0&&(t=!1);var a=String(this.$16++),i=Date.now();return this.$26(a).then(function(){var t;e.$14=!1,e.$21=0;var n=(Date.now()-i).toString();(t=e.$6)==null||t.logE2EEvent(r("RequestStreamE2EClientLoggerMessageType").REQUEST_STREAM,r("RequestStreamE2EClientLoggerEvent").PUBACK,{latency:n},a,String(e.$18))}).catch(function(i){if(i.stack,!(i.message===g&&e.$10))if(e.$14=!1,i!==o("DGWStream").StreamError.ESTABLISHMENT_ERROR){var l,s=i.message;if(i===o("DGWStream").StreamError.UNAUTHENTICATED?s="UNAUTHENTICATED":i===o("DGWStream").StreamError.UNAUTHORIZED&&(s="UNAUTHORIZED"),(l=e.$6)==null||l.logE2EEvent(r("RequestStreamE2EClientLoggerMessageType").REQUEST_STREAM,r("RequestStreamE2EClientLoggerEvent").FAILURE,{reason:s},a,String(e.$18)),e.$25(t?o("RequestStreamCloseReason").RequestStreamCloseReason.ReestablishError:o("RequestStreamCloseReason").RequestStreamCloseReason.StartStreamFailure,s,!0),i===o("DGWStream").StreamError.UNAUTHENTICATED||i===o("DGWStream").StreamError.UNAUTHORIZED)return;throw i}else{var u,d;(u=e.$6)==null||u.logE2EEvent(r("RequestStreamE2EClientLoggerMessageType").REQUEST_STREAM,r("RequestStreamE2EClientLoggerEvent").FAILURE,{reason:(d=i.message)!=null?d:i},a,String(e.$18)),e.$15.onRetry();var m=r("gkx")("20916")?e.$15.getBackoffDelayMs():p*Math.pow(_,e.$21);return new(c||(c=n("Promise")))(function(e){return window.setTimeout(e,m)}).then(function(){return e.$21++,e.$18++,e.start()})}})},t.getFlowStatus=function(){return this.$8.flowStatus},t.shouldTerminateOrRetry=function(t,a,i,l){var e=this;if(!this.$14){var s=a;if(this.$12||(s="cannot retry for error: "+a+" because of hit max retry limitation"),t!==o("RequestStreamCloseReason").RequestStreamCloseReason.ClientError){var u;(u=this.$6)==null||u.logE2EEvent(r("RequestStreamE2EClientLoggerMessageType").REQUEST_STREAM,r("RequestStreamE2EClientLoggerEvent").FAILURE,{reason:s},null,String(this.$18))}var d=i&&(r("gkx")("20916")||this.$12);if(this.$25(t,s,!d),d){var p=r("gkx")("20916")?Math.max(l!=null?l:0,this.$15.getBackoffDelayMs()):l!=null?l:m;return this.$14=!0,new(c||(c=n("Promise")))(function(e){return window.setTimeout(e,p)}).then(function(){return e.$27()}).catch(function(e){})}}},t.$28=function(){return this.$11!=null},t.$24=function(t,n){var e,a=this,i=typeof t=="string"?new TextEncoder().encode(t):t,l=String(this.$17++);(e=this.$6)==null||e.logE2EEvent(r("RequestStreamE2EClientLoggerMessageType").AMENDMENT,r("RequestStreamE2EClientLoggerEvent").RECEIVED,{},l);var s=b(this.$5,l),u={amend:{amendment:i,instrumentation_data:s}};n&&u.amend&&(u.amend.amendment_id=l);var c=o("CompactSerializerPolyfill").serialize(u,o("RequestStreamSingleChannelSingleChannelRequestStreamSerializers").serializePayload),d=Date.now();if(this.$29()&&this.$11!=null){var m,p,_;return n&&this.$19.add(l),this.$11.send(c).then(function(e){var t;C(e);var n=(Date.now()-d).toString();(t=a.$6)==null||t.logE2EEvent(r("RequestStreamE2EClientLoggerMessageType").AMENDMENT,r("RequestStreamE2EClientLoggerEvent").PUBACK,{latency:n},l)}).catch(function(e){var t;(t=a.$6)==null||t.logE2EEvent(r("RequestStreamE2EClientLoggerMessageType").AMENDMENT,r("RequestStreamE2EClientLoggerEvent").FAILURE,{reason:e.message},l),a.$19.reject(l,e)}),(m=this.$6)==null||m.logE2EEvent(r("RequestStreamE2EClientLoggerMessageType").AMENDMENT,r("RequestStreamE2EClientLoggerEvent").SENT,{data_size:(p=t==null||(_=t.length)==null?void 0:_.toString())!=null?p:"0"},l),l}else{var f;(f=this.$6)==null||f.logE2EEvent(r("RequestStreamE2EClientLoggerMessageType").AMENDMENT,r("RequestStreamE2EClientLoggerEvent").FAILURE,{reason:"not_started"},l)}},t.$26=(function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){var t=this;if(this.$9)throw new Error("stream_already_canceled");var n,a=this.$2||this.$1;try{var i=this.$30();this.$13=i;var l=a.headers.graphiql_sandbox,s=babelHelpers.extends({},a.headers,this.$31());l!=null&&(s=babelHelpers.extends({},s,{www_sandbox:l,distillery_sandbox:l+":8086"}));var u=o("DGWRequestStreamUtils").convertHeaders(s,a.body!=null,this.$5);this.$11=yield this.$20.establishStream(u,i,this.$7)}catch(e){if(e===o("DGWStream").StreamError.ESTABLISHMENT_ERROR||o("DGWStream").StreamError.isValid(e)&&!o("DGWStream").isRetryableError(e))throw e;if(o("DGWStream").StreamError.isValid(e)&&o("DGWStream").isRetryableError(e)){this.$32(e);return}throw e}if(this.$9){this.$25(o("RequestStreamCloseReason").RequestStreamCloseReason.UserIntention,"user cancel the stream",!0);return}var c=new Uint8Array([]);if(a.body!=null){var m={request_body:{body:a.body}};c=o("CompactSerializerPolyfill").serialize(m,o("RequestStreamSingleChannelSingleChannelRequestStreamSerializers").serializePayload)}if(!this.$11)throw new Error("dgwstream_is_null");var p=this.$11.send(c).then(function(e){C(e),t.$9&&t.$25(o("RequestStreamCloseReason").RequestStreamCloseReason.UserIntention,"user cancel the stream",!0)});return(n=this.$6)==null||n.logE2EEvent(r("RequestStreamE2EClientLoggerMessageType").REQUEST_STREAM,r("RequestStreamE2EClientLoggerEvent").SENT,{},e,String(this.$18)),this.$12=d,p});function t(t){return e.apply(this,arguments)}return t})(),t.$29=function(){return this.$8.flowStatus===o("RequestStreamCommonRequestStreamCommonTypes").FlowStatus.Started||this.$8.flowStatus===o("RequestStreamCommonRequestStreamCommonTypes").FlowStatus.Accepted},t.$25=function(t,n,r){var e;this.$11&&t!==o("RequestStreamCloseReason").RequestStreamCloseReason.StreamError&&t!==o("RequestStreamCloseReason").RequestStreamCloseReason.RemoteTermination&&this.$11.close(),(e=this.$13)==null||e.stop(),this.$11=null,this.$10=!0,this.$33(o("RequestStreamCommonRequestStreamCommonTypes").FlowStatus.Stopped)&&this.$3.onFlowStatus(o("RequestStreamCommonRequestStreamCommonTypes").FlowStatus.Stopped),r&&!this.$9&&this.$3.onTermination("terminate stream because "+t+" with msg : "+n)},t.$33=function(t){var e=this.$8;return this.$8=o("RequestStreamState").getNextState(e,t),e!==this.$8},t.$27=function(){return this.$12--,this.$18++,this.$15.onRetry(),this.start(!0)},t.$34=function(t){var e=this,n=o("CompactSerializerPolyfill").deserialize(t,o("RequestStreamSingleChannelSingleChannelRequestStreamSerializers").deserializePayload);if(n.response){var a,i,l=o("DGWRequestStreamUtils").getInstrumentationDataFieldsFromPayload(n),s=l==null?void 0:l.auxId,c=l==null?void 0:l.dfTraceId;if(!this.$28()){var d;(d=this.$6)==null||d.logE2EEvent(r("RequestStreamE2EClientLoggerMessageType").RESPONSE,r("RequestStreamE2EClientLoggerEvent").FAILURE,{reason:"response_received_after_close"},s,String(this.$18),c);return}var m;(a=this.$6)==null||a.logE2EEvent(r("RequestStreamE2EClientLoggerMessageType").RESPONSE,r("RequestStreamE2EClientLoggerEvent").RECEIVED,v(n.response),s,String(this.$18),c,m);var p=n.response.delta;p.forEach(function(t){if(t.data)e.$15.resetErrorAndRetryCount(),r("justknobx")._("4109")?e.$3.onData(new TextDecoder("utf-8").decode(t.data.bytes)):e.$8.flowStatus===o("RequestStreamCommonRequestStreamCommonTypes").FlowStatus.Started?e.$3.onData(new TextDecoder("utf-8").decode(t.data.bytes)):(u||(u=o("ODS"))).bumpEntityKey(110,"RequestStream","data_before_started_"+(e.$22()?"falco":"graphql"));else if(t.flow_status){var n=t.flow_status;n===o("RequestStreamCommonRequestStreamCommonTypes").FlowStatus.Started&&e.$15.resetErrorAndRetryCount(),e.$33(n)&&e.$3.onFlowStatus(n)}else if(t.termination){var a,i=(a=t.termination.message)!=null?a:"unknown termination msg";e.$2=null,e.shouldTerminateOrRetry(o("RequestStreamCloseReason").RequestStreamCloseReason.RemoteTermination,i,t.termination.reason===o("RequestStreamCommonRequestStreamCommonTypes").TerminationReason.TryAgain,t.termination.retry_delay_ms!=null?parseInt(t.termination.retry_delay_ms,10):null)}else if(t.log)e.$3.onLog(t.log.message);else if(t.amend_ack){var l=t.amend_ack.amendment_id;if(l!=null){var s=t.amend_ack.accepted||!1;e.$19.resolve(l,s)}}else if(t.rewrite){var c=o("DGWRequestStreamUtils").transformContextWithRewriteDelta(e.$1,t.rewrite);t.rewrite.temporary===!0?e.$2=c:e.$1=c}}),(i=this.$6)==null||i.logE2EEvent(r("RequestStreamE2EClientLoggerMessageType").RESPONSE,r("RequestStreamE2EClientLoggerEvent").SENT,v(n.response),s,String(this.$18),c),n.response.ack_level===o("RequestStreamCommonRequestStreamCommonTypes").AckLevel.Device&&n.response.response_id!=null&&this.$35(n.response.response_id,s)}else{var _;(_=this.$6)==null||_.logE2EEvent(r("RequestStreamE2EClientLoggerMessageType").RESPONSE,r("RequestStreamE2EClientLoggerEvent").FAILURE,{reason:"unexpected_payload_type"},null,String(this.$18))}},t.$35=function(t,n){var e={ack:{response_id:t,ack:o("RequestStreamSingleChannelSingleChannelRequestStreamTypes").Ack.Success}},a=o("CompactSerializerPolyfill").serialize(e,o("RequestStreamSingleChannelSingleChannelRequestStreamSerializers").serializePayload);if(this.$11!=null){var i;this.$11.send(a),(i=this.$6)==null||i.logE2EEvent(r("RequestStreamE2EClientLoggerMessageType").RESPONSE_ACK,r("RequestStreamE2EClientLoggerEvent").SENT,{},n,String(this.$18))}else{var l;(l=this.$6)==null||l.logE2EEvent(r("RequestStreamE2EClientLoggerMessageType").RESPONSE_ACK,r("RequestStreamE2EClientLoggerEvent").FAILURE,{reason:"not_started"},n,String(this.$18))}},t.$22=function(){return this.$1.headers.method==="Falco"},t.$30=function(){var e=this;return new(r("DGWStreamHandler"))(function(t){return e.$36(t)},function(t){return e.$37(t)},function(t){return e.$32(t)},function(t,n){return e.$38(t,n)},function(t){return e.$39(t)})},t.$39=function(t){var e;(e=this.$6)==null||e.logE2EEvent(r("RequestStreamE2EClientLoggerMessageType").REQUEST_STREAM,r("RequestStreamE2EClientLoggerEvent").FAILURE,{reason:"OnClose: Server Has FinishedSendingData"},null,String(this.$18)),this.$25(o("RequestStreamCloseReason").RequestStreamCloseReason.ServerDataEnd,"Client receive OnServerHasFinishedSendingData and Server will not send more data",!0)},t.$36=function(t){var e;(e=this.$6)==null||e.logE2EEvent(r("RequestStreamE2EClientLoggerMessageType").REQUEST_STREAM,r("RequestStreamE2EClientLoggerEvent").FAILURE,{reason:"OnClose: Server Close Connection"},null,String(this.$18)),this.$25(o("RequestStreamCloseReason").RequestStreamCloseReason.RemoteTermination,"Client receive OnClose and Server will not send more data",!0)},t.$37=function(t){try{this.$34(t)}catch(t){var e;(e=this.$6)==null||e.logE2EEvent(r("RequestStreamE2EClientLoggerMessageType").RESPONSE,r("RequestStreamE2EClientLoggerEvent").FAILURE,{reason:t.message},null,String(this.$18)),this.shouldTerminateOrRetry(o("RequestStreamCloseReason").RequestStreamCloseReason.ClientError,t.message,!1)}},t.$32=function(t){var e="",n=o("DGWStream").isRetryableError(t);e="StreamError: Received "+t;var r=h?this.$12>0:n,a=y?p*_:void 0;this.shouldTerminateOrRetry(o("RequestStreamCloseReason").RequestStreamCloseReason.StreamError,e,r,a)},t.$38=function(t,n){this.shouldTerminateOrRetry(o("RequestStreamCloseReason").RequestStreamCloseReason.ServerDrain,n,!0)},t.$31=function(){return r("RtiWebRequestStreamClient").overrideHeaders},t.$23=function(){var e={};return r("gkx")("20918")&&(e.pending_amendments_size=this.$19.getSize().toString()),e},e})();l.default=S}),98);
__d("DGWStreamGroupHandler",[],(function(t,n,r,o,a,i){"use strict";var e=(function(){function e(e,t,n){this.$1=e,this.$2=t,this.$3=n}var t=e.prototype;return t.onStreamGroupError=function(t){this.$1(t)},t.onStreamGroupMustDrain=function(t){this.$2(t)},t.onStreamGroupTransportClose=function(){this.$3()},e})();i.default=e}),66);
__d("DGWStreamFactory",["DGWClient","DGWStreamGroupHandler","Promise","gkx","uuidv4"],(function(t,n,r,o,a,i,l){"use strict";var e,s="realtime",u=1e4,c=null,d=(function(){function t(){this.$1={}}t.get=function(){return c==null&&(c=new t),c};var o=t.prototype;return o.$2=function(t){var e;this.$1=(e={},e[t]={dgwStreamGroup:null,multiStreamGroupLoggingId:null,multiStreamGroupPriorStreamCountGuess:0},e)},o.getStreamGroupLoggingId=function(t){var e;return t===void 0&&(t=null),(e=this.$1[t!=null?t:s])==null?void 0:e.multiStreamGroupLoggingId},o.guessStreamGroupPriorStreamCount=function(t){var e;return t===void 0&&(t=null),((e=this.$1[t!=null?t:s])==null?void 0:e.multiStreamGroupPriorStreamCountGuess)||0},o.establishStream=function(o,a,i){var t,l=this,c=i.serviceId==null?s:i.serviceId,d=(t=this.$1[c])==null?void 0:t.dgwStreamGroup;if(d==null||!d.canCreateGroupedStream()){var m={deviceId:i.deviceId,serviceId:c,disableFalcoLogging:i.disableFalcoLogging,streamGroupAppHeaders:{"stream-group":"group1"},authToken:i.authToken,authType:i.authType};i.overrideUrl!=null&&(m.overrideUrl=i.overrideUrl),m.keepAliveMs=u,r("gkx")("20920")&&(m.loggingId=r("uuidv4")());try{d=r("DGWClient")().createStreamGroup(new(r("DGWStreamGroupHandler"))(function(){l.$2(c)},function(){l.$2(c)},function(){l.$2(c)}),m),this.$1[c]={dgwStreamGroup:d,multiStreamGroupLoggingId:m.loggingId,multiStreamGroupPriorStreamCountGuess:0}}catch(t){return(e||(e=n("Promise"))).reject(t)}}return this.$1[c].multiStreamGroupPriorStreamCountGuess++,d.establishStream({loggingId:i.loggingId,disableFalcoLogging:i.disableFalcoLogging,groupedStreamHeaders:o},a)},t})();l.default=d}),98);
__d("DGWRequestStreamClient",["DGWRequestStreamRef","DGWStreamFactory","Promise","cr:2046346","uuidv4"],(function(t,n,r,o,a,i,l){"use strict";var e,s=(function(){function t(e){this.$1=e!=null?e:r("DGWStreamFactory").get()}var o=t.prototype;return o.createStream=function(o,a,i,l,s){n("cr:2046346")!=null&&n("cr:2046346").startPulsarTest();var t=i;return(e||(e=n("Promise"))).resolve(new(r("DGWRequestStreamRef"))(o,a,l,s,t,this.$1))},t})();l.default=s}),98);
__d("DOMControl",["$","DataStore"],(function(t,n,r,o,a,i){var e=(function(){"use strict";function e(e){this.root=n("$").fromIDOrElement(e),this.updating=!1,n("DataStore").set(e,"DOMControl",this)}var t=e.prototype;return t.getRoot=function(){return this.root},t.beginUpdate=function(){return this.updating?!1:(this.updating=!0,!0)},t.endUpdate=function(){this.updating=!1},t.update=function(t){if(!this.beginUpdate())return this;this.onupdate(t),this.endUpdate()},t.onupdate=function(t){},e.getInstance=function(t){return n("DataStore").get(t,"DOMControl")},e})();a.exports=e}),null);
__d("isAsyncScrollQuery",["UserAgent"],(function(t,n,r,o,a,i,l){var e=null;function s(){return e===null&&(e=r("UserAgent").isPlatform("Mac OS X >= 10.8")&&r("UserAgent").isBrowser("Safari >= 6.0")),e}l.default=s}),98);
__d("DOMScroll",["Arbiter","DOM","DOMQuery","Vector","ViewportBounds","emptyFunction","ge","isAsyncScrollQuery","nullthrows","requireDeferred"],(function(t,n,r,o,a,i){var e=n("requireDeferred")("Animation").__setRef("DOMScroll"),l={SCROLL:"dom-scroll",_scrolling:!1,_scrollingFinishedTimeout:null,getScrollState:function(){var e=n("Vector").getViewportDimensions(),t=n("Vector").getDocumentDimensions(),r=t.x>e.x,o=t.y>e.y;return r+=0,o+=0,new(n("Vector"))(r,o)},_scrollbarSize:null,_initScrollbarSize:function(){var e=n("DOM").create("p");e.style.width="100%",e.style.height="200px";var t=n("DOM").create("div");t.style.position="absolute",t.style.top="0px",t.style.left="0px",t.style.visibility="hidden",t.style.width="200px",t.style.height="150px",t.style.overflow="hidden",t.appendChild(e),n("nullthrows")(document.body).appendChild(t);var r=e.offsetWidth;t.style.overflow="scroll";var o=e.offsetWidth;r==o&&(o=t.clientWidth),n("nullthrows")(document.body).removeChild(t),l._scrollbarSize=r-o},getScrollbarSize:function(){return l._scrollbarSize===null&&l._initScrollbarSize(),n("nullthrows")(l._scrollbarSize)},scrollTo:function(r,o,a,i,s,u){var t,c=0;o==null||o===!0?c=750:typeof o=="number"?c=o:parseInt(o,10)&&(c=parseInt(o,10)),n("isAsyncScrollQuery")()&&(c=0);var d;if(r instanceof n("Vector"))d=r;else{var m=n("Vector").getScrollPosition().x,p=n("Vector").getElementPosition(n("ge")(r)).y;d=new(n("Vector"))(m,p,"document"),i||(d.y-=n("ViewportBounds").getTop()/(a?2:1))}if(a?d.y-=n("Vector").getViewportDimensions().y/2:i&&(d.y-=n("Vector").getViewportDimensions().y,d.y+=i),s&&(d.y-=s),d=d.convertTo("document"),c)if("scrollBehavior"in n("nullthrows")(document.documentElement).style&&c===750&&!u)try{window.scrollTo({left:d.x,top:d.y,behavior:"smooth"})}catch(e){window.scrollTo(d.x,d.y)}else{var _=e.getModuleIfRequired();if(_!=null){l._setScrollingForDuration(c);var f=new _(n("nullthrows")(document.body)).to("scrollTop",d.y).to("scrollLeft",d.x).ease(_.ease.end).duration(c).ondone(u).go();t=function(){f.stop()}}else window.scrollTo(d.x,d.y),u&&u()}else window.scrollTo(d.x,d.y),u&&u();return n("Arbiter").inform(l.SCROLL),t||n("emptyFunction")},scrollToID:function(t){l.scrollTo(t)},ensureVisible:function(t,r,o,a,i){var e=n("Vector").getScrollPosition().x,s=l._getBounds(t,r,o),u=s[0],c=s[1],d=s[2],m=s[3];d<u?l.scrollTo(new(n("Vector"))(e,d,"document"),a,!1,0,0,i):m>c?d-(m-c)<u?l.scrollTo(new(n("Vector"))(e,d,"document"),a,!1,0,0,i):l.scrollTo(new(n("Vector"))(e,m,"document"),a,!1,1,0,i):i&&i()},isCurrentlyVisible:function(t,n,r){var e=l._getBounds(t,n,r),o=e[0],a=e[1],i=e[2],s=e[3];return i>=o&&s<=a},_getBounds:function(t,r,o){o==null&&(o=10),t=n("ge")(t),r&&(t=n("DOMQuery").find(t,r));var e=n("Vector").getScrollPosition().y,a=e+n("Vector").getViewportDimensions().y,i=n("Vector").getElementPosition(t).y,l=i+n("Vector").getElementDimensions(t).y;return i-=n("ViewportBounds").getTop(),i-=o,l+=o,[e,a,i,l]},scrollToTop:function(t){var e=n("Vector").getScrollPosition();l.scrollTo(new(n("Vector"))(e.x,0,"document"),t!==!1)},currentlyScrolling:function(){return l._scrolling},_setScrollingForDuration:function(t){l._scrolling=!0,l._scrollingFinishedTimeout&&(clearTimeout(l._scrollingFinishedTimeout),l._scrollingFinishedTimeout=null),l._scrollingFinishedTimeout=setTimeout(function(){l._scrolling=!1,l._scrollingFinishedTimeout=null},t)}};a.exports=l}),null);
__d("DesktopHscrollUnitEventConstants",[],(function(t,n,r,o,a,i){var e="DesktopHScrollUnit/itemInserted",l="DesktopHScrollUnit/itemShown",s="DesktopHScrollUnit/HideIndividualItem",u="DesktopHScrollUnit/scrollItemBeforeXout",c="DesktopHScrollUnit/unhideIndividualItem",d="logLastAdXout",m="onXoutIndividualItem";i.HSCROLL_ITEM_INSERTED_EVENT=e,i.HSCROLL_ITEM_SHOWN_EVENT=l,i.HSCROLL_ITEM_HIDE_EVENT=s,i.HSCROLL_ITEM_SCROLL_BEFORE_XOUT_EVENT=u,i.HSCROLL_ITEM_UNHIDE_EVENT=c,i.HSCROLL_LAST_ITEM_NFX_ACTION_TAKEN=d,i.HSCROLL_PAGER_ITEM_HIDE_EVENT=m}),66);
__d("Dispatcher_DEPRECATED",["invariant","FBLogger","monitorCodeUse"],(function(t,n,r,o,a,i,l,s){"use strict";var e="ID_",u=(function(){function t(){this.$1=new Map,this.$2=!1,this.$3=new Map,this.$4=new Map,this.$5=1}var n=t.prototype;return n.register=function(t,n){return n=this.__genID(n),this.$1.set(n,t),n},n.unregister=function(t){this.$1.get(t)||s(0,1331,t),this.$1.delete(t)},n.waitFor=function(t){this.$2||s(0,1332);for(var e=0;e<t.length;e++){var n=t[e];if(this.$4.get(n)){this.$3.get(n)||s(0,2380,n);continue}this.$1.get(n)||s(0,2381,n),this.$7(n)}},n.dispatch=function(t){var e=this;d(this.$2,this.$6,t),this.$8(t);try{this.$1.forEach(function(t,n){e.$4.get(n)||e.$7(n)})}finally{this.$9()}},n.isDispatching=function(){return this.$2},n.$7=function(t){this.$4.set(t,!0);var e=this.$1.get(t);e&&this.__invokeCallback(t,e,this.$6),this.$3.set(t,!0)},n.__invokeCallback=function(t,n,r){n(r)},n.$8=function(t){for(var e of this.$1.keys())this.$4.set(e,!1),this.$3.set(e,!1);this.$6=t,this.$2=!0},n.$9=function(){delete this.$6,this.$2=!1},n.__genID=function(n){var t=n?n+"_":e;for(n=n||t+this.$5++;this.$1.get(n);)n=t+this.$5++;return n},t})();function c(e){var t="<unknown>";return e?typeof e.type=="string"?e.type:typeof e.actionType=="string"?e.actionType:e.action?typeof e.action.type=="string"?e.action.type:typeof e.action.actionType=="string"?e.action.actionType:t:t:t}function d(e,t,n){if(e){var o=new Error("Cannot dispatch in the middle of a dispatch");throw r("FBLogger")("flux_dispatcher").catching(o).mustfix("Tried to dispatch action %s while already dispatching %s",c(n),c(t)),o}}l.default=u}),98);
__d("VideoAutoplayRule",[],(function(t,n,r,o,a,i){"use strict";var e=(function(){function e(e){this.$1=!0,this.videoUnit=e}var t=e.prototype;return t.calculateAutoplayScore=function(){throw new Error("Should be overridden")},t.enableRule=function(){this.$1=!0},t.disableRule=function(){this.$1=!1},t.isEnabled=function(){return this.$1},e})();i.default=e}),66);
__d("DocumentFocusForMutedVideoAutoplayRule",["VideoAutoplayRule"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(e){function t(t){return e.call(this,t)||this}babelHelpers.inheritsLoose(t,e);var n=t.prototype;return n.calculateAutoplayScore=function(){return this.isEnabled()?this.$DocumentFocusForMutedVideoAutoplayRule$p_1():1},n.$DocumentFocusForMutedVideoAutoplayRule$p_1=function(){var e=this.videoUnit.getVideoPlayerController();return e&&e.isMuted()?document.hasFocus()?1:0:1},t})(r("VideoAutoplayRule"));l.default=e}),98);
__d("EmbeddedVideoInitialInfoOverlay",["SubscriptionsHandler"],(function(t,n,r,o,a,i){var e=function(t,r){"use strict";var e=this;this.$1=new(n("SubscriptionsHandler")),this.$1.addSubscriptions(t.addListener("beginPlayback",function(){r.parentNode.removeChild(r),e.$1.release()}))};a.exports=e}),null);
__d("ExplicitRegistrationDispatcherUtils",["emptyFunction","setImmediate"],(function(t,n,r,o,a,i){"use strict";var e=!1,l=n("emptyFunction");a.exports={warn:l,inlineRequiresEnabled:e}}),null);
__d("ExplicitRegistrationDispatcher",["Dispatcher_DEPRECATED","ExplicitRegistrationDispatcherUtils","setImmediate"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(e){function t(t){var n,r=t.strict;return n=e.call(this)||this,n.$ExplicitRegistrationDispatcher2=r,n.$ExplicitRegistrationDispatcher1={},n}babelHelpers.inheritsLoose(t,e);var n=t.prototype;return n.explicitlyRegisterStore=function(t){var e=t.getDispatchToken();return this.$ExplicitRegistrationDispatcher1[e]=!0,e},n.explicitlyRegisterStores=function(t){var e=this;return t.map(function(t){return e.explicitlyRegisterStore(t)})},n.register=function(n,r){var t=this,o=this.__genID(r);this.$ExplicitRegistrationDispatcher1[o]=!1;var a=e.prototype.register.call(this,this.$ExplicitRegistrationDispatcher4.bind(this,o,n),o);return a},n.$ExplicitRegistrationDispatcher4=function(t,n,r){(this.$ExplicitRegistrationDispatcher1[t]||!this.$ExplicitRegistrationDispatcher2)&&this.__invokeCallback(t,n,r)},n.unregister=function(n){e.prototype.unregister.call(this,n),delete this.$ExplicitRegistrationDispatcher1[n]},n.__getMaps=function(){},t})(r("Dispatcher_DEPRECATED"));l.default=e}),98);
__d("ExplicitRegistrationReactDispatcher",["ExplicitRegistrationDispatcher"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(e){function t(){return e.apply(this,arguments)||this}babelHelpers.inheritsLoose(t,e);var n=t.prototype;return n.dispatch=function(n){e.prototype.dispatch.call(this,n)},t})(r("ExplicitRegistrationDispatcher"));l.default=e}),98);
__d("FBIDCheck",[],(function(t,n,r,o,a,i){"use strict";var e=/^[1-9]\d*$/;function l(t){var n=t;return n==null||typeof n=="string"&&!e.test(n)||(n=parseInt(n,10),!n)?!1:n>0&&n<22e8||n>=1e14&&n<=0x5b0a58f100ef||n>=89e12&&n<=89999999999999||n>=6000001e7&&n<=60000019999999}i.isUser_deprecated=l}),66);
__d("FBLoadShimmer.react",["cx","LoadingMarker.react","UserAgent","joinClasses","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u=e||(e=o("react")),c=e.useRef;function d(e){var t=o("react-compiler-runtime").c(10),n=e.className,a=e.height,i=e.style,l=e.width,s=e.disableAnimation,d=r("UserAgent").isBrowser("Safari")&&r("UserAgent").isPlatform("Mac OS X"),m="_1tt"+(s?" _300z":"")+(d?" _72_f":""),p=c(null),_;t[0]!==n||t[1]!==m?(_=r("joinClasses")(n,m),t[0]=n,t[1]=m,t[2]=_):_=t[2];var f=a!=null?a+"px":void 0,g=l!=null?l+"px":void 0,h;t[3]!==i||t[4]!==f||t[5]!==g?(h=babelHelpers.extends({height:f,width:g},i),t[3]=i,t[4]=f,t[5]=g,t[6]=h):h=t[6];var y;if(t[7]!==_||t[8]!==h){var C=u.jsx("div",{className:_,ref:p,style:h});y=u.jsx(r("LoadingMarker.react"),{nodeRef:p,children:C}),t[7]=_,t[8]=h,t[9]=y}else y=t[9];return y}l.default=d}),98);
__d("FBStoriesLoggingConstants",[],(function(t,n,r,o,a,i){"use strict";var e="event",l="followee",s="friend",u="group",c="missingStoryData",d="page",m="self",p="promotion",_="open_media",f="delete_media_attempted",g="attempt_to_send_reply",h="reaction_sticker_interacted",y="open_seen_summary",C="open_story",b="close_story",v="story_tray_load",S="send_story_failed",R="send_story_succeed",L="reply_attempt_completed",E="story_navigation",k="reshared_story_tap",I="reshared_story_view_story_tap",T={CLOSE_STORY:{CLICK_RIGHT:"click_right",CLICK_LEFT:"click_left",AUTO_JUMP:"auto_jump",AUTO_EXIT:"auto_exit",CLICK_EXIT:"click_exit",SWIPE_RIGHT:"swipe_right",SWIPE_LEFT:"swipe_left",SWIPE_EXIT:"swipe_exit",SWIPE_DOWN_EXIT:"swipe_down_exit",CLOSE_BUTTON_EXIT:"close_button_exit",BACK_BUTTON_EXIT:"back_button_exit"}},D="closeFromClickingOnModal",x="closeFromClickingOnModalCloseButton",$="closeFromLastStoryFinishing",P={ARCHIVE:"archive",POST_HEADER:"post_header_actor_photo",STORY_TRAY:"story_tray",IN_FEED:"in_feed",UNKNOWN:"unknown"};i.EVENT_STORY=e,i.FOLLOWEE_STORY=l,i.FRIEND_STORY=s,i.GROUP_STORY=u,i.MISSING_STORY_DATA=c,i.PAGE_STORY=d,i.SELF_STORY=m,i.STORY_PROMOTION=p,i.ACTION_OPEN_MEDIA=_,i.ACTION_DELETE_MEDIA=f,i.ACTION_SEND_REPLY_ATTEMPT=g,i.ACTION_SEND_REACTION_STICKER_INTERACTED=h,i.ACTION_OPEN_SEEN_SUMMARY=y,i.ACTION_OPEN_STORY=C,i.ACTION_CLOSE_STORY=b,i.ACTION_TRAY_LOAD=v,i.ACTION_SEND_STORY_FAILED=S,i.ACTION_SEND_STORY_SUCCEEDED=R,i.ACTION_REPLY_ATTEMPT_COMPLETED=L,i.ACTION_STORY_NAVIGATION=E,i.INTERACTION_TAP_RESHARED_STORY=k,i.INTERACTION_TAP_RESHARED_TOOLTIP=I,i.GESTURES=T,i.SOURCE_CLOSE_FROM_MODAL=D,i.SOURCE_CLOSE_FROM_MODAL_CLOSE_BUTTON=x,i.SOURCE_CLOSE_FROM_LAST_STORY_FINISHING=$,i.SOURCES=P}),66);
__d("XFBStoriesSingleStoryAsyncController",["XController"],(function(t,n,r,o,a,i){a.exports=n("XController").create("/stories/view/async/",{card_id:{type:"FBID"},story_id:{type:"FBID"},auto_open_viewersheet:{type:"Bool",defaultValue:!1},story_action_source:{type:"String"}})}),null);
__d("FBStoriesRing",["csx","cx","Arbiter","CSS","DOM","FBStoriesLoggingConstants","XFBStoriesSingleStoryAsyncController"],(function(t,n,r,o,a,i,l,s,u){"use strict";var e=(function(){function e(e){this.$1=e.element,this.$2=e.profileId,this.$3=e.storyId,this.$4=!1;var t=r("DOM").scry(this.$1,"._6_ut");t.length>0&&(this.$4=!0),this.$5()}var t=e.prototype;return t.$5=function(){var e=this;r("Arbiter").subscribe("has_story_bucket_been_seen",function(t,n){if(e.$2===n){var a=r("DOM").scry(e.$1,"._6_ut");a.length>0&&(o("CSS").removeClass(a[0],"_6_ut"),e.$4=!1)}}),r("Arbiter").subscribe("update_next_thread_to_view",function(t,n){var a=n.bucketOwnerId,i=n.threadId;if(e.$2===a&&e.$4){var l=r("XFBStoriesSingleStoryAsyncController").getURIBuilder().setFBID("story_id",e.$3).setFBID("card_id",i).setBool("auto_open_viewersheet",!1).setString("story_action_source",o("FBStoriesLoggingConstants").SOURCES.POST_HEADER).getURI();e.$1.setAttribute("ajaxify",l)}})},e})();l.default=e}),98);
__d("FluxContainerNameUtils",[],(function(t,n,r,o,a,i){"use strict";function e(e,t){if(e&&t)try{Object.defineProperty(e,"name",{value:t})}catch(e){}return e}i.nameContainer=e}),66);
__d("expectationViolation",["ErrorNormalizeUtils","ExecutionEnvironment","FBLogger","cr:7438","emptyFunction","sprintf"],(function(t,n,r,o,a,i,l){"use strict";var e,s=r("emptyFunction");function u(e){for(var t,n=arguments.length,o=new Array(n>1?n-1:0),a=1;a<n;a++)o[a-1]=arguments[a];(t=r("FBLogger")("expectation_violation").blameToPreviousFrame()).warn.apply(t,[e].concat(o))}u.setHandler=c;function c(e){s=e}l.default=u}),98);
__d("getUniformDispatcher",["invariant"],(function(t,n,r,o,a,i,l,s){"use strict";function e(e){e&&e.length||s(0,18238);var t=e[0].getDispatcher();return t}l.default=e}),98);
__d("FluxContainerSubscriptions",["expectationViolation","getUniformDispatcher","nullthrows","shallowArrayEqual"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(){function e(e){this.$1=[],this.$4=e!=null?e:this.constructor.name}var t=e.prototype;return t.setStores=function(t){var e=this;if(!(this.$3&&r("shallowArrayEqual")(this.$3,t))){if(this.$3=t,this.$7(),this.$8(),t.length===0){r("expectationViolation")("there should be at least 1 store in a flux subscription");return}var n=!1,o=[],a=function(){n&&(e.$1.forEach(function(e){return e()}),n=!1)},i=r("getUniformDispatcher")(t),l=function(){if(i.registerContainer!=null)e.$6=i.registerContainer(function(e){a()},e.$4);else{var n=t.map(function(e){return e.getDispatchToken()});e.$6=i.register(function(e){i.waitFor(n),a()},e.$4,null,e.$4)}i.explicitlyRegisterStore&&i.explicitlyRegisterStore(e)};this.$2=t.map(function(e){return e.addListener(function(){n=!0})}),l(),this.$5=i}},t.addListener=function(t){this.$1.push(t)},t.removeListener=function(t){var e=this.$1.indexOf(t);e!==-1&&this.$1.splice(e,1)},t.getNumListeners=function(){return this.$1.length},t.reset=function(){this.$7(),this.$8(),this.$9(),this.$10()},t.$7=function(){this.$2&&(this.$2.forEach(function(e){return e.remove()}),this.$2=null)},t.$8=function(){this.$5&&this.$6!=null&&this.$5.unregister(this.$6),this.$5=null,this.$6=null},t.$10=function(){this.$3=null},t.$9=function(){this.$1=[]},t.getDispatchToken=function(){return r("nullthrows")(this.$6,"dispatchToken must be set")},e})();l.default=e}),98);
__d("shallowEqual",[],(function(t,n,r,o,a,i){"use strict";var e=Object.prototype.hasOwnProperty;function l(e,t){return e===t?e!==0||t!==0||1/e===1/t:e!==e&&t!==t}function s(t,n){if(l(t,n))return!0;if(typeof t!="object"||t===null||typeof n!="object"||n===null)return!1;var r=Object.keys(t),o=Object.keys(n);if(r.length!==o.length)return!1;for(var a=0;a<r.length;a++)if(!e.call(n,r[a])||!l(t[r[a]],n[r[a]]))return!1;return!0}i.default=s}),66);
__d("FluxContainer",["FluxContainerNameUtils","FluxContainerSubscriptions","react","shallowEqual","warning"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=s.Component,c=s.PureComponent,d={pure:!0,pureProps:!1,withProps:!1,withContext:!1,withCallback:!1};function m(e,t){var n=babelHelpers.extends({},d,t||{}),a,i,l=function(r,o,a,i,l){var t=n.withProps?a:void 0,s=n.withContext?i:void 0,u=n.withCallback?l:void 0,c=e.calculateState(o,t,s,u);return c},s=function(r,o){var t=n.withProps?r:void 0,a=n.withContext?o:void 0;return e.getStores(t,a)};return a=(function(e){function t(t,n){var o;o=e.call(this,t,n)||this,i||(i=o.constructor),o.$BasicContainer$p_1=new(r("FluxContainerSubscriptions"))(i.displayName||i.name),o.$BasicContainer$p_3=function(){o.setState(function(e,t){var n=l(o,e,t,o.context,o.$BasicContainer$p_4);return r("shallowEqual")(e,n)?null:n})};var a=o.$BasicContainer$p_3;o.$BasicContainer$p_4=function(){return a==null?void 0:a()},o.$BasicContainer$p_4.isRevoked=!1,o.$BasicContainer$p_4.revoke=function(){o.$BasicContainer$p_4.isRevoked=!0,a=null},o.$BasicContainer$p_4.revoke(),o.$BasicContainer$p_2=!1;var s=l(o,void 0,t,n,o.$BasicContainer$p_4);return o.state=babelHelpers.extends({},o.state||{},s),o}babelHelpers.inheritsLoose(t,e);var o=t.prototype;return o.UNSAFE_componentWillMount=function(){e.prototype.UNSAFE_componentWillMount&&(e.prototype.UNSAFE_componentWillMount.call(this),this.$BasicContainer$p_3())},o.UNSAFE_componentWillReceiveProps=function(o,a){var t=this;e.prototype.UNSAFE_componentWillReceiveProps&&e.prototype.UNSAFE_componentWillReceiveProps.call(this,o,a);var i=!n.withProps||n.pureProps&&r("shallowEqual")(o,this.props),u=!n.withContext||n.pureProps&&r("shallowEqual")(a,this.context);if(!(u&&i)){var c=s(o,a);c.length>0&&this.$BasicContainer$p_1.setStores(c),this.setState(function(e){return l(t,e,o,a,t.$BasicContainer$p_4)})}},o.componentDidMount=function(){var t=this;if(e.prototype.componentDidMount&&e.prototype.componentDidMount.call(this),this.$BasicContainer$p_4.isRevoked===!0){var n=this.$BasicContainer$p_3;this.$BasicContainer$p_4=function(){return n==null?void 0:n()},this.$BasicContainer$p_4.isRevoked=!1,this.$BasicContainer$p_4.revoke=function(){t.$BasicContainer$p_4.isRevoked=!0,n=null}}this.$BasicContainer$p_2||(this.$BasicContainer$p_5(this.props,this.context),this.$BasicContainer$p_3(),this.$BasicContainer$p_2=!0)},o.componentWillUnmount=function(){e.prototype.componentWillUnmount&&e.prototype.componentWillUnmount.call(this),this.$BasicContainer$p_1.reset(),this.$BasicContainer$p_2=!1,this.$BasicContainer$p_4.revoke()},o.$BasicContainer$p_5=function(t,n){var e=this,r=s(t,n);r.length>0&&(this.$BasicContainer$p_1.setStores(r),this.$BasicContainer$p_1.addListener(function(){e.setState(function(t,r){return l(e,t,r,n)})}))},t})(e),a=n.pure&&!(e.prototype instanceof c)?p(a):a,o("FluxContainerNameUtils").nameContainer(a,n.name||e.displayName||e.name),a}function p(e){var t=(function(e){function t(){for(var t,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return t=e.call.apply(e,[this].concat(r))||this,t.isPureFluxContainer=!0,babelHelpers.assertThisInitialized(t)||babelHelpers.assertThisInitialized(t)}babelHelpers.inheritsLoose(t,e);var n=t.prototype;return n.shouldComponentUpdate=function(t,n){return!r("shallowEqual")(this.props,t)||!r("shallowEqual")(this.state,n)},t})(e);return t}function _(e,t,n,r){var o=(function(r){function o(){return r.apply(this,arguments)||this}babelHelpers.inheritsLoose(o,r),o.getStores=function(e,n){return t(e,n)},o.calculateState=function(e,t,r,o){return n(e,t,r,o)};var a=o.prototype;return a.render=function(){return e(this.state)},o})(u);return m(o,r)}var f={create:m,createFunctional:_};l.default=f}),98);
__d("FluxStoreInstrumentation",["invariant"],(function(t,n,r,o,a,i,l,s){"use strict";var e=null;function u(t){e==null||s(0,2260),e=t}function c(t){return e?e.emitChange(t):null}l.inject=u,l.onEmitChange=c}),98);
__d("FluxStoreOnDispatchInstrumentation",["SimpleHook"],(function(t,n,r,o,a,i,l){"use strict";var e=new(o("SimpleHook")).SimpleHook;l.default=e}),98);
__d("concatArrays",[],(function(t,n,r,o,a,i){function e(e){var t;return(t=[]).concat.apply(t,e)}i.default=e}),66);
__d("distinctArray",[],(function(t,n,r,o,a,i){function e(e){if(e==null)return[];if(Array.isArray(e)){var t=e.length;if(t<=200){for(var n=[],r=0;r<t;r++){var o=e[r];n.indexOf(o)===-1&&n.push(o)}return n}}return Array.from(new Set(e).values())}i.default=e}),66);
__d("FluxStore",["invariant","EventEmitter","FluxStoreInstrumentation","FluxStoreOnDispatchInstrumentation","__debug","concatArrays","distinctArray","performanceAbsoluteNow"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u,c,d=(function(){function t(e){this.__className=this.constructor.name,this.__moduleID=this.constructor.__moduleID,this.__changed=!1,this.__changeEvent="change",this.__dispatcher=e,this.__emitter=new(r("EventEmitter")),this.$3=!1,this.__registerDispatcherCallback(e)}var n=t.prototype;return n.__registerDispatcherCallback=function(t){var e=this;this.$2=t.register(function(t){return e.__invokeOnDispatch(t)},this.__getIDForDispatcher(),this,this.__moduleID)},n.addListener=function(t){return this.__emitter.addListener(this.__changeEvent,t)},n.getActionTypes=function(){if(!this.$1){var t=this.__getActionTypes();if(t!=null){var n=this.getDependencyStores();if(n.length>0){var o=!1,a=r("concatArrays")(n.map(function(e){var t=e&&e.getActionTypes?e.getActionTypes():null;return t==null&&(o=!0),t}).filter(Boolean));o?t=null:t=(e||(e=r("distinctArray")))(t.concat(a))}}this.$1=t}return this.$1},n.getDispatcher=function(){return this.__dispatcher},n.getDispatchToken=function(){return this.$2},n.getDependencyDispatchTokens=function(){return this.$5||(this.$5=this.getDependencyStores().map(function(e){return e&&e.getDispatchToken&&e.getDispatchToken()})),this.$5},n.getDependencyStores=function(){return this.$4||(this.$4=(e||(e=r("distinctArray")))(this.__getDependencyStores())),this.$4},n.addStoreDependency=function(t){var e=this.__dispatcher.registerDependency;e&&e(this.getDispatchToken(),t.getDispatchToken())},n.hasChanged=function(){return this.__dispatcher.isDispatching()||s(0,1147,this.__className),this.__changed},n.__setAsUnchanged=function(){this.__changed=!1},n.__emitChange=function(){this.__dispatcher.isDispatching()||s(0,1148,this.__className),!this.__changed&&(o("FluxStoreInstrumentation").onEmitChange(this.__moduleID!=null?this.__moduleID:"unknown"),this.__changed=!0)},n.__invokeOnDispatch=function(t){this.__changed=!1;var e=r("FluxStoreOnDispatchInstrumentation").hasCallback()?(u||(u=r("performanceAbsoluteNow")))():null;if(this.__onDispatch(t),e!=null){var n;r("FluxStoreOnDispatchInstrumentation").call((n=this.__moduleID)!=null?n:"unknown",(u||(u=r("performanceAbsoluteNow")))()-e)}this.__inform()},n.__inform=function(t){this.$3=this.__changed||this.$3;var e=this.__dispatcher.shouldAllowInforms==null||this.__dispatcher.shouldAllowInforms();e&&this.$3&&(this.$3=!1,this.__emitter.emit(t||this.__changeEvent))},n.__onDispatch=function(t){s(0,1149,this.__className)},n.__getActionTypes=function(){return null},n.__getDependencyStores=function(){return[]},n.__getIDForDispatcher=function(){return this.__className},t})(),m=d,p=d;l.default=p}),98);
__d("TypedFluxStore",["FluxStore"],(function(t,n,r,o,a,i,l){"use strict";l.default=r("FluxStore")}),98);
__d("FluxReduceStore",["invariant","AdsCanvasElementUpdateDataActionFlux","AdsMessengerPACreationStateQuestionItemsActionFlux","AdsUEditorAdgroupSetSAOffOptinStatusActionFlux","TypedFluxStore","abstractMethod","cr:10110","cr:10217","cr:27641","cr:3817","gkx","react"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u=(e||(e=o("react"))).startTransition,c=(function(e){function t(t){var n;return n=e.call(this,t)||this,n.$FluxReduceStore$p_1=n.getInitialState(),n}babelHelpers.inheritsLoose(t,e);var a=t.prototype;return a.getState=function(){return this.$FluxReduceStore$p_1},a.getInitialState=function(){return r("abstractMethod")("FluxReduceStore","getInitialState")},a.reduce=function(t,n){return r("abstractMethod")("FluxReduceStore","reduce")},a.areEqual=function(t,n){return t===n},a.__invokeOnDispatch=function(t,a){a===void 0&&(a=!0);var e=t==null?void 0:t.type,i=r("gkx")("15320"),l=r("gkx")("15714"),s=r("gkx")("19775"),u=i||l||s;if(u&&n("cr:10110")&&e!==o("AdsCanvasElementUpdateDataActionFlux").actionType&&e!==r("AdsMessengerPACreationStateQuestionItemsActionFlux").actionType&&e!==r("AdsUEditorAdgroupSetSAOffOptinStatusActionFlux").actionType){var c=n("cr:10110").getOrNull();if(c!=null&&c.getRoutes().some(function(e){return s&&n("cr:27641")!=null&&e instanceof n("cr:27641")||l&&n("cr:3817")!=null&&e instanceof n("cr:3817")||i&&n("cr:10217")!=null&&e instanceof n("cr:10217")})){this.__invokeOnDispatchWithTransition(t,a);return}}this.__invokeOnDispatchWithoutTransition(t,a)},a.__invokeOnDispatchWithTransition=function(t,n){var e=this;n===void 0&&(n=!0),u(function(){e.__invokeOnDispatchWithoutTransition(t,n)})},a.__invokeOnDispatchWithoutTransition=function(t,n){n===void 0&&(n=!0),this.__changed=!1;var e=this.$FluxReduceStore$p_1,r=this.reduce(e,t);r!==void 0||s(0,2189,this.constructor.name),this.areEqual(e,r)||(this.$FluxReduceStore$p_1=r,this.__emitChange()),n&&this.__inform()},a.__setState=function(t){this.$FluxReduceStore$p_1=t},t})(r("TypedFluxStore"));c.__moduleID=i.id,l.default=c}),98);
__d("Input",["CSS","DOMControl","DOMQuery"],(function(t,n,r,o,a,i,l){function e(e){return!/\S/.test(e||"")}function s(t){return e(t.value)}function u(e){return s(e)?"":e.value}function c(e){return e.value}function d(e,t){e.value=t||"";var n=r("DOMControl").getInstance(e);n&&n.resetHeight&&n.resetHeight()}function m(e,t){t||(t=""),e.setAttribute("aria-label",t),e.setAttribute("placeholder",t)}function p(e){e.value="",e.style.height=""}function _(e,t){o("CSS").conditionClass(e,"enter_submit",t)}function f(e){return o("CSS").hasClass(e,"enter_submit")}function g(e,t){t>0?e.setAttribute("maxlength",t.toString()):e.removeAttribute("maxlength")}l.isWhiteSpaceOnly=e,l.isEmpty=s,l.getValue=u,l.getValueRaw=c,l.setValue=d,l.setPlaceholder=m,l.reset=p,l.setSubmitOnEnter=_,l.getSubmitOnEnter=f,l.setMaxLength=g}),98);
__d("Form",["DOM","DOMQuery","DTSG","DTSGUtils","DataStore","FBLogger","Input","LSD","PHPQuerySerializer","Random","SprinkleConfig","URI","getElementPosition","isFacebookURI","isNode"],(function(t,n,r,o,a,i,l){var e,s,u="FileList"in window,c="FormData"in window;function d(t){var n={};return(e||(e=r("PHPQuerySerializer"))).serialize(t).split("&").forEach(function(e){if(e){var t=/^([^=]*)(?:=(.*))?$/.exec(e),o=(s||(s=r("URI"))).decodeComponent(t[1]),a=t[2]!==void 0,i=a?(s||(s=r("URI"))).decodeComponent(t[2]):null;n[o]=i}}),n}var m={getInputs:function(t){return t===void 0&&(t=document),[].concat(o("DOMQuery").scry(t,"input"),o("DOMQuery").scry(t,"select"),o("DOMQuery").scry(t,"textarea"),o("DOMQuery").scry(t,"button"))},getInputsByName:function(t){var e={};return m.getInputs(t).forEach(function(t){var n=e[t.name];e[t.name]=n===void 0?t:[t].concat(n)}),e},getSelectValue:function(t){return t.options[t.selectedIndex].value},setSelectValue:function(t,n){for(var e=0;e<t.options.length;++e)if(t.options[e].value===n){t.selectedIndex=e;break}},getRadioValue:function(t){for(var e=0;e<t.length;e++)if(t[e].checked)return t[e].value;return null},getElements:function(t){return t.tagName==="FORM"&&t.elements!==t?Array.from(t.elements):m.getInputs(t)},getAttribute:function(t,n){return(t.getAttributeNode(n)||{}).value||null},setDisabled:function(t,n){m.getElements(t).forEach(function(e){if(e.disabled!==void 0){var t=r("DataStore").get(e,"origDisabledState");n?(t===void 0&&r("DataStore").set(e,"origDisabledState",e.disabled),e.disabled=n):t===!1&&(e.disabled=!1)}})},forEachValue:function(t,n,r){m.getElements(t).forEach(function(e){if(!(!e.name||e.disabled)&&e.type!=="submit"&&!(e.type==="reset"||e.type==="button"||e.type==="image")&&!((e.type==="radio"||e.type==="checkbox")&&!e.checked)){if(e.nodeName==="SELECT"){for(var t=0,n=e.options.length;t<n;t++){var a=e.options[t];a.selected&&r("select",e.name,a.value)}return}if(e.type==="file"){if(u)for(var i=e.files,l=0;l<i.length;l++)r("file",e.name,i.item(l));return}r(e.type,e.name,o("Input").getValue(e))}}),n&&n.name&&n.type==="submit"&&o("DOMQuery").contains(t,n)&&o("DOMQuery").isNodeOfType(n,["input","button"])&&r("submit",n.name,n.value)},createFormData:function(t,n){if(!c)return null;var e=new FormData;if(t)if(r("isNode")(t))m.forEachValue(t,n,function(t,n,r){e.append(n,r)});else{var o=d(t);for(var a in o)o[a]==null?e.append(a,""):e.append(a,o[a])}return e},serialize:function(t,n){var e={};return m.forEachValue(t,n,function(t,n,r){t!=="file"&&m._serializeHelper(e,n,r)}),m._serializeFix(e)},_serializeHelper:function(t,n,r){var e=Object.prototype.hasOwnProperty,o=/([^\]]+)\[([^\]]*)\](.*)/.exec(n);if(o){if(!t[o[1]]||!e.call(t,o[1])){var a;if(t[o[1]]=a={},t[o[1]]!==a)return}var i=0;if(o[2]==="")for(;t[o[1]][i]!==void 0;)i++;else i=o[2];o[3]===""?t[o[1]][i]=r:m._serializeHelper(t[o[1]],i.concat(o[3]),r)}else t[n]=r},_serializeFix:function(t){for(var e in t)t[e]instanceof Object&&(t[e]=m._serializeFix(t[e]));var n=Object.keys(t);if(n.length===0||n.some(isNaN))return t;n.sort(function(e,t){return e-t});var r=0,o=n.every(function(e){return+e===r++});return o?n.map(function(e){return t[e]}):t},post:function(t,n,a,i){i===void 0&&(i=!0);var e=new(s||(s=r("URI")))(t),l=document.createElement("form");l.action=e.toString(),l.method="POST",l.style.display="none";var u=!r("isFacebookURI")(e);if(a){if(u&&(l.rel="noreferrer",a==="_blank")){a=btoa(r("Random").uint32());var c=window.open("about:blank",a);c!==void 0&&(c.opener=null)}l.target=a}if(i&&!u&&e.getSubdomain()!=="apps"){var d=o("DTSG").getToken();d&&(n.fb_dtsg=d,r("SprinkleConfig").param_name&&(n[r("SprinkleConfig").param_name]=r("DTSGUtils").getNumericValue(d))),r("LSD").token&&(n.lsd=r("LSD").token,r("SprinkleConfig").param_name&&!d&&(n[r("SprinkleConfig").param_name]=r("DTSGUtils").getNumericValue(r("LSD").token)))}return m.createHiddenInputs(n,l),o("DOMQuery").getRootElement().appendChild(l),l.submit(),!1},post_UNSAFE_LET_ANYONE_IMPERSONATE_THE_USER_FOR_THESE_WRITES:function(t,n,r){m.post(t,n,r)},createHiddenInputs:function(t,n,o,a){a===void 0&&(a=!1),o=o||{};var e=d(t);for(var i in e)if(e[i]!==null)if(o[i]&&a)o[i].value=e[i];else{var l=r("DOM").create("input",{type:"hidden",name:i,value:e[i]});o[i]=l,n.appendChild(l)}return o},getFirstElement:function(t,n){n===void 0&&(n=['input[type="text"]',"textarea",'input[type="password"]','input[type="button"]','input[type="submit"]']);for(var e=[],a=0;a<n.length;a++){e=o("DOMQuery").scry(t,n[a]);for(var i=0;i<e.length;i++){var l=e[i];try{var s=r("getElementPosition")(l);if(s.y>0&&s.x>0)return l}catch(e){}}}return null},focusFirst:function(t){var e=m.getFirstElement(t);return e?(e.focus(),!0):!1}};i.exports=m}),34);
__d("XReferer",["Base64","Cookie","URI","cr:8958","setTimeoutAcrossTransitions"],(function(t,n,r,o,a,i,l){var e;function s(t,n,o){if(!o){r("Cookie").set("x-referer","");return}t!=null&&(t=c(t)),n!=null&&(n=c(n));var a=window.location.pathname+window.location.search,i=(e||(e=r("URI"))).getRequestURI(),l=i.getSubdomain();n!=null&&u(n,a,l),t!=null&&r("setTimeoutAcrossTransitions")(function(){t!=null&&u(t,a,l)},0)}function u(e,t,o){var a={r:e,h:t,s:o},i=r("Base64").encode(n("cr:8958").stringify(a));r("Cookie").set("x-referer",i)}function c(e){var t=1024;return e&&e.length>t&&(e=e.substring(0,t)+"..."),e}l.update=s,l._setCookie=u,l.truncatePath=c}),98);
__d("goOrReplace",["Env","URI","isFacebookURI"],(function(t,n,r,o,a,i,l){var e,s;function u(t,n,o){var a=new(e||(e=r("URI")))(n);(s||(s=r("Env"))).isCQuick&&r("isFacebookURI")(a)&&a.addQueryData({cquick:(s||(s=r("Env"))).iframeKey,cquick_token:s.iframeToken,ctarget:s.iframeTarget});var i=a.toString();o?t.replace(i):t.href==i?t.reload():t.href=i}l.default=u}),98);
__d("HistoryManager",["Env","Event","SprinkleConfig","URI","UserAgent_DEPRECATED","XReferer","emptyFunction","goOrReplace","isInIframe","setIntervalAcrossTransitions"],(function(t,n,r,o,a,i){var e,l,s={history:null,current:0,fragment:null,isInitialized:function(){return!!s._initialized},init:function(){if(!(!(e||(e=n("Env"))).ALLOW_TRANSITION_IN_IFRAME&&n("isInIframe")())){if(s._initialized)return s;var t=new(l||(l=n("URI")))(window.location.href),r=t.getFragment()||"";if(r.charAt(0)==="!"&&(r=r.substr(1),t.setFragment(r)),Object.assign(s,{_initialized:!0,fragment:r,orig_fragment:r,history:[t],callbacks:[],lastChanged:Date.now(),canonical:new l("#"),user:0,enabled:!0,debug:n("emptyFunction")}),window.history&&window.history.pushState){this.lastURI=document.URL;var o=new(l||(l=n("URI")))(this.lastURI),a=o.getQueryData();a.__md__=void 0,a.__xts__=void 0,a.fb_dtsg_ag=void 0,a[n("SprinkleConfig").param_name]=void 0,this.lastURI=o.setQueryData(a).toString();try{window.history.state?window.history.replaceState(window.history.state,null,this.lastURI):window.history.replaceState(this.lastURI,null,this.lastURI)}catch(e){if(e.number!==-2147467259)throw e}return n("Event").listen(window,"popstate",function(e){var t=e&&e.state&&typeof e.state=="string";t&&s.lastURI!=e.state&&(s.lastURI=document.URL,s.lastChanged=Date.now(),s.notify(new(l||(l=n("URI")))(e.state).getUnqualifiedURI().toString()))}),(n("UserAgent_DEPRECATED").webkit()<534||n("UserAgent_DEPRECATED").chrome()<=13)&&(n("setIntervalAcrossTransitions")(s.checkURI,42),s._updateRefererURI(this.lastURI)),s}return s._updateRefererURI(l.getRequestURI(!1)),n("UserAgent_DEPRECATED").webkit()<500||n("UserAgent_DEPRECATED").firefox()<2?(s.enabled=!1,s):("onhashchange"in window?n("Event").listen(window,"hashchange",function(){window.setTimeout(s.checkURI.bind(s),0)}):n("setIntervalAcrossTransitions")(s.checkURI,42),s)}},registerURIHandler:function(t){return s.callbacks.push(t),s},setCanonicalLocation:function(t){return s.canonical=new(l||(l=n("URI")))(t),s},notify:function(t){t==s.orig_fragment&&(t=s.canonical.getFragment());for(var e=0;e<s.callbacks.length;e++)try{if(s.callbacks[e](t))return!0}catch(e){}return!1},checkURI:function(){if(!(Date.now()-s.lastChanged<400)){if(window.history&&window.history.pushState){var e=new(l||(l=n("URI")))(document.URL).removeQueryData("ref").toString(),t=new l(s.lastURI).removeQueryData("ref").toString();e!=t&&(s.lastChanged=Date.now(),s.lastURI=e,n("UserAgent_DEPRECATED").webkit()<534&&s._updateRefererURI(e),s.notify(new(l||(l=n("URI")))(e).getUnqualifiedURI().toString()));return}if(n("UserAgent_DEPRECATED").webkit()&&window.history.length==200){s.warned||(s.warned=!0);return}var r=new(l||(l=n("URI")))(window.location.href).getFragment();if(r.charAt(0)=="!"&&(r=r.substr(1)),r=r.replace(/%23/g,"#"),r!=s.fragment.replace(/%23/g,"#")){s.debug([r," vs ",s.fragment,"whl: ",window.history.length,"QHL: ",s.history.length].join(" "));for(var o=s.history.length-1;o>=0&&s.history[o].getFragment().replace(/%23/g,"#")!=r;--o);++s.user,o>=0?s.go(o-s.current):s.go("#"+r),--s.user}}},_updateRefererURI:function(t){t instanceof(l||(l=n("URI")))&&(t=t.toString()),n("XReferer").update(t,null,!0)},go:function(t,r,o){if(window.history&&window.history.pushState){var e=new(l||(l=n("URI")))(t).removeQueryData(["ref","messaging_source","ajaxpipe_fetch_stream","fb_dtsg_ag",n("SprinkleConfig").param_name]).toString();return s.lastChanged=Date.now(),this.lastURI=e,o?window.history.replaceState(t,null,e):window.history.pushState(t,null,e),n("UserAgent_DEPRECATED").webkit()<534&&s._updateRefererURI(t),!1}if(s.debug("go: "+t),r===void 0&&(r=!0),!s.enabled&&!r)return!1;if(typeof t=="number"){if(!t)return!1;var a=t+s.current,i=Math.max(0,Math.min(s.history.length-1,a));return s.current=i,a=s.history[i].getFragment()||s.orig_fragment,a=new(l||(l=n("URI")))(a).removeQueryData("ref").getUnqualifiedURI().toString(),s.fragment=a,s.lastChanged=Date.now(),s.user||n("goOrReplace")(window.location,window.location.href.split("#")[0]+"#!"+a,o),r&&s.notify(a),s._updateRefererURI(a),!1}t=new(l||(l=n("URI")))(t),t.getDomain()==new(l||(l=n("URI")))(window.location.href).getDomain()&&(t=new(l||(l=n("URI")))("#"+t.getUnqualifiedURI()));var u=s.history[s.current].getFragment(),c=t.getFragment();if(c==u||u==s.orig_fragment&&c==s.canonical.getFragment())return r&&s.notify(c),s._updateRefererURI(c),!1;o&&s.current--;var d=s.history.length-s.current-1;return s.history.splice(s.current+1,d),s.history.push(new l(t)),s.go(1,r,o)},getCurrentFragment:function(){var e=(l||(l=n("URI"))).getRequestURI(!1).getFragment();return e==s.orig_fragment?s.canonical.getFragment():e}};a.exports=s}),null);
__d("LeftRight.react",["cx","invariant","joinClasses","react"],(function(t,n,r,o,a,i,l,s,u){"use strict";var e=["root"],c,d=c||(c=o("react")),m=(function(t){function n(){return t.apply(this,arguments)||this}babelHelpers.inheritsLoose(n,t);var o=n.prototype;return o.getChildrenArr=function(){var e=[];return d.Children.forEach(this.props.children,function(t){return e.push(t)}),e},o.render=function(){var t=this.getChildrenArr();t.length===1||t.length===2||u(0,5615);var o=this.props.direction||n.DIRECTION.both,a=o===n.DIRECTION.both,i=a||o===n.DIRECTION.left?"_ohe":"",l=a||o===n.DIRECTION.right?"_ohf":"",s=d.jsx("div",{className:i,children:t[0]},"left"),c=t.length<2?null:d.jsx("div",{className:l,children:t[1]},"right"),m=o===n.DIRECTION.right&&c?[c,s]:[s,c],p=this.props,_=p.root,f=babelHelpers.objectWithoutPropertiesLoose(p,e);return d.jsx("div",babelHelpers.extends({},f,{ref:_,className:r("joinClasses")(this.props.className,"clearfix"),children:m}))},n})(d.Component);m.DIRECTION={left:"left",right:"right",both:"both"},l.default=m}),98);
__d("ImageBlock.react",["cx","invariant","DangerouslyAccessReactElementInternals_DO_NOT_USE_IN_NEW_CODE","LeftRight.react","joinClasses","react"],(function(t,n,r,o,a,i,l,s,u){var e=["imageClassName","contentClassName","spacing"],c,d=c||(c=o("react"));function m(e){var t=e.children;return t&&(t.length===2||t.length===3)||u(0,97),t[0]!==null||u(0,98),t}function p(e){return"img _8o"+(e==="small"?" _8r":"")+(e==="medium"?" _8s":"")+(e==="large"?" _8t":"")}var _=(function(t){function n(){return t.apply(this,arguments)||this}babelHelpers.inheritsLoose(n,t);var o=n.prototype;return o.render=function(){var t=m(this.props),n=t[0],o=t[1],a=t[2],i=this.props,l=i.imageClassName,s=i.contentClassName,u=i.spacing,c=babelHelpers.objectWithoutPropertiesLoose(i,e),_=r("DangerouslyAccessReactElementInternals_DO_NOT_USE_IN_NEW_CODE")(n).props,f=_.className,g=_.alt,h=_.tabIndex,y=_.title,C={className:r("joinClasses")(f,p(u),l)};r("DangerouslyAccessReactElementInternals_DO_NOT_USE_IN_NEW_CODE")(n).type==="img"?g===void 0&&(C.alt=""):(r("DangerouslyAccessReactElementInternals_DO_NOT_USE_IN_NEW_CODE")(n).type==="a"||r("DangerouslyAccessReactElementInternals_DO_NOT_USE_IN_NEW_CODE")(n).type==="link")&&h===void 0&&y===void 0&&r("DangerouslyAccessReactElementInternals_DO_NOT_USE_IN_NEW_CODE")(n).props["aria-label"]===void 0&&(C.tabIndex="-1",C["aria-hidden"]="true"),n=d.cloneElement(n,C);var b=!0;this.props.flexibleContent!=null&&(b=this.props.flexibleContent);var v=r("joinClasses")(s,(b?"_42ef":"")+(u==="small"?" _8u":"")),S;return a?S=d.jsxs(r("LeftRight.react"),{className:v,direction:r("LeftRight.react").DIRECTION.right,children:[o,a]}):S=d.jsx("div",{className:v,children:o}),d.jsxs(r("LeftRight.react"),babelHelpers.extends({},c,{direction:r("LeftRight.react").DIRECTION.left,children:[n,S]}))},n})(d.Component);_.defaultProps={spacing:"small"},l.default=_}),98);
__d("ImmutableRecordWithV4Types",["immutable"],(function(t,n,r,o,a,i,l){"use strict";l.Record=r("immutable").Record}),98);
__d("InlineBlock.react",["cx","joinClasses","react"],(function(t,n,r,o,a,i,l){var e=["alignv","height","fullWidth","rootRef"],s,u=s||(s=n("react")),c={baseline:null,bottom:"_6d",middle:"_6b",top:"_6e"},d=(function(t){"use strict";function r(){return t.apply(this,arguments)||this}babelHelpers.inheritsLoose(r,t);var o=r.prototype;return o.render=function(){var t=this.props,r=t.alignv,o=t.height,a=t.fullWidth,i=t.rootRef,l=babelHelpers.objectWithoutPropertiesLoose(t,e),s=c[r],d="_6a"+(a?" _5u5j":""),m=n("joinClasses")(d,s);if(o!=null){var p=u.jsx("div",{className:n("joinClasses")("_6a",s),style:{height:o+"px"}});return u.jsxs("div",babelHelpers.extends({},l,{ref:i,className:n("joinClasses")(this.props.className,d),height:null,children:[p,u.jsx("div",{className:m,children:this.props.children})]}))}else return u.jsx("div",babelHelpers.extends({},l,{ref:i,className:n("joinClasses")(this.props.className,m),children:this.props.children}))},r})(u.Component);d.defaultProps={alignv:"baseline",fullWidth:!1},a.exports=d}),null);
__d("isKeyActivation",["Keys"],(function(t,n,r,o,a,i,l){"use strict";function e(e){var t=0,n=e.charCode,o=e.keyCode;return n!=null&&n!==0?t=n:o!=null&&o!==0&&(t=o),[r("Keys").RETURN,r("Keys").SPACE].includes(t)}l.default=e}),98);
__d("KeyActivationToClickHOC.react",["isKeyActivation","react"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react"));function u(e){var t;return t=(function(t){function n(e){var n;return n=t.call(this,e)||this,n.$2=function(e){var t,o=(t=n.props.isKeyActivation)!=null?t:r("isKeyActivation");o(e)&&(e.preventDefault(),e.stopPropagation(),n.$1&&n.$1.click())},n.$3=function(e){n.$1=e},n.$1=null,n}babelHelpers.inheritsLoose(n,t);var o=n.prototype;return o.render=function(){return s.jsx(e,babelHelpers.extends({keyActivationToClickEvent:this.$2,keyActivationToClickRef:this.$3},this.props))},n})(s.Component),t.displayName="KeyActivationToClickHOC",t}l.default=u}),98);
__d("LastActiveTimes",["fbt","ServerTime"],(function(t,n,r,o,a,i,l,s){var e={};function u(e){if(!e||e<0)return null;var t=o("ServerTime").get()/1e3-e,n=Math.floor(t/60),r=Math.floor(n/60),a=Math.floor(r/24);return n<=1?s._(/*BTDS*/"_j{\"*\":\"{count}m\"}",[s._param("count",1,[0])]):n<60?s._(/*BTDS*/"_j{\"*\":\"{count}m\"}",[s._param("count",n,[0])]):r<24?s._(/*BTDS*/"_j{\"*\":\"{count}h\"}",[s._param("count",r,[0])]):a<3?s._(/*BTDS*/"_j{\"*\":\"{count}d\"}",[s._param("count",a,[0])]):null}function c(t,n){(!(t in e)||e[t]<n)&&(e[t]=n)}function d(t){return t in e?e[t]:0}function m(e){for(var t in e)c(t,e[t])}function p(e){return u(d(e))}function _(e){return d(e)}function f(){return e}l.update=m,l.getShortDisplay=p,l.get=_,l.getDebugData=f}),226);
__d("TabbableElements",["Style"],(function(t,n,r,o,a,i,l){function e(e){if(e.tabIndex<0)return!1;if(e.tabIndex>0||e.tabIndex===0&&e.getAttribute("tabIndex")!==null)return!0;var t=e;switch(e.tagName){case"A":var n=t;return!!n.href&&n.rel!="ignore";case"INPUT":var r=t;return r.type!="hidden"&&r.type!="file"&&!r.disabled;case"BUTTON":case"SELECT":case"TEXTAREA":var o=t;return!o.disabled}return!1}function s(e){for(var t=e;t&&t!==document&&r("Style").get(t,"visibility")!="hidden"&&r("Style").get(t,"display")!="none";)t=t.parentNode;return t===document}function u(e){return Array.from(e.getElementsByTagName("*")).filter(m)}function c(e){return Array.from(e.getElementsByTagName("*")).find(m)}function d(e){for(var t=Array.from(e.getElementsByTagName("*")),n=t.length-1;n>=0;n--)if(m(t[n]))return t[n];return null}function m(t){return e(t)&&s(t)}function p(e){return s(e)}l.find=u,l.findFirst=c,l.findLast=d,l.isTabbable=m,l.isVisible=p}),98);
__d("focusWithinLayer",["DOMQuery","Focus","TabbableElements","getActiveElement"],(function(t,n,r,o,a,i,l){function e(e,t){var n=o("DOMQuery").scry(e,".autofocus")[0],a=!0;if(n)n.tabIndex!==0&&(a=!1);else{var i=r("getActiveElement")();if(o("DOMQuery").isNodeOfType(i,["input","textarea"]))return;for(var l=o("TabbableElements").find(e),s=0;s<l.length;s++){var u=l[s];if(u.tagName!=="A"||u.getAttribute("role")==="button"||u.getAttribute("role")==="menuitem"){n=l[s];break}}}n?a?o("Focus").set(n,t):o("Focus").setWithoutOutline(n):e.offsetWidth||(e.tabIndex=-1,o("Focus").setWithoutOutline(e))}l.default=e}),98);
__d("LayerAutoFocus",["focusWithinLayer"],(function(t,n,r,o,a,i,l){var e=(function(){function e(e){this.$2=null,this.$1=e,this.$2=null}var t=e.prototype;return t.enable=function(){var e=this;this.$2=this.$1.subscribe("aftershow",function(){return e.$3()})},t.disable=function(){this.$2&&this.$2.unsubscribe(),this.$2=null},t.$3=function(){var e=this.$1.getRoot();e&&r("focusWithinLayer")(e,!0)},e})();l.default=e}),98);
__d("LayerHideOnBlur",["LayerHideSources","requestAnimationFrame"],(function(t,n,r,o,a,i,l){var e=(function(){function e(e){this.$2=null,this.$3=null,this.$1=e}var t=e.prototype;return t.enable=function(){var e=this;this.$3=[this.$1.subscribe("show",function(){return e.$4()}),this.$1.subscribe("hide",function(){return e.$5()})],this.$1.isShown()&&this.$4()},t.disable=function(){for(this.$5();this.$3&&this.$3.length;)this.$3.pop().unsubscribe();this.$3=null},t.$5=function(){this.$2&&this.$2.unsubscribe(),this.$2=null},t.$4=function(){var e=this;this.$2=this.$1.subscribe("blur",function(){return r("requestAnimationFrame")(function(){e.$1.hide(r("LayerHideSources").BLUR)}),!1})},e})();l.default=e}),98);
__d("LayerHideOnEscape",["CSS","Event","Keys","LayerHideSources"],(function(t,n,r,o,a,i,l){var e=(function(){function e(e){this._layer=e}var t=e.prototype;return t.enable=function(){var e=this;this._subscription=this._layer.subscribe("key",function(t,n){return e.handle(t,n)})},t.disable=function(){this._subscription!=null&&this._subscription.unsubscribe(),this._subscription=null},t.handle=function(t,n){if(r("Event").getKeyCode(n)===r("Keys").ESC&&!o("CSS").hasClass(this._layer.getRoot(),"hidden_elem"))return this._layer.hide(r("LayerHideSources").ESCAPE),!1},e})();Object.assign(e.prototype,{_subscription:null}),l.default=e}),98);
__d("LinkController",["DataStore","Event","Parent","removeFromArray","trackReferrer"],(function(t,n,r,o,a,i,l){var e,s="@@LinkController",u=[],c=[];function d(e){return u.push(e),{remove:function(){return r("removeFromArray")(u,e)}}}function m(e){return c.push(e),{remove:function(){return r("removeFromArray")(c,e)}}}function p(e){var t=e.getTarget(),n=o("Parent").byTag(t,"a");if(n instanceof HTMLAnchorElement){var a=f(n);if(!(a==null||a.trim()===""||h(t)||o("DataStore").get(n,s)||a.endsWith("#"))){var i=r("Event").listen(n,"click",function(e){r("trackReferrer")(n,a),!n.rel&&(!n.target||n.target==="_self")&&!g(e)&&_(n,e)});o("DataStore").set(n,s,i)}}}function _(e,t){u.concat(c).every(function(n){return n(e,t)===!1?(t.prevent(),!1):!0})}function f(e){if(e&&!e.rel){var t=e.getAttribute("href");if(t!=null){var n=t.match(/^(\w+):/);if(!n||n[1].match(/^http/i))return t}}return null}function g(e){return e.getModifiers().any||e.which!=null&&e.which!==1}function h(e){return e.nodeName==="INPUT"&&e.type==="file"}(e=r("Event")).listen(document.documentElement,"mousedown",p,e.Priority.URGENT),e.listen(document.documentElement,"keydown",p,e.Priority.URGENT),l.registerHandler=d,l.registerFallbackHandler=m}),98);
__d("PageTransitionPriorities",[],(function(t,n,r,o,a,i){var e=5,l=e+1,s=l+1;i.DEFAULT=e,i.LEFT_NAV=l,i.SOCIAL_SEARCH_DIALOG=s}),66);
__d("computeRelativeURI",["URI","isEmpty","isFacebookURI"],(function(t,n,r,o,a,i,l){var e,s;function u(e,t){if(!t)return e;if(t.charAt(0)=="/")return t;var n=e.split("/").slice(0,-1);return n[0],t.split("/").forEach(function(e){e==="."||(e===".."?n.length>1&&(n=n.slice(0,-1)):n.push(e))}),n.join("/")}function c(t,n){var o=new(e||(e=r("URI"))),a=new e(t),i=new e(n);if(i.getDomain()&&!r("isFacebookURI")(i))return n;var l=a,c=["Protocol","Domain","Port","Path","QueryData","Fragment"];return c.forEach(function(e){var t=e==="Path"&&l===a;t&&o.setPath(u(a.getPath(),i.getPath())),(s||(s=r("isEmpty")))(i["get"+e]())||(l=i),t||o["set"+e](l["get"+e]())}),o}l.default=c}),98);
__d("getReferrerURI",["ErrorGuard","URI","isFacebookURI"],(function(t,n,r,o,a,i,l){"use strict";var e,s;function u(){if(t.PageTransitions&&t.PageTransitions.isInitialized())return t.PageTransitions.getReferrerURI();var n=(e||(e=r("ErrorGuard"))).applyWithGuard(function(e){return(s||(s=r("URI"))).tryParseURI(e)},null,[document.referrer]);return n&&r("isFacebookURI")(n)?n:null}l.default=u}),98);
__d("PageTransitionsRegistrar",["invariant","DOMQuery","Form","LinkController","PageTransitionPriorities","Parent","URI","computeRelativeURI","getReferrerURI","goURI","requireDeferred","setTimeout","setTimeoutAcrossTransitions"],(function(t,n,r,o,a,i,l,s){var e,u=r("requireDeferred")("PageTransitions").__setRef("PageTransitionsRegistrar");r("setTimeout")(function(){u.onReady(function(e){e&&e._init&&e._init()})},0);var c=[],d=[],m={DELAY_HISTORY:"delay_history_PTR",registerHandler:function(t,n){t!=null||s(0,5202),n=n||o("PageTransitionPriorities").DEFAULT,c[n]||(c[n]=[]),c[n].push(t)},removeHandler:function(t,n){n=n||o("PageTransitionPriorities").DEFAULT;var e=-1;c[n]&&(e=c[n].indexOf(t)),e>-1&&c[n].splice(e,1)},registerCompletionCallback:function(t){d.push(t)},getMostRecentURI:y,getReferrerURI:r("getReferrerURI"),_getTransitionHandlers:function(){return c},_getCompletionCallbacks:function(){return d},_resetCompletionCallbacks:function(){d=[]},__onClick:f,__onSubmit:h},p=null;function _(e){p=e,r("setTimeoutAcrossTransitions")(function(){p=null},0)}function f(e){var t;if(p&&((t=p.getAttribute("href"))==null?void 0:t[0])!=="#"){if(!e.isDefaultPrevented()){g(p);var n=p.getAttribute("href");n&&r("goURI")(n)}e.kill()}}function g(e){var t=e.getAttribute("href")||"",n=r("computeRelativeURI")(y().getQualifiedURI().toString(),t).toString();t!=n&&e.setAttribute("href",n)}function h(t,n){var a=n,i=t.getTarget();if(!(o("Form").getAttribute(i,"rel")||o("Form").getAttribute(i,"target"))){var l=new(e||(e=r("URI")))(o("Form").getAttribute(i,"action")),s=r("computeRelativeURI")(y().toString(),l.toString());if(i.setAttribute("action",s.toString()),(o("Form").getAttribute(i,"method")||"GET").toUpperCase()=="GET"){var u=o("Form").serialize(i);a&&(o("DOMQuery").isNodeOfType(a,"input")&&a.type==="submit"||(a=o("Parent").byTag(a,"button")))&&a.name&&(u[a.name]=a.value),typeof s=="string"&&(s=new(e||(e=r("URI")))(s)),r("goURI")(s.addQueryData(u)),t.kill()}}}o("LinkController").registerFallbackHandler(_);function y(){if(t.PageTransitions&&t.PageTransitions.isInitialized())return t.PageTransitions.getMostRecentURI();var n=(e||(e=r("URI"))).getRequestURI(!1),o=n.getUnqualifiedURI(),a=new e(o).setFragment(""),i=o.getFragment();return i.charAt(0)==="!"&&a.toString()===i.substr(1)&&(o=a),o}var C=m;l.default=C}),98);
__d("LayerHideOnTransition",["LayerHideSources","PageTransitionsRegistrar"],(function(t,n,r,o,a,i,l){var e=(function(){function e(e){var t=this;this._handler=function(e){t._enabled&&t.isTransitionRelevant(e)&&t._layer.hide(r("LayerHideSources").TRANSITION),t._subscribe()},this._layer=e}var t=e.prototype;return t.enable=function(){this._enabled=!0,this._subscribed||setTimeout(this._subscribe.bind(this),0)},t.disable=function(){this._enabled=!1,r("PageTransitionsRegistrar").removeHandler(this._handler)},t.isTransitionRelevant=function(t){return!0},t._subscribe=function(){r("PageTransitionsRegistrar").registerHandler(this._handler),this._subscribed=!0},e})();Object.assign(e.prototype,{_enabled:!1,_subscribed:!1}),l.default=e}),98);
__d("LiveVideoPlayerDispatcher",["ExplicitRegistrationReactDispatcher"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(e){function t(t){var n;return n=e.call(this,t)||this,n.dispatch=n.dispatch.bind(n),n}return babelHelpers.inheritsLoose(t,e),t})(r("ExplicitRegistrationReactDispatcher")),s=new e({strict:!0});l.default=s}),98);
__d("LiveVideoPlayerActions",["LiveVideoPlayerDispatcher"],(function(t,n,r,o,a,i,l){function e(e,t){var n={type:"SET_IS_REWOUND",isRewound:t,vpc:e};r("LiveVideoPlayerDispatcher").dispatch(n)}function s(e){var t={type:"DISMISS_REWIND_COMMENT_OVERLAY",playerID:e};r("LiveVideoPlayerDispatcher").dispatch(t)}l.setIsRewound=e,l.dismissRewindCommentOverlay=s}),98);
__d("LiveVideoRewindTypedLogger",["Banzai","GeneratedLoggerUtils"],(function(t,n,r,o,a,i){"use strict";var e=(function(){function e(){this.$1={}}var t=e.prototype;return t.log=function(t){n("GeneratedLoggerUtils").log("logger:LiveVideoRewindLoggerConfig",this.$1,n("Banzai").BASIC,t)},t.logVital=function(t){n("GeneratedLoggerUtils").log("logger:LiveVideoRewindLoggerConfig",this.$1,n("Banzai").VITAL,t)},t.logImmediately=function(t){n("GeneratedLoggerUtils").log("logger:LiveVideoRewindLoggerConfig",this.$1,{signal:!0},t)},t.clear=function(){return this.$1={},this},t.getData=function(){return babelHelpers.extends({},this.$1)},t.updateData=function(t){return this.$1=babelHelpers.extends({},this.$1,t),this},t.setActionSequenceNumber=function(t){return this.$1.action_sequence_number=t,this},t.setDeviceid=function(t){return this.$1.deviceid=t,this},t.setEvent=function(t){return this.$1.event=t,this},t.setPositionAfter=function(t){return this.$1.position_after=t,this},t.setPositionBefore=function(t){return this.$1.position_before=t,this},t.setSessionID=function(t){return this.$1.session_id=t,this},t.setVideoDuration=function(t){return this.$1.video_duration=t,this},t.setVideoID=function(t){return this.$1.video_id=t,this},e})(),l={action_sequence_number:!0,deviceid:!0,event:!0,position_after:!0,position_before:!0,session_id:!0,video_duration:!0,video_id:!0};i.default=e}),66);
__d("LiveRewindUtils",["LiveVideoPlayerActions","LiveVideoRewindTypedLogger","uuidv4"],(function(t,n,r,o,a,i){"use strict";var e=5,l=new Map,s=250;function u(t){for(var n=0,r=0;r<t.length();r++)n+=t.end(r)-t.start(r);return n>e?n-e:0}function c(e,t){var n=e;if(t.length()<1)return 0;if(e<=0)return t.start(0);for(var r=0;r<t.length();r++){var o=t.end(r)-t.start(r);if(n<o)return t.start(r)+n;n-=o}return t.end(t.length()-1)}function d(e,t){var n=e;if(t.length()<1)return n;for(var r=0,o=0;o<t.length();o++){var a=t.start(o),i=a-r;if(n-=i,e<a){var l=a-e;return n+l}if(e<=t.end(o))return n;r=t.end(o)}return n}function m(e,t,n,r){if(n.length()<1)return 0;r==null&&(r=_(e,n)),e<n.start(r)&&(e=n.start(r)),e>n.end(r)&&(e=n.end(r));var o=e+t,a=n.end(n.length()-1),i=n.start(0);if(o<=i)return i;if(o>=a)return a;if(o>=n.start(r)&&o<=n.end(r))return o;if(o<n.start(r)){if(r<1)return i;var l=e-n.start(r),s=t+l,u=n.end(r-1);return m(u,s,n,r-1)}if(o>n.start(r)){if(r>=n.length()-1)return a;var c=n.end(r)-e,d=t-c,p=n.start(r+1);return m(p,d,n,r+1)}return 0}function p(t,n){n==null&&(n=e);var r=t.end(t.length()-1);return m(r,-1*n,t)}function _(e,t){if(t.length()<1)return 0;for(var n=0;n<t.length()-1;){if(e<t.end(n))return n;n++}return n}function f(e){var t=l.get(e);if(t==null){var r=n("uuidv4")();return l.set(e,{sessionID:r,currentSequenceNumber:0}),r}return t.sessionID}function g(e){var t=l.get(e);return t==null?(l.set(e,{sessionID:n("uuidv4")(),currentSequenceNumber:0}),0):++t.currentSequenceNumber}function h(e){var t=e.getSeekableRanges();if(t){var r=d(e.getCurrentTimePosition(),t),o=t.start(0);S(e,o),n("LiveVideoPlayerActions").setIsRewound(e,!0),v("go_to_beginning",e,r,null,0,null)}}function y(e){var t=e.getSeekableRanges();if(t){var r=e.getCurrentTimePosition(),o=d(r,t),a=m(r,-10,t);S(e,a),n("LiveVideoPlayerActions").setIsRewound(e,!0),v("back_button",e,o,null,null,a)}}function C(e){var t=e.getSeekableRanges();if(t){var r=e.getCurrentTimePosition(),o=d(r,t),a=m(r,10,t);S(e,a);var i=p(t);e.isState("playing")&&i-a<1&&n("LiveVideoPlayerActions").setIsRewound(e,!1),v("forward_button",e,o,null,null,a)}}function b(e){var t=e.getSeekableRanges();if(t){var r=e.getCurrentTimePosition(),o=d(r,t),a=t.end(t.length()-1);S(e,a),e.isState("paused")&&e.play("user_initiated"),n("LiveVideoPlayerActions").setIsRewound(e,!1),v("go_to_live",e,o,null,null,a)}}function v(e,t,r,o,a,i){var l=t.getSeekableRanges(),s=l?u(l):0;r==null&&o!=null&&l!=null&&(r=d(o,l)),a==null&&i!=null&&l!=null&&(a=d(i,l)),new(n("LiveVideoRewindTypedLogger"))().setEvent(e).setPositionBefore(r).setPositionAfter(a).setVideoDuration(s).setVideoID(t.getVideoID()).setSessionID(R.getLoggingSessionID(t.getVideoPlayerID())).setActionSequenceNumber(R.getLoggingSequenceNumber(t.getVideoPlayerID())).log()}function S(e,t){var n=e.getState()==="paused";e.pause("seek_initiated"),setTimeout(function(){e.seek(t),n||e.play("seek_initiated")},s)}var R={getSeekTime:m,getAbsolutePosition:c,getLiveHeadTimestamp:p,getLoggingSessionID:f,getLoggingSequenceNumber:g,getRelativePosition:d,getTotalDuration:u,goToBeginning:h,goToLive:b,logLiveRewindEvent:v,seekBack:y,seekForward:C,LIVE_HEAD_BUFFER_S:e};a.exports=R}),null);
__d("PopoverMenuInterface",["ArbiterMixin","emptyFunction","mixin"],(function(t,n,r,o,a,i){var e,l=(function(e){"use strict";function t(){return e.apply(this,arguments)||this}babelHelpers.inheritsLoose(t,e);var n=t.prototype;return n.done=function(){this.inform("done")},t})(n("mixin")(n("ArbiterMixin")));Object.assign(l.prototype,{getRoot:e=n("emptyFunction"),onShow:e,onHide:e,focusAnItem:e.thatReturnsFalse,blur:e,handleKeydown:e.thatReturnsFalse,destroy:e}),a.exports=l}),null);
__d("SimpleDrag",["ArbiterMixin","Event","SubscriptionsHandler","UserAgent_DEPRECATED","Vector","emptyFunction"],(function(t,n,r,o,a,i){function e(e){this.minDragDistance=0,this._subscriptions=new(n("SubscriptionsHandler")),this._subscriptions.addSubscriptions(n("Event").listen(e,"mousedown",this._start.bind(this)))}Object.assign(e.prototype,n("ArbiterMixin"),{setMinDragDistance:function(t){this.minDragDistance=t},destroy:function(){this._subscriptions.release()},_start:function(t){var e=this,r=!1,o=!0,a=null;if(this.inform("mousedown",t)&&(o=!1),this.minDragDistance)a=n("Vector").getEventPosition(t);else{r=!0;var i=this.inform("start",t);if(i===!0)o=!1;else if(i===!1){r=!1;return}}var l=n("UserAgent_DEPRECATED").ie()<9?document.documentElement:window,s=n("Event").listen(l,{selectstart:o?n("Event").prevent:n("emptyFunction"),mousemove:function(o){if(!r){var t=n("Vector").getEventPosition(o);if(a.distanceTo(t)<e.minDragDistance)return;if(r=!0,e.inform("start",o)===!1){r=!1;return}}e.inform("update",o)},mouseup:function(n){for(var t in s)s[t].remove();r?e.inform("end",n):e.inform("click",n)}});o&&t.prevent()}}),a.exports=e}),null);
__d("firstx",["invariant"],(function(t,n,r,o,a,i,l,s){"use strict";function e(e){for(var t of e)return t;s(0,1145)}l.default=e}),98);
__d("getScrollableAreaContainingNode",["DataStore","Parent"],(function(t,n,r,o,a,i){"use strict";function e(e){var t=n("Parent").byClass(e,"uiScrollableArea");return t?n("DataStore").get(t,"ScrollableArea"):null}a.exports=e}),null);
__d("ScrollableArea",["ArbiterMixin","BrowserSupport","CSS","CSSFade","DOM","DOMScroll","DataStore","Deferred","Event","FocusEvent","Run","Scroll","SimpleDrag","Style","SubscriptionsHandler","TimeSlice","UserAgent","Vector","clearTimeout","createCancelableFunction","emptyFunction","firstx","getScrollableAreaContainingNode","mixin","promiseDone","queryThenMutateDOM","requireDeferred","setTimeoutAcrossTransitions","throttle"],(function(t,n,r,o,a,i){var e=n("requireDeferred")("Animation").__setRef("ScrollableArea"),l=12,s=(function(t){"use strict";function r(e,r){var o;if(o=t.call(this)||this,o.adjustGripper=function(){var e=function(){n("queryThenMutateDOM")(function(){return o._needsGripper()},function(e){e&&(n("Style").set(o._gripper,"height",o._gripperHeight+"px"),o._slideGripper())}),o._throttledShowGripperAndShadows()};return e=n("TimeSlice").guard(e,"ScrollableArea adjustGripper",{propagationType:n("TimeSlice").PropagationType.ORPHAN}),e(),o},o._computeHeights=function(){o._containerHeight=o._elem.clientHeight,o._contentHeight=o._content.offsetHeight,o._trackHeight=o._track.offsetHeight,o._gripperHeight=Math.max(o._containerHeight/o._contentHeight*o._trackHeight,l)},o._showGripperAndShadows=function(){n("queryThenMutateDOM")(function(){return{needsGripper:o._needsGripper(),top:n("Scroll").getTop(o._wrap)>0,isScrolledToBottom:o.isScrolledToBottom()}},function(e){var t=e.needsGripper,r=e.top,a=e.isScrolledToBottom;n("CSS").conditionShow(o._gripper,t),n("CSS").conditionClass(o._elem,"contentBefore",r),n("CSS").conditionClass(o._elem,"contentAfter",!a)})},o._respondMouseMove=function(){if(!(!o._mouseOver||o._isFocussed)){var e=o._options.fade!==!1,t=o._mousePos,r=n("Vector").getElementPosition(o._track).x,a=n("Vector").getElementDimensions(o._track).x,i=Math.abs(r+a/2-t.x),l=n("BrowserSupport").hasPointerEvents()&&i<=10;l&&!o._trackIsHovered?(o._trackIsHovered=!0,n("CSS").addClass(o._elem,"uiScrollableAreaTrackOver"),o.throttledAdjustGripper()):!l&&o._trackIsHovered&&(o._trackIsHovered=!1,n("CSS").removeClass(o._elem,"uiScrollableAreaTrackOver")),e&&(i<25?o.showScrollbar({hideAfterDelay:!1}):!o._options.no_fade_on_hover&&!o._isFocussed&&o.hideScrollbar({hideAfterDelay:!0,shouldFade:!0}))}},!e)return babelHelpers.assertThisInitialized(o);if(r=r||{},o._elem=e,o._wrap=n("firstx")(n("DOM").scry(e,"div.uiScrollableAreaWrap")),o._body=n("firstx")(n("DOM").scry(o._wrap,"div.uiScrollableAreaBody")),o._content=n("firstx")(n("DOM").scry(o._body,"div.uiScrollableAreaContent")),o._track=n("firstx")(n("DOM").scry(e,"div.uiScrollableAreaTrack")),o._trackIsHovered=!1,o._isFocussed=!1,o._gripper=n("firstx")(n("DOM").scry(o._track,"div.uiScrollableAreaGripper")),o._options=r,o._throttledComputeHeights=n("throttle").withBlocking(o._computeHeights,250,o),o.throttledAdjustGripper=n("throttle").withBlocking(o.adjustGripper,250,o),o.throttledAdjustGripper=n("TimeSlice").guard(o.throttledAdjustGripper,"ScrollableArea throttledAdjustGripper",{propagationType:n("TimeSlice").PropagationType.ORPHAN}),o._throttledShowGripperAndShadows=n("throttle").withBlocking(o._showGripperAndShadows,250,o),o._throttledRespondMouseMove=n("throttle")(o._respondMouseMove,250,o),n("setTimeoutAcrossTransitions")(o.adjustGripper.bind(o),0),o._listeners=new(n("SubscriptionsHandler")),o._listeners.addSubscriptions(n("Event").listen(o._wrap,"scroll",o._handleScroll.bind(o)),n("Event").listen(e,"mousemove",o._handleMouseMove.bind(o)),n("Event").listen(o._track,"click",o._handleClickOnTrack.bind(o))),n("BrowserSupport").hasPointerEvents()&&o._listeners.addSubscriptions(n("Event").listen(e,"mousedown",o._handleClickOnTrack.bind(o))),r.fade!==!1){var a;(a=o._listeners).addSubscriptions.apply(a,[n("Event").listen(e,"mouseenter",o._handleMouseEnter.bind(o)),n("Event").listen(e,"mouseleave",o._handleMouseLeave.bind(o))].concat(o._attachFocusListeners(o._wrap)))}else n("BrowserSupport").hasPointerEvents()&&o._listeners.addSubscriptions(n("Event").listen(e,"mouseleave",function(){o._isFocussed||(o._trackIsHovered=!1,n("CSS").removeClass(e,"uiScrollableAreaTrackOver"))}));return(n("UserAgent").isEngine("WebKit")||n("UserAgent").isEngine("Blink"))&&o._listeners.addSubscriptions(n("Event").listen(e,"mousedown",function(){var t=n("Event").listen(window,"mouseup",function(){n("Scroll").getLeft(e)&&n("Scroll").setLeft(e,0),t.remove()})})),o._drag=o.initDrag(),n("DataStore").set(o._elem,"ScrollableArea",o),r.persistent||(o._destroy=n("createCancelableFunction")(o._destroy.bind(o)),r.runtime_site_is_comet||n("Run").onLeave(o._destroy)),r.shadow!==!1&&n("CSS").addClass(o._elem,"uiScrollableAreaWithShadow"),o}babelHelpers.inheritsLoose(r,t);var o=r.prototype;return o.getContentHeight=function(){return this._contentHeight},o.getElement=function(){return this._elem},o.initDrag=function(){var e=this,t=n("BrowserSupport").hasPointerEvents(),r=new(n("SimpleDrag"))(t?this._elem:this._gripper);return r.subscribe("start",function(o,a){if(!(a.which&&a.which===1||a.button&&a.button===1))return!1;var i=n("Vector").getEventPosition(a,"viewport");if(t){var l=e._gripper.getBoundingClientRect();if(i.x<l.left||i.x>l.right||i.y<l.top||i.y>l.bottom)return!1}a.stopPropagation(),e.inform("grip_start");var s=i.y,u=e._gripper.offsetTop;n("CSS").addClass(e._elem,"uiScrollableAreaDragging");var c=r.subscribe("update",function(t,r){var o=n("Vector").getEventPosition(r,"viewport").y-s;e._throttledComputeHeights();var a=e._contentHeight-e._containerHeight,i=u+o,l=e._trackHeight-e._gripperHeight;i=Math.max(Math.min(i,l),0);var c=i/l*a;n("Scroll").setTop(e._wrap,c)}),d=r.subscribe("end",function(){r.unsubscribe(c),r.unsubscribe(d),n("CSS").removeClass(e._elem,"uiScrollableAreaDragging"),e.inform("grip_end")})}),r},o._attachFocusListeners=function(t){var e=this,r={cleanupOnLeave:!this._options.runtime_site_is_comet},o;return[n("FocusEvent").listen(t,function(t){o&&(o.reject(),o=null),t?(o=new(n("Deferred")),n("promiseDone")(o.getPromise(),function(){e._isFocussed=!0,e._trackIsHovered=!0,n("queryThenMutateDOM")(null,function(){n("CSS").addClass(e._elem,"uiScrollableAreaTrackOver")}),e.showScrollbar({hideAfterDelay:!1}),o=null},function(){o=null})):(e._isFocussed=!1,e._mouseOver?e._respondMouseMove():(n("queryThenMutateDOM")(null,function(){n("CSS").removeClass(e._elem,"uiScrollableAreaTrackOver")}),e.hideScrollbar({hideAfterDelay:!1,shouldFade:!1})))},r),n("Event").listen(document.documentElement,"keyup",function(e){o&&o.resolve()})]},o._needsGripper=function(){return this._throttledComputeHeights(),this._gripperHeight<this._trackHeight},o._slideGripper=function(){var e=this;n("queryThenMutateDOM")(function(){return n("Scroll").getTop(e._wrap)/(e._contentHeight-e._containerHeight)*(e._trackHeight-e._gripperHeight)},function(t){n("Style").set(e._gripper,"top",t+"px")})},o.destroy=function(){this._destroy(),this._destroy.cancel&&this._destroy.cancel()},o._destroy=function(){this._listeners&&this._listeners.release(),this._elem&&n("DataStore").remove(this._elem,"ScrollableArea"),this._drag&&this._drag.destroy()},o._handleClickOnTrack=function(t){var e=n("Vector").getEventPosition(t,"viewport"),r=this._gripper.getBoundingClientRect();e.x<r.right&&e.x>r.left&&(e.y<r.top?this.setScrollTop(this.getScrollTop()-this._elem.clientHeight):e.y>r.bottom&&this.setScrollTop(this.getScrollTop()+this._elem.clientHeight),t.kill())},o._handleMouseMove=function(t){var e=this._options.fade!==!1;(n("BrowserSupport").hasPointerEvents()||e)&&(this._mousePos=n("Vector").getEventPosition(t),this._throttledRespondMouseMove())},o._handleScroll=function(t){this._needsGripper()&&this._slideGripper(),this.throttledAdjustGripper(),this._options.fade!==!1&&!this._isFocussed&&this.showScrollbar({hideAfterDelay:!0}),this.inform("scroll")},o._handleMouseLeave=function(t){this._mouseOver=!1,this._mousePos=n("Vector").getEventPosition(t),this._isFocussed||this.hideScrollbar({hideAfterDelay:!0,shouldFade:!0})},o._handleMouseEnter=function(t){this._mouseOver=!0,this._mousePos=n("Vector").getEventPosition(t),this._isFocussed||this.showScrollbar({hideAfterDelay:!0})},o.hideScrollbar=function(t){var e=this,r=t.hideAfterDelay,o=t.shouldFade;if(this._hideTimeout||!this._scrollbarVisible)return this;var a=function(){e._scrollbarVisible=!1,n("CSSFade").hide(e._track,{simple:!o,invisible:n("CSS").hasClass(e._track,"invisible_elem")})};return r?this._hideTimeout=n("setTimeoutAcrossTransitions")(function(){e._hideTimeout=null,a()},750):a(),this},o.pageDown=function(t,n){this._scrollPage(1,t,n)},o.pageUp=function(t,n){this._scrollPage(-1,t,n)},o._scrollPage=function(t,n,r){var e=t*this._containerHeight,o=this.getScrollHeight()-this._containerHeight,a=Math.max(0,Math.min(o,this.getScrollTop()+e));this.setScrollTop(a,n,r)},o.resize=function(){this._body.style.width&&(this._body.style.width="");var e=n("DOMScroll").getScrollbarSize();return e>0&&n("Style").set(this._body,"margin-right",-e+"px"),this},o.showScrollbar=function(t){var e=this,r=t.hideAfterDelay;return this._hideTimeout&&(n("clearTimeout")(this._hideTimeout),this._hideTimeout=null),this._scrollbarVisible?this:(this._scrollbarVisible=!0,n("queryThenMutateDOM")(null,function(){n("CSSFade").show(e._track,{duration:0,invisible:n("CSS").hasClass(e._track,"invisible_elem")}),e.throttledAdjustGripper(),r&&e.hideScrollbar({hideAfterDelay:!0,shouldFade:!e._options.no_fade_on_hover})}),this)},o.distanceToBottom=function(){this._computeHeights();var e=Math.round(n("Scroll").getTop(this._wrap));return this._contentHeight-(e+this._containerHeight)},o.isScrolledToBottom=function(){return this.distanceToBottom()<=0},o.isScrolledToTop=function(){return n("Scroll").getTop(this._wrap)===0},o.scrollToBottom=function(t,n){this.setScrollTop(this._wrap.scrollHeight,t,n)},o.scrollToTop=function(t,n){this.setScrollTop(0,t,n)},o.scrollIntoView=function(t,r,o){var e=this._wrap.clientHeight,a=t.offsetHeight,i=n("Scroll").getTop(this._wrap),l=i+e,s=this.getScrollOffsetForElement(t),u=s+a;return s<i||e<a?this.setScrollTop(s,r,{callback:o}):u>l?this.setScrollTop(i+(u-l),r,{callback:o}):(o&&o(),n("emptyFunction"))},o.getScrollOffsetForElement=function(t){for(var e=0;t!=null&&t!==this._wrap;)e+=t.offsetTop,t=t.offsetParent;return e},o.scrollElemToTop=function(t,n,r){this.setScrollTop(t.offsetTop,n,{callback:r})},o.poke=function(){var e,t=(e=n("Scroll")).getTop(this._wrap);return e.setTop(this._wrap,e.getTop(this._wrap)+1),e.setTop(this._wrap,e.getTop(this._wrap)-1),e.setTop(this._wrap,t),this._isFocussed?this:this.showScrollbar({hideAfterDelay:!1})},o.getClientHeight=function(){return this._wrap.clientHeight},o.getScrollTop=function(){return n("Scroll").getTop(this._wrap)},o.getScrollHeight=function(){return this._wrap.scrollHeight},o.setScrollTop=function(n,r,o){o===void 0&&(o={});var t;if(r!==!1){var a=e.getModuleIfRequired();a!=null?t=this._animatedSetScrollTop(a,n,o):this._simpleSetScrollTop(n,o)}else this._simpleSetScrollTop(n,o);return function(){t&&t.stop(),t=null}},o._simpleSetScrollTop=function(t,r){n("Scroll").setTop(this._wrap,t),r.callback&&r.callback()},o._animatedSetScrollTop=function(t,n,r){this._scrollTopAnimation&&this._scrollTopAnimation.stop();var e=r.duration||250,o=r.ease||t.ease.end;return this._scrollTopAnimation=new t(this._wrap).to("scrollTop",n).ease(o).duration(e).ondone(r.callback).go(),this._scrollTopAnimation},r.renderDOM=function(){var e,t=(e=n("DOM")).create("div",{className:"uiScrollableAreaContent"}),r=e.create("div",{className:"uiScrollableAreaBody"},t),o=e.create("div",{className:"uiScrollableAreaWrap scrollable"},r),a=e.create("div",{className:"uiScrollableArea native"},o);return{root:a,wrap:o,body:r,content:t}},r.fromNative=function(t,o){if(!(!n("CSS").hasClass(t,"uiScrollableArea")||!n("CSS").hasClass(t,"native"))){o=o||{},n("CSS").removeClass(t,"native");var e=n("DOM").create("div",{className:"uiScrollableAreaTrack"},n("DOM").create("div",{className:"uiScrollableAreaGripper"}));o.fade!==!1?(n("CSS").addClass(t,"fade"),n("CSS").addClass(e,"hidden_elem")):n("CSS").addClass(t,"nofade"),o.tabIndex!=null?(n("DOM").setAttributes(e,{tabIndex:o.tabIndex}),n("DOM").prependContent(t,e)):n("DOM").appendContent(t,e);var a=new r(t,o);return a.resize(),a}},r.getInstance=function(t){return n("getScrollableAreaContainingNode")(t)},r.poke=function(t){var e=r.getInstance(t);e&&e.poke()},r})(n("mixin")(n("ArbiterMixin")));a.exports=s}),null);
__d("Menu",["cx","BehaviorsMixin","CSS","DOM","DataStore","Event","Keys","Parent","PopoverMenuInterface","ScrollableArea","Style","SubscriptionsHandler","UserAgent","debounce"],(function(t,n,r,o,a,i,l,s){var e=500,u=(function(t){function n(o,a){var i;return i=t.call(this)||this,i._items=[],i._keysSoFar="",i._items=o.map(function(e){return n.buildItemFromData(e)}),i._config=a||{},i._theme=a.theme||{},i._subscriptions=new(r("SubscriptionsHandler")),i._clearKeysSoFarAfterDelay=r("debounce")(function(){i._keysSoFar=""},e),i}babelHelpers.inheritsLoose(n,t),n.buildItemFromData=function(t){return t.ctor?new t.ctor(t):new t.type(t.props)};var a=n.prototype;return a.addItem=function(t){this._addItem(t)},a.addItemBefore=function(t,n){this._addItem(t,n,!1)},a.addItemAfter=function(t,n){this._addItem(t,n,!0)},a._addItem=function(t,n,r){var e=this._items.indexOf(t);if(e>=0){var o=r?-1:1;if(this._items[e+o]==n)return;this._items.splice(e,1)}if(n){if(e=this._items.indexOf(n),e<0)throw new Error("reference item must already be in the menu");r&&e++,this._items.splice(e,0,t)}else this._items.push(t);this._root&&this._insertItem(t,n,r)},a.removeItem=function(t){var e=this._items.indexOf(t);e<0||(this._items.splice(e,1),this._root&&r("DOM").remove(t.getRoot()))},a.forEachItem=function(t){this._items.forEach(t)},a.getFocusedItem=function(){return this._focused},a.getItemAt=function(t){return this._items[t]||null},a.getRoot=function(){return this._root||this._render(),this._root},a.onShow=function(){this._config.maxheight&&(this._scrollableArea?this._scrollableArea.resize():this._scrollableArea=r("ScrollableArea").fromNative(this._scrollableElems.root,{fade:!0})),this.inform("show")},a.onHide=function(){this.blur(),this.inform("hide")},a.focusAnItem=function(t){return this._attemptFocus(t||0,1)},a.blur=function(){if(this._focused){var e=this._focused;this._focused.blur(),this._focused=null,this.inform("blur",{item:e})}},a.handleKeydown=function(t,n){if(!this._items.length)return!1;var e=this._items.indexOf(this._focused);switch(t){case r("Keys").UP:case r("Keys").DOWN:var o=t===r("Keys").UP,a=o?-1:1,i=o?this._items.length-1:0;return e===-1?this._attemptFocus(i,a):this._attemptFocus(e+a,a);case r("Keys").HOME:return this._attemptFocus(0,1);case r("Keys").END:return this._attemptFocus(this._items.length-1,-1);case r("Keys").SPACE:return this._items.indexOf(this._focused)!==-1?(this._handleItemClick(this._focused,n),!0):!1;case r("Keys").RIGHT:case r("Keys").LEFT:case r("Keys").INSERT:case r("Keys").DELETE:return!1;default:var l=this._findItemToFocus(t,e);return!!(l&&this._focusItem(l))}},a._findItemToFocus=function(t,n){var e=String.fromCharCode(t).toLowerCase();this._keysSoFar||(this._searchIndex=n,this._itemToFocus=this._focused||this._items[0]),this._keysSoFar+=e,this._clearKeysSoFarAfterDelay();var r=this._findMatchInRange(this._searchIndex+1,this._items.length);return r||(r=this._findMatchInRange(0,this._searchIndex)),this._itemToFocus=r||this._itemToFocus,this._itemToFocus},a._findMatchInRange=function(t,n){for(var e=t;e<n;e++){var r=this._items[e].getLabel();if(r&&r.toString().toLowerCase().indexOf(this._keysSoFar)===0)return this._items[e]}return null},a._render=function(){var e=this;this._ul=r("DOM").create("ul",{className:"_54nf"}),this._ul.setAttribute("role","menu"),this._items.forEach(function(t){e._insertItem(t,null)}),this._subscriptions.addSubscriptions(r("Event").listen(this._ul,"click",function(t){return e._handleClick(t)}),r("Event").listen(this._ul,"mouseover",function(t){return e._handleMouseOver(t)}),r("Event").listen(this._ul,"mouseout",function(t){return e._handleMouseOut(t)}));var t=this._ul;this._config.maxheight&&(this._scrollableElems=r("ScrollableArea").renderDOM(),r("DOM").setContent(this._scrollableElems.content,this._ul),t=this._scrollableElems.root,r("Style").set(this._scrollableElems.wrap,"max-height",this._config.maxheight+"px"));var n="_54nq"+(this._config.className?" "+this._config.className:"")+(this._theme.className?" "+this._theme.className:"");this._root=r("DOM").create("div",{className:n},r("DOM").create("div",{className:"_54ng"},t)),this._config.id&&this._root.setAttribute("id",this._config.id),this._config.testid&&this._root.setAttribute("data-testid",this._config.testid),this._config.behaviors&&this.enableBehaviors(this._config.behaviors),this.inform("rendered",this._root)},a._needsDefaultBehavior=function(t){if(t.isDefaultRequested&&t.isDefaultRequested()){var e=o("Parent").byTag(t.getTarget(),"a"),n=e&&e.getAttribute("href");return n&&n[0]!=="#"}return!1},a._handleClick=function(t){if(t.getTarget()===this._ul&&r("UserAgent").isBrowser("IE")){t.stop();return}if(!this._needsDefaultBehavior(t)){var e=this._getItemInstance(t.getTarget());if(e)return this._handleItemClick(e,t)}},a._handleItemClick=function(t,n){return this.inform("itemclick",{item:t,event:n}),t.shouldCloseOnClick()&&t.hasAction()&&this.done(),t.handleClick(n)},a._handleMouseOver=function(t){var e=this._getItemInstance(t.getTarget());e&&this._focusItem(e,!0)},a._handleMouseOut=function(t){var e=this._getItemInstance(t.getTarget());e&&this._focused===e&&this.blur()},a._insertItem=function(t,n,a){var e=t.getRoot();if(o("CSS").addClass(e,"__MenuItem"),o("DataStore").set(e,"MenuItem",t),n){var i=a?r("DOM").insertAfter:r("DOM").insertBefore;i(n.getRoot(),e)}else r("DOM").appendContent(this._ul,e)},a._attemptFocus=function(t,n){var e=this._items.length;if((t<0||t>=e)&&!this._focused)return!1;var r=(e+t%e)%e,o=this.getItemAt(r);return o===this._focused||this._focusItem(o)?!0:this._attemptFocus(r+n,n)},a._focusItem=function(t,n){return t&&t.focus(n)!==!1?(this._focused!==t&&(this.blur(),this._focused=t,this.inform("focus",{item:t,from_mouse_over:n})),!0):!1},a._getItemInstance=function(t){var e=o("Parent").byClass(t,"__MenuItem");return e?o("DataStore").get(e,"MenuItem"):null},a.destroy=function(){this._items.forEach(function(e){var t=e.getRoot(!0);t&&(o("DataStore").remove(t,"MenuItem"),e.destroy())}),this._subscriptions.release(),this.destroyBehaviors()},n})(r("PopoverMenuInterface"));Object.assign(u.prototype,r("BehaviorsMixin"),{_focused:null,_root:null}),l.default=u}),98);
__d("MenuItemInterface",["emptyFunction","react"],(function(t,n,r,o,a,i){var e,l=e||(e=n("react")),s=(function(e){"use strict";function t(){return e.apply(this,arguments)||this}babelHelpers.inheritsLoose(t,e);var n=t.prototype;return n.getRoot=function(t){return!this._root&&!t&&(this._root=this.render()),this._root},t})(l.Component);Object.assign(s.prototype,{_root:null,render:n("emptyFunction"),getAccessKey:n("emptyFunction"),getLabel:n("emptyFunction"),hasAction:n("emptyFunction").thatReturnsFalse,focus:n("emptyFunction").thatReturnsFalse,blur:n("emptyFunction").thatReturnsFalse,onShow:n("emptyFunction").thatReturnsFalse,handleClick:n("emptyFunction").thatReturnsFalse,shouldCloseOnClick:n("emptyFunction").thatReturnsTrue,destroy:n("emptyFunction")}),a.exports=s}),null);
__d("MenuItemBase",["cx","DOM","HTML","MenuItemInterface"],(function(t,n,r,o,a,i,l,s){var e=(function(e){function t(t){var n;return n=e.call(this)||this,n._ARIARole="menuitem",n._data=babelHelpers.extends({},t),n}babelHelpers.inheritsLoose(t,e);var n=t.prototype;return n.render=function(){var e="_54ni";this._data.className&&(e+=" "+this._data.className);var t={className:e,role:"presentation","data-testid":void 0};return Object.assign(t,this.__getAttributesFromData()),delete t["data-testid"],r("DOM").create("li",t,this._renderItemContent())},n._renderItemContent=function(){return r("HTML")(this._data.markup).getNodes()},n.__getAttributesFromData=function(){var e={};for(var t in this._data)(t.indexOf("data-")===0||t.indexOf("aria-")===0)&&(e[t]=this._data[t]);return e},t})(r("MenuItemInterface"));l.default=e}),98);
__d("MenuItem",["cx","CSS","DOM","MenuItemBase","ReactDOM","emptyFunction","joinClasses","react","setTimeout","vulture"],(function(t,n,r,o,a,i,l){var e,s=e||(e=n("react")),u=["href","rel","ajaxify","target","accesskey"];function c(e,t){var r={};u.forEach(function(e){t[e]&&(r[e]=t[e])}),n("DOM").setAttributes(e,r)}function d(e){n("vulture")("L3dzAeLx4qVbAk1CGh1ezQj0L50="),u.forEach(function(t){n("vulture")("4Y-rjCJtVHvzE06fQVkcrLf-SMA="),e.removeAttribute(t)})}var m=(function(e){"use strict";function t(t){var n;return n=e.call(this,t)||this,n._disabled=!!n._data.disabled,n._onclickHandler=n._data.onclick||n._data.onClick,n}babelHelpers.inheritsLoose(t,e);var r=t.prototype;return r.getValue=function(){return this._data.value},r.getLabel=function(){return this._data.label},r.getLink=function(){return n("vulture")("EsrM6PZUvQbnGj2bFd940AUdzbo="),this._data.href},r.getAccessKey=function(){n("vulture")("vWgxrmHNH5VQk9XuWLXHyQEia0o=");var e=this.getLabel();return e&&e.charAt(0)},r.focus=function(t){if(this.isDisabled()||!this._root.offsetParent||!this.hasAction()||this.isHoverDisabled())return!1;n("CSS").addClass(this._root,"_54ne"),n("CSS").addClass(this._root,"selected"),t||this._anchor.focus()},r.blur=function(){n("CSS").removeClass(this._root,"_54ne"),n("CSS").removeClass(this._root,"selected")},r.handleClick=function(t){return this.isDisabled()?!1:typeof this._onclickHandler=="function"?this._onclickHandler(t):!0},r.setOnClickHandler=function(t){this._onclickHandler=t},r._renderItemContent=function(){var e=this;if(this._anchor=n("DOM").create(this._data.renderas==="label"?"label":"a",{className:"_54nc"+(this._data.icon?" _54nu":"")}),this._data.children){var t=null;this._data.icon&&(t=s.cloneElement(this._data.icon,{className:n("joinClasses")(this._data.icon.props.className,"mrs")}));var r=s.jsx(s.Suspense,{fallback:null,children:s.jsxs("span",{children:[t,s.jsx("span",{className:"_54nh",children:this._data.children})]})});this._reactRoot=n("ReactDOM").createRoot(this._anchor),n("ReactDOM").flushSync(function(){e._reactRoot.render(r)}),this._data.label=this._anchor.innerText||this._anchor.textContent}else{var o=n("DOM").create("span",null,n("DOM").create("span",{className:"_54nh"},this._data.markup||this._data.label));this._data.icon&&n("DOM").prependContent(o,this._data.icon),n("DOM").setContent(this._anchor,o)}this._data.href||(this._data.href="#"),this.isDisabled()||c(this._anchor,this._data),n("DOM").setAttributes(this._anchor,this.__getAttributesFromData()),this._anchor.setAttribute("role",this._ARIARole);var a=this._data.title;return a&&this._anchor.setAttribute("title",a),this._anchor},r.isDisabled=function(){return this._disabled},r.isHoverDisabled=function(){return this._data.hoverdisabled},r.enable=function(){n("vulture")("Iub_VECdDHNOtjbr25HMBTEMhys="),this._root&&(c(this._anchor,this._data),n("CSS").removeClass(this._root,"_5arm")),this._disabled=!1},r.disable=function(){n("vulture")("i-Jr_4wyb_VEzmBrpUix7dZhkjE="),this._root&&(d(this._anchor),n("CSS").addClass(this._root,"_5arm")),this._disabled=!0},r.render=function(){var t=e.prototype.render.call(this);return this._disabled&&n("CSS").addClass(t,"_5arm"),t},r.destroy=function(){if(this._reactRoot!=null){var e=this._reactRoot;this._reactRoot=null,n("setTimeout")(function(){e.unmount()},0)}},t})(n("MenuItemBase"));Object.assign(m.prototype,{hasAction:n("emptyFunction").thatReturnsTrue}),a.exports=m}),null);
__d("MenuItemNoAction",["MenuItem"],(function(t,n,r,o,a,i,l){var e=(function(e){function t(){return e.apply(this,arguments)||this}babelHelpers.inheritsLoose(t,e);var n=t.prototype;return n.hasAction=function(){return!1},t})(r("MenuItem"));l.default=e}),98);
__d("MenuSelectableItem",["cx","CSS","DOM","MenuItem"],(function(t,n,r,o,a,i,l,s){var e=(function(e){function t(t){var n;return n=e.call(this,t)||this,n._selected=!1,n._ARIARole="menuitemcheckbox",n._selected=!!n._data.selected,n}babelHelpers.inheritsLoose(t,e);var n=t.prototype;return n.getIcon=function(){return this._data.icon},n.setIcon=function(t){r("DOM").replace(this._data.icon,t),this._data.icon=t},n.isSelected=function(){return this._selected},n.select=function(){if(this.isDisabled())return!1;o("CSS").addClass(this._root,"_54nd"),this._anchor.setAttribute("aria-checked","true"),this._selected=!0},n.deselect=function(){o("CSS").removeClass(this._root,"_54nd"),this._anchor.setAttribute("aria-checked","false"),this._selected=!1},n.render=function(){var t=e.prototype.render.call(this);return this._data.selected&&(o("CSS").addClass(t,"_54nd"),this._anchor.setAttribute("aria-checked","true")),t},t})(r("MenuItem"));l.default=e}),98);
__d("MenuTheme",["cx"],(function(t,n,r,o,a,i,l,s){var e="_569t";l.className=e}),98);
__d("PromiseResult",["Promise"],(function(t,n,r,o,a,i){"use strict";var e,l=(function(){function t(){var t=this;this.promise=new(e||(e=n("Promise")))(function(e,n){t.$1=e,t.$2=n})}var r=t.prototype;return r.resolve=function(t){this.$1(t)},r.reject=function(t){this.$2(t)},t})();i.default=l}),66);
__d("MqttFetchClient",["MqttEnv","MqttProtocolCodec","MqttUserName","MqttUtils","Promise","PromiseResult"],(function(t,n,r,o,a,i,l){"use strict";var e,s="fetch_pull",u="fetch_pull_finish",c="fetch_",d=6e4,m="action",p="chunked",_="send",f="true",g=5,h=20,y=10,C=5e3,b=typeof window!="undefined"?window:self,v=(function(){function t(){this.$1="",this.$2=o("MqttEnv").Env.getLoggerInstance(),this.$3=0,this.$4="",this.$5=new(r("MqttUserName"))("",0,1,"",0,!0),this.$6=function(){},this.$7=function(e){},this.$8=function(){},this.$9=function(e){},this.$10=0,this.$11=0,this.$12=0,this.$13=0,this.$14="Ready",this.$15=[],this.$16=[],this.$17=null,this.$18=!1,this.$19=0}t.isSupported=function(){return typeof b.fetch=="function"};var a=t.prototype;return a.run=function(t,n,r,a,i,l,s,u){var e=this;this.$1=o("MqttUtils").endpointWithSessionId(t,n),this.$3=n,this.$4=r,this.$5=a,this.$6=i,this.$7=l,this.$8=s,this.$9=u,o("MqttEnv").Env.setTimeout(function(){return e.$20()},0)},a.isTopicSupported=function(t){return!0},a.publish=function(t,n){return this.$21(t,n)},a.publishBinary=function(t,n){return this.$21(t,n)},a.$21=function(o,a){if(this.$14!=="ReceivingData")return this.$2.bumpCounter(c+"publish."+o+".invalidstate"),(e||(e=n("Promise"))).reject("not connected");this.$2.bumpCounter(c+"publish."+o+".publish");var t=new(r("PromiseResult")),i={topic:o,payload:a,promiseResult:t};return this.$15.push(i),this.$22(),t.promise},a.abort=function(){this.$6=function(){},this.$7=function(e){},this.$8=function(){},this.$9=function(e){}},a.$23=function(t){var e=this;t.forEach(function(t){e.$2.bumpCounter(c+"publish."+t.topic+".resolved"),t.promiseResult.resolve()}),this.$12+=t.length},a.$24=function(t,n){var e=this;t.forEach(function(t){e.$2.bumpCounter(c+"publish."+t.topic+".rejected"),t.promiseResult.reject(n)})},a.$25=function(t,n,r,o){var e=t.map(function(e){return e.topic}).join(",");this.$2.debugTrace("FetchClient","Fetch publish request failed. Publishes:"+e+", retry:"+r),this.$2.bumpCounter(c+"publish_request_failed"),this.$14!=="ReceivingData"||r===g?(this.$24(t,o),this.$18=!1,this.$2.bumpCounter(c+"publish_request_failed_final"),this.$22()):this.$26(t,n,r+1)},a.$27=function(t,n,r,o){if(!o.ok){if(this.$2.bumpCounter(c+"publish_request_failed.http."+o.status),o.status===409&&(this.$19++,this.$19>=y)){this.$2.bumpCounter(c+"409_reset"),this.$28(new Error("Too many 409 errors"));return}this.$25(t,n,r,this.$29(o));return}this.$2.bumpCounter(c+"publish_request_success");var e=t.map(function(e){return e.topic}).join(",");this.$2.debugTrace("FetchClient","Fetch publish request success. Publishes:"+e+", retry:"+r),this.$23(t),this.$18=!1,this.$22()},a.$22=function(){if(this.$14==="ReceivingData"&&!this.$18&&!(this.$15.length===0&&this.$16.length===0)){this.$18=!0;var e=this.$15.slice(0,h);this.$15=this.$15.slice(h,this.$15.length),this.$17!=null&&o("MqttEnv").Env.clearTimeout(this.$17),this.$17=null;var t=this.$16.slice(0,h);this.$16=this.$16.slice(h,this.$16.length),this.$26(e,t,0)}},a.$26=function(t,n,r){var e=this,a=t.map(function(e){return e.topic}).join(",");this.$2.debugTrace("FetchClient","Fetch publish request sent. Publishes:"+a+", retry:"+r);var i=o("MqttUtils").endpointWithExtraParameter(this.$1,m,_),l=t.map(function(e){return{topic:e.topic,payload:e.payload,qos:0,messageId:o("MqttEnv").Env.random()}}),s=this.$5.gen(this.$3,[],l,n);this.$2.bumpCounter(c+"publish_request"),o("MqttUtils").promiseDoneWithTimeout(b.fetch(i,{method:"POST",mode:"cors",cache:"no-cache",credentials:"include",referrer:"no-referrer",body:s,keepalive:!1}),function(o){return e.$27(t,n,r,o)},function(o){return e.$25(t,n,r,o)},d)},a.$30=function(t){var e=t.message;this.$2.debugTrace("FetchClient","Fetch request failed with error:"+e),this.$9(e),this.$31(!1,e),this.$2.bumpCounter(c+"error"),this.$14="Error"},a.$32=function(t){var e=this;this.$2.debugTrace("FetchClient","Fetch response data received");var n=o("MqttProtocolCodec").decodeByteMessages(new Uint8Array(t)),r=n.messages,a=r.filter(function(e){return e.messageType===o("MqttProtocolCodec").MESSAGE_TYPE.PINGREQ}),i=r.filter(function(e){return e.messageType===o("MqttProtocolCodec").MESSAGE_TYPE.PUBLISH}).map(function(t){if(!(t instanceof o("MqttProtocolCodec").WireMessage.Publish))return{};var n=t;return n.qos===1&&n.messageIdentifier!=null&&(e.$16.push(n.messageIdentifier),e.$17==null&&(e.$17=o("MqttEnv").Env.setTimeout(function(){e.$22()},C))),{topic:n.topic,payload:n.payloadMessage,qos:n.qos}});for(var l of i){var s;this.$2.bumpCounter(c+"response_"+((s=l.topic)!=null?s:"void"))}i&&i.length>0&&(this.$13+=i.length,this.$7(i)),a&&a.length>0&&this.$33()},a.$33=function(){this.$2.debugTrace("FetchClient","Got server ping request"),this.$2.bumpCounter(c+"ping")},a.$28=function(t){this.$2.debugTrace("FetchClient","Fetch request ended: "+t.toString()),this.$2.bumpCounter(c+"done"),this.$34(t.message),this.$8(),this.$14="Done"},a.$35=function(t,n,r){var e=this;if(r!=null)try{this.$32(r)}catch(e){this.$28(e),this.$2.bumpCounter(c+"dataDecodeException");return}if(n){this.$28(new Error("EOF"));return}o("MqttUtils").promiseDone(t.read(),function(n){var r=n.done,o=n.value;return e.$35(t,r,o)},function(t){return e.$28(t)})},a.$36=function(t){if(!t.ok){this.$2.bumpCounter(c+"error.http."+t.status),this.$30(this.$29(t));return}var e=t.body;if(!e){this.$30(new Error("Empty body"));return}var n=e.getReader();this.$6(),this.$2.bumpCounter(c+"success"),this.$31(!0,null),this.$11=Date.now(),this.$14="ReceivingData",this.$2.debugTrace("FetchClient","Fetch request success"),this.$35(n,!1,null)},a.$34=function(t){this.$2.eventLogPullFinish({pullEventName:u,sessionID:this.$3,duration:Date.now()-this.$11,errorMessage:t,publishReceived:this.$13,publishSent:this.$12})},a.$31=function(t,n){this.$2.eventLogPull({pullEventName:s,sessionID:this.$3,status:t,duration:Date.now()-this.$10,hostname:this.$1,errorMessage:n})},a.$20=function(){var e=this;if(this.$14==="Ready"){this.$2.debugTrace("FetchClient","Sending fetch request"),this.$2.bumpCounter(c+"request"),this.$10=Date.now();var t=o("MqttUtils").endpointWithExtraParameter(this.$1,p,f);o("MqttUtils").promiseDoneWithTimeout(b.fetch(t,{method:"POST",mode:"cors",cache:"no-cache",credentials:"include",referrer:"no-referrer",body:this.$4,keepalive:!1}),function(t){return e.$36(t)},function(t){return e.$30(t)},d)}},a.$29=function(t){return new Error("Http error, status="+t.status)},t})();l.default=v}),98);
__d("MqttLongPollingClient",["MqttEnv","MqttProtocolCodec","MqttUserName","Promise","XHRRequest","getCrossOriginTransport","getErrorSafe"],(function(t,n,r,o,a,i,l){"use strict";var e,s=12e4,u="simple_pull",c="longpolling_",d=(function(){function t(){this.$3="",this.$4=0,this.$2=o("MqttEnv").Env.getLoggerInstance(),this.$1="Ready",this.$5="",this.$6=new(r("MqttUserName"))("",0,1,"",0,!0),this.$7=function(){},this.$8=function(e){},this.$9=function(){},this.$10=function(e){},this.$11=0,this.$12=null,this.$13=new Set(["/t_ms","/messenger_sync_get_diffs","/messenger_sync_create_queue","/webrtc","/rtc_multi"])}var a=t.prototype;return a.run=function(t,n,r,o,a,i,l,s){this.$3=t,this.$4=n,this.$5=r,this.$6=o,this.$7=a,this.$8=i,this.$9=l,this.$10=s,this.$14(this.$5)},a.isTopicSupported=function(t){return this.$13.has(t)},a.publish=function(r,o){return(e||(e=n("Promise"))).reject("not supported")},a.publishBinary=function(r,o){return(e||(e=n("Promise"))).reject("not supported")},a.abort=function(){this.$12!=null&&this.$12.abort("Disconnected")},a.$15=function(t,n){this.$1!==t&&(this.$1=t,t==="Error"&&n!=null&&this.$10(n),this.$2.debugTrace("LongPollingClient","_changeStatus : "+t))},a.$16=function(t){if(this.$1==="RequestSend"){if(!t){this.$17("EmptyResponse",null);return}this.$7(),this.$2.bumpCounter(c+"success"),this.$18(!0,null),this.$15("ResponseReceived");var e=o("MqttProtocolCodec").decodeByteMessages(new Uint8Array(t)),n=e.messages.filter(function(e){return e instanceof o("MqttProtocolCodec").WireMessage.Publish}).map(function(e){if(e instanceof o("MqttProtocolCodec").WireMessage.Publish){var t=e;return{topic:t.topic,payload:t.payloadMessage,qos:t.qos}}else return{}});this.$8(n),this.$9()}},a.$17=function(t,n){var e=n!=null?n.message:"null";this.$2.debugTrace("LongPollingClient Error","Poll failed with error:"+t+", errorMsg:"+e),this.$18(!1,t+":"+e),this.$2.bumpCounter(c+"error."+t),this.$15("Error",t)},a.$18=function(t,n){this.$2.eventLogPull({pullEventName:u,sessionID:this.$4,status:t,duration:Date.now()-this.$11,hostname:this.$3,errorMessage:n})},a.$14=function(t){var e=this;if(!(this.$1!=="Ready"||this.$12)){this.$2.bumpCounter(c+"request");try{this.$11=Date.now(),this.$12=new(r("XHRRequest"))(this.$3).setResponseType("arraybuffer").setRawData(t).setTransportBuilder(r("getCrossOriginTransport").withCredentials).setResponseHandler(function(t){return e.$16(t)}).setNetworkFailureHandler(function(t){e.$17("Network",t)}).setErrorHandler(function(t){e.$17("Error",t)}).setAbortHandler(function(t){e.$17("Abort",null)}).setTimeoutHandler(function(){e.$17("Timeout",null)}).setTimeout(s).send(),this.$15("RequestSend")}catch(e){this.$17("Error",r("getErrorSafe")(e))}}},t})();l.default=d}),98);
__d("MqttLongPollingHookCollection",[],(function(t,n,r,o,a,i){"use strict";var e=(function(){function e(){this.$1=new Set}var t=e.prototype;return t.addHook=function(t){this.$1.add(t)},t.removeHook=function(t){this.$1.delete(t)},t.onPollRequestSent=function(){this.$1.forEach(function(e){e.onPollRequestSent()})},t.onPollRequestSuccess=function(){this.$1.forEach(function(e){e.onPollRequestSuccess()})},t.onPollResponse=function(t){this.$1.forEach(function(e){e.onPollResponse(t)})},t.onPollFinish=function(){this.$1.forEach(function(e){e.onPollFinish()})},t.onPollRequestFailed=function(t){this.$1.forEach(function(e){e.onPollRequestFailed(t)})},t.onPollShutdownAbort=function(){this.$1.forEach(function(e){e.onPollShutdownAbort()})},e})();i.default=e}),66);
__d("exponentialBackoff",["MqttEnv"],(function(t,n,r,o,a,i,l){function e(e,t){t===void 0&&(t=null);var n=null,r=0;function a(){for(var a=arguments.length,i=new Array(a),l=0;l<a;l++)i[l]=arguments[l];var s=function(){e.apply(t,i)};if(n===null){var u=Math.max(0,Math.pow(2,Math.min(r,6))*(1e3+o("MqttEnv").Env.random()*100)-2e3);n=o("MqttEnv").Env.setTimeout(function(){s(),n=null},u)}r++}return a.reset=function(){r=0,n!=null&&(o("MqttEnv").Env.clearTimeout(n),n=null)},a.isPending=function(){return n!=null},a}l.default=e}),98);
__d("MqttLongPollingRunner",["MqttEnv","MqttFetchClient","MqttLongPollingClient","MqttLongPollingHookCollection","MqttTypes","MqttUtils","MqttWebSocketUtils","Promise","exponentialBackoff","getErrorSafe"],(function(t,n,r,o,a,i,l){"use strict";var e,s=4,u=1e3,c=3e3,d="mqtt_should_longpoll",m="last_lp",p="yes",_="no",f=(function(){function t(e,t,n,a,i,l,s,u,c){var d=this;this.$23=function(){try{if(!d.$30())return;d.$5.debugTrace("LongPollingRunner","_startPollingIfNecessary called");var e=d.$31();d.$14=e;var t=d.$9(),n=d.$10(),a=t.filter(function(t){return e.isTopicSupported(t)}),i=n.filter(function(t){return e.isTopicSupported(t.topic)});if(a.length===0&&i.length===0){d.$5.debugTrace("LongPollingRunner","Poll skipped, nothing to do"),d.$14=null,o("MqttEnv").Env.setTimeout(function(){d.$23()},1e3);return}var l=o("MqttUtils").generateSessionId();e.run(d.$6,l,d.$7.gen(l,a,i),d.$7,function(){return d.$32()},function(e){return d.$33(e)},function(){return d.$34()},function(e){return d.$35(e)}),d.$19.onPollRequestSent();var s=a.join(","),u=i.map(function(e){return e.topic}).join(",");d.$5.debugTrace("LongPollingRunner","Making a poll request to "+d.$6+". SubscribedTopics:"+s+". Publishes:"+u)}catch(e){var c=r("getErrorSafe")(e);d.$5.logErrorWarn(c,"lp_js_error"),d.$11(new(o("MqttTypes")).MqttChannelError(!1,"js error lp",c)),d.$35("lp_js_error")}},this.$6=e,this.$7=t,this.$1=a,this.$2=0,this.$3=n,this.$4=o("MqttWebSocketUtils").hasWSSupport(),this.$5=o("MqttEnv").Env.getLoggerInstance(),this.$8=i,this.$9=l,this.$10=s,this.$11=u,this.$12=c,this.$13=!1,this.$14=null,this.$15="LPInactive",this.$16="NotSent",this.$17=0,this.$19=new(r("MqttLongPollingHookCollection")),this.$18=r("exponentialBackoff")(this.$23,this),this.$20=0,this.$21=_;var m=o("MqttEnv").Env.genGk(o("MqttEnv").MqttGkNames.mqtt_lp_use_fetch),p=r("MqttFetchClient").isSupported();m?this.$5.bumpCounter("fetch_gk_pass"):this.$5.bumpCounter("fetch_gk_fail"),p?this.$5.bumpCounter("fetch_api_supported"):this.$5.bumpCounter("fetch_api_not_supported"),this.$22=m&&p}var a=t.prototype;return a.addHook=function(t){this.$19.addHook(t)},a.start=function(){var e=this;this.$21=o("MqttEnv").Env.configRead(m,_),this.$5.debugTrace("LongPollingRunner","Runner loaded, last status "+this.$21),this.$20=Date.now(),this.$23(),o("MqttEnv").Env.setTimeout(function(){e.$23()},u+100),o("MqttEnv").Env.setTimeout(function(){e.$23()},c+100)},a.shutdown=function(){this.$5.debugTrace("LongPollingRunner","Shutdown called"),this.$14&&this.$14.abort(),this.$19.onPollShutdownAbort(),this.$14=null},a.canPublish=function(){return this.$15==="LPActive"&&this.$16==="ReceivingData"},a.publish=function(t,n,r){return this.$24(t,n)},a.publishBinary=function(t,n,r){return this.$24(t,n)},a.$24=function(r,a){return o("MqttEnv").Env.genGk(o("MqttEnv").MqttGkNames.mqtt_enable_publish_over_polling)&&this.$14&&this.$14.isTopicSupported(r)?typeof a=="string"?this.$14.publish(r,a):this.$14.publishBinary(r,a):(e||(e=n("Promise"))).reject()},a.onConnectAttempt=function(){},a.onConnectFailure=function(){this.$2++,this.$23()},a.onConnected=function(){},a.onConnectSuccess=function(){this.$1=!0,o("MqttEnv").Env.configWrite(m,null)},a.onConnectionLost=function(){},a.onConnectionDisconnect=function(){},a.onSubscribe=function(t){},a.onUnsubscribe=function(t){},a.onPublish=function(t){},a.onMessage=function(t){},a.onWSFatal=function(){this.$3=!0,this.$23()},a.getStatus=function(){return this.$15},a.getRequestStatus=function(){return this.$16},a.$25=function(t){t!==this.$15&&(this.$5.debugTrace("LongPollingRunner","status changed to "+t+" from "+this.$15),this.$15=t,this.$12(this.$15,this.$16))},a.$26=function(t){this.$22&&t!==this.$16&&(this.$5.debugTrace("LongPollingRunner","request status changed to "+t+" from "+this.$16),this.$16=t,this.$12(this.$15,this.$16))},a.$27=function(){this.$17=0},a.$28=function(){this.$17++,this.$17>=s&&this.$25("LPError")},a.$29=function(){var e,t=(e=o("MqttEnv")).Env.genGk(e.MqttGkNames.mqtt_lp_no_delay),n=e.Env.genGk(e.MqttGkNames.mqtt_ws_polling_enabled),r=e.Env.genGk(e.MqttGkNames.mqtt_fast_lp);if(this.$5.debugTrace("LongPollingRunner","_shouldPoll? pollNow:"+String(t)+" enabled:"+String(n)+" fastPoll:"+String(r)+" hasWSSupport:"+String(this.$4)+" hasWsSuccessBefore:"+String(this.$1)+" failureCount:"+this.$2+" wsFatal:"+String(this.$3)),!n)return!1;if(t)return this.$5.bumpCounter(d+".nd"),!0;if(!this.$4)return this.$5.bumpCounter(d+".na"),!0;if(this.$3)return this.$5.bumpCounter(d+".fatal"),!0;if(this.$1)return!1;if(r){var a=Date.now()-this.$20;if(this.$21===p){if(this.$2>=1)return!0;if(a>u)return this.$5.bumpCounter(d+".fastdelay"),!0}else if(a>c)return this.$5.bumpCounter(d+".regulardelay"),!0}return this.$2>=3?(this.$5.bumpCounter(d+".failure"),!0):!1},a.$30=function(){if(this.$14!=null)return!1;var e=this.$29();return!this.$13&&e&&(this.$5.bumpCounter("polling_kickin"),this.$13=!0,this.$25("LPActive"),this.$27()),this.$13&&!e&&(this.$5.bumpCounter("polling_stopped"),this.$13=!1,this.$25("LPInactive"),this.$27()),e},a.$31=function(){return this.$22?(this.$5.debugTrace("LongPollingRunner","Creating polling client using Fetch API"),new(r("MqttFetchClient"))):(this.$5.debugTrace("LongPollingRunner","Creating regular Polling client"),new(r("MqttLongPollingClient")))},a.$32=function(){this.$5.debugTrace("LongPollingRunner","Poll success"),this.$19.onPollRequestSuccess(),this.$18.reset(),this.$25("LPActive"),this.$27(),o("MqttEnv").Env.configWrite(m,p),this.$26("ReceivingData")},a.$33=function(t){var e=t.map(function(e){return e.topic}).join(",");this.$5.debugTrace("LongPollingRunner","Poll response received, message received:"+e);for(var n of t)this.$19.onPollResponse(n.topic),this.$8(n.topic,n.payload,n.qos)},a.$34=function(){this.$5.debugTrace("LongPollingRunner","Poll finish"),this.$19.onPollFinish(),this.$14&&this.$14.abort(),this.$14=null,this.$23(),this.$26("NotSent")},a.$35=function(t){this.$19.onPollRequestFailed(t),this.$14&&this.$14.abort(),this.$14=null,this.$18(),this.$28(),this.$26("NotSent")},t})();l.default=f}),98);
__d("NetworkConnectivityEffectiveType",["$InternalEnum"],(function(t,n,r,o,a,i){var e=n("$InternalEnum")({TYPE_SLOW_2G:"slow-2g",TYPE_2G:"2g",TYPE_3G:"3g",TYPE_4G:"4g",UNAVAILABLE:"unavailable"}),l=e;i.default=l}),66);
__d("Network",["$InternalEnum","NetworkConnectivityEffectiveType","mixInEventEmitter"],(function(t,n,r,o,a,i,l){var e=!0,s=t.navigator&&t.navigator.connection,u={0:"unknown",1:"ethernet",2:"wifi",3:"2g",4:"3g"},c=n("$InternalEnum")({Bluetooth:"bluetooth",Cellular:"cellular",Ethernet:"ethernet",None:"none",Wifi:"wifi",Wimax:"wimax",Other:"other",Unavailable:"unavailable",Unknown:"unknown"});function d(){return e}function m(t){t!=e&&(e=t,C.emit(t?"online":"offline"))}function p(){if(!d())return 0;var e=s==null?void 0:s.downlinkMax;if(typeof e=="number"&&Number.isFinite(e))return e;var t=s==null?void 0:s.downlink;return typeof t=="number"&&Number.isFinite(t)?t:null}function _(){if(!d())return 0;var e=s==null?void 0:s.rtt;return typeof e=="number"&&Number.isFinite(e)?e:null}function f(){return s!=null}function g(){var e=s?String(s.type):"0";return u[e]||e}function h(){var e,t=s==null?void 0:s.type;return(e=typeof t=="string"?c.cast(t):null)!=null?e:c.Unavailable}function y(){var e,t=s==null?void 0:s.effectiveType;return(e=typeof t=="string"?r("NetworkConnectivityEffectiveType").cast(t):null)!=null?e:"unavailable"}var C={NetworkConnectivityType:c,NetworkConnectivityEffectiveType:r("NetworkConnectivityEffectiveType"),getBandwidth:p,getEffectiveType:y,getType:h,getType_DEPRECATED_DO_NOT_USE:g,isOnline:d,setOnline:m,getRTT:_,containsNetworkInformation:f};r("mixInEventEmitter")(C,{online:!0,offline:!0}),t.addEventListener?(t.addEventListener("online",m.bind(null,!0)),t.addEventListener("offline",m.bind(null,!1))):t.attachEvent&&(t.attachEvent("online",m.bind(null,!0)),t.attachEvent("offline",m.bind(null,!1)));var b=C;l.default=b}),98);
__d("OnUseEffectMount.react",["react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=(e||(e=o("react"))).useEffect;function u(e){var t=o("react-compiler-runtime").c(2),n=e.callback,r;t[0]!==n?(r=[n],t[0]=n,t[1]=r):r=t[1],s(n,r)}l.default=u}),98);
__d("OnUseEffectUnmount.react",["react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=(e||(e=o("react"))).useEffect;function u(e){var t=o("react-compiler-runtime").c(3),n=e.callback,r,a;t[0]!==n?(r=function(){return n},a=[n],t[0]=n,t[1]=r,t[2]=a):(r=t[1],a=t[2]),s(r,a)}l.default=u}),98);
__d("PageTransitions",["cr:917439"],(function(t,n,r,o,a,i,l){l.default=n("cr:917439")}),98);
__d("PageTransitionsConfig.experimental",["cr:19572"],(function(t,n,r,o,a,i,l){"use strict";l.default=n("cr:19572")}),98);
__d("unionSets",[],(function(t,n,r,o,a,i){"use strict";function e(){for(var e=new Set,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var o of n)for(var a of o)e.add(a);return e}i.default=e}),66);
__d("PageTransitionsPersistentParams",["URI","lastx","react","unionSets","uniqueID"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=(s||(s=o("react"))).useEffect,c=new Set(["locale"]),d=c,m=new Map;function p(e){return u(function(){var t=r("uniqueID")();return m.set(t,d),h(e),function(){var e=r("lastx")(m),t=e[0],n=e[1];d=n,m.delete(t)}},[e])}function _(t){var n=new(e||(e=r("URI")))(t),o=e.getMostRecentURI().getQueryData();for(var a of Object.entries(o)){var i=a[0],l=a[1];d.has(i)&&n.addQueryData(i,l)}return n}function f(){return d}function g(e){d=new Set(e)}function h(e){d=r("unionSets")(d,new Set(e))}function y(){d=c}l.useAdditionalPersistentParams=p,l.appendToURI=_,l.get=f,l.set=g,l.add=h,l.reset=y}),98);
__d("escapeJSQuotes",[],(function(t,n,r,o,a,i){function e(e){return typeof e=="undefined"||e==null||!e.valueOf()?"":e.toString().replace(/\\/g,"\\\\").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\"/g,"\\x22").replace(/\'/g,"\\'").replace(/</g,"\\x3c").replace(/>/g,"\\x3e").replace(/&/g,"\\x26")}i.default=e}),66);
__d("PageTransitionsBlue",["fbt","invariant","Arbiter","BlueCompatBroker","BlueCompatRouter","Bootloader","DOMQuery","DOMScroll","Env","ErrorGuard","Event","FbtResultBase","HistoryManager","LayerHideOnEscape","PageHooks","PageTransitionsConfig.experimental","PageTransitionsPersistentParams","PageTransitionsRegistrar","ScriptPath","URI","Vector","areEqual","clickRefAction","escapeJSQuotes","ge","gkx","goOrReplace","isFacebookURI","isInIframe","react","setTimeout","uriIsRelativePath"],(function(t,n,r,o,a,i,l,s,u){var e,c,d,m,p,_=p||(p=o("react")),f=["cquick","ctarget","cquick_token","mh_","killabyte","tfc_","tfi_"],g={};function h(e,t){e&&(g[e.getUnqualifiedURI().toString()]=t)}function y(e){return g[e.getUnqualifiedURI().toString()]}function C(e){delete g[e.getUnqualifiedURI().toString()]}function b(){var e=o("PageTransitionsPersistentParams").get(),t={};return window.location.search.slice(1).split("&").forEach(function(n){var r=n.split("="),o=r[0],a=r[1],i=a===void 0?null:a;(f.some(function(e){return o.startsWith(e)})||e.has(o))&&(t[o]=i)}),t}var v=null,S=!1,R=new(e||(e=r("URI")))(""),L=null,E=new e,k=null,I=!1,T=!1,D=!1,x={isInitialized:function(){return S},init:function(t){n("BlueCompatRouter"),x._init(),t!=null&&o("PageTransitionsPersistentParams").add(t)},_init:function(){if(r("isInIframe")())return!1;if(S)return!0;var t=r("PageTransitionsRegistrar").getMostRecentURI();v=t,R=t,L=null,E=t;var n=(c||(c=r("ErrorGuard"))).applyWithGuard(function(t){return(e||(e=r("URI"))).tryParseURI(t)},null,[document.referrer]);k=document.referrer&&n&&r("isFacebookURI")(n)?n:null,S=!0;var o,a=(e||(e=r("URI"))).getRequestURI(!1);return a.getFragment().startsWith("/")?o=a.getFragment():o=t.toString(),r("HistoryManager").init().setCanonicalLocation("#"+o).registerURIHandler(x._historyManagerHandler),r("Event").listen(window,"scroll",function(){I||h(v,r("Vector").getScrollPosition())}),!0},registerHandler:r("PageTransitionsRegistrar").registerHandler,removeHandler:r("PageTransitionsRegistrar").removeHandler,getCurrentURI:function(n){return n===void 0&&(n=!1),x._init(),!v&&!n?new(e||(e=r("URI")))(R):new(e||(e=r("URI")))(v)},isTransitioning:function(){return x._init(),!v},getNextURI:function(){return x._init(),E},getNextReferrerURI:function(){return x._init(),L},getReferrerURI:function(){return x._init(),k},getMostRecentURI:function(){return x._init(),new(e||(e=r("URI")))(R)},go:function(n,o){if(o===void 0&&(o=!1),r("BlueCompatRouter").goFragment(n)){var t=new(e||(e=r("URI")))(n);if(x.restoreScrollPosition(t)){v=R=t;return}}r("BlueCompatRouter").go(n,o)||x.goBase(n,o)},goBase:function(n,o){o===void 0&&(o=!1),x._init();var t=b(),a=new(e||(e=r("URI")))(n).removeQueryData("quickling").addQueryData(t).getQualifiedURI();C(a),!o&&r("clickRefAction")("uri",{href:a.toString()},null,"INDIRECT"),x._loadPage(a,o,function(e){e?r("HistoryManager").go(a.toString(),!1,o):r("goOrReplace")(window.location,a,o)})},_historyManagerHandler:function(n){return n.charAt(0)!="/"?!1:(r("clickRefAction")("h",{href:n}),o("ScriptPath").getClickPointInfo()||o("ScriptPath").setClickPointInfo({click:"back"}),x._loadPage(new(e||(e=r("URI")))(n),!0,function(e){e||r("goOrReplace")(window.location,n,!0)}),!0)},_loadPage:function(n,a,i){if(new(e||(e=r("URI")))(n).getFragment()&&(d||(d=r("areEqual")))(new(e||(e=r("URI")))(n).setFragment("").getQualifiedURI(),new(e||(e=r("URI")))(v).setFragment("").getQualifiedURI())&&(r("Arbiter").inform("pre_page_fragment_transition",{from:new(e||(e=r("URI")))(v).getFragment(),to:new e(n).getFragment()}),x.restoreScrollPosition(n))){v=R=n,r("Arbiter").inform("page_fragment_transition",{fragment:new(e||(e=r("URI")))(n).getFragment()}),i==null||i(!0);return}var t;v&&(t=y(v));var l=function(){t&&v&&h(v,t),L=x.getMostRecentURI(),v=null,E=n,t&&o("DOMScroll").scrollTo(t,!1),I=!0;var e=x._handleTransition(n,a);i&&(e===r("PageTransitionsRegistrar").DELAY_HISTORY?r("setTimeout")(function(){return i(e)},0):i(e))},s=E;E=n;var u=r("PageHooks").runHooks("onbeforeleavehooks");E=s,u?x._warnBeforeLeaving(u,l):l()},_handleTransition:function(n,o){if(window.onbeforeleavehooks=void 0,T||!n.isSameOrigin()&&!r("uriIsRelativePath")(n))return!1;var e=r("PageTransitionsConfig.experimental").reloadOnBootloadError&&x._hasBootloadErrors();if(e)return!1;var a,i=t.AsyncRequest;i&&(a=i.getLastID()),r("Arbiter").inform("pre_page_transition",{from:x.getMostRecentURI(),to:n});for(var l=r("PageTransitionsRegistrar")._getTransitionHandlers(),s=l.length-1;s>=0;--s){var u=l[s];if(u)for(var c=u.length-1;c>=0;--c){var d=u[c](n,o);if(d===!0||d===r("PageTransitionsRegistrar").DELAY_HISTORY){var m={sender:x,uri:n,id:a};try{r("Arbiter").inform("page_transition",m)}catch(e){}return d}else u.splice(c,1)}}return!1},disableTransitions:function(){T=!0},disableScrollAnimation:function(){D=!0},_hasBootloadErrors:function(){return r("Bootloader").getErrorCount()>0},unifyURI:function(){x._init(),v=R=E,k=L},transitionComplete:function(t){t===void 0&&(t=!1),x._init(),I=!1,x._executeCompletionCallbacks(),x.unifyURI(),t||v&&x.restoreScrollPosition(v);try{document.activeElement&&document.activeElement.nodeName==="A"&&document.activeElement.blur()}catch(e){}},_executeCompletionCallbacks:function(){var e=r("PageTransitionsRegistrar")._getCompletionCallbacks();e.length>0&&(r("PageTransitionsRegistrar")._resetCompletionCallbacks(),e.forEach(function(e){return e()}))},registerCompletionCallback:r("PageTransitionsRegistrar").registerCompletionCallback,rewriteCurrentURI:function(t,n){x._init();var e=r("PageTransitionsRegistrar")._getTransitionHandlers(),o=e.length||1,a=!1;r("PageTransitionsRegistrar").registerHandler(function(){if(t&&t.toString()==x.getMostRecentURI().getUnqualifiedURI().toString())return x.transitionComplete(),!0;a=!0},o),x.go(n,!0),e.length===o+1&&e[o].length===(a?0:1)||u(0,1302),e.length=o},_warnBeforeLeaving:function(t,n){r("Bootloader").loadModules(["DialogX","XUIDialogTitle.react","XUIDialogBody.react","XUIDialogButton.react","XUIDialogFooter.react","XUIGrayText.react"],function(e,o,a,i,l,u){var c=typeof t=="string"||t instanceof String||t instanceof r("FbtResultBase")?{body:t,highlightStay:!1,leaveButtonText:s._(/*BTDS*/"Leave This Page"),showCloseButton:!1,stayButtonText:s._(/*BTDS*/"Stay on This Page"),title:s._(/*BTDS*/"Leave Page?")}:t,d=_.jsx(o,{showCloseButton:c.showCloseButton,children:c.title}),m=c.highlightStay?[_.jsx(i,{action:"confirm",label:c.leaveButtonText},"confirm"),_.jsx(i,{action:"cancel",use:"confirm",label:c.stayButtonText,className:"autofocus"},"cancel")]:[_.jsx(i,{action:"cancel",label:c.stayButtonText},"cancel"),_.jsx(i,{action:"confirm",use:"confirm",label:c.leaveButtonText,className:"autofocus"},"confirm")],p=new e({width:450,addedBehaviors:[r("LayerHideOnEscape")]},_.jsxs("div",{children:[d,_.jsx(a,{children:_.jsx(u,{shade:"medium",size:"medium",children:c.body})}),_.jsx(l,{children:m})]}));p.subscribe("confirm",function(){p.hide(),n()}),p.show()},"PageTransitionsBlue")},restoreScrollPosition:function(n){var t=y(n);if(t)return o("DOMScroll").scrollTo(t,!1),!0;function a(e){if(!e)return null;var t="a[name='"+r("escapeJSQuotes")(e)+"']";return o("DOMQuery").scry(document.body,t)[0]||r("ge")(e)}var i=a(new(e||(e=r("URI")))(n).getFragment());if(i){var l=!D;return o("DOMScroll").scrollTo(i,l),!0}return!1}};!r("gkx")("21034")&&(m||(m=r("Env"))).isCQuick&&(o("BlueCompatBroker").init(),o("BlueCompatBroker").register("transitionpage",function(n){var a=new(e||(e=r("URI")))(o("BlueCompatBroker").getMessageEventString(n,"uri")),i=new e(window.location.href);if(a.removeQueryData("ctarget"),i.removeQueryData("ctarget"),i.toString()!==a.toString()){var l=t.AsyncRequest;l&&l.ignoreUpdate(),x.goBase(a,!1)}}));var $=x;t.PageTransitions=x,l.default=$}),226);
__d("PageTransitionsConfigJSModuleWrapper",["PageTransitionsConfig"],(function(t,n,r,o,a,i,l){"use strict";l.default=r("PageTransitionsConfig")}),98);
__d("Toggler",["csx","invariant","$","Arbiter","ArbiterMixin","CSS","ContextualThing","DOM","DataStore","Event","Focus","Keys","Parent","TabbableElements","TimeSlice","createArrayFromMixed","emptyFunction","ge","getContextualParent","getObjectValues","mixin","queryThenMutateDOM","setImmediate"],(function(t,n,r,o,a,i,l,s,u){var e=[],c,d=!1;function m(){d||(d=!0,r("setImmediate")(function(){d=!1}))}var p=function(){p=r("emptyFunction"),r("Event").listen(document.documentElement,"click",function(t){if(!d){var n=t.getTarget();e.forEach(function(e){e.clickedTarget=n,e.active&&!e.sticky&&!o("ContextualThing").containsIncludingLayers(e.getActive(),n)&&!e.inTargetFlyout(n)&&e.inActiveDialog()&&!e.isIgnoredByModalLayer(n)&&e.hide()})}},r("Event").Priority.URGENT)},_=(function(n){function a(){var t;return t=n.call(this)||this,t.active=null,t.togglers={},t.setSticky(!1),e.push(t),t.subscribe(["show","hide"],a.inform.bind(a)),p()||babelHelpers.assertThisInitialized(t)}babelHelpers.inheritsLoose(a,n);var i=a.prototype;return i.focusFirstTabbableDescendant=function(t,n){n.$Toggler2&&n.$Toggler2.cancel();var e=null;n.$Toggler2=r("queryThenMutateDOM")(function(){var n=t.querySelector(".uiToggleFlyout");n&&(e=o("TabbableElements").findFirst(n)||n)},function(){delete n.$Toggler2,e&&(e.tabIndex==null&&(e.tabIndex=-1),o("Focus").setWithoutOutline(e))})},i.show=function(t){var e=f(this,t),n=e.active;if(t!==n){n&&e.hide(),e.active=t,o("CSS").addClass(t,"openToggler");var a=r("DOM").scry(t,'a[rel="toggle"]');a.length>0&&a[0].getAttribute("data-target")&&o("CSS").removeClass(r("$")(a[0].getAttribute("data-target")),"toggleTargetClosed"),this.focusFirstTabbableDescendant(t,e),a.length>0&&(r("DOM").appendContent(t,e.getToggler("next")),r("DOM").prependContent(t,e.getToggler("prev"))),r("Event").listen(t,"keydown",function(n){if(r("Event").getKeyCode(n)===r("Keys").ESC&&e.isShown()){var o=r("DOM").scry(t,'a[rel="toggle"]')[0];o&&o.focus(),e.hide(),n.kill()}}),t.getAttribute("data-toggle-wc")&&(e.__continuation=r("TimeSlice").getGuardedContinuation("Toggler.show inform")),e.inform("show",e,"state")}},i.hide=function(t){var e=f(this,t);e.$Toggler2&&e.$Toggler2.cancel();var n=e.active;if(n&&(!t||t===n)){o("CSS").removeClass(n,"openToggler");var a=r("DOM").scry(n,'a[rel="toggle"]');a.length>0&&a[0].getAttribute("data-target")&&o("CSS").addClass(r("$")(a[0].getAttribute("data-target")),"toggleTargetClosed"),r("getObjectValues")(e.togglers).forEach(r("DOM").remove),n.getAttribute("data-toggle-wc")&&(e.__continuation=r("TimeSlice").getGuardedContinuation("Toggler.hide inform")),e.inform("hide",e,"state"),e.active=null}},i.toggle=function(t){var e=f(this,t);e.active===t?e.hide():e.show(t),m()},i.getActive=function(){return f(this).active},i.isShown=function(){return f(this).active&&o("CSS").hasClass(f(this).active,"openToggler")},a.isNodeShown=function(t){return o("CSS").hasClass(t,"openToggler")},i.inTargetFlyout=function(t){var e=g(this.getActive());return!!(e&&o("ContextualThing").containsIncludingLayers(e,t))},i.inActiveDialog=function(){var e=t.Dialog&&t.Dialog.getCurrent();return!e||r("DOM").contains(e.getRoot(),this.getActive())},i.isIgnoredByModalLayer=function(t){var e=!!o("Parent").bySelector(t,"._3qw"),n=!!o("Parent").bySelector(this.getActive(),"._3qw");return e&&!n},i.getToggler=function(t){var e=f(this);return e.togglers[t]||(e.togglers[t]=r("DOM").create("button",{className:"hideToggler",onfocus:function(){var t=r("DOM").scry(e.active,'a[rel="toggle"]')[0];t&&t.focus(),e.hide()},style:{right:t==="next"?"0":""}}),e.togglers[t].setAttribute("type","button")),this.togglers[t]},i.setSticky=function(t){var e=f(this);return t=t!==!1,t!==e.sticky&&(e.sticky=t,t?e.$Toggler1&&e.$Toggler1.unsubscribe():e.$Toggler1=r("Arbiter").subscribe("pre_page_transition",e.hide.bind(e,null))),e},i.setPrePageTransitionCallback=function(t){var e=f(this);e.$Toggler1&&e.$Toggler1.unsubscribe(),e.$Toggler1=r("Arbiter").subscribe("pre_page_transition",t)},a.bootstrap=function(t){var e=t.parentNode;e!=null||u(0,3354);var n=a.getInstance(e);n!=null||u(0,3355),n.toggle(e)},a.createInstance=function(t){var e=new a().setSticky(!0);return o("DataStore").set(t,"toggler",e),e},a.destroyInstance=function(t){var e=o("DataStore").get(t,"toggler");e&&e.$Toggler2&&e.$Toggler2.cancel(),o("DataStore").remove(t,"toggler")},a.getInstance=function(t){for(var e=t;e;){var n=o("DataStore").get(e,"toggler");if(n)return n;if(e instanceof Element){if(o("CSS").hasClass(e,"uiToggleContext"))return a.createInstance(e);if(o("CSS").hasClass(e,"uiToggleFlyout"))return a.createInstance(e).setSticky(!1)}e=r("getContextualParent")(e)}return c=c||new a},a.listen=function(t,n,o){return a.subscribe(r("createArrayFromMixed")(t),function(e,t){if(t.getActive()===n){if(t.__continuation){var r=t.__continuation;return delete t.__continuation,r(function(){return o(e,t)})}return o(e,t)}})},a.addListener=function(t){var e=t.events,n=t.element,r=t.handler;return a.listen(e,n,function(){return r.callback()})},a})(r("mixin")(r("ArbiterMixin")));Object.assign(_,_.prototype,r("ArbiterMixin")),Object.assign(_,{subscribe:(function(t){return function(n,o){return n=r("createArrayFromMixed")(n),n.includes("show")&&e.forEach(function(e){e.getActive()&&setTimeout(o.bind(null,"show",e),0)}),t(n,o)}})(_.subscribe.bind(_))});function f(e,t){return e instanceof _?e:_.getInstance(t)}function g(e){var t=r("DOM").scry(e,'a[rel="toggle"]');return t.length>0&&t[0].getAttribute("data-target")?r("ge")(t[0].getAttribute("data-target")):null}l.default=_}),98);
__d("curry",["bind"],(function(t,n,r,o,a,i,l){var e=r("bind")(null,r("bind"),null),s=e;l.default=s}),98);
__d("ParameterizedPopover",["invariant","ArbiterMixin","CSS","DataStore","Event","Focus","KeyStatus","Keys","LayerHideOnEscape","SubscriptionsHandler","Toggler","curry","mixin"],(function(t,n,r,o,a,i,l){n("Toggler").subscribe(["show","hide"],function(e,t){var r=t.getActive();r!=null||l(0,4839);var o=n("DataStore").get(r,"Popover");o&&(e==="show"?o.showLayer():o.hideLayer())});var e=(function(e){"use strict";function t(t,n,r,o){var a;return a=e.call(this)||this,typeof t=="string"&&typeof n=="string"?window.setTimeout(function(){var e=document.getElementById(t),i=document.getElementById(n);a.construct(e,i,r,o)}):a.construct(t,n,r,o),a}babelHelpers.inheritsLoose(t,e);var r=t.prototype;return r.construct=function(t,r,o,a){this._root=t,this._triggerElem=r,this._behaviors=o,this._config=a||{},this._disabled=!!this._config.disabled,this._listeners=new(n("SubscriptionsHandler")),this._disabled||((r.nodeName!=="A"||r.rel==null||r.rel.indexOf("toggle")<0)&&this._setupClickListener(),this._setupKeyListener(),this._setupFocusListener(),this._setupBlurListener()),r.setAttribute("role","button"),n("DataStore").set(t,"Popover",this),n("Toggler").getActive()===t&&this.showLayer()},r.ensureInit=function(){this._layer||this._init()},r.showLayer=function(){this._disabled||(this.ensureInit(),this._layer.show(),n("Toggler").show(this._root),n("CSS").addClass(this._root,"selected"),this.inform("show"))},r.getContentRoot=function(){return this._root},r.getLayer=function(){return this.ensureInit(),this._layer},r.hideLayer=function(){this.ensureInit(),this._layer.hide()},r.isShown=function(){return this._layer&&this._layer.isShown()},r.setLayerContent=function(t){this.ensureInit(),this._layer.setContent&&this._layer.setContent(t)},r._init=function(){var e=this._config.layer;e.enableBehaviors([n("LayerHideOnEscape")]),n("Toggler").createInstance(e.getRoot()).setSticky(!1),e.subscribe("hide",this._onLayerHide.bind(this)),this._behaviors&&e.enableBehaviors(this._behaviors),this._layer=e,this.inform("init",null,"persistent")},r._onLayerHide=function(){n("Toggler").hide(this._root),n("CSS").removeClass(this._root,"selected"),this.inform("hide"),n("KeyStatus").getKeyDownCode()===n("Keys").ESC&&n("Focus").set(this._triggerElem)},r.enable=function(){this._disabled&&(this._listeners.engage(),this._setupClickListener(),this._setupKeyListener(),this._setupFocusListener(),this._setupBlurListener(),this._disabled=!1)},r.disable=function(){this._disabled||(this.isShown()&&this.hideLayer(),this._listeners.release(),this._triggerElem.getAttribute("rel")==="toggle"&&this._triggerElem.removeAttribute("rel"),this._disabled=!0)},r._setupClickListener=function(){this._listeners.addSubscriptions(n("Event").listen(this._triggerElem,"click",n("curry")(n("Toggler").bootstrap,this._triggerElem)))},r._setupKeyListener=function(){this._listeners.addSubscriptions(n("Event").listen(this._triggerElem,"keydown",this._handleKeyEvent.bind(this)))},r._setupFocusListener=function(){this._listeners.addSubscriptions(n("Event").listen(this._triggerElem,"focus",this._handleFocusEvent.bind(this)))},r._setupBlurListener=function(){this._listeners.addSubscriptions(n("Event").listen(this._triggerElem,"blur",this._handleBlurEvent.bind(this)))},r._handleKeyEvent=function(t){if(!t.getModifiers().any){var e=n("Event").getKeyCode(t);switch(e){case n("Keys").DOWN:case n("Keys").UP:if(this._config.disableArrowKeyActivation)return;this.isShown()||n("Toggler").bootstrap(this._triggerElem);break;case n("Keys").RETURN:if(!this._config.enableActivationOnEnter)return;this.isShown()||n("Toggler").bootstrap(this._triggerElem);break;case n("Keys").SPACE:n("Toggler").bootstrap(this._triggerElem);break;default:return}t.prevent()}},r._handleFocusEvent=function(t){n("CSS").addClass(this._root,"focused")},r._handleBlurEvent=function(t){n("CSS").removeClass(this._root,"focused")},r.destroy=function(){this.disable(),n("DataStore").remove(this._root,"Popover")},t})(n("mixin")(n("ArbiterMixin")));Object.assign(e.prototype,{_layer:null}),a.exports=e}),null);
__d("PerfHelperUtils",["cx","DeferredComponent.react","JSResource","joinClasses","promiseDone","react"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u=e||(e=o("react"));function c(e){var t=e.children,n=e.className,o=e.color,a=e.tooltip;return u.jsx("div",{className:"_28hn"+(o==="red"?" _4ez8":"")+(o==="green"?" _28ho":""),children:u.jsx(r("DeferredComponent.react"),{"data-tooltip":a,deferredPlaceholder:u.jsx("div",{}),deferredComponent:function(t){r("promiseDone")(r("JSResource")("Tooltip.react").__setRef("PerfHelperUtils").load(),t)},className:r("joinClasses")("_5_my",n),tooltip:a,children:t})})}c.displayName=c.name+" [from "+i.id+"]";function d(e){var t=e.children,n=e.moduleId,r=e.timeLimitSecs,o=e.timeSpentSecs;return u.jsx(c,{color:"red",tooltip:"This bootloaded component has a red border\n          because "+n+"\n          took over "+r+" seconds ("+o+"s) to load",children:t})}d.displayName=d.name+" [from "+i.id+"]",l.BorderedComponent=c,l.SlowBootloadBorder=d}),98);
__d("PluginMessage",["Arbiter","CSS","DOM","DOMEventListener"],(function(t,n,r,o,a,i,l){var e="platform/plugins/checkbox_connect/access_token";function s(){o("DOMEventListener").add(window,"message",function(e){if(/\.facebook\.com$/.test(e.origin)&&u().test(e.data)){var t=JSON.parse(e.data.substring(24));"type"in t&&(t.type==="messenger_checkbox"?c(t):t.type==="customer_chat"&&m(t))}})}function u(){return new RegExp("^SOCIALPLUGIN_AUTH_POPUP:")}function c(t){var n=document.getElementById("plugin-MN-commerce-identity"),a=document.getElementById("plugin-MN-commerce-identity-profile-picture"),i=document.getElementById("plugin-MN-commerce-identity-profile-name"),l=document.getElementById("web-plugin-checkbox-form");n!=null&&a!=null&&i!=null&&l!=null&&(t.can_personalize===!0?(d(a,t.profile_photo),d(i,t.profile_name),o("CSS").show(n),d(l,t.checkbox),t.access_token!=null&&r("Arbiter").inform(e,t.access_token)):o("CSS").hide(n))}function d(e,t){var n=document.createElement("div");r("DOM").setContent(n,t);var o=n.firstChild;o!=null&&e.replaceWith(o)}function m(e){var t=window.require("Arbiter");"ArbiterData"in e?t.inform(e.ArbiterEvent,e.ArbiterData):t.inform(e.ArbiterEvent)}l.MESSENGER_CHECKBOX_ACCESS_TOKEN_LOGIN_ARBITER=e,l.listen=s}),98);
__d("Popover",["ContextualLayer","ContextualLayerHideOnScroll","DOM","ParameterizedPopover"],(function(t,n,r,o,a,i,l){var e=(function(e){function t(){return e.apply(this,arguments)||this}babelHelpers.inheritsLoose(t,e);var n=t.prototype;return n._init=function(){var t=new(r("ContextualLayer"))({context:this._triggerElem,position:"below",arrowDimensions:{offset:12,length:16},"data-testid":this._config["data-testid"]},r("DOM").create("div"));this._config.shouldDisableHideOnScroll||t.enableBehaviors([r("ContextualLayerHideOnScroll")]),this._config.layer=t,this._config.alignh&&t.setAlignment(this._config.alignh),this._config.layer_content&&t.setContent(this._config.layer_content),this._config.position&&t.setPosition(this._config.position),this._config.arrowDimensions&&t.setArrowDimensions(this._config.arrowDimensions),e.prototype._init.call(this)},n.destroy=function(){e.prototype.destroy.call(this),this._layer&&this._layer.destroy()},t})(r("ParameterizedPopover"));l.default=e}),98);
__d("VirtualCursorStatus",["UserAgent","cr:5662","emptyFunction","setImmediate"],(function(t,n,r,o,a,i){var e=null,l=null;function s(){l||(l=n("cr:5662").listen(window,"blur",function(){e=null,u()}))}function u(){l&&(l.remove(),l=null)}function c(t){e=t.keyCode,s()}function d(){e=null,u()}if(typeof window!="undefined"&&window.document&&window.document.createElement){var m=document.documentElement;if(m){if(m.addEventListener)m.addEventListener("keydown",c,!0),m.addEventListener("keyup",d,!0);else if(m.attachEvent){var p=m.attachEvent;p("onkeydown",c),p("onkeyup",d)}}}var _={isKeyDown:function(){return!!e},getKeyDownCode:function(){return e}},f=!1,g=!1,h=null,y=!1;function C(e){var t=new Set,r=_.isKeyDown(),o=e.clientX,a=e.clientY,i=e.isTrusted,l=e.offsetX,s=e.offsetY,u=e.mozInputSource,c=e.WEBKIT_FORCE_AT_MOUSE_DOWN,d=e.webkitForce,m=e.target,p=m.clientWidth,h=m.clientHeight;return o===0&&a===0&&l>=0&&s>=0&&g&&i&&u==null&&t.add("Chrome"),f&&g&&!r&&d!=null&&d<c&&l===0&&s===0&&u==null&&t.add("Safari-edge"),o===0&&a===0&&l<0&&s<0&&g&&u==null&&t.add("Safari-old"),!f&&!g&&!r&&i&&n("UserAgent").isBrowser("IE >= 10")&&u==null&&(o<0&&a<0?t.add("IE"):(l<0||l>p)&&(s<0||s>h)&&t.add("MSIE")),u===0&&i&&t.add("Firefox"),t}function b(){f=!0,n("setImmediate")(function(){f=!1})}function v(){g=!0,n("setImmediate")(function(){g=!1})}function S(e,t){h===null&&(h=C(e)),y=h.size>0;var r=e.target.getAttribute("data-accessibilityid")==="virtual_cursor_trigger";t(y,h,r),n("setImmediate")(function(){y=!1,h=null})}var R={isVirtualCursorTriggered:function(){return y},add:function(t,r){r===void 0&&(r=n("emptyFunction"));var e=function(t){return S(t,r)};t.addEventListener("click",e);var o=n("cr:5662").listen(t,"mousedown",b),a=n("cr:5662").listen(t,"mouseup",v);return{remove:function(){t.removeEventListener("click",e),o.remove(),a.remove()}}}};a.exports=R}),null);
__d("PopoverMenu",["ARIA","ArbiterMixin","BehaviorsMixin","Event","Focus","KeyStatus","Keys","SubscriptionsHandler","VirtualCursorStatus","mixin","setTimeout"],(function(t,n,r,o,a,i,l){var e=(function(e){function t(t,n,a,i){var l;return l=e.call(this)||this,l._popover=t,l._triggerElem=n,l._getInitialMenu=typeof a!="function"?function(){return a}:a,l._subscriptions=new(r("SubscriptionsHandler")),l._subscriptions.addSubscriptions(t.subscribe("init",function(){return l._onLayerInit()}),t.subscribe("show",function(){return l._onPopoverShow()}),t.subscribe("hide",function(){return l._onPopoverHide()}),r("Event").listen(l._triggerElem,"keydown",function(e){return l._handleKeyEventOnTrigger(e)}),o("VirtualCursorStatus").add(l._triggerElem,function(){return l._checkInitialFocus()})),i&&l.enableBehaviors(i),l}babelHelpers.inheritsLoose(t,e);var n=t.prototype;return n.getContentRoot=function(){return this._popover.getContentRoot()},n.setMenu=function(t){var e=this;this._menu&&this._menu!==t&&this._menu.destroy(),this._menu=t;var n=t.getRoot();this._popover.setLayerContent(n),t.subscribe("done",function(t){return e._onMenuDone(t)}),this._popoverShown&&this._menu.onShow(),o("ARIA").controls(this._triggerElem,n),this.inform("setMenu",null,"persistent")},n.setInitialFocus=function(t,n){n&&t.focusAnItem()},n.getPopover=function(){return this._popover},n.getTriggerElem=function(){return this._triggerElem},n.getInitialMenu=function(){return this._getInitialMenu()},n.getMenu=function(){return this._menu},n._onLayerInit=function(){var e=this;this._menu||this.setMenu(this._getInitialMenu()),this._popover.getLayer().subscribe("key",function(t,n){return e._handleKeyEvent(t,n)})},n._onPopoverShow=function(){this._menu&&this._menu.onShow(),this._checkInitialFocus(),this._popoverShown=!0},n._checkInitialFocus=function(){var e=o("KeyStatus").isKeyDown()||o("VirtualCursorStatus").isVirtualCursorTriggered();this._menu&&this.setInitialFocus(this._menu,e)},n._onPopoverHide=function(){this._menu&&this._menu.onHide(),this._popoverShown=!1},n._handleKeyEvent=function(t,n){if(n.target!==this._triggerElem){var e=r("Event").getKeyCode(n);if(e===r("Keys").TAB){this._popover.hideLayer(),o("Focus").set(this._triggerElem);return}if(!n.getModifiers().any){switch(e){case r("Keys").RETURN:this.getMenu().getFocusedItem()||this.inform("returnWithoutFocusedItem");return;default:if(e===r("Keys").SPACE&&n.target.type==="file")return;this._menu.handleKeydown(e,n)===!1&&(this._menu.blur(),this._menu.handleKeydown(e,n));break}n.prevent()}}},n._handleKeyEventOnTrigger=function(t){if(!this._isTypeaheadActivationDisabled){var e=r("Event").getKeyCode(t),n=String.fromCharCode(e).toLowerCase();/^\w$/.test(n)&&(this._popover.showLayer(),this._menu.blur(),this._menu.handleKeydown(e,t)===!1&&(this._popover.hideLayer(),o("Focus").set(this._triggerElem)))}},n.disableTypeaheadActivation=function(){this._isTypeaheadActivationDisabled=!0},n.enableTypeaheadActivation=function(){this._isTypeaheadActivationDisabled=!1},n._onMenuDone=function(t){var e=this;r("setTimeout")(function(){e._popover.hideLayer(),o("Focus").set(e._triggerElem)},0)},n.enable=function(){this._popover.enable()},n.disable=function(){this._popover.disable()},n.destroy=function(){this._subscriptions.release(),this._popover.destroy(),this._getInitialMenu().destroy(),this._menu&&this._menu.destroy()},t})(r("mixin")(r("ArbiterMixin"),r("BehaviorsMixin")));Object.assign(e.prototype,{_popoverShown:!1}),l.default=e}),98);
__d("PopoverMenu.react",["cx","CSS","DangerouslyAccessReactElementInternals_DO_NOT_USE_IN_NEW_CODE","InlineBlock.react","Popover","PopoverMenu","SubscriptionsHandler","areEqual","clearImmediate","joinClasses","react","setImmediate"],(function(t,n,r,o,a,i,l,s){var e,u,c=u||(u=o("react")),d=(function(t){function n(){for(var e,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return e=t.call.apply(t,[this].concat(r))||this,e.$3=null,e.$5=!1,e.$6=c.createRef(),e.$9=function(){e.$3&&(e.$3.release(),e.$3=null),e.$2.setMenu(e.$7(e.props.menu)),e.$8()},babelHelpers.assertThisInitialized(e)||babelHelpers.assertThisInitialized(e)}babelHelpers.inheritsLoose(n,t),n.getFirstChild=function(t){var e=t.children;return Array.isArray(e)?e[0]:e},n.getButtonSize=function(t){var e=n.getFirstChild(t);return e!=null&&e.props.size!=null?e.props.size:"medium"};var a=n.prototype;return a.componentDidMount=function(){var e=this.$6.current,t=e==null?void 0:e.firstChild;t!=null&&(o("CSS").addClass(t,"_p"),this.$1=new(r("Popover"))(e,t,this.props.layerBehaviors,{alignh:this.props.alignh,position:this.props.position,disabled:this.props.disabled,arrowDimensions:{offset:0,length:0},disableArrowKeyActivation:this.props.disableArrowKeyActivation,enableActivationOnEnter:this.props.enableActivationOnEnter,"data-testid":this.props["data-testid"],shouldDisableHideOnScroll:this.props.shouldDisableHideOnScroll}),this.$2=new(r("PopoverMenu"))(this.$1,t,this.$7(this.props.menu),this.props.behaviors),this.$5=!1),this.$8()},a.componentDidUpdate=function(n){if((e||(e=r("areEqual")))(n.menu,this.props.menu)||(r("clearImmediate")(this.$4),this.$4=r("setImmediate")(this.$9)),this.props.alignh!==n.alignh&&this.$2.getPopover().getLayer().setAlignment(this.props.alignh),this.props.disabled!==n.disabled&&(this.props.disabled?this.$2.disable():this.$2.enable()),this.props.position!==n.position){var t=this.$1.getLayer();t.setPosition(this.props.position)}},a.$8=function(){this.props.onReturnWithoutFocusedItem&&this.$3&&this.$2&&this.$3.addSubscriptions(this.$2.subscribe("returnWithoutFocusedItem",this.props.onReturnWithoutFocusedItem))},a.render=function(){var e=c.Children.map(this.props.children,function(e,t){return t===0?c.cloneElement(e,{className:r("joinClasses")(e.props.className,"_p")}):e}),t=babelHelpers.extends({},this.props);return delete t.onShow,delete t.onHide,delete t.alignh,delete t.position,delete t.layerBehaviors,delete t.behaviors,delete t.menu,delete t.disabled,delete t.disableArrowKeyActivation,delete t.enableActivationOnEnter,delete t.shouldDisableHideOnScroll,c.jsx(r("InlineBlock.react"),babelHelpers.extends({},t,{className:r("joinClasses")(this.props.className,"uiPopover"),rootRef:this.$6,disabled:null,children:e}))},a.componentWillUnmount=function(){this.$5||(r("clearImmediate")(this.$4),this.hidePopover(),this.$3&&(this.$3.release(),this.$3=null),this.$2&&this.$2.destroy(),this.$5=!0)},a.$7=function(t){var e=t.props,n=new(r("DangerouslyAccessReactElementInternals_DO_NOT_USE_IN_NEW_CODE")(t)).type(e);return this.$3=new(r("SubscriptionsHandler")),e.onItemClick&&this.$3.addSubscriptions(n.subscribe("itemclick",e.onItemClick)),e.onItemFocus&&this.$3.addSubscriptions(n.subscribe("focus",e.onItemFocus)),e.onItemBlur&&this.$3.addSubscriptions(n.subscribe("blur",e.onItemBlur)),e.onChange&&this.$3.addSubscriptions(n.subscribe("change",e.onChange)),this.props.onShow&&this.$3.addSubscriptions(this.$1.subscribe("show",this.props.onShow)),this.props.onHide&&this.$3.addSubscriptions(this.$1.subscribe("hide",this.props.onHide)),n},a.getMenu=function(){return this.$2.getMenu()},a.isShown=function(){return!!(this.$1&&this.$1.isShown())},a.showPopover=function(t){if(this.$1.showLayer(),t){var e=this.$2.getMenu();e.blur(),e.focusAnItem(t)}},a.hidePopover=function(){var e=this.$1;e&&e.isShown()&&e.hideLayer()},a.getFocusedItem=function(){var e=this.$2.getMenu();return e.getFocusedItem()},n})(c.Component);d.defaultProps={alignv:"middle",shouldDisableHideOnScroll:!1},l.default=d}),98);
__d("PresenceConfig",["PresenceConfigInitialData"],(function(t,n,r,o,a,i,l){var e=babelHelpers.extends({},r("PresenceConfigInitialData"));function s(t,n){return t in e?e[t]:n}l.get=s}),98);
__d("debounceAcrossTransitions",["debounce"],(function(t,n,r,o,a,i,l){function e(e,t,n){return r("debounce")(e,t,n,!0)}l.default=e}),98);
__d("PresenceStatus",["ArbiterMixin","AvailableListConstants","AvailableListInitialData","ChatVisibility","CurrentUser","FBIDCheck","LastActiveTimes","ODS","PresenceConfig","PresencePrivacy","ServerTime","createObjectFrom","debounceAcrossTransitions","gkx"],(function(t,n,r,o,a,i,l){var e;(e||(e=o("ODS"))).setEntitySample("presence",1e-4);var s={},u={},c={},d={},m=babelHelpers.extends({},r("ArbiterMixin")),p=r("debounceAcrossTransitions")(function(){return m.inform("change")},0);function _(e){var t,n=parseInt(e.topic.match(/\d+$/),10),a=parseInt(JSON.parse(e.payload).lat,10),i=Date.now()-a*1e3,l=o("PresenceConfig").get("active_cutoff")*1e3-i;o("LastActiveTimes").update((t={},t[n]=a,t)),m.checkPresence(n),m.get(n)===r("AvailableListConstants").ACTIVE&&(window.clearTimeout(d[n].timeout),d[n].timeout=window.setTimeout(function(){m.checkPresence(n)},l))}function f(e){return/^\d+$/.test(e)}Object.assign(m,{resetPresenceData:function(){s={},u={}},reset:function(){m.resetPresenceData(),c={}},get:function(n){if(n==r("CurrentUser").getID())return o("ChatVisibility").isOnline()?r("AvailableListConstants").ACTIVE:r("AvailableListConstants").OFFLINE;f(n)&&!o("FBIDCheck").isUser_deprecated(n)&&!d[n]&&((e||(e=o("ODS"))).bumpEntityKey(3303,"presence","page_subscribe"),d[n]={});var t=r("AvailableListConstants").OFFLINE;return n in s&&(t=s[n]),r("PresencePrivacy").allows(n)||(t=r("AvailableListConstants").OFFLINE),t},getCapabilities:function(t){var e=u[t];return e||0},isPlayingCanvasGameUser:function(t){return!!c[t]},getGroup:function(t){return t.some(function(e){return e==r("CurrentUser").getID()?!1:m.get(e)===r("AvailableListConstants").ACTIVE})?r("AvailableListConstants").ACTIVE:r("AvailableListConstants").OFFLINE},set:function(t,n,a,i,l,c){if(t==r("CurrentUser").getID())return!1;var e;if(n!=null){n=n==r("AvailableListConstants").ACTIVE?r("AvailableListConstants").ACTIVE:r("AvailableListConstants").OFFLINE;var d=m.get(t);if(e=d!=n,(e||n==r("AvailableListConstants").ACTIVE)&&o("FBIDCheck").isUser_deprecated(t)){var _;o("LastActiveTimes").update((_={},_[t]=o("ServerTime").get()/1e3,_))}s[t]=n}var f=!1;l!=null&&(f=m.getCapabilities(t)!=l,u[t]=l);var g=e||f;return g&&!c&&p(),g},setPlayingCanvasGameFriends:function(t){r("gkx")("22743")&&(c=r("createObjectFrom")(t))},getOnlineIDs:function(){var e,t=[];for(e in s)m.get(e)===r("AvailableListConstants").ACTIVE&&t.push(e);return t},getAllIDs:function(){return Object.keys(s)},getOnlineCount:function(){return m.getOnlineIDs().length},getPresenceStats:function(){var e=0,t=0,n=0;for(var o in s)switch(e+=1,m.get(o)){case r("AvailableListConstants").OFFLINE:t+=1;break;case r("AvailableListConstants").ACTIVE:n+=1;break;default:break}return{total:e,offline:t,active:n}},getAllDebugInfo:function(){var e={};for(var t in s)e[t]={p:s[t],vc:u[t]};return e},setMultiFromMQTT:function(t){var e={};Array.isArray(t)&&t.forEach(function(t){t.l&&(e[t.u]=t.l),m.set(t.u,t.p,!1,"mqtt",t.c,!0)}),o("LastActiveTimes").update(e),p()},setMultiChatproxy:function(t){var e={};for(var n in t){t[n].lat&&(e[n]=t[n].lat);var r=t[n].p;m.set(n,r,!1,"chatproxy",t[n].vc,!0)}o("LastActiveTimes").update(e),p()},setMultiActive:function(t,n){var e=!1;t.forEach(function(t){m.set(t,r("AvailableListConstants").ACTIVE,!1,n,null,!0)&&(e=!0)}),e&&p()},checkPresence:function(t){var e=!1,n=Math.ceil(Date.now()/1e3)-o("LastActiveTimes").get(t);m.set(t,n<o("PresenceConfig").get("active_cutoff")?r("AvailableListConstants").ACTIVE:r("AvailableListConstants").OFFLINE,!1,"pylon",null,!0)&&(e=!0),e&&p()}}),r("AvailableListInitialData").activeList&&r("AvailableListInitialData").activeList.length>0&&m.setMultiActive(r("AvailableListInitialData").activeList,"available_list_active"),r("AvailableListInitialData").playingNow&&r("AvailableListInitialData").playingNow.length>0&&m.setPlayingCanvasGameFriends(r("AvailableListInitialData").playingNow),r("AvailableListInitialData").lastActiveTimes&&Object.keys(r("AvailableListInitialData").lastActiveTimes).length>0&&o("LastActiveTimes").update(r("AvailableListInitialData").lastActiveTimes);var g=m;l.default=g}),98);
__d("XUIText.react",["cx","joinClasses","react"],(function(t,n,r,o,a,i,l,s){var e=["color","palette","type","size","weight","display","headingLevel","children"],u,c=u||(u=o("react")),d=(function(t){function n(){return t.apply(this,arguments)||this}babelHelpers.inheritsLoose(n,t);var o=n.prototype;return o.getAriaLevel=function(t,n){return t==="header1"?1:t==="header2"?2:t==="header3"?3:t==="header4"?4:n},o.render=function(){var t=this.props,n=t.color,o=t.palette,a=t.type,i=t.size,l=t.weight,s=t.display,u=t.headingLevel,d=t.children,m=babelHelpers.objectWithoutPropertiesLoose(t,e),p=(a==="serif"?"_5s6c":"")+(i==="small"?" _50f3":"")+(i==="medium"?" _50f4":"")+(i==="large"?" _50f5":"")+(i==="xlarge"||i==="xlarge_DEPRECATED"?" _50f6":"")+(l==="bold"?" _50f7":"")+(l==="normal"?" _5kx5":"")+(i==="display"?" _2iei":"")+(i==="header1"?" _2iej":"")+(i==="header2"?" _2iek":"")+(i==="header3"?" _2iel":"")+(i==="header4"?" _2iem":"")+(i==="body1"?" _2ien":"")+(i==="body2"?" _2ieo":"")+(i==="body3"?" _2iep":"")+(i==="meta1"?" _2ieq":"")+(n==="blueLink"?" _rzx":"")+(n==="white"?" _2ier":"")+(n==="highlight"?" _1hk0":"")+(n==="positive"?" _2iet":"")+(n==="negative"?" _2ieu":"")+(o!=="dark"&&n==="placeholder"?" _rzy":"")+(o!=="dark"&&n==="primary"?" _2iev":"")+(o!=="dark"&&n==="secondary"?" _2iex":"")+(o!=="dark"&&n==="disabled"?" _2iey":"")+(o==="dark"&&n==="primary"?" _2iez":"")+(o==="dark"&&n==="secondary"?" _2ie-":"")+(o==="dark"&&n==="disabled"?" _2ie_":""),_=this.getAriaLevel(i,u),f={};return _!=null&&(f={role:"heading","aria-level":""+_}),s==="block"?c.jsx("div",babelHelpers.extends({},m,f,{className:r("joinClasses")(this.props.className,p),children:d})):c.jsx("span",babelHelpers.extends({},m,f,{className:r("joinClasses")(this.props.className,p),children:d}))},n})(c.Component);d.defaultProps={type:"inherit",size:"inherit",weight:"inherit",display:"inline"},l.default=d}),98);
__d("ProfileTile.react",["Image.react","ImageBlock.react","Link.react","URI","XUIText.react","react"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=s||(s=o("react")),c=24,d="2712477385668128|b429aeb53369951d411e1cae8e810640",m=(function(t){function n(){return t.apply(this,arguments)||this}babelHelpers.inheritsLoose(n,t);var o=n.prototype;return o.render=function(){var t=this.props.size||c,n=this.props.imageProps&&this.props.imageProps.src||"https://graph.facebook.com/"+(this.props.id||"")+"/picture?width="+t+"&height="+t+"&access_token="+d,o=this.props.imageProps&&this.props.imageProps.href||"/"+(this.props.id||""),a=null;this.props.shouldShowProfileCardOnHover&&(a=new(e||(e=r("URI")))("/ajax/hovercard/user.php").setQueryData({id:this.props.id}));var i=this.props.desc?u.jsx(r("XUIText.react"),babelHelpers.extends({display:"block"},this.props.descProps,{children:this.props.desc})):null,l=u.jsx("span",babelHelpers.extends({},this.props.titleProps,{children:this.props.name}));this.props.shouldNameLinkToProfile&&(l=u.jsx(r("Link.react"),babelHelpers.extends({"data-hovercard":a},this.props.titleProps,{href:this.props.titleProps&&this.props.titleProps.href||"/"+(this.props.id||""),children:this.props.name})));var s=this.props.image||(this.props.size&&this.props.imageProps&&!this.props.imageProps.height&&this.props.imageProps&&!this.props.imageProps.width?u.jsx(r("Image.react"),babelHelpers.extends({height:this.props.size,src:n,width:this.props.size},this.props.imageProps)):u.jsx(r("Image.react"),babelHelpers.extends({src:n},this.props.imageProps))),m=this.props.shouldImageLinkToProfile?u.jsx(r("Link.react"),{href:o,children:s}):s;return u.jsxs(r("ImageBlock.react"),babelHelpers.extends({},this.props.tileProps,{children:[m,u.jsxs("div",{children:[l,i]})]}))},n})(u.Component);m.defaultProps={shouldShowProfileCardOnHover:!0,shouldNameLinkToProfile:!0},l.default=m}),98);
__d("ReactAbstractContextualDialog",["ContextualDialog","ContextualDialogArrow","ContextualDialogKeepInViewport","LayerAutoFocus","LayerHideOnBlur","LayerHideOnEscape","LayerRefocusOnHide","ReactDOM_DEPRECATED","prop-types"],(function(t,n,r,o,a,i){var e={createSpec:function(t){var e;return{displayName:t.displayName,propTypes:{position:(e=n("prop-types")).oneOf(["above","below","left","right"]),alignment:e.oneOf(["left","center","right"]),offsetX:e.number,offsetY:e.number,width:e.number,autoFocus:e.bool,focusContextOnHide:e.bool,arrowBehavior:e.func,behaviors:e.object,shown:e.bool,context:e.object,contextRef:e.func,dialogRole:e.oneOf(["dialog","region","alert"]),hoverContext:e.object,hoverContextRef:e.func,hoverShowDelay:e.number,hoverHideDelay:e.number,hideOnBlur:e.bool,hideOnEscape:e.bool,insertParent:e.object,keepInViewport:e.bool,label:e.node,labelledBy:e.string,onBeforeHide:e.func,onLayerCreated:e.func,onToggle:e.func,hasActionableContext:e.bool,"data-testid":e.string},immutableProps:{modal:null},createLayer:function(r){var e=this.props.context||n("ReactDOM_DEPRECATED").findDOMNode_DEPRECATED(this.props.contextRef()),o=this.props.hoverContext||this.props.hoverContextRef&&n("ReactDOM_DEPRECATED").findDOMNode_DEPRECATED(this.props.hoverContextRef());this.isHoverContextSet=o!=null;var a=babelHelpers.extends({context:e,hoverContext:o,hoverShowDelay:this.props.hoverShowDelay,hoverHideDelay:this.props.hoverHideDelay,position:this.props.position,alignment:this.props.alignment,offsetX:this.props.offsetX,offsetY:this.props.offsetY,width:this.props.width,dialogRole:this.props.dialogRole,label:this.props.label,labelledBy:this.props.labelledBy,shouldSetARIAProperties:!this.props.hasActionableContext,arrowBehavior:this.props.arrowBehavior||n("ContextualDialogArrow"),addedBehaviors:this.enumerateBehaviors(this.props.behaviors),"data-testid":this.props["data-testid"]},t||{}),i=new(n("ContextualDialog"))(a,r);return this.props.onLayerCreated&&this.props.onLayerCreated(i),this.props.contextBounds&&i.setContextWithBounds(e,this.props.contextBounds),this.props.autoFocus!==!1&&i.enableBehavior(n("LayerAutoFocus")),this.props.hideOnBlur===!0&&i.enableBehavior(n("LayerHideOnBlur")),this.props.hideOnEscape===!0&&i.enableBehavior(n("LayerHideOnEscape")),this.props.focusContextOnHide===!1&&i.disableBehavior(n("LayerRefocusOnHide")),this.props.keepInViewport===!1&&i.disableBehavior(n("ContextualDialogKeepInViewport")),this.props.onBeforeHide&&(this._onBeforeHideSubscription=i.subscribe("beforehide",this.props.onBeforeHide)),this.props.insertParent&&i.setInsertParent(this.props.insertParent),i.conditionShow(this.props.shown),i},receiveProps:function(t,r){this.updateBehaviors(r.behaviors,t.behaviors);var e=t.context||t.contextRef&&n("ReactDOM_DEPRECATED").findDOMNode_DEPRECATED(t.contextRef());e&&(t.contextBounds?this.layer.setContextWithBounds(e,t.contextBounds):this.layer.setContext(e)),r.hideOnEscape!==t.hideOnEscape&&(t.hideOnEscape?this.layer.enableBehavior(n("LayerHideOnEscape")):this.layer.disableBehavior(n("LayerHideOnEscape"))),r.onBeforeHide!==t.onBeforeHide&&(this.layer.unsubscribe(this._onBeforeHideSubscription),this._onBeforeHideSubscription=this.layer.subscribe("beforehide",t.onBeforeHide)),this.layer.setPosition(t.position).setAlignment(t.alignment).setOffsetX(t.offsetX).setOffsetY(t.offsetY).setWidth(t.width),(!this.isHoverContextSet||t.shown!==void 0)&&this.layer.conditionShow(t.shown)}}}};a.exports=e}),null);
__d("ReactBrowserEventEmitter_DO_NOT_USE",["ReactDOM"],(function(t,n,r,o,a,i){"use strict";var e=n("ReactDOM").__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;a.exports=e.ReactBrowserEventEmitter}),null);
__d("fbjs/lib/ExecutionEnvironment",["ExecutionEnvironment"],(function(t,n,r,o,a,i){"use strict";var e;a.exports=e||(e=n("ExecutionEnvironment"))}),null);
__d("getVendorPrefixedEventName",["fbjs/lib/ExecutionEnvironment"],(function(t,n,r,o,a,i){"use strict";function e(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n["ms"+e]="MS"+t,n["O"+e]="o"+t.toLowerCase(),n}var l={animationend:e("Animation","AnimationEnd"),animationiteration:e("Animation","AnimationIteration"),animationstart:e("Animation","AnimationStart"),transitionend:e("Transition","TransitionEnd")},s={},u={};n("fbjs/lib/ExecutionEnvironment").canUseDOM&&(u=document.createElement("div").style,"AnimationEvent"in window||(delete l.animationend.animation,delete l.animationiteration.animation,delete l.animationstart.animation),"TransitionEvent"in window||delete l.transitionend.transition);function c(e){if(s[e])return s[e];if(!l[e])return e;var t=l[e];for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&n in u)return s[e]=t[n];return""}a.exports=c}),null);
__d("ReactTransitionEvents",["fbjs/lib/ExecutionEnvironment","getVendorPrefixedEventName"],(function(t,n,r,o,a,i){"use strict";var e=[];function l(){var t=n("getVendorPrefixedEventName")("animationend"),r=n("getVendorPrefixedEventName")("transitionend");t&&e.push(t),r&&e.push(r)}n("fbjs/lib/ExecutionEnvironment").canUseDOM&&l();function s(e,t,n){e.addEventListener(t,n,!1)}function u(e,t,n){e.removeEventListener(t,n,!1)}var c={addEndEventListener:function(n,r){if(e.length===0){window.setTimeout(r,0);return}e.forEach(function(e){s(n,e,r)})},removeEndEventListener:function(n,r){e.length!==0&&e.forEach(function(e){u(n,e,r)})}};a.exports=c}),null);
__d("object-assign",[],(function(t,n,r,o,a,i){a.exports=Object.assign}),null);
__d("create-react-class/factory",["fbjs/lib/invariant","fbjs/lib/warning","object-assign"],(function(t,n,r,o,a,i){"use strict";var e="mixins";function l(e){return e}var s;s={};function u(t,r,o){var a=[],i={mixins:"DEFINE_MANY",statics:"DEFINE_MANY",propTypes:"DEFINE_MANY",contextTypes:"DEFINE_MANY",childContextTypes:"DEFINE_MANY",getDefaultProps:"DEFINE_MANY_MERGED",getInitialState:"DEFINE_MANY_MERGED",getChildContext:"DEFINE_MANY_MERGED",render:"DEFINE_ONCE",componentWillMount:"DEFINE_MANY",componentDidMount:"DEFINE_MANY",componentWillReceiveProps:"DEFINE_MANY",shouldComponentUpdate:"DEFINE_ONCE",componentWillUpdate:"DEFINE_MANY",componentDidUpdate:"DEFINE_MANY",componentWillUnmount:"DEFINE_MANY",UNSAFE_componentWillMount:"DEFINE_MANY",UNSAFE_componentWillReceiveProps:"DEFINE_MANY",UNSAFE_componentWillUpdate:"DEFINE_MANY",updateComponent:"OVERRIDE_BASE"},s={getDerivedStateFromProps:"DEFINE_MANY_MERGED"},u={displayName:function(t,n){t.displayName=n},mixins:function(t,n){if(n)for(var e=0;e<n.length;e++)m(t,n[e])},childContextTypes:function(t,r){t.childContextTypes=n("object-assign")({},t.childContextTypes,r)},contextTypes:function(t,r){t.contextTypes=n("object-assign")({},t.contextTypes,r)},getDefaultProps:function(t,n){t.getDefaultProps?t.getDefaultProps=f(t.getDefaultProps,n):t.getDefaultProps=n},propTypes:function(t,r){t.propTypes=n("object-assign")({},t.propTypes,r)},statics:function(t,n){p(t,n)},autobind:function(){}};function c(e,t,n){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)}function d(e,t){var r=Object.prototype.hasOwnProperty.call(i,t)?i[t]:null;Object.prototype.hasOwnProperty.call(v,t)&&n("fbjs/lib/invariant")(r==="OVERRIDE_BASE","ReactClassInterface: You are attempting to override `%s` from your class specification. Ensure that your method names do not overlap with React methods.",t),e&&n("fbjs/lib/invariant")(r==="DEFINE_MANY"||r==="DEFINE_MANY_MERGED","ReactClassInterface: You are attempting to define `%s` on your component more than once. This conflict may be due to a mixin.",t)}function m(t,o){if(o){n("fbjs/lib/invariant")(typeof o!="function","ReactClass: You're attempting to use a component class or function as a mixin. Instead, just use a regular object."),n("fbjs/lib/invariant")(!r(o),"ReactClass: You're attempting to use a component as a mixin. Instead, just use a regular object.");var a=t.prototype,l=a.__reactAutoBindPairs;Object.prototype.hasOwnProperty.call(o,e)&&u.mixins(t,o.mixins);for(var s in o)if(Object.prototype.hasOwnProperty.call(o,s)&&s!==e){var c=o[s],m=Object.prototype.hasOwnProperty.call(a,s);if(d(m,s),Object.prototype.hasOwnProperty.call(u,s))u[s](t,c);else{var p=Object.prototype.hasOwnProperty.call(i,s),_=typeof c=="function",h=_&&!p&&!m&&o.autobind!==!1;if(h)l.push(s,c),a[s]=c;else if(m){var y=i[s];n("fbjs/lib/invariant")(p&&(y==="DEFINE_MANY_MERGED"||y==="DEFINE_MANY"),"ReactClass: Unexpected spec policy %s for key %s when mixing in component specs.",y,s),y==="DEFINE_MANY_MERGED"?a[s]=f(a[s],c):y==="DEFINE_MANY"&&(a[s]=g(a[s],c))}else a[s]=c}}}}function p(e,t){if(t)for(var r in t){var o=t[r];if(Object.prototype.hasOwnProperty.call(t,r)){var a=r in u;n("fbjs/lib/invariant")(!a,'ReactClass: You are attempting to define a reserved property, `%s`, that shouldn\'t be on the "statics" key. Define it as an instance property instead; it will still be accessible on the constructor.',r);var i=r in e;if(i){var l=Object.prototype.hasOwnProperty.call(s,r)?s[r]:null;n("fbjs/lib/invariant")(l==="DEFINE_MANY_MERGED","ReactClass: You are attempting to define `%s` on your component more than once. This conflict may be due to a mixin.",r),e[r]=f(e[r],o);return}e[r]=o}}}function _(e,t){n("fbjs/lib/invariant")(e&&t&&typeof e=="object"&&typeof t=="object","mergeIntoWithNoDuplicateKeys(): Cannot merge non-objects.");for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n("fbjs/lib/invariant")(e[r]===void 0,"mergeIntoWithNoDuplicateKeys(): Tried to merge two objects with the same key: `%s`. This conflict may be due to a mixin; in particular, this may be caused by two getInitialState() or getDefaultProps() methods returning objects with clashing keys.",r),e[r]=t[r]);return e}function f(e,t){return function(){var n=e.apply(this,arguments),r=t.apply(this,arguments);if(n==null)return r;if(r==null)return n;var o={};return _(o,n),_(o,r),o}}function g(e,t){return function(){e.apply(this,arguments),t.apply(this,arguments)}}function h(e,t){var n=t.bind(e);return n}function y(e){for(var t=e.__reactAutoBindPairs,n=0;n<t.length;n+=2){var r=t[n],o=t[n+1];e[r]=h(e,o)}}var C={componentDidMount:function(){this.__isMounted=!0}},b={componentWillUnmount:function(){this.__isMounted=!1}},v={replaceState:function(t,n){this.updater.enqueueReplaceState(this,t,n)},isMounted:function(){return!!this.__isMounted}},S=function(){};n("object-assign")(S.prototype,t.prototype,v);function R(e){var t=function(e,r,a){this.__reactAutoBindPairs.length&&y(this),this.props=e,this.context=r,this.refs={},this.updater=a||o,this.state=null;var i=this.getInitialState?this.getInitialState():null;n("fbjs/lib/invariant")(typeof i=="object"&&!Array.isArray(i),"%s.getInitialState(): must return an object or null",t.displayName||"ReactCompositeComponent"),this.state=i};t.prototype=new S,t.prototype.constructor=t,t.prototype.__reactAutoBindPairs=[],a.forEach(m.bind(null,t)),m(t,C),m(t,e),m(t,b),t.getDefaultProps&&(t.defaultProps=t.getDefaultProps()),n("fbjs/lib/invariant")(t.prototype.render,"createClass(...): Class specification must implement a `render` method.");for(var r in i)t.prototype[r]||(t.prototype[r]=null);return t}return R}a.exports=u}),null);
__d("create-react-class",["create-react-class/factory","react"],(function(t,n,r,o,a,i){"use strict";var e,l=e||(e=n("react"));if(typeof l=="undefined")throw Error("create-react-class could not find the React object. If you are using script tags, make sure that React is being loaded before create-react-class.");var s=new l.Component().updater;a.exports=n("create-react-class/factory")(l.Component,l.isValidElement,s)}),null);
__d("createReactClass_DEPRECATED",["create-react-class"],(function(t,n,r,o,a,i){"use strict";a.exports=n("create-react-class")}),null);
__d("fbjs/lib/CSSCore",["CSSCore"],(function(t,n,r,o,a,i){"use strict";a.exports=n("CSSCore")}),null);
__d("ReactCSSTransitionGroupChild",["ReactDOM","ReactTransitionEvents","createReactClass_DEPRECATED","fbjs/lib/CSSCore","prop-types","react"],(function(t,n,r,o,a,i){"use strict";var e,l=e||(e=n("react")),s=17,u=n("createReactClass_DEPRECATED")({displayName:"ReactCSSTransitionGroupChild",propTypes:{name:n("prop-types").oneOfType([n("prop-types").string,n("prop-types").shape({enter:n("prop-types").string,leave:n("prop-types").string,active:n("prop-types").string}),n("prop-types").shape({enter:n("prop-types").string,enterActive:n("prop-types").string,leave:n("prop-types").string,leaveActive:n("prop-types").string,appear:n("prop-types").string,appearActive:n("prop-types").string})]).isRequired,appear:n("prop-types").bool,enter:n("prop-types").bool,leave:n("prop-types").bool,appearTimeout:n("prop-types").number,enterTimeout:n("prop-types").number,leaveTimeout:n("prop-types").number},transition:function(t,r,o){var e=n("ReactDOM").findDOMNode(this);if(!e){r&&r();return}var a=this.props.name[t]||this.props.name+"-"+t,i=this.props.name[t+"Active"]||a+"-active",l=null,s=function(o){o&&o.target!==e||(clearTimeout(l),n("fbjs/lib/CSSCore").removeClass(e,a),n("fbjs/lib/CSSCore").removeClass(e,i),n("ReactTransitionEvents").removeEndEventListener(e,s),r&&r())};n("fbjs/lib/CSSCore").addClass(e,a),this.queueClassAndNode(i,e),o?(l=setTimeout(s,o),this.transitionTimeouts.push(l)):n("ReactTransitionEvents").addEndEventListener(e,s)},queueClassAndNode:function(t,n){this.classNameAndNodeQueue.push({className:t,node:n}),this.timeout||(this.timeout=setTimeout(this.flushClassNameAndNodeQueue,s))},flushClassNameAndNodeQueue:function(){this.isMounted()&&this.classNameAndNodeQueue.forEach(function(e){n("fbjs/lib/CSSCore").addClass(e.node,e.className)}),this.classNameAndNodeQueue.length=0,this.timeout=null},UNSAFE_componentWillMount:function(){this.classNameAndNodeQueue=[],this.transitionTimeouts=[]},componentWillUnmount:function(){this.timeout&&clearTimeout(this.timeout),this.transitionTimeouts.forEach(function(e){clearTimeout(e)}),this.classNameAndNodeQueue.length=0},componentWillAppear:function(t){this.props.appear?this.transition("appear",t,this.props.appearTimeout):t()},componentWillEnter:function(t){this.props.enter?this.transition("enter",t,this.props.enterTimeout):t()},componentWillLeave:function(t){this.props.leave?this.transition("leave",t,this.props.leaveTimeout):t()},render:function(){return l.Children.only(this.props.children)}});a.exports=u}),null);
__d("ReactTransitionChildMapping",["emptyFunction","react","vulture","warning"],(function(t,n,r,o,a,i){"use strict";var e,l=e||(e=n("react")),s=n("emptyFunction"),u={getChildMapping:function(t){if(!t)return t;var e={};return l.Children.toArray(t).forEach(function(t){var n=t.key,r=e[n]===void 0;r&&(e[n]=t)}),e},mergeChildMappings:function(t,n){t=t||{},n=n||{};function e(e){return Object.prototype.hasOwnProperty.call(n,e)?n[e]:t[e]}var r={},o=[];for(var a in t)Object.prototype.hasOwnProperty.call(n,a)?o.length&&(r[a]=o,o=[]):o.push(a);var i,l={};for(var s in n){if(Object.prototype.hasOwnProperty.call(r,s))for(i=0;i<r[s].length;i++){var u=r[s][i];l[r[s][i]]=e(u)}l[s]=e(s)}for(i=0;i<o.length;i++)l[o[i]]=e(o[i]);return l}};a.exports=u}),null);
__d("stringRefShim",["FBLogger"],(function(t,n,r,o,a,i,l){"use strict";var e="__reactShimRefs";function s(t,n){var o;if(typeof n=="string")o=n;else if(typeof n=="number"||typeof n=="boolean")o=""+n;else return n;if(t==null||t===window)return r("FBLogger")("react_www","string_ref_missing_instance").warn("stringRefShim called with invalid instance of window or null"),n;var a=t[e];a==null&&(a={},t[e]=a);var i=a[o];return i==null&&(i=function(n){t.refs[o]=n},a[o]=i),i}l.default=s}),98);
__d("ReactTransitionGroup",["FBLogger","ReactTransitionChildMapping","fbjs/lib/emptyFunction","react","stringRefShim"],(function(t,n,r,o,a,i){"use strict";var e,l=e||(e=n("react")),s=(function(e){function t(){for(var t,r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return t=e.call.apply(e,[this].concat(o))||this,t.currentlyTransitioningKeys={},t.keysToEnter=[],t.keysToLeave=[],t.state={children:n("ReactTransitionChildMapping").getChildMapping(t.props.children)},t.performEnter=function(e){t.currentlyTransitioningKeys[e]=!0;var r=t.refs[e];if(r==null){n("FBLogger")("react","ReactTransitionGroup.performEnter").addMetadata("REACT_FLIGHT","KEY",e).addMetadata("REACT_FLIGHT","ERROR_MESSAGE",JSON.stringify(t.currentlyTransitioningKeys)).mustfix("Component is undefined during performEnter transition");return}r.componentWillEnter?r.componentWillEnter(t.$2.bind(babelHelpers.assertThisInitialized(t),e)):t.$2(e)},t.performLeave=function(e){t.currentlyTransitioningKeys[e]=!0;var r=t.refs[e];if(r==null){n("FBLogger")("react","ReactTransitionGroup.performLeave").addMetadata("REACT_FLIGHT","KEY",e).addMetadata("REACT_FLIGHT","ERROR_MESSAGE",JSON.stringify(t.currentlyTransitioningKeys)).mustfix("Component is undefined during performLeave transition");return}r.componentWillLeave?r.componentWillLeave(t.$3.bind(babelHelpers.assertThisInitialized(t),e)):t.$3(e)},babelHelpers.assertThisInitialized(t)||babelHelpers.assertThisInitialized(t)}babelHelpers.inheritsLoose(t,e);var r=t.prototype;return r.UNSAFE_componentWillMount=function(){this.currentlyTransitioningKeys={},this.keysToEnter=[],this.keysToLeave=[]},r.componentDidMount=function(){var e=this.state.children;for(var t in e)e[t]&&this.performAppear(t)},r.UNSAFE_componentWillReceiveProps=function(t){var e=n("ReactTransitionChildMapping").getChildMapping(t.children),r=this.state.children;this.setState({children:n("ReactTransitionChildMapping").mergeChildMappings(r,e)});var o;for(o in e){var a=r&&Object.prototype.hasOwnProperty.call(r,o);e[o]&&!a&&!this.currentlyTransitioningKeys[o]&&this.keysToEnter.push(o)}for(o in r){var i=e&&Object.prototype.hasOwnProperty.call(e,o);r[o]&&!i&&!this.currentlyTransitioningKeys[o]&&this.keysToLeave.push(o)}},r.componentDidUpdate=function(){var e=this.keysToEnter;this.keysToEnter=[],e.forEach(this.performEnter);var t=this.keysToLeave;this.keysToLeave=[],t.forEach(this.performLeave)},r.performAppear=function(t){this.currentlyTransitioningKeys[t]=!0;var e=this.refs[t];if(e==null){n("FBLogger")("react","ReactTransitionGroup.performAppear").addMetadata("REACT_FLIGHT","KEY",t).addMetadata("REACT_FLIGHT","ERROR_MESSAGE",JSON.stringify(this.currentlyTransitioningKeys)).mustfix("Component is undefined during performAppear transition");return}e.componentWillAppear?e.componentWillAppear(this.$1.bind(this,t)):this.$1(t)},r.$1=function(t){var e=this.refs[t];e.componentDidAppear&&e.componentDidAppear(),delete this.currentlyTransitioningKeys[t];var r=n("ReactTransitionChildMapping").getChildMapping(this.props.children);(!r||!Object.prototype.hasOwnProperty.call(r,t))&&this.performLeave(t)},r.$2=function(t){var e=this.refs[t];e.componentDidEnter&&e.componentDidEnter(),delete this.currentlyTransitioningKeys[t];var r=n("ReactTransitionChildMapping").getChildMapping(this.props.children);(!r||!Object.prototype.hasOwnProperty.call(r,t))&&this.performLeave(t)},r.$3=function(t){var e=this.refs[t];e.componentDidLeave&&e.componentDidLeave(),delete this.currentlyTransitioningKeys[t];var r=n("ReactTransitionChildMapping").getChildMapping(this.props.children);r&&Object.prototype.hasOwnProperty.call(r,t)?this.performEnter(t):this.setState(function(e){var n=babelHelpers.extends({},e.children);return delete n[t],{children:n}})},r.render=function(){var e=[];for(var t in this.state.children){var r=this.state.children[t];r&&e.push(l.cloneElement(this.props.childFactory(r),{ref:n("stringRefShim")(this,t),key:t}))}var o=babelHelpers.extends({},this.props);delete o.transitionLeave,delete o.transitionName,delete o.transitionAppear,delete o.transitionEnter,delete o.childFactory,delete o.transitionLeaveTimeout,delete o.transitionEnterTimeout,delete o.transitionAppearTimeout,delete o.component;var a=this.props.component;return l.jsx(a,babelHelpers.extends({},o,{children:e}))},t})(l.Component);s.displayName="ReactTransitionGroup",s.defaultProps={children:null,component:"span",childFactory:n("fbjs/lib/emptyFunction").thatReturnsArgument},a.exports=s}),null);
__d("ReactCSSTransitionGroup",["ReactCSSTransitionGroupChild","ReactTransitionGroup","react"],(function(t,n,r,o,a,i){"use strict";var e,l=e||(e=n("react")),s=(function(e){function t(){for(var t,r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return t=e.call.apply(e,[this].concat(o))||this,t.$1=function(e){return l.jsx(n("ReactCSSTransitionGroupChild"),{name:t.props.transitionName,appear:t.props.transitionAppear,enter:t.props.transitionEnter,leave:t.props.transitionLeave,appearTimeout:t.props.transitionAppearTimeout,enterTimeout:t.props.transitionEnterTimeout,leaveTimeout:t.props.transitionLeaveTimeout,children:e})},babelHelpers.assertThisInitialized(t)||babelHelpers.assertThisInitialized(t)}babelHelpers.inheritsLoose(t,e);var r=t.prototype;return r.render=function(){return l.jsx(n("ReactTransitionGroup"),babelHelpers.extends({},this.props,{childFactory:this.$1}))},t})(l.Component);s.displayName="ReactCSSTransitionGroup",s.defaultProps={transitionAppear:!1,transitionEnter:!0,transitionLeave:!0},a.exports=s}),null);
__d("ReactLayerCommon",["invariant","ReactDOM","SubscriptionsHandler","cr:1487782","emptyFunction","react","warning"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=n("react")),u=function(t){t.isPropagationStopped=n("emptyFunction").thatReturnsTrue},c=(function(e){function t(){return e.apply(this,arguments)||this}babelHelpers.inheritsLoose(t,e);var n=t.prototype;return n.render=function(){return s.jsx("div",{onClick:u,onBlur:u,onDoubleClick:u,onFocus:u,onKeyDown:u,onKeyPress:u,onKeyUp:u,onMouseDown:u,onMouseMove:u,onMouseUp:u,children:this.props.children})},t})(s.Component),d={makeInitialSubscriptions:function(t,r){var e=new(n("SubscriptionsHandler"));return r.onToggle&&(d.layerSubscribe(t,e,"show",function(){return r.onToggle(!0)}),d.layerSubscribe(t,e,"hide",function(){return r.onToggle(!1)})),r.onBlur&&d.layerSubscribe(t,e,"blur",function(e,t){return r.onBlur(t)}),r.onHide&&d.layerSubscribe(t,e,"runhide",function(e,t){return r.includeHideSource?r.onHide(t):r.onHide()}),e},layerSubscribe:function(t,r,o,a){var e=t.subscribe||t.addListener;r.addSubscriptions(e.call(t,o,function(e,t){if(n("cr:1487782")==null)a(e,t);else{var r=n("cr:1487782").isEnabled();r&&a(e,t)}}))},render:function(t,r){var e=n("ReactDOM").createPortal(s.jsx(c,{children:t}),r);return e===void 0&&n("ReactDOM").createPortal._isMockFunction&&(e=null),e},diffBehaviors:function(t,n,r){var e;for(e in t)t[e]&&!n[e]&&r.disableBehavior(t[e]);for(e in n){var o=t[e],a=n[e];if(o&&a){o===a||l(0,120,e);continue}o&&r.disableBehavior(o),a&&r.enableBehavior(a)}}};a.exports=d}),null);
__d("ReactLayer",["invariant","ExecutionEnvironment","OnUseEffectUnmount.react","ReactLayerCommon","createReactClass_DEPRECATED","emptyFunction","getObjectValues","react"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=e||(e=n("react")),c={componentDidMount:function(){this.layer||(this.layer=this.createLayer(this._layerContainer)),this.layer||l(0,2397),this.layerSubscriptions||(this.layerSubscriptions=n("ReactLayerCommon").makeInitialSubscriptions(this.layer,this.props)),this._resetBehaviors()},componentDidUpdate:function(t){this.receiveProps(this.props,t)},_onUnmount:function(){this.layerSubscriptions&&(this.layerSubscriptions.release(),this.layerSubscriptions=null),this.layer&&(this.layer.destroy(),this.layer=null)},_createLayerContainer:function(){this._layerContainer==null&&(this._layerContainer=document.createElement("div"))},render:function(){return(s||(s=n("ExecutionEnvironment"))).canUseDOM?(this._createLayerContainer(),u.jsxs(u.Fragment,{children:[u.jsx(n("OnUseEffectUnmount.react"),{callback:this._onUnmount}),n("ReactLayerCommon").render(this.props.children,this._layerContainer)]})):null},enumerateBehaviors:function(t){return t=this.getEffectiveBehaviors(t),n("getObjectValues")(t).filter(n("emptyFunction").thatReturnsArgument)},_resetBehaviors:function(){this._diffBehaviors({},this.props.behaviors)},updateBehaviors:function(t,n){this._diffBehaviors(t,n)},_diffBehaviors:function(t,r){t=this.getEffectiveBehaviors(t),r=this.getEffectiveBehaviors(r),n("ReactLayerCommon").diffBehaviors(t,r,this.layer)},getEffectiveBehaviors:function(t){return this.getDefaultEnabledBehaviors?babelHelpers.extends({},this.getDefaultEnabledBehaviors(),t):t||{}},layerSubscribe:function(t,r){n("ReactLayerCommon").layerSubscribe(this.layer,this.layerSubscriptions,t,r)}},d={createClass:function(t){return n("createReactClass_DEPRECATED")({mixins:[c,t]})}};a.exports=d}),null);
__d("SelectableMenuUtils",[],(function(t,n,r,o,a,i){var e={doesItemSupportSelect:function(t){return l(t)},isSelected:function(t){return l(t)&&t.isSelected()}};function l(e){return e.select&&e.deselect&&e.isSelected}a.exports=e}),null);
__d("SelectableMenu",["Menu","SelectableMenuUtils","createArrayFromMixed"],(function(t,n,r,o,a,i){var e=(function(e){"use strict";function t(){return e.apply(this,arguments)||this}babelHelpers.inheritsLoose(t,e);var r=t.prototype;return r.focusAnItem=function(){for(var t=0;t<this._items.length;t++)if(n("SelectableMenuUtils").isSelected(this._items[t])&&this._focusItem(this._items[t])!==!1)return!0;return e.prototype.focusAnItem.call(this)},r.setValue=function(t){this._root||this._render();var e=n("createArrayFromMixed")(t);this._items.forEach(function(t){n("SelectableMenuUtils").doesItemSupportSelect(t)&&(e.includes(t.getValue())?t.select():n("SelectableMenuUtils").isSelected(t)&&t.deselect())}),this.inform("change",this.getSelection())},r._handleItemClick=function(r,o){if(!n("SelectableMenuUtils").doesItemSupportSelect(r))return e.prototype._handleItemClick.call(this,r,o);var t=this.inform("itemclick",{item:r,event:o});if(!t){if(this._config.multiple){var a=n("SelectableMenuUtils").isSelected(r)?r.deselect():r.select();a!==!1&&this.inform("change",this.getSelection()),this._config.closeOnSelectWithMultiple&&this.done()}else n("SelectableMenuUtils").isSelected(r)||r.select()!==!1&&(this._items.forEach(function(e){n("SelectableMenuUtils").isSelected(e)&&e!==r&&e.deselect()}),this.inform("change",this.getSelection())),this.done();return r.handleClick(o)}},r.getSelection=function(){var e=[];return this._items.forEach(function(t){n("SelectableMenuUtils").isSelected(t)&&e.push({label:t.getLabel(),value:t.getValue(),item:t})}),this._config.multiple||(e=e[0]),e},t})(n("Menu"));a.exports=e}),null);
__d("ReactMenu",["cx","Menu","MenuItem","MenuItemNoAction","MenuSelectableItem","MenuTheme","SelectableMenu","joinClasses","react"],(function(t,n,r,o,a,i,l,s){var e,u=e||(e=o("react"));function c(e){var t=[];return u.Children.forEach(e,function(e){e&&t.push(e)}),t}function d(e){e!=null&&(e.isReactLegacyFactory={},e.type=e)}var m=(function(e){function t(t,n){var r=babelHelpers.extends({theme:o("MenuTheme"),maxheight:t?t.maxheight:null,className:t?t.className:null,testid:t?t["data-testid"]:null},n);return e.call(this,c(t.children),r)||this}return babelHelpers.inheritsLoose(t,e),t})(r("Menu"));d(m);var p=(function(e){function t(t,n){var a=babelHelpers.extends({className:r("joinClasses")("_57di",t?t.className:null),theme:o("MenuTheme"),multiple:t&&t.multiple,closeOnSelectWithMultiple:t&&t.closeOnSelectWithMultiple,maxheight:t?t.maxheight:null,testid:t?t["data-testid"]:null},n);return e.call(this,c(t.children),a)||this}return babelHelpers.inheritsLoose(t,e),t})(r("SelectableMenu"));d(p),m.SelectableMenu=p,d(r("MenuItem")),m.Item=r("MenuItem"),m.ItemNoAction=r("MenuItemNoAction"),d(r("MenuSelectableItem")),m.SelectableItem=r("MenuSelectableItem"),l.default=m}),98);
__d("ReactPropTransfererCore",["emptyFunction","joinClasses"],(function(t,n,r,o,a,i){"use strict";function e(e){return function(t,n,r){Object.prototype.hasOwnProperty.call(t,n)?t[n]=e(t[n],r):t[n]=r}}var l=e(function(e,t){return babelHelpers.extends({},t,e)}),s={children:n("emptyFunction"),className:e(n("joinClasses")),style:l};function u(e,t){for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){var r=s[n];r&&Object.prototype.hasOwnProperty.call(s,n)?r(e,n,t[n]):Object.prototype.hasOwnProperty.call(e,n)||(e[n]=t[n])}return e}var c={mergeProps:function(t,n){return u(babelHelpers.extends({},t),n)}};a.exports=c}),null);
__d("ReactPropTransfererWWW",["ReactPropTransfererCore"],(function(t,n,r,o,a,i){a.exports=n("ReactPropTransfererCore")}),null);
__d("XUIMenuTheme",["cx"],(function(t,n,r,o,a,i,l){a.exports={className:"_558b"}}),null);
__d("XUIMenuWithSquareCorner",["cx","CSS"],(function(t,n,r,o,a,i,l,s){var e=(function(){function e(e){this.$1=e}var t=e.prototype;return t.enable=function(){o("CSS").addClass(this.$1.getRoot(),"_2n_z")},t.disable=function(){o("CSS").removeClass(this.$1.getRoot(),"_2n_z")},e})();l.default=e}),98);
__d("ReactXUIMenu",["ReactMenu","XUIMenuTheme","XUIMenuWithSquareCorner"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(e){e.isReactLegacyFactory={},e.type=e}var u=(function(e){function t(t){var n={behaviors:void 0,theme:o("XUIMenuTheme")};return(!t||t.withsquarecorner!==!1)&&(n.behaviors=[r("XUIMenuWithSquareCorner")]),e.call(this,t,n)||this}return babelHelpers.inheritsLoose(t,e),t})(e=r("ReactMenu"));s(u);var c=(function(e){function t(t){var n={behaviors:void 0,theme:o("XUIMenuTheme")};return(!t||t.withsquarecorner!==!1)&&(n.behaviors=[r("XUIMenuWithSquareCorner")]),e.call(this,t,n)||this}return babelHelpers.inheritsLoose(t,e),t})(e.SelectableMenu);s(c),u.SelectableMenu=c,u.Item=e.Item,u.SelectableItem=e.SelectableItem,l.default=u}),98);
__d("ShimButton.react",["KeyActivationToClickHOC.react","emptyFunction","react"],(function(t,n,r,o,a,i,l){var e=["children","form","inline","keyActivationToClickEvent","keyActivationToClickRef","onRef","pressed","role"],s,u=s||(s=o("react")),c=(function(t){function n(){for(var e,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return e=t.call.apply(t,[this].concat(r))||this,e.$1=function(t){e.props.keyActivationToClickRef(t),e.props.onRef(t)},babelHelpers.assertThisInitialized(e)||babelHelpers.assertThisInitialized(e)}babelHelpers.inheritsLoose(n,t);var r=n.prototype;return r.render=function(){var t=this.props,n=t.children,r=t.form,o=t.inline,a=t.keyActivationToClickEvent,i=t.keyActivationToClickRef,l=t.onRef,s=t.pressed,c=t.role,d=babelHelpers.objectWithoutPropertiesLoose(t,e),m=o?"span":"div";r==="link"&&(m="a");var p={onKeyDown:a};return u.jsx(m,babelHelpers.extends({},d,{"aria-pressed":s,ref:this.$1,role:c!=null?c:"button"},p,{children:n}))},n})(u.Component);c.defaultProps={form:"none",inline:!1,keyActivationToClickEvent:r("emptyFunction"),keyActivationToClickRef:r("emptyFunction"),onClick:r("emptyFunction"),onRef:r("emptyFunction"),tabIndex:0};var d=r("KeyActivationToClickHOC.react")(c);l.default=d}),98);
__d("SkywalkerUtils",["CurrentLocale","RTISubscriptionManagerConfig"],(function(t,n,r,o,a,i){var e={patchContext:function(t){var e=t||{};if(e.locale=n("CurrentLocale").get(),n("RTISubscriptionManagerConfig").assimilator){var r=n("RTISubscriptionManagerConfig").assimilator;r.tierType!=null&&(e.tierType=r.tierType),r.sandboxIP!=null&&r.sandboxPort!=null&&r.sandboxHostname!=null&&(e.sandboxIP=r.sandboxIP,e.sandboxPort=r.sandboxPort,e.sandboxHostname=r.sandboxHostname)}return e}};a.exports=e}),null);
__d("XBasicFBNuxDismissControllerRouteBuilder",["jsRouteBuilder"],(function(t,n,r,o,a,i,l){var e=r("jsRouteBuilder")("/ajax/megaphone/dismiss_fbnux/",Object.freeze({}),void 0),s=e;l.default=s}),98);
__d("XUIAbstractGlyphButton.react",["cx","AbstractButton.react","joinClasses","react"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u=e||(e=o("react")),c=(function(e){function t(){return e.apply(this,arguments)||this}babelHelpers.inheritsLoose(t,e);var n=t.prototype;return n.render=function(){return u.jsx(r("AbstractButton.react"),babelHelpers.extends({},this.props,{className:r("joinClasses")(this.props.className,"_5upp"),label:this.props.label}))},t})(u.Component);l.default=c}),98);
__d("XUICloseButton.react",["cx","fbt","XUIAbstractGlyphButton.react","joinClasses","react"],(function(t,n,r,o,a,i,l,s,u){var e,c=e||(e=o("react")),d=(function(e){function t(){return e.apply(this,arguments)||this}babelHelpers.inheritsLoose(t,e);var n=t.prototype;return n.render=function(){var e=this.props.size,t=this.props.shade,n="_50zy"+(e==="small"?" _50zz":"")+(e==="medium"?" _50-0":"")+(e==="large"?" _50-1":"")+(t==="light"?" _50z_":"")+(t==="dark"?" _50z-":""),o=this.props.label,a=this.props.title;return this.props.title==null&&this.props.tooltip==null&&(a=o),c.jsx(r("XUIAbstractGlyphButton.react"),babelHelpers.extends({},this.props,{label:o,title:a,type:this.props.href!=null?void 0:this.props.type,"data-hover":this.props.tooltip!=null?"tooltip":void 0,"data-tooltip-alignh":this.props.tooltip!=null?"center":void 0,"data-tooltip-content":this.props.tooltip,className:r("joinClasses")(this.props.className,n)}))},t})(c.Component);d.defaultProps={label:u._(/*BTDS*/"Remove"),size:"medium",shade:"dark",type:"button"},l.default=d}),226);
__d("XUIAmbientNUXBody.react",["cx","XUICloseButton.react","joinClasses","react"],(function(t,n,r,o,a,i,l,s){var e,u=e||(e=o("react")),c=(function(e){function t(){return e.apply(this,arguments)||this}babelHelpers.inheritsLoose(t,e);var n=t.prototype;return n.render=function(){var e=r("joinClasses")("_21es",this.props.className,this.props.noCloseButton?"_izg":null),t=this.props.noCloseButton?null:u.jsx(r("XUICloseButton.react"),{"data-testid":void 0,shade:"light",className:"layer_close_elem _36gl",onClick:this.props.onCloseButtonClick,onFocus:this.props.onFocus});return u.jsxs("div",{className:e,ref:this.props.bodyRef,children:[t,u.jsx("div",{className:"__xn",children:this.props.children})]})},t})(u.Component);c.defaultProps={noCloseButton:!1},l.default=c}),98);
__d("XUIAmbientNUXDarkTheme",["cx"],(function(t,n,r,o,a,i,l,s){var e="_6dh- _2x6q",u={offset:14,length:18};l.wrapperClassName=e,l.arrowDimensions=u}),98);
__d("XUIAmbientNUXTheme",["cx"],(function(t,n,r,o,a,i,l,s){var e="_2x6q",u={offset:14,length:18};l.wrapperClassName=e,l.arrowDimensions=u}),98);
__d("XUIAmbientNUX.react",["fbt","AdsALMessageSurface.react","ReactAbstractContextualDialog","ReactLayer","XUIAmbientNUXBody.react","XUIAmbientNUXDarkTheme","XUIAmbientNUXTheme","react","uniqueID"],(function(t,n,r,o,a,i,l,s){var e,u=e||(e=o("react")),c=300,d=380,m=o("ReactLayer").createClass(o("ReactAbstractContextualDialog").createSpec({displayName:"XUIAmbientNUX",theme:o("XUIAmbientNUXTheme")})),p=o("ReactLayer").createClass(o("ReactAbstractContextualDialog").createSpec({displayName:"XUIAmbientNUX",theme:o("XUIAmbientNUXDarkTheme")})),_=(function(e){function t(){for(var t,n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];return t=e.call.apply(e,[this].concat(o))||this,t.$1=r("uniqueID")(),t.$2=r("uniqueID")(),babelHelpers.assertThisInitialized(t)||babelHelpers.assertThisInitialized(t)}babelHelpers.inheritsLoose(t,e);var n=t.prototype;return n.$3=function(){switch(this.props.width){case"wide":return d;case"custom":return this.props.customwidth;case"auto":return null;default:return c}},n.$4=function(){return s._(/*BTDS*/"Learn about this new feature")},n.render=function(){var e=this.props.labelledBy,t=null,n=null;e||(t=u.jsx("div",{style:{clip:"rect(0, 0, 0, 0)",clipPath:"inset(50%)",height:1,overflow:"hidden",position:"absolute",width:1},id:this.$2,children:this.props.label||this.$4()},this.$2),e=this.$2);var a=s._(/*BTDS*/"Close");n=u.jsx("a",{className:"layer_close_elem accessible_elem",href:"#",id:this.$1,"aria-label":a,"aria-labelledby":this.$1+" "+e,role:"button"},this.$1);var i=this.props.useDarkMode?p:m;return u.jsx(o("AdsALMessageSurface.react").AdsALMessageSurface,{metadata:{messageID:this.props.messageID||""},moduleId:"XUIAmbientNUX",children:u.jsx(i,{alignment:this.props.alignment,autoFocus:!1,behaviors:this.props.behaviors,context:this.props.context,contextRef:this.props.contextRef,dialogRole:"region",focusContextOnHide:!1,hasActionableContext:this.props.hasActionableContext,hideOnBlur:this.props.hideOnBlur,insertParent:this.props.insertParent,labelledBy:e,offsetX:this.props.offsetX,offsetY:this.props.offsetY,onBeforeHide:this.props.onBeforeHide,position:this.props.position,shown:this.props.shown,width:this.$3(),children:u.jsxs(r("XUIAmbientNUXBody.react"),{bodyRef:this.props.bodyRef,className:this.props.className,noCloseButton:this.props.noCloseButton,onCloseButtonClick:this.props.onCloseButtonClick,onFocus:this.props.onFocus,children:[this.props.children,t,this.props.noCloseButton?n:null]})})})},t})(u.Component);_.defaultProps={hasActionableContext:!1,hideOnBlur:!1,noCloseButton:!1,shown:!1,useDarkMode:!1,width:"normal"},l.default=_}),226);
__d("fbglyph",[],(function(t,n,r,o,a,i){function e(e){throw new Error("fbglyph("+JSON.stringify(e)+"): Unexpected fbglyph reference.")}i.default=e}),66);
__d("SpatialAudioFeedNUX.react",["fbt","ix","AsyncRequest","Image.react","XBasicFBNuxDismissControllerRouteBuilder","XUIAmbientNUX.react","XUIText.react","react","vulture"],(function(t,n,r,o,a,i,l,s,u){"use strict";var e,c=e||(e=o("react")),d=s._(/*BTDS*/"Experience more with Audio 360"),m=s._(/*BTDS*/"Hear sound from all directions when you wear headphones"),p=4576,_=(function(e){function t(t){var n;return n=e.call(this,t)||this,n.$1=function(){n.setState({showNux:!1});var e=r("XBasicFBNuxDismissControllerRouteBuilder").buildUri({nux_id:p});new(r("AsyncRequest"))().setURI(e).send()},n.state={showNux:!0},n}babelHelpers.inheritsLoose(t,e);var n=t.prototype;return n.render=function(){return r("vulture")("Nm07WWk3YjX2PDwjTrpaxIUqF3Q="),c.jsx(r("XUIAmbientNUX.react"),{contextRef:this.props.contextRef,shown:this.state.showNux,position:"below",alignment:"right",onCloseButtonClick:this.$1,width:"auto",children:c.jsxs("div",{className:"x78zum5",children:[c.jsx("div",{className:"x78zum5 x6s0dn4 xl56j7k x1a5kqlc x1pju0fl",children:c.jsx("div",{className:"x6s0dn4 xpequ6v xvs2etk xg3wpu6 x1jwbhkm xgg4q86 x78zum5 xxk0z11 xl56j7k xvy4d1p",children:c.jsx(r("Image.react"),{src:u("114375")})})}),c.jsxs("div",{className:"x78zum5 xdt5ytf xop8lp1",children:[c.jsx(r("XUIText.react"),{size:"header4",className:"x1ny7uwr",children:d}),c.jsx(r("XUIText.react"),{size:"meta1",className:"xurgmgr x1ks1olk",children:m})]})]})})},t})(c.Component);l.default=_}),226);
__d("SphericalVideoFallback",["cx","CSS"],(function(t,n,r,o,a,i,l,s){function e(e,t){var n=t.fallbackUriList,r=t.fallbackType,a=function(){e.emit("VideoPlayerFallbackEvents/enter");var t=e.getLastError();if(!(t&&t.error!=="SPHERICAL_SETUP_FAILED"&&t.error!=="SPHERICAL_RENDER_ERROR")){var a=e.addListener("stateChange",function(){e.isState("playing")&&(e.logEvent("spherical_fallback_entered",{spherical_fallback_type:r}),a.remove())});e.setFallbackSources(n),o("CSS").removeClass(e.getRootNode(),"_3-n5"),e.reset(),e.emit("VideoPlayerFallbackEvents/recover")}};if(e.isState("fallback"))a();else var i=e.addListener("stateChange",function(){e.isState("fallback")&&(a(),i.remove())})}l.setup=e}),98);
__d("Tahoe",[],(function(t,n,r,o,a,i){var e=null,l={get:function(){return e},set:function(n){e=n}},s=l;i.default=s}),66);
__d("XThisControllerNoLongerExistsController",["XController"],(function(t,n,r,o,a,i){a.exports=n("XController").create("/dcb/tcnle/",{t:{type:"String"}})}),null);
__d("ThisControllerNoLongerExists",["XControllerURIBuilder","XThisControllerNoLongerExistsController","jsRouteBuilder"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(e){function t(t){var n;return n=e.call(this,"/dcb/tcnle/",{})||this,n.$XControllerURIBuilderNoOpDead$p_1=t,n}babelHelpers.inheritsLoose(t,e);var n=t.prototype;return n.__validateRequiredParamsExistence=function(){},n.__assertParamExists=function(t){},n.__setParam=function(t,n,r){return this},n.__setParamInt=function(t,n){},n.getRequest_LEGACY_UNTYPED=function(t){return t.setURI(this.getURI())},n.getURI=function(){return r("XThisControllerNoLongerExistsController").getURIBuilder().setString("t",this.$XControllerURIBuilderNoOpDead$p_1).getURI()},n.getLookasideURI=function(){return this.getURI()},t})(r("XControllerURIBuilder"));function s(e){return r("XThisControllerNoLongerExistsController").getURIBuilder().setString("t",e).getURI()}function u(t){return new e(t)}function c(e){var t=r("jsRouteBuilder")("/dcb/tcnle/",{}),n={t:e};return{buildUri:function(){return t.buildUri(n)},buildUriNullable:function(){return t.buildUriNullable(n)},buildURL:function(){return t.buildURL(n)},buildURLStringDEPRECATED:function(){return t.buildURLStringDEPRECATED(n)},getPath:function(){return t.getPath()}}}l.__DEADURI__=s,l.__DEADBUILDER__=u,l.__DEADROUTEBUILDER__=c}),98);
__d("createTooltipPortal",["ReactDOM","react"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react"));function u(e,t){return o("ReactDOM").createPortal(e,t)}u.displayName=u.name+" [from "+i.id+"]",l.default=u}),98);
__d("Tooltip.react",["Arbiter","OnUseEffectMount.react","OnUseEffectUnmount.react","ReactDOM","SubscriptionsHandler","TooltipData","createTooltipPortal","ifRequired","react"],(function(t,n,r,o,a,i,l){var e=["alignH","children","delayMountUntilHover","display","position","onVisibilityChange","tooltip"],s,u=s||(s=o("react")),c=(function(t){function n(){for(var e,n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return e=t.call.apply(t,[this].concat(a))||this,e.$1=null,e.$2=new(r("SubscriptionsHandler")),e.state={visible:!1,wasEverVisible:!1},e.tooltipEl=u.createRef(),e.onComponentDidMount=function(){e.$2.addSubscriptions(r("Arbiter").subscribe("tooltip/requesthide",function(t,n){var a=n.context;e.state.visible&&(!a||a===e.tooltipEl.current)&&r("ifRequired")("Tooltip",function(t){t.suspend(),o("ReactDOM").flushSync(function(){e.setState({visible:!1})})})}),r("Arbiter").subscribe("tooltip/requestshow",function(t,n){var a=n.context;!e.state.visible&&a===e.tooltipEl.current&&r("ifRequired")("Tooltip",function(t){t.suspend(),o("ReactDOM").flushSync(function(){e.setState({visible:!0,wasEverVisible:!0})})})})),e.$3()},e.onComponentWillUnmount=function(){e.$2.release();var t=e.tooltipEl.current;t!=null&&o("TooltipData").remove(t)},babelHelpers.assertThisInitialized(e)||babelHelpers.assertThisInitialized(e)}babelHelpers.inheritsLoose(n,t),n.getDerivedStateFromProps=function(t,n){return t.tooltip?n:{visible:!1,wasEverVisible:n.wasEverVisible}};var a=n.prototype;return a.componentDidUpdate=function(t,n){var e=this;t.tooltip&&!this.props.tooltip?this.props.onVisibilityChange&&this.props.onVisibilityChange(!1):n.visible!==this.state.visible&&(this.props.onVisibilityChange&&this.props.onVisibilityChange(this.state.visible),r("ifRequired")("Tooltip",function(t){e.state.visible?t.commitShow(e.tooltipEl.current):t.commitHide(e.tooltipEl.current)})),this.$3()},a.render=function(){return u.jsxs(u.Fragment,{children:[u.jsx(r("OnUseEffectMount.react"),{callback:this.onComponentDidMount}),u.jsx(r("OnUseEffectUnmount.react"),{callback:this.onComponentWillUnmount}),this.renderImpl()]})},a.renderImpl=function(){var t=this.props,n=t.alignH,o=t.children,a=t.delayMountUntilHover,i=t.display,l=t.position,s=t.onVisibilityChange,c=t.tooltip,d=babelHelpers.objectWithoutPropertiesLoose(t,e),m=this.$4(),p=this.props.display==="block"?"div":"span",_=babelHelpers.extends({},d,{ref:this.tooltipEl,"data-hover":"tooltip","data-tooltip-content":typeof c=="string"?c:void 0});return u.jsxs(p,babelHelpers.extends({},_,{children:[m&&c!==null?r("createTooltipPortal")(c,this.$5()):null,this.props.children]}))},a.$4=function(){var e=this.props.delayMountUntilHover,t=this.state.wasEverVisible;return!e||t},a.$5=function(){return this.$1==null&&(this.$1=document.createElement("div")),this.$1},a.$3=function(){if(this.$4()){var e=this.tooltipEl.current;if(!this.props.tooltip)o("TooltipData").remove(e);else if(typeof this.props.tooltip!="string"){var t=this.props,n=t.alignH,r=t.position;o("TooltipData").set(e,this.$5(),r,n)}else o("TooltipData").remove(e,{onlyCleanupDataStore:!0}),o("TooltipData").refreshIfActive(this.tooltipEl.current)}},n})(u.Component);c.defaultProps={delayMountUntilHover:!0,display:"inline"},l.default=c}),98);
__d("VideoAutoplayControllerAbortLoadingHelper",["invariant","ShakaConstants","VideoPlayerExperiments","getViewportDimensions"],(function(t,n,r,o,a,i,l,s){var e=(function(){function e(){this.$1=new Set,this.$2=new Map}var t=e.prototype;return t.maybeAbortLoading=function(){for(var t of this.$1){var n=r("ShakaConstants").strings.defer_which_video_to_abort_loading_decisioning_logic,o=t.getVideoPlayerController(),a=o?o.isLiveVideo():null;if(!(a!==null&&(n==="vod"&&a||n==="live"&&!a))){if(!t.isState("playing")&&typeof t.abortLoading=="function"&&e.shouldAbortLoadingVideoUnit(t))r("VideoPlayerExperiments").abortLoadingHelperNegativeYAbortLoading?this.$3(t):this.$4(t);else if(r("VideoPlayerExperiments").abortLoadingHelperNegativeYAbortLoading&&t.isState("playing")){var i=this.$2.get(t);i||s(0,3497),i&&i.abortedLoading&&(i.abortedLoading=!1)}}}},t.$3=function(t){if(r("VideoPlayerExperiments").abortLoadingHelperBoundedReloading){var e=r("getViewportDimensions")().height/-2;t.getDistanceToViewport()<r("VideoPlayerExperiments").abortedLoadingPixelBoundary+e&&!t.isVisible()?this.$5(t):t.getDistanceToViewport()>r("VideoPlayerExperiments").reloadingPixelBoundary+e&&this.$6(t)}else t.getDistanceToViewport()<0&&!t.isVisible()&&this.$5(t)},t.addVideoUnit=function(t){this.$1.has(t)||(this.$1.add(t),this.$2.set(t,{y:t.getDistanceToViewport(),timestamp:new Date().valueOf(),v:0,abortedLoading:!1}))},t.removeVideoUnit=function(t){this.$1.delete(t),this.$2.delete(t)},t.calculateFutureScrollPosition=function(t){var e=t.y1-t.y0,n=t.t1-t.t0,r=e/n,o=r-t.v0,a=o/n,i=t.t,l=a*i*i/2+i*r+t.y1;return{v1:r,a:a,S:l}},t.preloadClosestVideoUnits=function(t){var e=this;this.$7(t).forEach(function(t){return e.$6(t)})},t.$7=function(t){return Array.from(this.$1).filter(function(e){return e.getDistanceToViewport()>=0}).sort(function(e,t){return e.getDistanceToViewport()-t.getDistanceToViewport()}).slice(0,t)},t.$6=function(t){var e=this.$2.get(t);e||s(0,3497);var n;e&&(n=e.abortedLoading,e.abortedLoading=!1),n&&t.preload()},t.$5=function(t){var e=this.$2.get(t);e||s(0,3497);var n;e&&(n=e.abortedLoading,e.abortedLoading=!0),!n&&typeof t.abortLoading=="function"&&t.abortLoading()},t.$4=function(t){var e=r("getViewportDimensions")().height,n=1600,o=e/2,a=o+n,i=-o,l=i-n,u=this.$2.get(t);if(u||s(0,3497),!!u){var c=t.getDistanceToViewport(),d=u.y;u.y=c;var m=new Date().valueOf(),p=u.timestamp;u.timestamp=m;var _=u.v;if(l<=c&&a>=c){u.abortedLoading&&this.$6(t);return}var f=500,g=this.calculateFutureScrollPosition({y0:d,y1:c,t0:p,t1:m,v0:_,t:f});u.v=g.v1;var h=g.S;u.abortedLoading?(c<l&&h>l||c>a&&h<a)&&this.$6(t):this.$5(t)}},e.shouldAbortLoadingVideoUnit=function(t){var e=!1,n=!0;return t?(typeof t.getIsInChannel=="function"&&(n=t.getIsInChannel()),typeof t.getSource=="function"&&(e=t.getSource()==="tahoe"),!n&&!e):!1},e})();l.default=e}),98);
__d("VideoScrollTracker",["Scroll"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(){function e(e){this.$2=-1,this.$3=!1,this.$4=e}var t=e.prototype;return t.$5=function(){return this.$4?o("Scroll").getTop(this.$4):null},t.onScroll=function(){if(this.$3){var e=this.$5();e!=null&&(this.$1=e<this.$2?"up":"down",this.$6(e))}},t.$6=function(t){this.$2=t},t.start=function(){this.$3=!0;var e=this.$5();e!=null&&this.$6(e)},t.stop=function(){this.$3=!1},t.getLastScrollDirection=function(){return this.$1},t.destroy=function(){this.stop(),this.$4=null},e})();l.default=e}),98);
__d("destroyOnUnload",["cr:8905"],(function(t,n,r,o,a,i,l){l.default=n("cr:8905")}),98);
__d("VideoAutoplayControllerBase",["Arbiter","DesktopHscrollUnitEventConstants","Event","ShakaConstants","SubscriptionsHandler","VideoAutoplayControllerAbortLoadingHelper","VideoPlayerExperiments","VideoPlayerShakaGlobalConfig","VideoScrollTracker","Visibility","clearTimeout","debounce","destroyOnUnload","emptyFunction","setTimeout","throttle"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t){var n=[];return function(){var r=Date.now();n.unshift(r);for(var o=0;n[++o]+t>r;);return n=n.slice(0,o),n.length<=e}}function s(e,t,n){var o=null;return function(){for(var a=arguments.length,i=new Array(a),l=0;l<a;l++)i[l]=arguments[l];if(t())return e.apply(void 0,i),r("emptyFunction").thatReturnsFalse;if(!o){var s=r("setTimeout")(function(){o=null,e.apply(void 0,i)},n);o=function(){return o?(r("clearTimeout")(s),o=null,!0):!1}}return o}}var u=(function(){function t(t){var n=this;this.$8=r("emptyFunction"),this.$9=r("emptyFunction"),this.$3=null,this.$2=null,this.$10=[],this.$1=t,this.$4=null,this.$5=new(r("SubscriptionsHandler")),this.$11=new(r("VideoScrollTracker"))(document.body),this.$11.start(),r("destroyOnUnload")(function(){n.$10=[],n.$3=null,n.$4&&(n.$4.remove(),n.$4=null),n.$5.release(),n.$11&&n.$11.destroy()}),r("VideoPlayerExperiments").autoplayMaxCallsPerWindow&&(this.$6=s(function(e){var t=n.$3;t&&t.playWithoutUnmute(e)},e(r("VideoPlayerExperiments").autoplayMaxCallsPerWindow,r("VideoPlayerExperiments").autoplayThrottleWindow),r("VideoPlayerExperiments").autoplayThrottleDelay)),this.$7=r("emptyFunction").thatReturnsFalse}var n=t.prototype;return n.getVideoUnits=function(){return this.$10},n.addVideoUnit=function(t){var e=this,n=t.getVideoPlayerController();n&&n.registerOption("VideoAutoplayControllerBase/VideoScrollTracker","getLastScrollDirection",function(){return e.getLastScrollDirection()}),this.$10.push(t)},n.removeVideoUnit=function(t){var e=this.$10.findIndex(function(e){return e===t});if(e>-1){this.$10.splice(e,1);var n=t.getVideoPlayerController();n&&n.unregisterOption("VideoAutoplayControllerBase/VideoScrollTracker","getLastScrollDirection")}},n.getPlayingVideoUnit=function(){return this.$3},n.setPlayingVideoUnit=function(t){this.$3=t,this.$3&&this.setupPlayingVideoUnitSubscriptions()},n.getLastScrollDirection=function(){return this.$11?this.$11.getLastScrollDirection():null},n.playVideo=function(t,n){if(r("VideoPlayerExperiments").disableAutoplayForInactiveTab&&r("Visibility").isHidden()){if(r("VideoPlayerExperiments").removeHiddenVideoTracking){this.setPlayingVideoUnit(null);return}this.$2=t;return}if(this.setPlayingVideoUnit(t),this.$3){var e=this.$6;e?this.$7=e.call(this,n):this.$3.playWithoutUnmute(n)}},n.setupPlayingVideoUnitSubscriptions=function(){throw new Error("Should be overridden")},n.addSubscriberVideoUnit=function(){if(!this.getVideoUnits().length){var e;this.$5.addSubscriptions(r("Event").listen(window,"resize",this.updateAutoplay.bind(this)),r("Event").listen(window,"blur",this.$12.bind(this)),r("Event").listen(window,"focus",this.$13.bind(this)),(e=r("Visibility")).addListener(e.HIDDEN,this.$12.bind(this)),e.addListener(e.VISIBLE,this.$13.bind(this)),r("Arbiter").subscribe(o("DesktopHscrollUnitEventConstants").HSCROLL_ITEM_SHOWN_EVENT,this.updateAutoplay.bind(this))),this.$14()||this.$15()}},n.$12=function(){r("VideoPlayerExperiments").removeHiddenVideoTracking?this.$16("page_visibility_initiated"):this.$2||(this.$2=this.getPlayingVideoUnit(),this.$16("page_visibility_initiated"))},n.$13=function(){r("VideoPlayerExperiments").removeHiddenVideoTracking?this.updateAutoplay():this.$2&&(this.playVideo(this.$2,"page_visibility_initiated"),this.$2=null)},n.$15=function(){var e=this,t=function(){e.$11&&e.$11.onScroll(),e.updateAutoplay()};this.$4&&this.$4.remove(),this.$8=r("throttle")(t,this.$1),this.$9=r("debounce")(function(){return e.updateAutoplay()},this.$1);var n=function(){return t()};this.$4=r("Event").listen(window,"scroll",n)},n.$14=function(){return!!this.$4},n.getClosestVideoUnits=function(t){return this.$10.filter(function(e){return e.getDistanceToViewport()>=0}).sort(function(e,t){return e.getDistanceToViewport()-t.getDistanceToViewport()}).slice(0,t)},n.getVisibleUnits=function(){var e=[];return this.$10.forEach(function(t){var n=t.getVideoPlayerController();t.isVisible()?(e.push(t),t.wasVisible||(t.wasVisible=!0,t.logDisplayed(),n&&n.emit("becomeVisible"))):t.wasVisible&&(n&&n.emit("becomeInvisible"),t.wasVisible=!1)}),e},n.$17=function(t){var e=o("VideoPlayerShakaGlobalConfig").getBool("oz_www_allow_abort_loading_from_autoplay_controller",!1),n=r("ShakaConstants").strings.defer_which_video_to_abort_loading_decisioning_logic,a=t.getVideoPlayerController();if(!e&&a&&a.isPlayerVersion("oz"))return!1;var i=a?a.isLiveVideo():null;return i!==null&&(n==="vod"&&i||n==="live"&&!i)?!1:r("VideoAutoplayControllerAbortLoadingHelper").shouldAbortLoadingVideoUnit(t)},n.pausePlayingVideo=function(t,n){var e=this.$3;if(e){var o=function(){if(!e.isState("playing")){if(r("VideoPlayerExperiments").abortLoadingReUpStillVisibleVideos&&e.isVisible()){r("setTimeout")(o,r("ShakaConstants").numbers.abort_loading_delay);return}typeof e.abortLoading=="function"&&e.abortLoading()}};if(e.isVisible()){var a=e.getVideoPlayerController();if(a&&a.isPlayRequestPending())return}this.$7()||e.pause(t),r("VideoPlayerExperiments").decoupleAbortLoadingFromPause||this.$17(e)&&!n&&r("setTimeout")(o,r("ShakaConstants").numbers.abort_loading_delay),this.$3=null}},n.$16=function(t){this.pausePlayingVideo(t,!0)},n.updateAutoplay=function(){throw new Error("Should be overridden")},t})();l.default=u}),98);
__d("XVideoAutoplayNuxAsyncController",["XController"],(function(t,n,r,o,a,i){a.exports=n("XController").create("/video/autoplay/nux/",{})}),null);
__d("VideoAutoplayControllerX",["csx","AsyncRequest","DOM","DocumentFocusForMutedVideoAutoplayRule","Event","Network","Run","ShakaConstants","SubscriptionsHandler","ThisControllerNoLongerExists","VideoAutoplayControllerAbortLoadingHelper","VideoAutoplayControllerBase","VideoPlayerExperiments","XVideoAutoplayNuxAsyncController","clearTimeout","destroyOnUnload","getViewportDimensions","performanceNow","setTimeout"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u=null,c=!1;function d(e){return e?!0:!r("VideoPlayerExperiments").delayAutoplayUntilAfterLoad||c}var m=(function(t){function n(){var e;e=t.call(this,r("VideoPlayerExperiments").videoPollingFrequency)||this,e.$VideoAutoplayControllerX$p_4=!1,e.$VideoAutoplayControllerX$p_5=!1,e.$VideoAutoplayControllerX$p_6=0,e.$VideoAutoplayControllerX$p_17=new(r("VideoAutoplayControllerAbortLoadingHelper")),e.$VideoAutoplayControllerX$p_10=new(r("SubscriptionsHandler")),e.$VideoAutoplayControllerX$p_18=new(r("SubscriptionsHandler")),e.$VideoAutoplayControllerX$p_12=!0,e.$VideoAutoplayControllerX$p_9=!0,e.$VideoAutoplayControllerX$p_13=!0,e.$VideoAutoplayControllerX$p_2=null,e.$VideoAutoplayControllerX$p_1=null,e.$VideoAutoplayControllerX$p_14=!1,e.$VideoAutoplayControllerX$p_3=null,e.$VideoAutoplayControllerX$p_7=!1,e.$VideoAutoplayControllerX$p_16=!1,e.$VideoAutoplayControllerX$p_15=!1;var n=r("XVideoAutoplayNuxAsyncController").getURIBuilder().getURI();return new(r("AsyncRequest"))(n).setMethod("GET").setReadOnly(!0).send(),r("destroyOnUnload")(function(){e.$VideoAutoplayControllerX$p_19(),r("VideoPlayerExperiments").disableAutoplayOnHomePgUpPgDownEnd&&(e.$VideoAutoplayControllerX$p_11&&r("clearTimeout")(e.$VideoAutoplayControllerX$p_11),e.$VideoAutoplayControllerX$p_8.remove()),e===u&&(u=null)}),o("Run").onAfterLoad(function(){c=!0,r("VideoPlayerExperiments").delayAutoplayUntilAfterLoad&&u&&u.updateAutoplay(),document.hasFocus()||r("Event").fire(window,"blur"),r("VideoPlayerExperiments").disableAutoplayOnHomePgUpPgDownEnd&&e.$VideoAutoplayControllerX$p_20()}),e.$VideoAutoplayControllerX$p_21(Date.now()),e}babelHelpers.inheritsLoose(n,t),n.$VideoAutoplayControllerX$p_22=function(t){return r("VideoPlayerExperiments").fixVPCCallBeforeLoaded?!(t.isState("fallback")||t.isState("loading")):!0};var a=n.prototype;return a.$VideoAutoplayControllerX$p_20=function(){var e=this,t=33,n=34,o=35,a=36;this.$VideoAutoplayControllerX$p_11=null;var i=function(){e.$VideoAutoplayControllerX$p_23(e.$VideoAutoplayControllerX$p_9),r("clearTimeout")(e.$VideoAutoplayControllerX$p_11),e.$VideoAutoplayControllerX$p_11=null};this.$VideoAutoplayControllerX$p_8=r("Event").listen(document.body,"keydown",function(l){var s=-1;switch(l.keyCode){case t:case n:s=r("VideoPlayerExperiments").pressPgUpPgDownAutoplayShutoffInterval;break;case o:case a:s=r("VideoPlayerExperiments").pressHomeEndAutoplayShutoffInterval;break;default:break}s>-1&&(e.$VideoAutoplayControllerX$p_11?(r("clearTimeout")(e.$VideoAutoplayControllerX$p_11),e.$VideoAutoplayControllerX$p_11=r("setTimeout")(i,s)):e.$VideoAutoplayControllerX$p_12&&(e.$VideoAutoplayControllerX$p_23(!1),e.$VideoAutoplayControllerX$p_11=r("setTimeout")(i,s)))})},a.$VideoAutoplayControllerX$p_23=function(t){this.$VideoAutoplayControllerX$p_12=t,this.updateAutoplay()},n.registerVideoUnit=function(t){u==null&&(u=new n),u.addSubscriberVideoUnit(),u.registerDefaultAutoplayRules(t),u.addVideoUnit(t);var e=new(r("SubscriptionsHandler"));return e.addSubscriptions.apply(e,u.$VideoAutoplayControllerX$p_24(t)),u.$VideoAutoplayControllerX$p_25(),t.isVisible()&&d(t.shouldImmediatelyAutoplayOnRegister())&&u.updateAutoplay(),u.shouldRestoreAllSubsequentStreamBufferSizes()&&u.restoreStreamBufferSize(),function(){u&&u.removeVideoUnit(t),e.release(),u&&t===u.getPlayingVideoUnit()&&(u.$VideoAutoplayControllerX$p_18.release(),u.setPlayingVideoUnit(null))}},n.setShouldAutoplay=function(t){u==null&&(u=new n),u.$VideoAutoplayControllerX$p_12=t,u.$VideoAutoplayControllerX$p_13=t,u.$VideoAutoplayControllerX$p_9=t,u.updateAutoplay()},a.$VideoAutoplayControllerX$p_19=function(){this.$VideoAutoplayControllerX$p_10.release(),this.$VideoAutoplayControllerX$p_18.release()},n.setAutoplayNux=function(t,n){var e=u;if(e){e.$VideoAutoplayControllerX$p_2=t,e.$VideoAutoplayControllerX$p_1=n,e.$VideoAutoplayControllerX$p_14=!0;var o=r("DOM").find(n.getContentRoot(),"._5cqr");r("Event").listen(o,"click",function(){e.$VideoAutoplayControllerX$p_26()});var a=r("DOM").scry(n.getContentRoot(),"._36gl")[0];a&&r("Event").listen(a,"click",function(){e.$VideoAutoplayControllerX$p_26()})}},a.$VideoAutoplayControllerX$p_26=function(){this.$VideoAutoplayControllerX$p_1&&this.$VideoAutoplayControllerX$p_1.hide(),this.$VideoAutoplayControllerX$p_14=!1;var e=o("ThisControllerNoLongerExists").__DEADBUILDER__("flhg1h0jl").getURI();new(r("AsyncRequest"))(e).setAllowCrossPageTransition().send()},a.registerDefaultAutoplayRules=function(t){r("VideoPlayerExperiments").useBringYourOwnAutoplayRule&&r("VideoPlayerExperiments").pauseMutedIfNoDocumentFocus&&t.registerAutoplayRule(new(r("DocumentFocusForMutedVideoAutoplayRule"))(t))},a.setupPlayingVideoUnitSubscriptions=function(){var e=this,t=this.getPlayingVideoUnit();t&&t.addListener&&(this.$VideoAutoplayControllerX$p_10.release(),this.$VideoAutoplayControllerX$p_10.engage(),t.isLooping()||this.$VideoAutoplayControllerX$p_10.addSubscriptions(t.addListener("finishPlayback",function(){e.setPlayingVideoUnit(null)})),this.$VideoAutoplayControllerX$p_10.addSubscriptions(t.addListener("turnOffAutoplay",function(){e.setPlayingVideoUnit(null)}),t.addListener("pausePlayback",function(){e.$VideoAutoplayControllerX$p_25()}),t.addListener("finishPlayback",function(){e.$VideoAutoplayControllerX$p_25()}),r("Network").addListener("online",function(){e.$VideoAutoplayControllerX$p_25()}),r("Network").addListener("offline",function(){e.$VideoAutoplayControllerX$p_25()})))},a.$VideoAutoplayControllerX$p_25=function(){var e=this;if(r("VideoPlayerExperiments").webVideosBlockAutoplayWhenOffline)if(r("Network").isOnline())this.$VideoAutoplayControllerX$p_12=this.$VideoAutoplayControllerX$p_13;else{this.$VideoAutoplayControllerX$p_13=this.$VideoAutoplayControllerX$p_12,this.$VideoAutoplayControllerX$p_12=!1;return}for(var t=this.getVideoUnits(),o=0;o<t.length;o++){var a=t[o].getVideoPlayerController();a&&(a.getDataInsertionPosition()==="0"&&(this.$VideoAutoplayControllerX$p_7=!0,this.$VideoAutoplayControllerX$p_16===!1&&(n.$VideoAutoplayControllerX$p_22(a)&&a.restoreStreamBufferSize(),a.once("beginPlayback",function(){e.$VideoAutoplayControllerX$p_15=!0,e.restoreStreamBufferSize()}),this.$VideoAutoplayControllerX$p_16=!0)),r("VideoPlayerExperiments").autoplayBlockBlacklist||a.updateAutoplayRestrained())}this.$VideoAutoplayControllerX$p_7||this.restoreStreamBufferSize()},a.shouldRestoreAllSubsequentStreamBufferSizes=function(){return this.$VideoAutoplayControllerX$p_7?this.$VideoAutoplayControllerX$p_15:!0},a.restoreStreamBufferSize=function(){for(var e=this.getVideoUnits(),t=0;t<e.length;t++){var r=e[t].getVideoPlayerController();r&&n.$VideoAutoplayControllerX$p_22(r)&&r.restoreStreamBufferSize()}},a.$VideoAutoplayControllerX$p_24=function(t){var e=this,n;if(!t.addListener)return[];var r=function(){if(!t.isMuted()&&t.isState("playing")){var n=e.$VideoAutoplayControllerX$p_3;if(n&&n!==t){var r=n.getVideoPlayerController();if(r){var o=r.getOption("VideoWithLiveBroadcast","isLive");o?r.mute():r.pause("user_initiated")}try{n.pause("user_initiated")}catch(e){}}e.$VideoAutoplayControllerX$p_3=t}},o=[t.addListener("beginPlayback",r),t.addListener("changeVolume",r),t.addListener("unmuteVideo",r)];return(n=this.$VideoAutoplayControllerX$p_18).addSubscriptions.apply(n,o),o},a.$VideoAutoplayControllerX$p_27=function(t){var e=this,n=t.length,o=null;if(n===1)o=t[0],o=o.isAutoplayable()?o:null,r("VideoPlayerExperiments").useBringYourOwnAutoplayRule&&o&&(o=this.$VideoAutoplayControllerX$p_28(o)?o:null);else if(n>1){var a=r("getViewportDimensions")().height/2;t.forEach(function(t){if(t.isAutoplayable()&&!(r("VideoPlayerExperiments").useBringYourOwnAutoplayRule&&!e.$VideoAutoplayControllerX$p_28(t))){var n=t.getDOMPosition(),i=n.y+n.height/2,l=Math.abs(i-a);t.playPriority=l,(!o||!o.playPriority||t.playPriority<o.playPriority)&&(o=t)}})}return o},a.$VideoAutoplayControllerX$p_28=function(t){for(var e=!0,n=t.getAutoplayRules(),r=0;r<n.length;++r){var o=n[r].calculateAutoplayScore();if(e=o!==0,!e)break}return e},a.showAutoplayNUX=function(t){var e=this.$VideoAutoplayControllerX$p_1;if(e&&!e.isShown()){var n=t.getVideoPlayerController(),a=n?n.getRootNode():null;r("DOM").prependContent(a,this.$VideoAutoplayControllerX$p_2),e.show();var i=o("ThisControllerNoLongerExists").__DEADBUILDER__("vpqic3cf").getURI();new(r("AsyncRequest"))(i).setAllowCrossPageTransition().send()}this.$VideoAutoplayControllerX$p_14=!1},a.addVideoUnit=function(n){n&&t.prototype.addVideoUnit.call(this,n),r("VideoPlayerExperiments").decoupleAbortLoadingFromPause&&n&&this.$VideoAutoplayControllerX$p_17.addVideoUnit(n)},a.removeVideoUnit=function(n){n&&t.prototype.removeVideoUnit.call(this,n),r("VideoPlayerExperiments").decoupleAbortLoadingFromPause&&n&&this.$VideoAutoplayControllerX$p_17.removeVideoUnit(n)},a.$VideoAutoplayControllerX$p_21=function(n){var t=this;this.$VideoAutoplayControllerX$p_29(),r("setTimeout")(function(){t.$VideoAutoplayControllerX$p_21((e||(e=r("performanceNow")))())},r("VideoPlayerExperiments").videoPollingFrequency)},a.$VideoAutoplayControllerX$p_29=function(){var e=this.$VideoAutoplayControllerX$p_3,t=Date.now(),n=t-this.$VideoAutoplayControllerX$p_6,o=r("ShakaConstants").numbers.autoplay_start_video_interval;if(this.$VideoAutoplayControllerX$p_4&&r("VideoPlayerExperiments").pauseAudioUnitsOffscreen&&e&&e.shouldPauseWhenScrolledOffscreen()&&!e.isVisible()&&e.pause("autoplay_initiated"),!this.$VideoAutoplayControllerX$p_12){this.pausePlayingVideo("autoplay_initiated");return}var a=this.getVideoUnits(),i=this.getPlayingVideoUnit(),l=this.$VideoAutoplayControllerX$p_4?null:i;if(this.$VideoAutoplayControllerX$p_4&&i&&i.isVisible()&&(l=this.$VideoAutoplayControllerX$p_27([i])),i&&i!==l&&this.pausePlayingVideo("autoplay_initiated"),n>=o){if(this.$VideoAutoplayControllerX$p_6=t,this.$VideoAutoplayControllerX$p_5){for(var s=this.getVisibleUnits(),u=0;u<a.length;++u)a[u].isMuted()&&s.indexOf(a[u])===-1&&a[u].pause("autoplay_initiated");l=this.$VideoAutoplayControllerX$p_27(s),l&&l!==i&&(i&&this.pausePlayingVideo("autoplay_initiated"),this.playVideo(l,"autoplay_initiated"),this.$VideoAutoplayControllerX$p_14&&this.showAutoplayNUX(l)),this.getClosestVideoUnits(r("VideoPlayerExperiments").preloadVideosCount).forEach(function(e){return e.preload()}),l&&r("VideoPlayerExperiments").adjustPriorityBasedOnAutoplayIndex&&this.$VideoAutoplayControllerX$p_30(l)}this.$VideoAutoplayControllerX$p_5=!1}this.$VideoAutoplayControllerX$p_4=!1},a.updateAutoplay=function(){this.$VideoAutoplayControllerX$p_4=!0,this.$VideoAutoplayControllerX$p_5=!0},a.$VideoAutoplayControllerX$p_30=function(t){var e=-1,n=this.getVideoUnits();if(t){var o=n.findIndex(function(e){return e===t});o>=0&&(e=o+1)}else for(var a=r("getViewportDimensions")().height/2,i=0;i<n.length;i++){var l=n[i],s=l.getDOMPosition(),u=s.y+s.height/2;if(u-a>0){e=i;break}}if(e!==-1)for(var c=0;c<n.length;c++){var d=n[c],m=d.getVideoPlayerController();m&&(c===e?m.setVideoPriorityAdjustment(.1):d===t?m.setVideoPriorityAdjustment(r("VideoPlayerExperiments").offsetToBestUnitPriority):r("VideoPlayerExperiments").dePrioritizeUpfoldVideos&&c<e?m.setVideoPriorityAdjustment(-.5):m.setVideoPriorityAdjustment(0))}},n})(r("VideoAutoplayControllerBase"));l.default=m}),98);
__d("VideoChannelProgressCircle.react",["cx","ReactDOM_DEPRECATED","Style","react","stringRefShim"],(function(t,n,r,o,a,i,l,s){var e,u=e||(e=o("react")),c=(function(e){function t(){for(var t,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return t=e.call.apply(e,[this].concat(r))||this,t.$2=null,t.$3=0,babelHelpers.assertThisInitialized(t)||babelHelpers.assertThisInitialized(t)}babelHelpers.inheritsLoose(t,e);var n=t.prototype;return n.componentDidMount=function(){this.drawProgressCircle(this.props),this.$1=o("ReactDOM_DEPRECATED").findDOMNode_DEPRECATED(this)},n.componentWillUnmount=function(){window.clearInterval(this.$2)},n.UNSAFE_componentWillReceiveProps=function(t){(t.makeProgress!==this.props.makeProgress||t.timeoutSec!==this.props.timeoutSec)&&this.drawProgressCircle(t)},n.drawProgressCircle=function(t){var e=this,n=o("ReactDOM_DEPRECATED").findDOMNode_DEPRECATED(this.refs.progressCircle),a=this.$3,i=a/100;r("Style").set(n,"stroke-dashoffset",a+"px"),window.clearInterval(this.$2),t.makeProgress&&(this.$2=window.setInterval(function(){a-=i,r("Style").set(n,"stroke-dashoffset",a+"px"),a<=0&&(window.clearInterval(e.$2),r("Style").set(n,"stroke-dashoffset","0px"),t.onProgressDone&&t.onProgressDone())},t.timeoutSec*10))},n.render=function(){var e=this.props.watchAndScroll?34:80,t=this.props.watchAndScroll?2:4,n=e/2,o=n-t/2;return this.$3=o*2*Math.PI,u.jsxs("div",{className:"x1a2a7pz",children:[u.jsxs("svg",{className:"_20_8",children:[u.jsx("circle",{cx:n,cy:n,r:o,stroke:"#ffffff",strokeWidth:t,strokeDasharray:this.$3,fill:"transparent"}),u.jsx("circle",{ref:r("stringRefShim")(this,"progressCircle"),cx:n,cy:n,r:o,stroke:"#5890ff",strokeWidth:t,strokeDasharray:this.$3,fill:"transparent"})]}),this.props.children]})},t})(u.PureComponent);l.default=c}),98);
__d("VideoChannelReplayImage.react",["cx","Image.react","react"],(function(t,n,r,o,a,i,l,s){var e,u=e||(e=o("react")),c=(function(e){function t(){return e.apply(this,arguments)||this}babelHelpers.inheritsLoose(t,e);var n=t.prototype;return n.render=function(){return u.jsx(r("Image.react"),{onClick:this.props.onClick,className:"_4nxy"+(this.props.size==="small"?" _4nxz":""),src:"/images/video/channel_view/replay.svg"})},t})(u.Component);c.defaultProps={size:"normal"},l.default=c}),98);
__d("XVideoChannelViewStoryAsyncController",["XController"],(function(t,n,r,o,a,i){a.exports=n("XController").create("/video/channel/view/story/async/{root_video_id}/",{root_video_id:{type:"String",required:!0},video_ids:{type:"StringVector",defaultValue:[]},use_video_placeholder:{type:"Bool",defaultValue:!1},setup_interactions:{type:"Bool",defaultValue:!1},is_first_story:{type:"Bool",defaultValue:!1},feed_tracking_data:{type:"StringVector",defaultValue:[]},caller:{type:"Enum",defaultValue:"channel_view_from_unknown",enumType:1},channel_id:{type:"String"},ad_impression_token:{type:"String"},fetch_channel_pivots:{type:"Bool",defaultValue:!1}})}),null);
__d("VideoChannelStoryFetcher",["AsyncRequest","HTML","ThisControllerNoLongerExists","XVideoChannelViewStoryAsyncController"],(function(t,n,r,o,a,i,l){var e=(function(){function e(e,t,n,r,o,a,i){if(this.$7=e,this.$8=t,this.$4=n,this.$10=0,this.$2=null,this.$3=!0,this.$5=[],this.$6=[],this.$9={},o){this.$5=o.videoIDs,this.$6=o.feedTrackingData,this.$2=o.cursorInfo.cursor,this.$3=o.cursorInfo.hasNextPage;var l=this.$5.indexOf(this.$7);this.$9.start=l,this.$9.end=l+1}if(a){this.$5=a,this.$3=!!i;var s=this.$5.indexOf(this.$7);this.$9.start=s,this.$9.end=s+1}this.$11=r,this.$12=[],this.$13=[]}var t=e.prototype;return t.reset=function(t,n){this.$7=t,this.$8=n,this.$10=0,this.$2=null,this.$3=!0,this.$5=[],this.$6=[],this.$9={},this.$12=[],this.$13=[]},t.abandonRequest=function(){this.$1&&this.$1.abandon()},t.hasNext=function(){var e=this.$5.length-this.$9.end>0;return this.$3||e},t.$14=function(t,n,r){var e={};e.event=t,e.request_status=n,e.perf_time_ms=Date.now()-r},t.fetchFirstStory=function(t,n,o){var e=this;if(n===null&&this.$5.length!==0){var a=this.$5.indexOf(this.$7);n=this.$6[a]}var i=r("XVideoChannelViewStoryAsyncController").getURIBuilder().setEnum("caller",this.$4).setStringVector("video_ids",[this.$7]).setString("root_video_id",this.$7).setBool("is_first_story",!0).setBool("use_video_placeholder",t).setBool("setup_interactions",o).setString("channel_id",this.$8).setString("ad_impression_token",this.$11);n&&i.setStringVector("feed_tracking_data",[JSON.stringify(n)]);var l=Date.now(),s=new(r("AsyncRequest"))(i.getURI()).setAllowCrossPageTransition(!0).setHandler(function(){e.$14("fetch_first_story","succeeded",l),e.$15()}).setErrorHandler(function(){e.$14("fetch_first_story","failed",l),e.$15()}).setAbortHandler(function(){e.$14("fetch_first_story","aborted",l),e.$15()});this.$1=s,this.$10=Date.now(),s.send()},t.getPreloadedData=function(){return{stories:this.$12,thumbnails:this.$13}},t.$16=function(t,n){var e=this;if(this.$8){var a=o("ThisControllerNoLongerExists").__DEADBUILDER__("jp6s5648o").setString("id",this.$8).setEnum("caller",this.$4).setString("original_video_id",this.$7).setInt("story_count",t);this.$2&&a.setString("cursor",this.$2.toString());var i=Date.now(),l=a.getURI(),s=new(r("AsyncRequest"))(l).setAllowCrossPageTransition(!0).setHandler(function(t){e.$14("fetch_stories_from_entquery","succeeded",i),e.$2=t.getPayload().cursor,e.$3=t.getPayload().hasNextPage,e.$15(),e.$17(t,function(t,r){return e.$12=[].concat(e.$12,t),e.$13=[].concat(e.$13,r),n(t,r)})}).setErrorHandler(function(){e.$14("fetch_stories_from_entquery","failed",i),e.$15()}).setAbortHandler(function(){e.$14("fetch_stories_from_entquery","aborted",i),e.$15()});this.$1=s,s.send()}},t.$18=function(t,n,o){var e=this,a=this.$9.end,i=this.$5.length-a,l=a+Math.min(i,t);if(i>0){var s=this.$5.slice(a,l),u=this.$6.slice(a,l).map(function(e){return JSON.stringify(e)}),c=r("XVideoChannelViewStoryAsyncController").getURIBuilder().setEnum("caller",this.$4).setString("channel_id",this.$8).setString("root_video_id",this.$7).setStringVector("video_ids",s).setStringVector("feed_tracking_data",u),d=Date.now();this.$1=new(r("AsyncRequest"))(c.getURI()).setAllowCrossPageTransition(!0).setErrorHandler(function(){e.$14("fetch_stories_forward","failed",d),e.$15()}).setAbortHandler(function(){e.$14("fetch_stories_forward","aborted",d),e.$15()}).setHandler(function(t){e.$14("fetch_stories_forward","succeeded",d),e.$9.end=l,e.$15(),e.$17(t,function(t,r){return e.$12=[].concat(e.$12,t),e.$13=[].concat(e.$13,r),n(t,r)})}),this.$1.send(),o&&o(i)}else this.$3&&(this.$16(t,n),o&&o(t))},t.$19=function(t,n,o){var e=this,a=this.$9.start;if(a>0){var i=Math.max(a-t,0),l=this.$5.slice(i,a),s=this.$6.slice(i,a).map(function(e){return JSON.stringify(e)}),u=r("XVideoChannelViewStoryAsyncController").getURIBuilder().setEnum("caller",this.$4).setString("channel_id",this.$8).setString("root_video_id",this.$7).setStringVector("video_ids",l).setStringVector("feed_tracking_data",s),c=Date.now();this.$1=new(r("AsyncRequest"))(u.getURI()).setAllowCrossPageTransition(!0).setErrorHandler(function(){e.$14("fetch_stories_backward","failed",c),e.$15()}).setAbortHandler(function(){e.$14("fetch_stories_backward","aborted",c),e.$15()}).setHandler(function(t){e.$14("fetch_stories_backward","succeeded",c),e.$9.start=i,e.$15(),e.$17(t,n)}),this.$1.send(),o&&o(a-i)}},t.fetchStories=function(t,n,r){var e=3;this.$1||(t?this.$18(e,n,r):this.$19(e,n,r))},t.$17=function(t,n){var e=t.getPayload(),o=r("HTML").replaceJSONWrapper(e.stories).getNodes(),a=e.thumbnails.map(function(e){return r("HTML").replaceJSONWrapper(e).getRootNode()});n(o,a)},t.$15=function(){this.$1=null},e})();l.default=e}),98);
__d("VideoClipButton.react",["cx","fbt","ix","AbstractButton.react","Arbiter","Image.react","TooltipData","XUISpinner.react","XUIText.react","react"],(function(t,n,r,o,a,i,l,s,u,c){"use strict";var e,d=e||(e=o("react")),m=u._(/*BTDS*/"Generating clip..."),p=(function(e){function t(){for(var t,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return t=e.call.apply(e,[this].concat(r))||this,t.state={isClipping:!1},t.$1=null,t.$2=function(){t.setState({isClipping:!1})},babelHelpers.assertThisInitialized(t)||babelHelpers.assertThisInitialized(t)}babelHelpers.inheritsLoose(t,e);var n=t.prototype;return n.componentDidMount=function(){this.$1=r("Arbiter").subscribe("GamesVideoClipping/clipReady",this.$2)},n.componentWillUnmount=function(){this.$1&&r("Arbiter").unsubscribe(this.$1)},n.render=function(){var e,t=this,n=u._(/*BTDS*/"Create a clip from the last {num_seconds} seconds",[u._param("num_seconds",this.props.defaultLengthInSec)]);return this.state.isClipping?d.jsx(r("XUIText.react"),{className:"_zbd _25cu","data-hover":"tooltip","data-tooltip-content":m,children:d.jsx(r("XUISpinner.react"),{className:"_rwt",background:"light",size:"small",paused:!1})}):d.jsx(r("AbstractButton.react"),babelHelpers.extends({},o("TooltipData").propsFor(n,"above"),{className:"_zbd _8z3u",image:d.jsx(r("Image.react"),{className:"_rwt",src:this.props.iconSrc}),label:(e=this.props.buttonLabel)!=null?e:n,labelIsHidden:this.props.buttonLabel===null,onClick:function(){t.setState({isClipping:!0}),t.props.onClipVideo()},tabIndex:"0"}))},t})(d.Component);p.defaultProps={buttonLabel:null,iconSrc:c("468574")},l.default=p}),226);
__d("VideoFBIconControl.react",["cx","fbt","ix","AbstractButton.react","Image.react","TooltipData","URI","react","stringRefShim"],(function(t,n,r,o,a,i,l,s,u,c){"use strict";var e,d,m=d||(d=o("react")),p=2,_=(function(t){function n(){return t.apply(this,arguments)||this}babelHelpers.inheritsLoose(n,t);var a=n.prototype;return a.render=function(){var t=new(e||(e=r("URI")))(this.props.permalinkURL).addQueryData("t",Math.max(0,Math.floor(this.props.playbackPosTimestamp)-p));return m.jsx(r("AbstractButton.react"),babelHelpers.extends({},o("TooltipData").propsFor(this.props.label,"above"),{className:"_zbd",href:t,image:m.jsx(r("Image.react"),{className:"_rwt",src:c("804741")}),label:this.props.label,labelIsHidden:this.props.labelIsHidden,ref:r("stringRefShim")(this,"button"),tabIndex:"0",target:"_blank",type:"button"}))},n})(m.Component);_.defaultProps={label:u._(/*BTDS*/"Click to watch on Facebook"),labelIsHidden:!0},l.default=_}),226);
__d("fbjs/lib/shallowEqual",["shallowEqual"],(function(t,n,r,o,a,i){"use strict";a.exports=n("shallowEqual")}),null);
__d("shallowCompare",["fbjs/lib/shallowEqual"],(function(t,n,r,o,a,i){"use strict";function e(e,t,r){return!n("fbjs/lib/shallowEqual")(e.props,t)||!n("fbjs/lib/shallowEqual")(e.state,r)}i.default=e}),66);
__d("VideoFullscreenControl.react",["cx","fbt","ix","AbstractVideoFullscreenControl.react","Image.react","ReactDOM_DEPRECATED","VideoPlayerExperiments","react","shallowCompare","stringRefShim"],(function(t,n,r,o,a,i,l,s,u,c){"use strict";var e,d=e||(e=o("react")),m=(function(e){function t(){return e.apply(this,arguments)||this}babelHelpers.inheritsLoose(t,e);var n=t.prototype;return n.shouldComponentUpdate=function(t,n){return r("shallowCompare")(this,t,n)},n.onMouseOut=function(t){o("ReactDOM_DEPRECATED").findDOMNode_DEPRECATED(this.refs.button).blur()},n.render=function(){var e;r("VideoPlayerExperiments").fourArrowFullScreen?e=this.props.isFullscreen?c("463031"):c("412613"):e=this.props.isFullscreen?c("463022"):c("407577");var t=d.jsx(r("Image.react"),{className:"_rwt",src:e}),n=this.props.isFullscreen?u._(/*BTDS*/"Exit Fullscreen"):u._(/*BTDS*/"Enter Fullscreen");return d.jsx(r("AbstractVideoFullscreenControl.react"),babelHelpers.extends({},this.props,{className:"_zbd"+(this.props.disabled?" _132h":"")+" _39ip","data-testid":void 0,disabled:this.props.disabled,image:t,onMouseOut:this.onMouseOut.bind(this),ref:r("stringRefShim")(this,"button"),tabIndex:this.props.tabIndex,type:"button",label:n,labelIsHidden:!0}))},t})(d.Component);l.default=m}),226);
__d("VideoPlaybackControl.react",["cx","fbt","ix","AbstractButton.react","Image.react","ReactDOM_DEPRECATED","TooltipData","react","shallowCompare","stringRefShim"],(function(t,n,r,o,a,i,l,s,u,c){"use strict";var e,d=e||(e=o("react")),m=(function(e){function t(t){var n;return n=e.call(this,t)||this,n.state={awaitingUpdate:!1,isPlayingOverwrite:!1},n}babelHelpers.inheritsLoose(t,e);var n=t.prototype;return n.shouldComponentUpdate=function(t,n){return r("shallowCompare")(this,t,n)},n.isPlaying=function(){return this.state.awaitingUpdate?this.state.isPlayingOverwrite:this.props.isPlaying},n.onButtonClick=function(){var e=this.isPlaying();this.setState({awaitingUpdate:!0,isPlayingOverwrite:!e}),e?this.props.onPause&&this.props.onPause():this.props.onPlay&&this.props.onPlay()},n.UNSAFE_componentWillReceiveProps=function(){this.setState({awaitingUpdate:!1})},n.onMouseOut=function(t){o("ReactDOM_DEPRECATED").findDOMNode_DEPRECATED(this.refs.button).blur()},n.render=function(){var e=null,t="";this.props.finishedPlaying?(this.props.useDarkTheme?e=c("463014"):e=c("463019"),t=u._(/*BTDS*/"Replay")):this.props.isLiveVideo?e=this.isPlaying()?c("463008"):c("431972"):(this.props.useDarkTheme?e=this.isPlaying()?c("463003"):c("462853"):e=this.isPlaying()?c("463005"):c("374088"),t=this.isPlaying()?u._(/*BTDS*/"Pause"):u._(/*BTDS*/"Play"));var n=d.jsx(r("Image.react"),{className:"_rwt",src:e}),a=(this.props.isLiveVideo?"":"_zbd")+(this.props.isLiveVideo?" _rx5":"")+" _2sm1";return d.jsx(r("AbstractButton.react"),babelHelpers.extends({},o("TooltipData").propsFor(t,"above"),{className:a,"data-testid":void 0,image:n,label:t,labelIsHidden:!0,onClick:this.onButtonClick.bind(this),onMouseOut:this.onMouseOut.bind(this),ref:r("stringRefShim")(this,"button"),tabIndex:this.props.tabIndex,type:"button"}))},t})(d.Component);m.defaultProps={useDarkTheme:!1},l.default=m}),226);
__d("VideoPlaybackRateControl.react",["cx","fbt","AbstractButton.react","PlaybackSpeedExperiments","VideoPlayerExperiments","react","shallowCompare","stringRefShim"],(function(t,n,r,o,a,i,l,s,u){var e,c=e||(e=o("react"));function d(e){return e.toFixed(2).replace(/\.0+/,".0")+"x"}var m=(function(e){function t(){for(var t,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return t=e.call.apply(e,[this].concat(r))||this,t.state={isMenuOpen:!1,isFocusTriggeredByMouse:!1,rate:1},t.onFocus=function(){t.state.isFocusTriggeredByMouse||t.setState({isMenuOpen:!0})},t.onBlur=function(){t.state.isFocusTriggeredByMouse?t.setState({isFocusTriggeredByMouse:!1}):t.setState({isMenuOpen:!1})},t.onMouseDown=function(){return t.setState({isFocusTriggeredByMouse:!0})},t.onMouseOverButton=function(){return t.setState({isMenuOpen:!0})},t.onMouseLeave=function(){return t.setState({isMenuOpen:!1})},babelHelpers.assertThisInitialized(t)||babelHelpers.assertThisInitialized(t)}babelHelpers.inheritsLoose(t,e);var n=t.prototype;return n.shouldComponentUpdate=function(t,n){return r("shallowCompare")(this,t,n)},n.createRateItem=function(t,n,r){var e=function(t){r(),t.preventDefault()},o=null;n&&(o=c.jsx("div",{className:"_2iw1"}));var a=c.jsx("div",{className:"_2iw3",style:{backgroundColor:"inherit"},children:o});return c.jsxs("a",{href:"#",className:"_2iw4",onClick:e,tabIndex:this.props.tabIndex,children:[a,c.jsx("div",{className:"_2iw5 _2iw6",children:t})]},t)},n.render=function(){var e=this,t=d(this.state.rate),n=null;if(!this.props.disabled){var a=o("PlaybackSpeedExperiments").enableWwwPlaybackSpeedControl()?[.5,.75,1,1.25,1.5,1.75,2]:[.5,1,1.25,1.5,1.75,2,2.5,3,3.5,4,5],i=a.map(function(t){return e.createRateItem(d(t),e.state.rate===t,function(){e.props.onSelectPlaybackRate&&e.props.onSelectPlaybackRate(t),e.setState({rate:t})})});n=c.jsx("div",{className:"_67bw"+(this.state.isMenuOpen?" _2iw8":""),children:c.jsx("div",{className:"_2i_w",children:c.jsxs("div",{className:"_2i_x",children:[c.jsx("div",{className:"_2iw5",children:u._(/*BTDS*/"Play Speed")}),i,c.jsx("div",{className:"_ukl"})]})})})}var l="_zbd _66_y"+(!r("VideoPlayerExperiments").embeddedPlayerEnhancements||!this.props.isEmbedded?" _66_z":""),s=c.jsx(r("AbstractButton.react"),{className:l,label:t,onMouseDown:this.onMouseDown,onMouseOver:this.onMouseOverButton,ref:r("stringRefShim")(this,"button"),tabIndex:this.props.tabIndex,type:"button"});return c.jsxs("div",{className:"_2j04",onFocus:this.onFocus,onBlur:this.onBlur,onMouseLeave:this.onMouseLeave,children:[s,n]})},t})(c.Component);m.defaultProps={tabIndex:"-1"},l.default=m}),226);
__d("VideoPlaybackTimer.react",["cx","DateConsts","ShimButton.react","VideoPlayerExperiments","joinClasses","react","shallowCompare"],(function(t,n,r,o,a,i,l,s){var e,u=e||(e=o("react")),c=(function(e){function t(t){var n;return n=e.call(this,t)||this,n.state={displayRemainingTime:!n.props.displayElapsedTime,displayPreferenceSet:!1},n}babelHelpers.inheritsLoose(t,e);var n=t.prototype;return n.shouldComponentUpdate=function(t,n){return r("shallowCompare")(this,t,n)},n.UNSAFE_componentWillReceiveProps=function(t){this.state.displayPreferenceSet||this.setState({displayRemainingTime:!t.displayElapsedTime})},n.getClock=function(t){var e="";isNaN(t)?t=0:t<0&&(t*=-1,e="-");var n=Math.floor(t/o("DateConsts").SEC_PER_HOUR),r=Math.floor((t-n*o("DateConsts").SEC_PER_HOUR)/o("DateConsts").SEC_PER_MIN),a=null;this.props.displayMilliseconds?a=Math.floor(t-n*o("DateConsts").SEC_PER_HOUR-r*o("DateConsts").SEC_PER_MIN):a=Math.round(t-n*o("DateConsts").SEC_PER_HOUR-r*o("DateConsts").SEC_PER_MIN),a===o("DateConsts").SEC_PER_MIN&&(a=0,r++),r===o("DateConsts").MIN_PER_HOUR&&(r=0,n++);var i=t-n*o("DateConsts").SEC_PER_HOUR-r*o("DateConsts").SEC_PER_MIN-a,l=Math.round(i*o("DateConsts").MS_PER_SEC),s=("0"+r).slice(-2),u=("0"+a).slice(-2),c=("00"+l).slice(-3),d=e;return n===0?d+=r+":"+u:d+=n+":"+s+":"+u,this.props.displayMilliseconds&&(d+="."+c),d},n.onButtonClick=function(){this.setState({displayRemainingTime:!this.state.displayRemainingTime,displayPreferenceSet:!0})},n.render=function(){var e=this.state.displayPreferenceSet?this.state.displayRemainingTime:!this.props.displayElapsedTime,t=e?this.props.remainingTimestamp:this.props.playbackPosTimestamp,n="_66_y"+((!r("VideoPlayerExperiments").embeddedPlayerEnhancements||!this.props.isEmbedded)&&!this.props.displayBothTimes?" _66_z":"");this.props.isInScrubberPreview&&(n="_66_-");var o=babelHelpers.extends({},this.props);return delete o.displayElapsedTime,delete o.displayMilliseconds,delete o.isInScrubberPreview,delete o.playbackPosTimestamp,delete o.remainingTimestamp,delete o.isEmbedded,this.props.displayBothTimes?u.jsxs("div",babelHelpers.extends({},o,{className:r("joinClasses")(this.props.className,n),children:[u.jsx("span",{className:"_66_z",children:this.getClock(this.props.playbackPosTimestamp)}),u.jsx("span",{children:" / "}),u.jsx("span",{children:this.getClock(this.props.playbackDurationTimestamp)})]})):u.jsx(r("ShimButton.react"),babelHelpers.extends({},o,{className:r("joinClasses")(this.props.className,n),onClick:this.props.isLiveVideo?void 0:this.onButtonClick.bind(this),children:this.getClock(t)}))},t})(u.Component);c.defaultProps={isInScrubberPreview:!1,playbackDurationTimestamp:0,playbackPosTimestamp:0,remainingTimestamp:0,displayElapsedTime:!1,displayMilliseconds:!1,displayBothTimes:!1,useDarkTheme:!1},l.default=c}),98);
__d("VideoPollCardDispatcher",["ExplicitRegistrationDispatcher"],(function(t,n,r,o,a,i,l){"use strict";var e=new(r("ExplicitRegistrationDispatcher"))({strict:!1});l.default=e}),98);
__d("VideoPollCardActionTypes",["keyMirror"],(function(t,n,r,o,a,i,l){"use strict";var e=r("keyMirror")({MARK_POLL_CARD_ACTIVE:"",MARK_POLL_CARD_INACTIVE:""}),s=e;l.default=s}),98);
__d("VideoPollCardStore",["FluxReduceStore","ImmutableRecordWithV4Types","VideoPollCardActionTypes","VideoPollCardDispatcher","immutable"],(function(t,n,r,o,a,i,l){"use strict";var e=o("ImmutableRecordWithV4Types").Record({pollCardsActiveForVPC:{}}),s=(function(t){function n(){for(var e,n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];return e=t.call.apply(t,[this].concat(o))||this,e.reduce=function(e,t){var n=t.pollEventID,o=t.vpcID;switch(t.type){case r("VideoPollCardActionTypes").MARK_POLL_CARD_ACTIVE:if(e.pollCardsActiveForVPC[o]===null){var a=e.pollCardsActiveForVPC,i=r("immutable").List();a[o]=i.push(n),e=e.set("pollCardsActiveForVPC",a)}else{var l,s=e.pollCardsActiveForVPC,u=(l=e.pollCardsActiveForVPC[o])!=null?l:r("immutable").List();s[o]=u.push(n),e=e.set("pollCardsActiveForVPC",s)}return e;case r("VideoPollCardActionTypes").MARK_POLL_CARD_INACTIVE:if(e.pollCardsActiveForVPC[o]!==null){var c,d=e.pollCardsActiveForVPC,m=(c=d[o])!=null?c:r("immutable").List();m=m.filter(function(e){return e!==n}),d[o]=m,e=e.set("pollCardsActiveForVPC",d)}return e;default:return e}},babelHelpers.assertThisInitialized(e)||babelHelpers.assertThisInitialized(e)}babelHelpers.inheritsLoose(n,t);var o=n.prototype;return o.getInitialState=function(){return e()},n})(r("FluxReduceStore"));s.__moduleID=i.id;var u=new s(r("VideoPollCardDispatcher"));l.default=u}),98);
__d("VideoInstreamAdsConstants.experimental",["cr:27514"],(function(t,n,r,o,a,i,l){"use strict";l.default=n("cr:27514")}),98);
__d("VideoInstreamUtils",["fbt","DateConsts","VideoInstreamAdsConstants.experimental"],(function(t,n,r,o,a,i,l,s){function e(e){var t=0,n=e.split(".");if(n.length>2)return null;if(n.length===2){if(n[1].length===0)return null;for(var r=n[1];r.length<3;)r+="0";var a=Number(r);if(isNaN(a)||a<0||a>=o("DateConsts").MS_PER_SEC)return null;t+=a/o("DateConsts").MS_PER_SEC}var i=n[0].split(":");if(i.length>3)return null;for(var l=0;l<i.length;l++){if(i[l].length===0)return null;var s=Number(i[l]);if(isNaN(s)||s<0||s>=60)return null;t+=s*Math.pow(60,i.length-l-1)}return t}function u(e){var t;e=Math.round(e*(t=o("DateConsts")).MS_PER_SEC)/t.MS_PER_SEC;var n=Math.floor(e/t.SEC_PER_HOUR),r=e-n*t.SEC_PER_HOUR,a=Math.floor(r/t.SEC_PER_MIN),i=Math.floor(r-a*t.SEC_PER_MIN),l=Math.round(r*t.MS_PER_SEC),s=("0"+n).slice(-2),u=("0"+a).slice(-2),c=("0"+i).slice(-2),d=("00"+l).slice(-3),m="";return n>0&&(m+=s+":"),m+=u+":"+c+"."+d}function c(e,t){var n=Math.ceil(e)*o("DateConsts").MS_PER_SEC;if(n<r("VideoInstreamAdsConstants.experimental").AD_INSERTION_MINIMUM_VIDEO_LENGTH_MS)return 0;if(!t)return r("VideoInstreamAdsConstants.experimental").AD_INSERTION_MAXIMUM_NUMBER_OF_AD_BREAKS;var a=(n-r("VideoInstreamAdsConstants.experimental").AD_INSERTION_END_TIME_OFFSET_MS-r("VideoInstreamAdsConstants.experimental").AD_INSERTION_START_TIME_OFFSET_MS)/r("VideoInstreamAdsConstants.experimental").AD_INSERTION_INTERVAL_MS;return Math.max(0,Math.floor(a)+1)}function d(e,t,n){var a=c(t,n);if(a===0||!n&&e.length>=a)return[];var i=r("VideoInstreamAdsConstants.experimental").AD_INSERTION_START_TIME_OFFSET_MS/o("DateConsts").MS_PER_SEC,l=t-r("VideoInstreamAdsConstants.experimental").AD_INSERTION_END_TIME_OFFSET_MS/o("DateConsts").MS_PER_SEC,s=r("VideoInstreamAdsConstants.experimental").AD_INSERTION_INTERVAL_MS/o("DateConsts").MS_PER_SEC;if(e.length===0||!n)return[{start:i,end:l}];var u=[];return e.forEach(function(t,n){if(n===0){var r=t.timeOffset-s;r>=i&&u.push({start:i,end:r})}if(n-1>=0){var o=e[n-1].timeOffset+s,a=t.timeOffset-s;o<=a&&u.push({start:o,end:a})}if(n===e.length-1){var c=t.timeOffset+s;c<=l&&u.push({start:c,end:l})}}),u}function m(e,t,n,r){if(e==null)return!1;for(var o=d(n,t,r),a=0;a<o.length;a++)if(e>=o[a].start&&e<=o[a].end)return!0;return!1}function p(e,t,n,a){var i=e[t];if(i.timeOffset*o("DateConsts").MS_PER_SEC<r("VideoInstreamAdsConstants.experimental").AD_INSERTION_START_TIME_OFFSET_MS||(n-i.timeOffset)*o("DateConsts").MS_PER_SEC<r("VideoInstreamAdsConstants.experimental").AD_INSERTION_END_TIME_OFFSET_MS)return!0;if(a){for(var l=0;l<e.length;l++)if(!(l===t||e[l].timeOffset>=i.timeOffset)&&(i.timeOffset-e[l].timeOffset)*o("DateConsts").MS_PER_SEC<r("VideoInstreamAdsConstants.experimental").AD_INSERTION_INTERVAL_MS)return!0}return!1}function _(e,t,n,r){var o=new Set(e);return c(n,r)===0&&o.add("video_too_short"),t&&o.add("branded_content"),f(o)}function f(e){return e.size===0?{disabled:!1,errorMessageHeader:null,errorMessageContent:null}:e.has("video_too_short")?{disabled:!0,errorMessageHeader:s._(/*BTDS*/"_j{\"*\":\"Videos must be {insertion interval} seconds or longer\"}",[s._param("insertion interval",r("VideoInstreamAdsConstants.experimental").AD_INSERTION_MINIMUM_VIDEO_LENGTH,[0])]),errorMessageContent:s._(/*BTDS*/"Your video is too short to include in-stream ads.")}:e.has("not_organic_upload")?{disabled:!0,errorMessageHeader:s._(/*BTDS*/"In-stream ads not available"),errorMessageContent:s._(/*BTDS*/"In-stream ads can only be placed in original videos, not crossposted or reshared videos.")}:e.has("broadcast")?{disabled:!0,errorMessageHeader:s._(/*BTDS*/"In-stream ads not available"),errorMessageContent:s._(/*BTDS*/"Live videos are not eligible for in-stream ads, even if they are no longer live.")}:e.has("branded_content")?{disabled:!0,errorMessageHeader:s._(/*BTDS*/"In-stream ads not available"),errorMessageContent:s._(/*BTDS*/"In-stream ads can't be used in this video because it contains tagged business partners.")}:e.has("asset_not_owned_by_page")||e.has("unowned_asset_crosspost")?{disabled:!0,errorMessageHeader:s._(/*BTDS*/"In-stream ads not available"),errorMessageContent:s._(/*BTDS*/"You can only modify in-stream ads in videos that belong to Pages you manage.")}:{disabled:!0,errorMessageHeader:s._(/*BTDS*/"In-stream ads not available"),errorMessageContent:null}}l.convertFormattedTimeToSeconds=e,l.convertTimestampToFormattedString=u,l.getMaxPossibleAdBreaks=c,l.getEligibleTimeSegments=d,l.isInEligibleTimeSegments=m,l.isAdBreakViolatingInsertionRules=p,l.getAdBreakTabState=_,l._getAdBreakTabStateFromDisabledReasons=f}),226);
__d("VideoScrubberPointOfInterestBar.react",["cx","ShimButton.react","VideoPlaybackTimer.react","react","vulture"],(function(t,n,r,o,a,i,l,s){var e,u=e||(e=o("react")),c=(function(e){function t(){for(var t,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return t=e.call.apply(e,[this].concat(r))||this,t.state={visibility:"hidden"},babelHelpers.assertThisInitialized(t)||babelHelpers.assertThisInitialized(t)}babelHelpers.inheritsLoose(t,e);var n=t.prototype;return n.render=function(){var e=this;r("vulture")("74x-1B0zszvC1BLIb4m19hACWmM=");var t=this.props.timestamp,n=t*100/this.props.playbackDuration+"%",o=u.jsx(r("VideoPlaybackTimer.react"),{className:"_zs-",isInScrubberPreview:!0,playbackPosTimestamp:0,remainingTimestamp:t,style:{left:n,visibility:this.state.visibility}});return u.jsxs("div",{children:[u.jsx(r("ShimButton.react"),{className:"_zt2"+(this.props.isActive?" _zt3":""),onClick:function(r){return e.props.onPointOfInterestSelect(t)},onMouseEnter:function(n){return e.setState({visibility:"visible"})},onMouseLeave:function(n){return e.setState({visibility:"hidden"})},style:{left:n}}),this.props.showPointOfInterestTimestamps&&o]})},t})(u.PureComponent),d=(function(e){function t(){for(var t,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return t=e.call.apply(e,[this].concat(r))||this,t.$1=function(e){return u.jsx(c,{playbackDuration:t.props.playbackDuration,timestamp:e,isActive:e===t.props.currentPointOfInterest,onPointOfInterestSelect:t.props.onPointOfInterestSelect,showPointOfInterestTimestamps:!!t.props.showPointOfInterestTimestamps},"poi"+e)},babelHelpers.assertThisInitialized(t)||babelHelpers.assertThisInitialized(t)}babelHelpers.inheritsLoose(t,e);var n=t.prototype;return n.shouldComponentUpdate=function(t,n){var e=this;return t.tabIndex!=this.props.tabIndex||t.currentPointOfInterest!==this.props.currentPointOfInterest||t.playbackDuration!=this.props.playbackDuration||t.pointsOfInterest.length!=this.props.pointsOfInterest.length||t.pointsOfInterest.some(function(t,n){return e.props.pointsOfInterest[n]!=t})},n.render=function(){return r("vulture")("IoB5pLr7NGWyQSucVSfKS_uhNk0="),u.jsx("div",{className:"_zud",tabIndex:this.props.tabIndex,children:u.jsx("div",{className:"_zue",children:this.props.pointsOfInterest.map(this.$1,this)})})},t})(u.Component);l.default=d}),98);
__d("VideoScrubberPreviewSpriteCalculation",[],(function(t,n,r,o,a,i){function e(e,t){var n=s(t.maxImagesPerSprite,t.timeIntervalBetweenImages),r=Math.floor(e%n/t.timeIntervalBetweenImages),o=Math.floor(r/t.imagesPerRow),a=r%t.imagesPerRow;return{x:a*t.previewScrubberWidth,y:o*t.previewScrubberHeight}}function l(e,t,n){var r=s(t,n);return Math.floor(e/r)+1}function s(e,t){return e*t}i.getImageCoordinatesInSpriteByTime=e,i.getSpriteIndex=l,i.getTotalTimeInSprite=s}),66);
__d("VideoScrubber.react",["cx","ix","Arbiter","ClickableArea.react","DateConsts","EventListener","Image.react","Keys","ProfileTile.react","ReactDOM_DEPRECATED","Tooltip.react","VideoInstreamAdsConstants.experimental","VideoInstreamUtils","VideoPlaybackTimer.react","VideoScrubberPointOfInterestBar.react","VideoScrubberPreviewSpriteCalculation","emptyFunction","getElementPosition","joinClasses","react","shallowCompare","stringRefShim"],(function(t,n,r,o,a,i,l,s,u){var e,c=e||(e=o("react"));function d(e,t){var n=e-t.x,r=n/t.width;return Math.min(Math.max(0,r),1)}function m(e,t){if(e==null||t==null)return null;for(var n=0;n<e.length;++n){var r=e[n];if(r.identifier===t)return r}return null}var p=(function(e){function t(t){var n;return n=e.call(this,t)||this,n.$7=null,n.$8=null,n.$9=null,n.$11=null,n.onMouseEnterScrubberNub=function(){n.props.showVideoSliderWarningTooltip&&n.setState({hoverNub:!0})},n.onMouseLeaveScrubberNub=function(){n.props.showVideoSliderWarningTooltip&&n.setState({hoverNub:!1})},n.$6=new Map([[0,""]]),n.$10=0,n.state={awaitingUpdate:!1,hoverNub:!1,mouseOver:!1,nubEngaged:!1,previewRatio:0,scrubRatio:0,timecodeRatio:0,timecodeTimestamp:0,scrubberPreviewSpriteIndex:0,scrubberPreviewBackgroundPosition:{x:0,y:0},previewThumbnailInformation:{timeIntervalBetweenImages:0,maxImagesPerSprite:0,imagesPerRow:0,imagesPerColumn:0,previewScrubberWidth:0,previewScrubberHeight:0,stereoMode:null,scrubberVideoURI:null,useScrubberVideo:!1},lastSpriteDimension:{numRow:0,numColumn:0},shouldIgnoreClipStartTS:!1},n}babelHelpers.inheritsLoose(t,e);var n=t.prototype;return n.shouldComponentUpdate=function(t,n){return r("shallowCompare")(this,t,n)},n.onDragNubBeginImpl=function(t,n){var e=this.$12();this.setState({nubEngaged:!0,scrubRatio:d(n,e)}),this.props.onScrubBegin&&this.props.onScrubBegin(),t.stopPropagation(),t.preventDefault()},n.onDragNubBeginClick=function(t){t.button===0&&this.onDragNubBeginImpl(t,t.clientX)},n.onDragNubBeginTouch=function(t){if(!this.props.alwaysShowThumbnail){var e=t.changedTouches;if(e!=null){var n=e[0];n!=null&&(this.$11=n.identifier,this.onDragNubBeginImpl(t,n.clientX))}}},n.UNSAFE_componentWillReceiveProps=function(t){if(this.setState({awaitingUpdate:!1}),this.props.alwaysShowThumbnail){this.$9=null,this.$8=null;var e=this.$12(),n=e.x+e.width*this.getPlayedRatio(t.playbackDuration,t.playbackPosition);this.$13(n,e)}},n.componentDidUpdate=function(t,n){var e=this;if(!n.nubEngaged&&this.state.nubEngaged){var o;this.$1=(o=r("EventListener")).listen(document,"mousemove",function(t){var n=t.clientX;e.onDragNubUpdate(n),t.preventDefault(),t.stopPropagation()}),this.$2=o.listen(document,"mouseup",function(t){var n=t.clientX;e.onDragNubRelease(n),t.preventDefault(),t.stopPropagation()}),this.$4=o.listen(document,"touchmove",function(t){var n=m(t.changedTouches,e.$11);n!=null&&(e.onDragNubUpdate(n.clientX),t.preventDefault(),t.stopPropagation())}),this.$3=o.listen(document,"touchend",function(t){var n=m(t.changedTouches,e.$11);n!=null&&(e.$11=null,e.onDragNubRelease(n.clientX),t.preventDefault(),t.stopPropagation())})}else n.nubEngaged&&!this.state.nubEngaged&&(this.$1&&this.$1.remove(),this.$2&&this.$2.remove(),this.$4&&this.$4.remove(),this.$3&&this.$3.remove());!n.mouseOver&&this.state.mouseOver?this.$5=r("EventListener").listen(document,"mousemove",function(t){var n=e.$12();e.$13(t.clientX,n),t.preventDefault(),t.stopPropagation()}):n.mouseOver&&!this.state.mouseOver&&this.$5&&this.$5.remove()},n.$13=function(t,n){var e,r=this.props.playbackDuration;if(r){var o=d(t,n)*r,a=(e=this.$8)!=null?e:this.$14();if(this.props.hasScrubberPreview)this.props.previewThumbnailInformation&&(this.state.previewThumbnailInformation.previewScrubberWidth===0&&this.retrievePreviewThumbnailInfo(),this.state.previewThumbnailInformation.useScrubberVideo&&this.state.previewThumbnailInformation.scrubberVideoURI!==null?this.updatePreviewThumbnailVideo(o,a,t):this.props.scrubberPreviewSprites&&this.updatePreviewThumbnail(this.props.scrubberPreviewSprites,o,a,t));else{var i=d(t,n)-Math.ceil(a.width/2)/n.width;this.setState({timecodeTimestamp:o,timecodeRatio:i})}}},n.updatePreviewThumbnail=function(t,n,r,o){this.setState({timecodeTimestamp:n});var e=Math.floor(n);if(this.isSpriteMapURIFetched()||(this.$6=t),this.state.previewThumbnailInformation){var a=this.state.previewThumbnailInformation;this.updatePreviewThumbnailImage(e,a)}this.updatePreviewThumbnailLocation(r,o)},n.updatePreviewThumbnailVideo=function(t,n,r){this.setState({timecodeTimestamp:t});var e=o("ReactDOM_DEPRECATED").findDOMNode_DEPRECATED(this.refs.previewThumbnailVideo);e.currentTime=t/30,this.updatePreviewThumbnailLocation(n,r)},n.updatePreviewThumbnailLocation=function(t,n){var e,r,o=(e=this.$9)!=null?e:this.$15(),a=(r=this.$7)!=null?r:this.$12(),i=d(n,a)-Math.ceil(o.width/2)/a.width,l=(o.width-t.width)/(2*o.width);this.setState({timecodeRatio:l,previewRatio:i})},n.updatePreviewThumbnailImage=function(t,n){var e=o("VideoScrubberPreviewSpriteCalculation").getImageCoordinatesInSpriteByTime(t,n),r=o("VideoScrubberPreviewSpriteCalculation").getSpriteIndex(t,n.maxImagesPerSprite,n.timeIntervalBetweenImages);if(r==this.getNumberOfSprites()&&this.state.lastSpriteDimension.numRow==0&&this.$6){var a=this.$6.get(r),i=new Image,l=this.onLastImageLoad.bind(this);i.onload=function(){l(this.width,this.height)},i.src=a}this.setState({scrubberPreviewSpriteIndex:r,scrubberPreviewBackgroundPosition:e})},n.onLastImageLoad=function(t,n){this.setState({lastSpriteDimension:{numRow:n/this.state.previewThumbnailInformation.previewScrubberHeight,numColumn:t/this.state.previewThumbnailInformation.previewScrubberWidth}})},n.retrievePreviewThumbnailInfo=function(){this.setState({previewThumbnailInformation:this.props.previewThumbnailInformation})},n.isSpriteMapURIFetched=function(){return this.$6?this.$6.size>1:!1},n.$12=function(){var e=r("getElementPosition")(o("ReactDOM_DEPRECATED").findDOMNode_DEPRECATED(this.refs.bar));return this.$7=e,e},n.$14=function(){var e=r("getElementPosition")(o("ReactDOM_DEPRECATED").findDOMNode_DEPRECATED(this.refs.timecode));return this.$8=e,e},n.$15=function(){var e=r("getElementPosition")(o("ReactDOM_DEPRECATED").findDOMNode_DEPRECATED(this.refs.previewThumbnailContainer));return this.$9=e,e},n.onDragNubUpdate=function(t){var e=this.$12();this.$13(t,e),this.setState({scrubRatio:d(t,e)})},n.onDragNubRelease=function(t){var e=this.$12();this.$13(t,e);var n=this.props.playbackDuration,r=d(t,e),a=this.state.awaitingUpdate;if(n){var i=r*n;this.props.onScrubEnd&&(this.props.onScrubEnd(i),a=!0);var l=this.props.videoClipInfo;l&&l.start_time_in_ms!==null&&i<=l.start_time_in_ms/o("DateConsts").MS_PER_SEC&&this.setState({shouldIgnoreClipStartTS:!0})}else this.props.onScrubEnd&&this.props.onScrubEnd(0);this.setState({nubEngaged:!1,awaitingUpdate:a,scrubRatio:r})},n.renderNub=function(){var e=c.jsx("div",{ref:r("stringRefShim")(this,"nub"),className:"_2yua _4sxb"+(this.props.showVideoSliderWarningTooltip?" _83lq":""),onMouseEnter:this.onMouseEnterScrubberNub,onMouseLeave:this.onMouseLeaveScrubberNub});return this.props.showVideoSliderWarningTooltip?c.jsx(r("Tooltip.react"),{className:"_83lm _4sxb",tooltip:"Rewinding, pausing or skipping ahead in the video will be seen by all viewers.",children:e}):e},n.getPlayedRatio=function(t,n){if(this.state.nubEngaged||this.state.awaitingUpdate)return this.state.scrubRatio;if(!t||!n)return 0;var e=n/t;return this.getRangeLimitedRatio(e)},n.getBufferedRatio=function(){var e=this.props.playbackDuration,t=this.props.bufferedPosition;if(!e||!t)return 0;var n=t/e;return this.getRangeLimitedRatio(n)},n.getRangeLimitedRatio=function(t){return isNaN(t)||t<0||t>1?0:t},n.getNumberOfSprites=function(){return this.$6?this.$6.size:0},n.getAdBreakIndicators=function(){if(!this.props.playbackDuration||!this.props.adBreaks)return null;for(var e=[],t=0;t<this.props.adBreaks.length;t++){var n=this.props.adBreaks[t],a=n.getTimeOffsetInMs();if(a!=null){a/=o("DateConsts").MS_PER_SEC;var i=this.props.playbackDuration;if(!(a<0||a>i)){var l={left:a/i*100+"%"},s=[];this.props.adBreaksDisableReasons&&(s=this.props.adBreaksDisableReasons[t]);var u="[FB Only] The in-stream ad is disabled for "+s.join(", ")+".";e.push(c.jsx("div",{style:l,className:(s.length===0?"_1p4l":"")+(s.length>0?" _1p4m":"")+(n.getIsAdBreakAutoInserted()&&s.length===0?" _1p4n":"")+(n.getIsAdBreakAutoInserted()&&s.length>0?" _1p4o":""),children:s.length>0?c.jsx(r("Tooltip.react"),{tooltip:u,children:"X"}):null},"ad_break_indicator_"+t))}}}return c.jsx("div",{children:e})},n.getInsertedAdBreaks=function(){var e=this;if(!this.props.playbackDuration||!this.props.insertedAdBreaks)return null;var t=[];return this.props.insertedAdBreaks.map(function(n,r){var o=n.timeOffset,a=e.props.playbackDuration,i={left:"calc("+o/a*100+"% - 2px)"};t.push(c.jsx("div",{style:i,className:(e.props.isAdBreakInsertionWithoutGapRule?"":"_1p4q")+(e.props.isAdBreakInsertionWithoutGapRule?" _1p4r":"")+(e.props.isAdBreakDisabled?" _1p4s":""),children:e.props.isAdBreakInsertionWithoutGapRule?null:r+1},"inserted_ad_break"+r))}),c.jsx("div",{children:t})},n.getEligibleAdBreaksTimeSegments=function(){var e=this;if(!this.props.playbackDuration||!this.props.insertedAdBreaks||this.props.isAdBreakInsertionWithoutGapRule&&this.props.insertedAdBreaks&&this.props.insertedAdBreaks.length>=r("VideoInstreamAdsConstants.experimental").AD_INSERTION_MAXIMUM_NUMBER_OF_AD_BREAKS)return null;var t=0;this.state.awaitingUpdate?t=this.$10:t=this.props.playbackPosition;var n=this.props.playbackDuration,a=o("VideoInstreamUtils").getEligibleTimeSegments(this.props.insertedAdBreaks,n,!this.props.isAdBreakInsertionWithoutGapRule);this.state.nubEngaged?this.$10=this.state.timecodeTimestamp:this.$10=t;var i=[];return a.forEach(function(t,r){var o=(t.end-t.start)/n*100,a=e.$10>=t.start&&e.$10<=t.end,l={left:"calc("+t.start/n*100+"% - 2px)",width:o+"%"};i.push(c.jsx("span",{className:"_1p4t"+(a?" _1p4u":""),style:l},"time_segment"+r))}),c.jsx("div",{className:"_1p50",children:i})},n.getInsertedStarsCues=function(){var e=this.props.selectedStarsCueTimestamp;if(!this.props.playbackDuration||e==null)return null;var t=this.props.playbackDuration,n={left:"calc("+e/t*100+"% - 10px)"},o={left:"calc("+e/t*100+"% - 3px)"};return c.jsxs("div",{children:[c.jsx(r("Image.react"),{src:u("1198335"),style:n,className:"_9evr"}),c.jsx("div",{style:o,className:"_9evs"})]})},n.getEligibleStarsCueTimeSegments=function(){var e=this,t=10;if(!this.props.playbackDuration||this.props.showEligibleStarsCueTimeSegments!==!0)return null;var n=0;this.state.awaitingUpdate?n=this.$10:n=this.props.playbackPosition;var r=this.props.playbackDuration,o=[{start:t,end:r}];this.state.nubEngaged?this.$10=this.state.timecodeTimestamp:this.$10=n;var a=[];return o.forEach(function(t,n){var o=(t.end-t.start)/r*100,i=e.$10>=t.start&&e.$10<=t.end,l={left:"calc("+t.start/r*100+"% - 2px)",width:o+"%"};a.push(c.jsx("span",{className:"_9evt"+(i?" _1p4u":""),style:l},"time_segment"+n))}),c.jsx("div",{className:"_9evu",children:a})},n.getPollTimeSegments=function(){var e,t=this;if(!this.props.playbackDuration)return null;var n=0;if(!this.props.showPollCard)return null;this.state.awaitingUpdate?n=this.$10:n=this.props.playbackPosition;var o=this.props.playbackDuration,a=(e=this.props.pollTimestamps)!=null?e:[];this.state.nubEngaged?this.$10=this.state.timecodeTimestamp:this.$10=n;var i=[];return a.forEach(function(e,n){var a={left:"calc("+e/o*100+"%)"},l=t.$10>=e;i.push(c.jsx(r("ClickableArea.react"),{onClick:function(o){o.stopPropagation(),o.persist(),t.props.onScrubEnd(e),r("Arbiter").inform("PollIconClicked")},children:c.jsx("span",{className:"_80r-",style:a,children:c.jsx(r("Image.react"),{className:"_80rd",src:u(l?"936893":"936896")})},"poll_segment"+n)},n)),i.push(c.jsx("span",{className:"_80re",style:a},"time_segment"+n))}),c.jsx("div",{className:"_80rf",children:i})},n.onMouseEnter=function(t){this.props.alwaysShowThumbnail||(this.$12(),this.setState({mouseOver:!0}))},n.onMouseLeave=function(t){this.props.alwaysShowThumbnail||(o("ReactDOM_DEPRECATED").findDOMNode_DEPRECATED(this.refs.bar).blur(),this.setState({mouseOver:!1}),this.state.nubEngaged||this.setState({scrubberPreviewSpriteIndex:0,scrubberPreviewBackgroundPosition:{x:0,y:0}}),this.$9=null,this.$8=null)},n.onMouseEnterOnThumbnailOrTimecode=function(t){if(!(this.state.nubEngaged||this.props.alwaysShowThumbnail)){var e;this.props.hasScrubberPreview?e=this.refs.previewThumbnailContainer:e=this.refs.timecode;var n=o("ReactDOM_DEPRECATED").findDOMNode_DEPRECATED(e);n.style.visibility="hidden"}},n.onMouseLeaveOnThumbnailOrTimecode=function(t){if(!(this.state.nubEngaged||this.props.alwaysShowThumbnail)){var e;this.props.hasScrubberPreview?e=this.refs.previewThumbnailContainer:e=this.refs.timecode;var n=o("ReactDOM_DEPRECATED").findDOMNode_DEPRECATED(e);n.style.visibility="visible"}},n.onKeyDown=function(t){var e=this.props.playbackDuration,n=this.props.playbackPosition;if(!(!e||!n)){var o=n;if(t.keyCode===r("Keys").RIGHT){if(t.preventDefault(),t.stopPropagation(),this.props.isLiveVideo&&this.props.onLiveRewindSeekForward){this.props.onLiveRewindSeekForward();return}o+=5,o>=e&&(o=e-.01)}else if(t.keyCode===r("Keys").LEFT){if(t.preventDefault(),t.stopPropagation(),this.props.isLiveVideo&&this.props.onLiveRewindSeekBack){this.props.onLiveRewindSeekBack();return}o-=5,o<0&&(o=0)}else if(t.keyCode===r("Keys").HOME){if(t.preventDefault(),t.stopPropagation(),this.props.isLiveVideo&&this.props.onLiveRewindToBeginning){this.props.onLiveRewindToBeginning();return}o=0}else if(t.keyCode===r("Keys").END){if(t.preventDefault(),t.stopPropagation(),this.props.isLiveVideo&&this.props.onLiveRewindToLive){this.props.onLiveRewindToLive();return}o=e-.01}else return;this.props.onScrubEnd&&this.props.onScrubEnd(o)}},n.render=function(){var e=r("joinClasses")(this.props.className,"_2yu5"+(this.state.nubEngaged?" _2yu6":"")),t=(this.props.hasScrubberPreview?"_3iit":"")+(this.props.hasScrubberPreview?"":" _3iiu"),n={width:this.getPlayedRatio(this.props.playbackDuration,this.props.playbackPosition)*100+"%"},a={width:this.getBufferedRatio()*100+"%"},i=this.props.videoClipInfo,l="0%";if(i){var s=this.getRangeLimitedRatio(i.start_time_in_ms/o("DateConsts").MS_PER_SEC/this.props.playbackDuration);l=s*100+"%",this.state.shouldIgnoreClipStartTS||(n={width:this.getRangeLimitedRatio(this.getPlayedRatio(this.props.playbackDuration,this.props.playbackPosition)-s)*100+"%",marginLeft:l},a={width:this.getRangeLimitedRatio(this.getBufferedRatio()-s)*100+"%",marginLeft:l})}var u={left:this.state.timecodeRatio*100+"%",display:this.state.hoverNub?"none":"block"},d={},m={},p=null,_=null,f=null;if((this.state.mouseOver||this.state.nubEngaged||this.props.alwaysShowThumbnail)&&(f=c.jsx(r("VideoPlaybackTimer.react"),{className:t,isInScrubberPreview:!0,onMouseEnter:this.onMouseEnterOnThumbnailOrTimecode.bind(this),onMouseLeave:this.onMouseLeaveOnThumbnailOrTimecode.bind(this),playbackPosTimestamp:0,ref:r("stringRefShim")(this,"timecode"),remainingTimestamp:this.state.timecodeTimestamp,style:u}),this.props.hasScrubberPreview&&this.state.previewThumbnailInformation)){var g=this.state.previewThumbnailInformation.previewScrubberWidth,h=this.state.previewThumbnailInformation.previewScrubberHeight,y=100,C=100;this.getNumberOfSprites()!==this.state.scrubberPreviewSpriteIndex?(y*=this.state.previewThumbnailInformation.imagesPerRow,C*=this.state.previewThumbnailInformation.imagesPerColumn):this.state.lastSpriteDimension.numRow&&(y*=this.state.lastSpriteDimension.numRow,C*=this.state.lastSpriteDimension.numColumn);var b=this.state.previewThumbnailInformation.stereoMode;b==="left-right"?(g/=2,y*=2):b==="top-bottom"&&(h/=2,C*=2);var v=1;if(this.props.isFullscreen?v=1.5:this.props.isInTahoe&&(v=1.2),this.state.previewThumbnailInformation.useScrubberVideo&&this.state.previewThumbnailInformation.scrubberVideoURI!==null)d={width:g*v+"px",height:h*v+"px"},_=c.jsx("video",{muted:"true",preload:"auto",ref:r("stringRefShim")(this,"previewThumbnailVideo"),src:this.state.previewThumbnailInformation.scrubberVideoURI,style:d});else if(this.$6){var S="";if(this.state.scrubberPreviewSpriteIndex){var R=this.$6.get(this.state.scrubberPreviewSpriteIndex);R!=null&&R!==""&&(S="url("+R+")")}var L;y>100?L=y+"% "+C+"%":S="",d={width:g*v+"px",height:h*v+"px",backgroundImage:S,backgroundPosition:"-"+this.state.scrubberPreviewBackgroundPosition.x*v+"px -"+this.state.scrubberPreviewBackgroundPosition.y*v+"px",backgroundSize:L},_=c.jsx("div",{className:"_3iiw",ref:r("stringRefShim")(this,"previewThumbnail"),style:d})}m={left:this.state.previewRatio*100+"%",display:this.props.alwaysShowThumbnail?"block":void 0},p=c.jsxs("div",{onMouseEnter:this.onMouseEnterOnThumbnailOrTimecode.bind(this),onMouseLeave:this.onMouseLeaveOnThumbnailOrTimecode.bind(this),className:"_3iiv",ref:r("stringRefShim")(this,"previewThumbnailContainer"),style:m,children:[_,f]})}var E=null;this.props.pointsOfInterest.length>0&&(E=c.jsx(r("VideoScrubberPointOfInterestBar.react"),{tabIndex:this.props.tabIndex,playbackDuration:this.props.playbackDuration,onPointOfInterestSelect:this.props.onPointOfInterestSelect,currentPointOfInterest:this.props.currentPointOfInterest,pointsOfInterest:this.props.pointsOfInterest,showPointOfInterestTimestamps:this.props.showPointOfInterestTimestamps}));var k=null,I=this.getAdBreakIndicators(),T=this.props.playbackDuration>500?10:1,D=Math.round(this.getPlayedRatio(this.props.playbackDuration,this.props.playbackPosition)*100*T)/T,x="Current position is "+D+"%",$=this.props.isFullscreen||this.props.isInTahoe,P=c.jsx("div",{className:e,onKeyDown:this.onKeyDown.bind(this),onMouseDown:this.onDragNubBeginClick.bind(this),onMouseEnter:this.onMouseEnter.bind(this),onMouseLeave:this.onMouseLeave.bind(this),onTouchStart:this.onDragNubBeginTouch.bind(this),children:c.jsxs("div",{tabIndex:this.props.tabIndex,role:"slider","aria-orientation":"horizontal","aria-valuemin":"0","aria-valuemax":this.props.playbackDuration,"aria-valuenow":this.props.playbackPosition,"aria-valuetext":x,className:"_2yu7",ref:r("stringRefShim")(this,"bar"),children:[c.jsx("div",{className:"_2yu8",style:a}),c.jsx("div",{style:n,className:(this.props.isLiveVideo?"":"_2yu9")+(this.props.isLiveVideo&&!this.props.isLiveRewound?" _1p51":"")+(this.props.isLiveRewound?" _1p52":""),children:this.renderNub()}),i?c.jsx("div",{className:"_355j",style:{width:l},children:c.jsx(r("ProfileTile.react"),{id:i.sharer_id,size:$?32:24,imageProps:{className:"_355k"},tileProps:{className:"_355n",style:{marginTop:$?-16:-10}}})}):null,this.props.hasScrubberPreview?p:f,I,this.getInsertedAdBreaks(),this.getInsertedStarsCues(),this.getEligibleAdBreaksTimeSegments(),this.getEligibleStarsCueTimeSegments(),this.getPollTimeSegments()]})});return c.jsxs("div",{children:[k,P,E]})},t})(c.Component);p.defaultProps={alwaysShowThumbnail:!1,annotatedMomentsOfInterest:{},hasScrubberPreview:!1,isAdBreakInsertionWithoutGapRule:!1,isFullscreen:!1,isInTahoe:!1,isLiveRewound:!1,isLiveVideo:!1,isPlaying:!1,pointsOfInterest:[],onAnnotatedMomentOfInterestSelect:r("emptyFunction"),onPointOfInterestSelect:r("emptyFunction"),onScrubBegin:r("emptyFunction"),onScrubEnd:r("emptyFunction"),showEligibleStarsCueTimeSegments:!1,showPointOfInterestTimestamps:!1,showPollCard:!1,showVideoSliderWarningTooltip:!1,selectedStarsCueTimestamp:null},l.default=p}),98);
__d("VideoSidepaneToggleControl.react",["cx","fbt","ix","AbstractButton.react","Image.react","TooltipData","react","stringRefShim","vulture"],(function(t,n,r,o,a,i,l,s,u,c){"use strict";var e,d=e||(e=o("react")),m=(function(e){function t(){for(var t,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return t=e.call.apply(e,[this].concat(r))||this,t.onButtonClick=function(){t.props.onSidePaneToggle()},babelHelpers.assertThisInitialized(t)||babelHelpers.assertThisInitialized(t)}babelHelpers.inheritsLoose(t,e);var n=t.prototype;return n.render=function(){r("vulture")("7PNAB3gGdbVFRSff6jPNllETolU=");var e=this.props.isSidePaneOpen?u._(/*BTDS*/"Click to hide details"):u._(/*BTDS*/"Click to show details"),t=this.props.isSidePaneOpen?c("114795"):c("114783");return d.jsx(r("AbstractButton.react"),babelHelpers.extends({className:"_zbd"},o("TooltipData").propsFor(e,"above"),{image:d.jsx(r("Image.react"),{className:"_23j0",src:t}),label:this.props.label,labelIsHidden:this.props.labelIsHidden,onClick:this.onButtonClick,ref:r("stringRefShim")(this,"button"),tabIndex:this.props.tabIndex,type:"button"}))},t})(d.PureComponent);m.defaultProps={label:u._(/*BTDS*/"Toggle details"),labelIsHidden:!0},l.default=m}),226);
__d("VideoVolumeSlider.react",["cx","EventListener","ReactDOM_DEPRECATED","getElementPosition","react","shallowCompare","stringRefShim"],(function(t,n,r,o,a,i,l,s){var e,u=e||(e=o("react")),c=(function(e){function t(t){var n;return n=e.call(this,t)||this,n.state={awaitingUpdate:!1,engaged:!1,volume:t.volume},n}babelHelpers.inheritsLoose(t,e);var n=t.prototype;return n.shouldComponentUpdate=function(t,n){return r("shallowCompare")(this,t,n)},n.UNSAFE_componentWillReceiveProps=function(t){this.setState({awaitingUpdate:!1})},n.componentDidUpdate=function(t,n){if(!this.state.engaged&&n.engaged)this.$2&&this.$2.remove(),this.$1&&this.$1.remove(),this.$3&&this.$3.remove(),this.$4&&this.$4.remove();else if(this.state.engaged&&!n.engaged){var e;this.$1=(e=r("EventListener")).listen(document,"mousemove",this.onMouseMove.bind(this)),this.$2=e.listen(document,"mouseup",this.onMouseUpImpl.bind(this)),this.$3=e.listen(document,"touchmove",this.onTouchMove.bind(this)),this.$4=e.listen(document,"touchend",this.onMouseUpImpl.bind(this))}},n.onMouseDownImpl=function(t,n,r){this.props.onVolumeChangeBegin&&this.props.onVolumeChangeBegin(this.state.volume),this.props.isHorizontal?this.setState({engaged:!0,volume:this.getClampedClickPositionVolume(n)}):this.setState({engaged:!0,volume:this.getClampedClickPositionVolume(r)}),t.preventDefault(),t.stopPropagation()},n.onMouseDown=function(t){t.button===0&&this.onMouseDownImpl(t,t.clientX,t.clientY)},n.onTouchDown=function(t){this.onMouseDownImpl(t,t.touches[0].clientX,t.touches[0].clientY)},n.getClampedClickPositionVolume=function(t){var e=r("getElementPosition")(o("ReactDOM_DEPRECATED").findDOMNode_DEPRECATED(this.refs.slider)),n=r("getElementPosition")(o("ReactDOM_DEPRECATED").findDOMNode_DEPRECATED(this.refs.nub)).height;if(this.props.isHorizontal){var a=t+n/2-e.x;return Math.max(0,Math.min(1,a/e.width))}else{var i=e.y-t+e.height+n/2;return Math.max(0,Math.min(1,i/e.height))}},n.onMouseUpImpl=function(t){this.props.onVolumeChangeEnd&&this.props.onVolumeChangeEnd(this.state.volume),this.setState({engaged:!1,awaitingUpdate:!0}),t.preventDefault(),t.stopPropagation()},n.onMouseMoveImpl=function(t,n,r){this.props.isHorizontal?this.setState({volume:this.getClampedClickPositionVolume(n)}):this.setState({volume:this.getClampedClickPositionVolume(r)}),this.props.onVolumeChange&&this.props.onVolumeChange(this.state.volume),t.preventDefault(),t.stopPropagation()},n.onMouseMove=function(t){this.onMouseMoveImpl(t,t.clientX,t.clientY)},n.onTouchMove=function(t){this.onMouseMoveImpl(t,t.touches[0].clientX,t.touches[0].clientY)},n.getVolume=function(){return this.state.engaged||this.state.awaitingUpdate?this.state.volume:this.props.volume},n.render=function(){var e=this.props.isHorizontal||!1,t=e?{width:Math.round(this.getVolume()*100)+"%"}:{height:Math.round(this.getVolume()*100)+"%"},n="_3pao"+(e?" _4sx9":"")+(this.state.engaged?" _2yu6":"");return u.jsxs("div",{className:n,onMouseDown:this.onMouseDown.bind(this),onTouchStart:this.onTouchDown.bind(this),children:[u.jsx("div",{className:"_4sxa",children:u.jsx("div",{className:"_3paq",ref:r("stringRefShim")(this,"slider"),children:u.jsx("div",{className:"_3par",style:t,children:u.jsx("div",{className:"_3pas _4sxb",ref:r("stringRefShim")(this,"nub")})})})}),u.jsx("div",{className:"_3pat"})]})},t})(u.Component);c.defaultProps={volume:0,onVolumeChange:function(t){},onVolumeChangeBegin:function(t){},onVolumeChangeEnd:function(t){}},l.default=c}),98);
__d("VideoVolumeControl.react",["cx","fbt","invariant","ix","AbstractButton.react","Image.react","Keys","ReactDOM_DEPRECATED","SpatialAudioFeedNUX.react","TooltipData","VideoPlayerVolumeSettings","VideoVolumeSlider.react","react","shallowCompare","stringRefShim"],(function(t,n,r,o,a,i,l,s,u,c,d){var e,m=e||(e=o("react")),p=(function(e){function t(t){var n;return n=e.call(this,t)||this,n.state={nubEngaged:!1,focused:!1,lastVolumeBeforeMute:1},n}babelHelpers.inheritsLoose(t,e);var n=t.prototype;return n.shouldComponentUpdate=function(t,n){return r("shallowCompare")(this,t,n)},n.onButtonClick=function(){if(this.checkLastVolumeBeforeMuteInvariant(),this.props.volume===0)return this.onSliderVolumeChange(this.state.lastVolumeBeforeMute);this.props.onToggleMuted&&this.props.onToggleMuted()},n.onButtonFocus=function(){this.setState({focused:!0})},n.onButtonBlur=function(){this.setState({focused:!1})},n.onKeyDown=function(t){var e=this.props.volume;if(t.keyCode===r("Keys").UP)t.preventDefault(),t.stopPropagation(),e+=.05,e>1&&(e=1);else if(t.keyCode===r("Keys").DOWN)t.preventDefault(),t.stopPropagation(),e-=.05,e<0&&(e=0);else return;this.onSliderVolumeChangeEnd(e)},n.onMouseOut=function(t){o("ReactDOM_DEPRECATED").findDOMNode_DEPRECATED(this.refs.button).blur()},n.getVolume=function(){return this.props.isMuted?0:this.props.volume},n.onSliderVolumeChangeBegin=function(){var e=this.props.volume;e>0&&(this.setState({nubEngaged:!0,lastVolumeBeforeMute:e}),r("VideoPlayerVolumeSettings").saveLastVolumeBeforeMute(e))},n.onSliderVolumeChangeEnd=function(t){t>0?(this.setState({lastVolumeBeforeMute:t}),r("VideoPlayerVolumeSettings").saveLastVolumeBeforeMute(t),this.onSliderVolumeChange(t)):(this.props.onVolumeChange(this.state.lastVolumeBeforeMute),this.props.isMuted||this.props.onToggleMuted&&this.props.onToggleMuted()),this.setState({nubEngaged:!1})},n.onSliderVolumeChange=function(t){(t>0&&this.props.isMuted||t===0&&!this.props.isMuted)&&this.props.onToggleMuted&&this.props.onToggleMuted(),this.props.onVolumeChange&&this.props.onVolumeChange(t)},n.checkLastVolumeBeforeMuteInvariant=function(){this.state.lastVolumeBeforeMute>0&&this.state.lastVolumeBeforeMute<=1||c(0,2385)},n.render=function(){var e=this,t=Math.round(this.getVolume()*100),n=null,a="";if(this.props.isAudioBlocked)a=u._(/*BTDS*/"Audio unavailable"),n=m.jsx("div",{children:m.jsx(r("Image.react"),{className:"_rwt",src:this.props.useDarkTheme?d("797748"):d("660433")})});else if(t==0)n=m.jsx(r("Image.react"),{className:"_rwt",src:this.props.useDarkTheme?d("462991"):d("462993")});else{var i=null;t<=33?i=this.props.useDarkTheme?d("462983"):d("462984"):t<=66?i=this.props.useDarkTheme?d("462987"):d("462988"):i=this.props.useDarkTheme?d("462971"):d("443962"),n=m.jsx("div",{className:"_1age",children:m.jsx("div",{className:"_1agf",children:m.jsx(r("Image.react"),{className:"_rwt",src:i})})})}var l="_2swo"+(this.state.nubEngaged?" _2yu6":"")+(this.state.focused?" _2iw8":""),s="_zbd _1agg",c=this.getVolume()?u._(/*BTDS*/"Mute"):u._(/*BTDS*/"Unmute"),p=this.props.isAudioBlocked?null:m.jsx(r("VideoVolumeSlider.react"),{onVolumeChangeBegin:this.onSliderVolumeChangeBegin.bind(this),onVolumeChangeEnd:this.onSliderVolumeChangeEnd.bind(this),onVolumeChange:this.onSliderVolumeChange.bind(this),isHorizontal:this.props.isHorizontal||!1,volume:this.getVolume()}),_=m.jsx(r("AbstractButton.react"),babelHelpers.extends({},o("TooltipData").propsFor(a,"above"),{className:s,"data-testid":void 0,image:n,label:c,labelIsHidden:!0,onBlur:this.onButtonBlur.bind(this),onClick:this.onButtonClick.bind(this),onFocus:this.onButtonFocus.bind(this),onKeyDown:this.onKeyDown.bind(this),onMouseOut:this.onMouseOut.bind(this),ref:r("stringRefShim")(this,"button"),tabIndex:this.props.tabIndex,type:"button"})),f=this.props.showSpatialAudioNUX?m.jsx(r("SpatialAudioFeedNUX.react"),{contextRef:function(){return e.refs.button}}):null;return this.props.isHorizontal?m.jsxs("div",{className:l,children:[_,p,f]}):m.jsxs("div",{className:l,children:[p,_,f]})},t})(m.Component);p.defaultProps={isAudioBlocked:!1,useDarkTheme:!1},l.default=p}),226);
__d("lazyLoadComponent",["BootloaderResource","cr:2448","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){var e=["ref"],s,u=s||(s=o("react")),c=new Map;function d(e,t){c.set(e,t)}function m(e){return c.get(e)}function p(t){var r=m(t);if(r)return r;function a(r){var a=o("react-compiler-runtime").c(7),i,l;a[0]!==r?(l=r.ref,i=babelHelpers.objectWithoutPropertiesLoose(r,e),a[0]=r,a[1]=i,a[2]=l):(i=a[1],l=a[2]);var s=l===void 0?void 0:l,c;a[3]===Symbol.for("react.memo_cache_sentinel")?(c=o("BootloaderResource").read(t),a[3]=c):c=a[3];var d=c;n("cr:2448")(t);var m;return a[4]!==i||a[5]!==s?(m=u.jsx(d,babelHelpers.extends({},i,{ref:s})),a[4]=i,a[5]=s,a[6]=m):m=a[6],m}return a.displayName="lazyLoadComponent("+t.getModuleId()+")",d(t,a),a}l.default=p}),98);
__d("VideoControls.react",["cx","fbt","ix","AbstractButton.react","BootloadedComponent.react","FluxContainer","Image.react","JSResource","LiveVideoRewindTypedLogger","TooltipData","VideoClipButton.react","VideoFBIconControl.react","VideoFullscreenControl.react","VideoPlaybackControl.react","VideoPlaybackRateControl.react","VideoPlaybackTimer.react","VideoPlayerExperiments","VideoPollCardDispatcher","VideoPollCardStore","VideoScrubber.react","VideoSidepaneToggleControl.react","VideoVolumeControl.react","emptyFunction","immutable","joinClasses","lazyLoadComponent","react","shallowCompare","stringRefShim"],(function(t,n,r,o,a,i,l,s,u,c){var e,d=e||(e=o("react")),m=r("lazyLoadComponent")(r("JSResource")("VideoActionsControl.react").__setRef("VideoControls.react")),p=36,_=(function(e){function t(){for(var t,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return t=e.call.apply(e,[this].concat(r))||this,t.state={pollCardsActiveForVPC:{}},babelHelpers.assertThisInitialized(t)||babelHelpers.assertThisInitialized(t)}babelHelpers.inheritsLoose(t,e),t.getStores=function(){return[r("VideoPollCardStore")]},t.calculateState=function(){var e=r("VideoPollCardStore").getState(),t=e.pollCardsActiveForVPC;return{pollCardsActiveForVPC:t}};var n=t.prototype;return n.UNSAFE_componentWillMount=function(){r("VideoPollCardDispatcher").explicitlyRegisterStores(t.getStores())},n.shouldComponentUpdate=function(t,n){return r("shallowCompare")(this,t,n)},n.componentDidUpdate=function(){var e,t,n,o=!this.props.finishedPlaying&&(this.props.vpcID!==void 0?this.state.pollCardsActiveForVPC[(e=this.props.vpcID)!=null?e:""]!==null?((t=this.state.pollCardsActiveForVPC[(n=this.props.vpcID)!=null?n:""])!=null?t:r("immutable").List()).size===0:!0:!1);if(o&&(this.props.pollTimestamps&&this.props.pollTimestamps.length>0))this.props.drawer&&this.props.drawer.setHeight(55);else{var a=this.props.isInWatchAndScroll?55:p;this.props.drawer&&this.props.drawer.setHeight(a)}},n.isHidden=function(){return this.props.hidden},n.isTransparent=function(){return this.props.transparent},n.render=function(){var e=r("VideoPlayerExperiments").inlineSoundVisible,t="_1c7d"+(this.isHidden()?" _1c7e":"")+(this.isTransparent()&&!e?" _2oy-":""),n="_2w_u"+(this.props.showSidePaneToggle?" _vr5":"")+(this.props.useDarkTheme?" _vr6":""),a="_1c7f _1c7g"+(this.isTransparent()&&e?" _2oy-":""),i="_1c7f _2pvx"+(this.isTransparent()&&e?" _2oy-":""),l="_1c7f _1c7h"+(this.isTransparent()&&e?" _2oy-":""),s="_1c7f _w7o"+(this.isTransparent()&&(!this.props.isInline||this.props.isFullscreen||!this.props.isPlaying)?" _2oy-":""),p="_2w_w",_=!1;this.props.isLive&&this.props.isInTahoe&&(_=!0);var f="_1otk _3t1r _4ubd"+(_?" _w7y":""),g="_3t1r _4ubd _3t1s"+(this.props.isCommentAttachment?"":" hidden_elem"),h=null;if(!(this.props.isLive||this.props.isFBWasLive)&&!this.props.hideRemainingTime&&!this.props.isInWatchAndScroll){var y=this.props.playbackPosition-this.props.playbackDuration;h=d.jsx(r("VideoPlaybackTimer.react"),{className:"_5qsr"+(this.props.displayMilliseconds?" _w7-":""),isEmbedded:this.props.isEmbedded,playbackPosTimestamp:this.props.playbackPosition,playbackDurationTimestamp:this.props.playbackDuration,remainingTimestamp:y,displayElapsedTime:this.props.displayElapsedTime,displayMilliseconds:this.props.displayMilliseconds,displayBothTimes:!1})}var C=null,b=null,v=null,S=null,R=null,L=this.props,E=L.showInlineCopyLinkOption,k=L.showInlineVideoReportOption,I=k||E;!this.props.hideSettings&&!this.props.isInWatchAndScroll&&!this.props.isEmbedded&&I&&(S=d.jsx(d.Suspense,{fallback:d.jsx("span",{}),children:d.jsx(m,{disabled:this.props.isCasting,onActionsClicked:this.props.onActionsClick,permalinkURL:this.props.permalinkURL,showCopyLink:E,showReportVideo:k,tabIndex:0})}));var T;if(this.props.isInTahoe&&this.props.isLive&&!this.props.isFullscreen&&(T=d.jsx(r("BootloadedComponent.react"),{bootloadLoader:r("JSResource")("VideoQuietModeControl.react").__setRef("VideoControls.react"),bootloadPlaceholder:d.jsx("span",{}),videoID:this.props.videoID})),(!this.props.isLive||this.props.hasHD)&&!this.props.hideSettings&&!this.props.isInWatchAndScroll&&r("VideoPlayerExperiments").redesign){var D,x;v=d.jsx(r("BootloadedComponent.react"),{bootloadLoader:r("JSResource")("VideoSettingsControl.react").__setRef("VideoControls.react"),bootloadPlaceholder:d.jsx("span",{}),disabled:this.props.isCasting,hasHD:this.props.hasHD,hasCaptions:this.props.hasCaptions,isHD:this.props.isHD,isInline:this.props.isInline,isLive:this.props.isLive,isSphericalVideo:this.props.isSphericalVideo,areCaptionsActive:this.props.areCaptionsActive,areCaptionsAutogenerated:this.props.areCaptionsAutogenerated,onSettingsClick:this.props.onSettingsClick,onToggleHD:this.props.onToggleHD,onToggleCaptions:this.props.onToggleCaptions,tabIndex:"0",availableQualities:this.props.availableQualities,selectedQuality:(D=this.props.selectedQuality)!=null?D:null,preferredQuality:(x=this.props.preferredQuality)!=null?x:null,canAutoSelectVideoQuality:this.props.canAutoSelectVideoQuality,onSelectQuality:this.props.onSelectQuality,showQualitySelector:this.props.showQualitySelector,qualitySelectorMinStreams:this.props.qualitySelectorMinStreams,streamingFormat:this.props.streamingFormat,videoID:this.props.videoID})}this.props.isLive&&r("VideoPlayerExperiments").hlsButton&&(R=d.jsx(r("BootloadedComponent.react"),{bootloadPlaceholder:d.jsx("span",{}),bootloadLoader:r("JSResource")("VideoToHLSControl.react").__setRef("VideoControls.react"),areHLSActive:this.props.areHLSActive,onToggleHLS:this.props.onToggleHLS,tabIndex:"0"}));var $=this.props.gamesVideoCreatorClipping&&(this.props.isInTahoe||this.props.isInline||this.props.gamesVideoClipButtonEnabled)&&this.props.gamesDefaultClipLengthInSec!=null&&this.props.gamesDefaultClipLengthInSec>0?d.jsx(r("VideoClipButton.react"),{onClipVideo:this.props.onClipVideo,defaultLengthInSec:this.props.gamesDefaultClipLengthInSec}):null,P=null;if(this.props.allowFullscreen)if(this.props.doesFullscreenEnterTahoe&&(this.props.isInline||this.props.isInWatchAndScroll)){var N=d.jsx(r("Image.react"),{className:"_rwt",src:c("407577")}),M=u._(/*BTDS*/"Click to enlarge");P=d.jsx(r("AbstractButton.react"),babelHelpers.extends({},o("TooltipData").propsFor(M,"above"),{className:"_zbd _400z _1vek",image:N,label:M,labelIsHidden:!0,onClick:this.props.onEnterTahoe,tabIndex:"0"}))}else{var w=this.props.isFullscreen?u._(/*BTDS*/"Click to exit fullscreen"):u._(/*BTDS*/"Click to enter fullscreen");P=d.jsx(r("VideoFullscreenControl.react"),babelHelpers.extends({},o("TooltipData").propsFor(w,"above"),{disabled:this.props.isCasting&&!this.props.isFullscreen,isFullscreen:this.props.isFullscreen,onToggleFullscreen:this.props.onToggleFullscreen,tabIndex:"0"}))}var A=null;this.props.hasWatchAndScroll&&!this.props.isFullscreen&&!this.props.isInWatchAndScroll&&(A=d.jsx(r("BootloadedComponent.react"),{bootloadPlaceholder:d.jsx("span",{}),bootloadLoader:r("JSResource")("VideoWatchAndScrollControl.react").__setRef("VideoControls.react"),disabled:this.props.isCasting,onEnterWatchAndScroll:this.props.onEnterWatchAndScroll,isSlidingWNSEligible:this.props.isSlidingWNSEligible,onWNSNUXClose:this.props.onWNSNUXClose,showWNSNUX:this.props.showWNSNUX}));var F=null;this.props.allowCasting&&this.props.hasFoundReceiver&&(F=d.jsx(r("BootloadedComponent.react"),{bootloadPlaceholder:d.jsx("span",{}),bootloadLoader:r("JSResource")("VideoCastingControl.react").__setRef("VideoControls.react"),hasFoundReceiver:this.props.hasFoundReceiver,isCasting:this.props.isCasting,isCastingSupported:this.props.isCastingSupported,onStartCast:this.props.onStartCast,onStopCast:this.props.onStopCast}));var O=null;if(this.props.isEmbeddedPlayerRedesignEnabled)O=this.props.permalinkURL&&this.props.showPermalinkButton?d.jsx(r("VideoFBIconControl.react"),{permalinkURL:this.props.permalinkURL,playbackPosTimestamp:this.props.playbackPosition}):null;else{var B=null,W=this.props.isWatchIconEligible?c("909284"):c("804741");if(this.props.permalinkURL&&this.props.showPermalinkButton){B=d.jsx(r("Image.react"),{className:"_rwt",src:W});var q=u._(/*BTDS*/"Open in a new tab");O=d.jsx(r("AbstractButton.react"),babelHelpers.extends({},o("TooltipData").propsFor(q,"above"),{className:"_zbd",href:this.props.permalinkURL,image:B,label:q,labelIsHidden:!0,ref:r("stringRefShim")(this,"button"),tabIndex:"0",target:"_blank",type:"button"}))}}var U=null,V=null,H=null,G=null,z=null;if((this.props.isLive||this.props.isFBWasLive)&&this.props.showPlayButtonForLive&&!this.props.isLiveRewindEnabled)V=d.jsx(r("VideoPlaybackControl.react"),{finishedPlaying:this.props.finishedPlaying,isPlaying:this.props.isPlaying,onPause:this.props.onPause,onPlay:this.props.onPlay,useDarkTheme:this.props.useDarkTheme,tabIndex:"0"});else if(!(this.props.isLive||this.props.isFBWasLive)&&!this.props.hidePlaybackControl){if(V=d.jsx(r("VideoPlaybackControl.react"),{finishedPlaying:this.props.finishedPlaying,isPlaying:this.props.isPlaying,onPause:this.props.onPause,onPlay:this.props.onPlay,useDarkTheme:this.props.useDarkTheme,tabIndex:"0"}),this.props.showPlaybackRateControl&&this.props.onSetVideoPlaybackRate){var j=u._(/*BTDS*/"Playback Rate");H=d.jsx(r("VideoPlaybackRateControl.react"),babelHelpers.extends({},o("TooltipData").propsFor(j,"above"),{isEmbedded:this.props.isEmbedded,tabIndex:0,onSelectPlaybackRate:this.props.onSetVideoPlaybackRate}))}if(!this.props.hidePlaybackScrubber){var K,Q,X,Y,J=!this.props.finishedPlaying&&(this.props.vpcID!==void 0?this.state.pollCardsActiveForVPC[(K=this.props.vpcID)!=null?K:""]!==null?((Q=this.state.pollCardsActiveForVPC[(X=this.props.vpcID)!=null?X:""])!=null?Q:r("immutable").List()).size===0:!0:!1);U=d.jsx(r("VideoScrubber.react"),{adBreaks:this.props.adBreaks,adBreaksDisableReasons:this.props.adBreaksDisableReasons,annotatedMomentsOfInterest:this.props.annotatedMomentsOfInterest,bufferedPosition:this.props.bufferedPosition,controlsHidden:this.props.hidden,hasScrubberPreview:this.props.hasScrubberPreview,interestLevels:this.props.interestLevels,drawer:this.props.drawer,insertedAdBreaks:this.props.insertedAdBreaks,isAdBreakDisabled:this.props.isAdBreakDisabled,isAdBreakInsertionWithoutGapRule:this.props.isAdBreakInsertionWithoutGapRule,isFullscreen:this.props.isFullscreen,isPlaying:this.props.isPlaying,onScrubBegin:this.props.onScrubBegin,onScrubEnd:this.props.onScrubEnd,playbackDuration:this.props.playbackDuration,playbackPosition:this.props.playbackPosition,pollTimestamps:this.props.pollTimestamps,showPollCard:J,onAnnotatedMomentOfInterestSelect:this.props.onAnnotatedMomentOfInterestSelect,previewThumbnailInformation:this.props.previewThumbnailInformation,scrubberPreviewSprites:this.props.scrubberPreviewSprites,showEligibleStarsCueTimeSegments:this.props.showEligibleStarsCueTimeSegments,selectedStarsCueTimestamp:this.props.selectedStarsCueTimestamp,onPointOfInterestSelect:this.props.onPointOfInterestSelect,currentPointOfInterest:this.props.currentPointOfInterest,pointsOfInterest:this.props.pointsOfInterest,showPointOfInterestTimestamps:this.props.showPointOfInterestTimestamps,showVideoSliderWarningTooltip:(Y=this.props.showVideoSliderWarningTooltip)!=null?Y:!1,tabIndex:0,isInTahoe:this.props.isInTahoe,videoClipInfo:this.props.videoClipInfo})}}var Z=null;this.props.showSidePaneToggle&&(Z=d.jsx(r("VideoSidepaneToggleControl.react"),{isSidePaneOpen:this.props.isSidePaneOpen,onSidePaneToggle:this.props.onSidePaneToggle,tabIndex:"0"}));var ee=null;this.props.hideGradient||(ee=d.jsx("div",{className:"_w80"+(this.isTransparent()?" _2oy-":"")+(this.props.useLargerGradient?" _8y-6":"")}));var te=d.jsx(r("VideoVolumeControl.react"),{isAudioBlocked:this.props.isAudioBlocked,isMuted:this.props.isMuted,onToggleMuted:this.props.onToggleMuted,onVolumeChange:this.props.onVolumeChange,volume:this.props.volume,tabIndex:"0",showSpatialAudioNUX:this.props.showSpatialAudioNUX,useDarkTheme:this.props.useDarkTheme}),ne,re,oe,ae,ie,le,se,ue,ce=this.props,de=ce.onLiveRewindToBeginning,me=ce.onLiveRewindSeekBack,pe=ce.onLiveRewindSeekForward,_e=ce.onLiveRewindToLive;if(this.props.isLiveRewindEnabled&&!this.props.isEmbedded){if(this.props.liveRelativePlaybackPosition!=null){var fe=this.props.liveRelativePlaybackPosition>this.props.playbackDuration?this.props.playbackDuration:this.props.liveRelativePlaybackPosition;if(se=this.props.isInWatchAndScroll?null:d.jsx(r("VideoPlaybackTimer.react"),{className:"_3ek9 _5qsr"+(this.props.displayMilliseconds?" _w7-":""),displayElapsedTime:!0,displayMilliseconds:this.props.displayMilliseconds,isEmbedded:this.props.isEmbedded,isLiveVideo:!0,playbackPosTimestamp:fe,playbackDurationTimestamp:this.props.isFBWasLive?this.props.playbackDuration:void 0,displayBothTimes:this.props.isFBWasLive,remainingTimestamp:-1*(this.props.playbackDuration-fe)}),le=d.jsx(r("VideoScrubber.react"),{adBreaks:this.props.adBreaks,adBreaksDisableReasons:this.props.adBreaksDisableReasons,bufferedPosition:this.props.bufferedPosition,className:"_3ek9",controlsHidden:this.props.hidden,currentPointOfInterest:this.props.currentPointOfInterest,drawer:this.props.drawer,hasScrubberPreview:this.props.hasScrubberPreview,interestLevels:this.props.interestLevels,insertedAdBreaks:this.props.insertedAdBreaks,isAdBreakDisabled:this.props.isAdBreakDisabled,isAdBreakInsertionWithoutGapRule:this.props.isAdBreakInsertionWithoutGapRule,isFullscreen:this.props.isFullscreen,isInTahoe:this.props.isInTahoe,isLiveRewound:this.props.isLiveRewound,isLiveVideo:!0,isPlaying:this.props.isPlaying,playbackDuration:this.props.playbackDuration,playbackPosition:this.props.isLiveRewound?fe:this.props.playbackDuration,pointsOfInterest:this.props.pointsOfInterest,previewThumbnailInformation:this.props.previewThumbnailInformation,scrubberPreviewSprites:this.props.scrubberPreviewSprites,showEligibleStarsCueTimeSegments:this.props.showEligibleStarsCueTimeSegments,selectedStarsCueTimestamp:this.props.selectedStarsCueTimestamp,showPointOfInterestTimestamps:this.props.showPointOfInterestTimestamps,tabIndex:0,onLiveRewindToBeginning:this.props.onLiveRewindToBeginning,onLiveRewindSeekBack:this.props.onLiveRewindSeekBack,onLiveRewindSeekForward:this.props.onLiveRewindSeekForward,onLiveRewindToLive:this.props.onLiveRewindToLive,onPointOfInterestSelect:this.props.onPointOfInterestSelect,onScrubBegin:this.props.onScrubBegin,onScrubEnd:this.props.onScrubEnd}),this.props.showPlaybackRateControl&&this.props.onSetVideoPlaybackRate&&this.props.isLiveRewound){var ge=u._(/*BTDS*/"Playback Rate");H=d.jsx(r("VideoPlaybackRateControl.react"),babelHelpers.extends({},o("TooltipData").propsFor(ge,"above"),{isEmbedded:this.props.isEmbedded,tabIndex:0,onSelectPlaybackRate:this.props.onSetVideoPlaybackRate}))}new(r("LiveVideoRewindTypedLogger"))().setEvent("render_rewind_controls").setVideoID(this.props.videoID).log()}ne=de&&!this.props.isInWatchAndScroll&&!this.props.isInline?d.jsx(r("BootloadedComponent.react"),{bootloadLoader:r("JSResource")("VideoLiveRewindControl.react").__setRef("VideoControls.react"),bootloadPlaceholder:d.jsx("span",{}),asset:c("465766"),tooltip:u._(/*BTDS*/"Go to beginning"),onButtonClick:de}):null,ue=this.props.isFBWasLive&&_e&&!this.props.isInWatchAndScroll&&!this.props.isInline?d.jsx(r("BootloadedComponent.react"),{bootloadLoader:r("JSResource")("VideoLiveRewindControl.react").__setRef("VideoControls.react"),bootloadPlaceholder:d.jsx("span",{}),asset:c("465765"),tooltip:u._(/*BTDS*/"Go to end"),onButtonClick:_e}):null,re=me&&!this.props.isInWatchAndScroll?d.jsx(r("BootloadedComponent.react"),{bootloadLoader:r("JSResource")("VideoLiveRewindControl.react").__setRef("VideoControls.react"),bootloadPlaceholder:d.jsx("span",{}),asset:c("465767"),tooltip:u._(/*BTDS*/"Skip back"),onButtonClick:me}):null;var he=this.props.isLiveRewound?u._(/*BTDS*/"Skip ahead"):void 0;oe=pe&&!this.props.isInWatchAndScroll&&!this.props.isInline?d.jsx(r("BootloadedComponent.react"),{bootloadLoader:r("JSResource")("VideoLiveRewindControl.react").__setRef("VideoControls.react"),bootloadPlaceholder:d.jsx("span",{}),asset:c("465768"),disabled:!this.props.isLiveRewound,tooltip:he,onButtonClick:pe}):null;var ye=this.props.isLiveRewound?c("467224"):c("467223"),Ce=this.props.isLiveRewound?u._(/*BTDS*/"Live view"):void 0;ae=_e?d.jsx(r("BootloadedComponent.react"),{bootloadLoader:r("JSResource")("VideoLiveRewindControl.react").__setRef("VideoControls.react"),bootloadPlaceholder:d.jsx("span",{}),asset:ye,tooltip:Ce,onButtonClick:_e}):null,ie=this.props.isInWatchAndScroll?null:d.jsx(r("VideoPlaybackControl.react"),{finishedPlaying:this.props.finishedPlaying,isLiveVideo:!0,isPlaying:this.props.isPlaying,onPause:this.props.onPause,onPlay:this.props.onPlay,useDarkTheme:this.props.useDarkTheme,tabIndex:"0"})}var be=null,ve=this.props.showControlsOnFullScreenOnly===!0?this.props.isFullscreen:!0;if(this.props.useTwoRows){var Se=d.jsx(r("VideoVolumeControl.react"),{isAudioBlocked:this.props.isAudioBlocked,isMuted:this.props.isMuted,onToggleMuted:this.props.onToggleMuted,onVolumeChange:this.props.onVolumeChange,volume:this.props.volume,isHorizontal:!0,tabIndex:"0"});be=d.jsxs("div",{className:g,children:[d.jsx("div",{className:p,children:d.jsxs("div",{className:t,children:[d.jsx("div",{className:a}),d.jsx("div",{className:i,children:U}),d.jsx("div",{className:l,children:h})]})}),d.jsx("div",{className:p,children:d.jsxs("div",{className:t,children:[d.jsxs("div",{className:a,children:[V,H,Se]}),d.jsx("div",{className:i}),d.jsxs("div",{className:l,children:[b,R,C,v,A,F,P,O,$,S]})]})})]})}var Re=null;if(r("VideoPlayerExperiments").embeddedPlayerEnhancements&&this.props.isEmbedded){var Le=r("joinClasses")(t,r("VideoPlayerExperiments").embeddedPlayerEnhancements?"_w83":""),Ee=r("joinClasses")(t,"_w86");Re=d.jsx("div",{className:Le,children:d.jsxs("div",{className:p,children:[d.jsxs("div",{className:Ee,children:[ve&&d.jsxs("div",{className:a,children:[V,H]}),d.jsx("div",{className:i,children:U}),d.jsx("div",{className:l,children:h})]}),d.jsxs("div",{className:t,children:[ve&&d.jsxs(d.Fragment,{children:[d.jsx("div",{className:a}),d.jsx("div",{className:i})]}),d.jsxs("div",{className:l,children:[ve&&d.jsxs(d.Fragment,{children:[e||te,b,R,C,T,v,A,F,Z]}),P,ve&&d.jsxs(d.Fragment,{children:[O,$,S]})]}),d.jsx("div",{className:s,children:!e||te})]})]})})}else Re=!this.props.useTwoRows||!this.props.isCommentAttachment?d.jsx("div",{className:f,"data-testid":void 0,children:d.jsx("div",{className:p,children:d.jsxs("div",{className:t,children:[d.jsxs("div",{className:a,children:[ve&&d.jsxs(d.Fragment,{children:[z,V,H,G,ne,re,ie,oe]}),this.props.isFBWasLive?ue:ae,se]}),d.jsxs("div",{className:i,children:[U,le]}),d.jsxs("div",{className:l,children:[h,ve&&d.jsxs(d.Fragment,{children:[e||te,b,R,C,T,v,A,F,Z]}),P,ve&&d.jsxs(d.Fragment,{children:[O,$,S]})]}),d.jsx("div",{className:s,children:this.props.allowAudioButton===!1?d.jsx("div",{}):!e||te})]})})}):null;return d.jsxs("div",{className:n,children:[ee,Re,be]})},t})(d.Component);_.defaultProps={allowCasting:!1,allowAudioButton:!0,bufferedPosition:0,displayElapsedTime:!1,showControlsOnFullScreenOnly:!1,displayMilliseconds:!1,gamesVideoClipButtonEnabled:!1,gamesVideoCreatorClipping:!1,gamesDefaultClipLengthInSec:void 0,hasFoundReceiver:!1,hidden:!1,hideGradient:!1,hidePlaybackControl:!1,hidePlaybackScrubber:!1,hideRemainingTime:!1,hideSettings:!1,isAudioBlocked:!1,isCasting:!1,isCastingSupported:!1,isCommentAttachment:!1,isFBWasLive:!1,isInTahoe:!1,isLiveRewound:!1,isMuted:!1,isPlaying:!1,isSphericalVideo:!1,isWatchIconEligible:!1,onSidePaneToggle:r("emptyFunction"),onStartCast:r("emptyFunction"),onStopCast:r("emptyFunction"),playbackDuration:0,playbackPosition:0,showInlineCopyLinkOption:!1,showInlineVideoReportOption:!1,showPermalinkButton:!1,showPlaybackRateControl:!1,showPlayButtonForLive:!1,showSidePaneToggle:!1,showVideoSliderWarningTooltip:!1,showWNSNUX:!1,transparent:!1,useDarkTheme:!1,useLargerGradient:!1,useTwoRows:!1,volume:0};var f=r("FluxContainer").create(_);l.default=f}),226);
__d("VideoWatchAndScrollDrawer.react",["csx","cx","fbt","AsyncRequest","DOM","DOMContainer.react","FBLoadShimmer.react","ThisControllerNoLongerExists","react","vulture"],(function(t,n,r,o,a,i,l,s,u,c){var e,d=e||(e=o("react")),m=(function(e){function t(){for(var t,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return t=e.call.apply(e,[this].concat(r))||this,t.state={fetching:!0,upNext:null},babelHelpers.assertThisInitialized(t)||babelHelpers.assertThisInitialized(t)}babelHelpers.inheritsLoose(t,e);var n=t.prototype;return n.componentDidMount=function(){this.props.videoID&&this.$2(this.props.videoID)},n.componentWillUnmount=function(){this.$1&&this.$1.abort()},n.$2=function(t){var e=this,n=o("ThisControllerNoLongerExists").__DEADBUILDER__("algda5tzx").setFBID("video_id",t).setFBIDSet("viewed_videos",this.props.viewedVideos);this.$1=new(r("AsyncRequest"))(n.getURI()),this.$1.setHandler(function(t){var n=t.getPayload(),o=n.upNextUnit&&n.upNextUnit.markup;if(o){var a=r("DOM").create("div",{},o),i=r("DOM").scry(a,"._3iqr");i.length&&(e.setState({upNext:a}),e.props.onLoadUpNext(a,n.canAutoplay))}e.setState({fetching:!1})}).send()},n.render=function(){r("vulture")("kMOojBxXS-41Zg-R6DCaMMf6bzU=");var e=null;if(this.state.upNext)e=d.jsx(r("DOMContainer.react"),{children:this.state.upNext});else if(this.state.fetching){var t;e=d.jsxs("div",{className:"_2685",children:[d.jsx(t=r("FBLoadShimmer.react"),{height:70,width:124}),d.jsxs("div",{className:"_63-r",children:[d.jsx(t,{height:14,width:140,className:"_3-94"}),d.jsx(t,{height:14,width:140,className:"_3-94"}),d.jsx(t,{height:14,width:70,className:"_3-94"}),d.jsx(t,{height:14,width:70})]})]})}else return null;return d.jsxs("div",{className:"_3rq1 _60a7 _2tyk",children:[d.jsx("div",{className:"_3652",children:d.jsx("div",{className:"_3653",children:c._(/*BTDS*/"Up next")})}),e]})},t})(d.Component);l.default=m}),226);
__d("VultureJSDeadComponent.react",["RecoverableViolationWithComponentStack.react","react"],(function(t,n,r,o,a,i,l){"use strict";var e=["name"],s,u=s||(s=r("react")),c="VultureJSDeadComponent was hit. This should never happen as this component is intended to be used to replace dead components, as a stub. this being hit indicates that a component may have been cleaned up in error.";function d(t){var n=t.name,o=babelHelpers.objectWithoutPropertiesLoose(t,e),a=n!=null?c+" Expected component "+n:c;return u.jsx(r("RecoverableViolationWithComponentStack.react"),{errorMessage:a,projectName:"vulture_js"})}d.displayName=d.name+" [from "+i.id+"]",l.default=d}),98);
__d("VideoWatchAndScrollEndScreen.react",["cx","fbt","ix","Image.react","PopoverMenu.react","ReactXUIMenu","TooltipData","VideoChannelProgressCircle.react","VideoChannelReplayImage.react","VideoPlayerExperiments","VultureJSDeadComponent.react","react","vulture"],(function(t,n,r,o,a,i,l,s,u,c){var e,d=e||(e=o("react"));function m(e){var t=e.onCollapse;return r("vulture")("nCJ2hIZJmQL5JEEvifBwuUv481c="),d.jsx("div",babelHelpers.extends({className:"_1dtq",onClick:t,role:"button",tabIndex:1},o("TooltipData").propsFor(u._(/*BTDS*/"Collapse Video")),{children:d.jsx(r("Image.react"),{src:c("115705")})}))}m.displayName=m.name+" [from "+i.id+"]";function p(e){var t=e.onClose;r("vulture")("t_yXc4wXPOHEevVZPA6Fk7hdO_s=");var n=d.jsx(r("ReactXUIMenu"),{onItemClick:function(n,o){var e=o.item;r("vulture")("zcrFMX6AlZZhIV2CQ-iemXc89yY="),e.getValue()==="close"&&t()},children:d.jsx(r("ReactXUIMenu").Item,{value:"close",children:"Close"})});return d.jsx(r("PopoverMenu.react"),{className:"_ivg",menu:n,children:d.jsx("a",{href:"#",children:d.jsx(r("Image.react"),{src:c("114186")})})})}p.displayName=p.name+" [from "+i.id+"]";var _=(function(e){function t(){return e.apply(this,arguments)||this}babelHelpers.inheritsLoose(t,e);var n=t.prototype;return n.render=function(){return r("vulture")("TQfidjtKnOvWiqeF63HR20sXYfA="),d.jsxs("div",{className:"_5qdn _2se8"+(this.props.fadeOut?" _2gud":"")+" _1s-2",children:[d.jsx("div",{className:"_1szz _2se8",children:d.jsx("div",{className:"_1szy _ww8",onClick:this.props.onReplay,role:"presentation",children:d.jsx(r("VideoChannelProgressCircle.react"),{makeProgress:this.props.makeProgress,timeoutSec:this.props.endScreenDuration,watchAndScroll:!0,children:d.jsx(r("VideoChannelReplayImage.react"),{size:"small"})})})}),d.jsxs("div",{className:"_ivh",children:[r("VideoPlayerExperiments").showWNSClose?null:d.jsx(p,{onClose:this.props.onClose}),d.jsx(m,{onCollapse:this.props.onCollapse}),r("VideoPlayerExperiments").showWNSClose?d.jsx(r("VultureJSDeadComponent.react"),{name:"CloseButton"}):null]})]})},t})(d.Component);l.default=_}),226);
__d("cancelAnimationFramePolyfill",[],(function(t,n,r,o,a,i){"use strict";var e=t.__fbNativeCancelAnimationFrame||t.cancelAnimationFrame||t.webkitCancelAnimationFrame||t.mozCancelAnimationFrame||t.oCancelAnimationFrame||t.msCancelAnimationFrame||t.clearTimeout,l=e;i.default=l}),66);
__d("cancelAnimationFrame",["cancelAnimationFramePolyfill"],(function(t,n,r,o,a,i,l){function e(e){r("cancelAnimationFramePolyfill")(e)}l.default=e}),98);
__d("shouldWNSRenderToRHC",["ge"],(function(t,n,r,o,a,i,l){"use strict";function e(){return!!r("ge")("fbRHCVideoWNS-container")}l.default=e}),98);
__d("VideoWatchAndScrollContainer.react",["csx","cx","Arbiter","CSS","DOM","DOMContainer.react","DOMDimensions","Event","Locale","Parent","ReactCSSTransitionGroup","Rect","SubscriptionsHandler","VideoChannelProgressCircle.react","VideoChannelReplayImage.react","VideoPlayerExperiments","VideoWatchAndScrollDrawer.react","VideoWatchAndScrollEndScreen.react","cancelAnimationFrame","clearTimeout","getViewportDimensions","react","requestAnimationFrame","setTimeoutAcrossTransitions","shallowCompare","shouldWNSRenderToRHC","throttle"],(function(t,n,r,o,a,i,l,s,u){"use strict";var e,c=e||(e=o("react")),d=10,m=230,p=476,_=2e3,f=Object.freeze({NW:"nw",NE:"ne",SE:"se",SW:"sw"}),g=(function(e){function t(t,n){var r;return r=e.call(this,t,n)||this,r.state=r.$3(r.props),r}babelHelpers.inheritsLoose(t,e);var n=t.prototype;return n.$3=function(t){var e=this.$4(),n=this.$5(this.props.initialPosition,e);return{channelVideoElements:[this.props.initialVideoElement],containerBoundingBox:e,dragging:!1,draggingStartHeight:0,draggingStartLeft:0,draggingStartMousePositionX:0,draggingStartMousePositionY:0,draggingStartTop:0,draggingStartWidth:0,endScreenFadeOut:!1,endScreenShown:!1,fadeOut:!1,fadeOutPlaceholder:null,hasDrawer:!1,height:n.height,left:n.left,playbackFinished:!1,resizeDirection:null,showDrawer:!1,timeUntilNext:0,top:n.top,width:n.width,videoIndex:0}},n.shouldComponentUpdate=function(t,n){return!this.state.fadeOut&&r("shallowCompare")(this,t,n)},n.componentDidUpdate=function(t,n){var e=this;if(n){!n.dragging&&this.state.dragging?(this.documentSubscriptions=new(r("SubscriptionsHandler")),this.documentSubscriptions.addSubscriptions(r("Event").listen(document,"mousemove",function(t){return e.$6(t)}),r("Event").listen(document,"mouseup",function(t){return e.$7(t)}))):n.dragging&&!this.state.dragging&&this.documentSubscriptions.release(),n.playbackFinished!==this.state.playbackFinished&&this.state.playbackFinished&&this.state.timeUntilNext&&(r("clearTimeout")(this.$2),this.$8(),this.$2=r("setTimeoutAcrossTransitions")(function(){e.props.onPlayNext()},this.state.timeUntilNext*1e3));var a=["._23if","._23ig","._452w","._2i7a"],i=n.channelVideoElements||[];this.state.channelVideoElements.forEach(function(e){if(i.indexOf(e)===-1){a.forEach(function(t){var n=r("DOM").scry(e,t),a=n[0];a&&o("CSS").hide(a)});var t=r("DOM").scry(e,"._3pay"),n=t[0];n&&(o("CSS").removeClass(n,"_3pay"),o("CSS").addClass(n,"_2337"))}})}},n.componentDidMount=function(){var e=this;this.movementListeners=new(r("SubscriptionsHandler")),this.movementListeners.addSubscriptions(r("Event").listen(window,"resize",r("throttle")(function(){return e.$9()},100)),r("Arbiter").subscribe("sidebar/visibility",r("throttle")(this.$9.bind(this),100)))},n.componentWillUnmount=function(){this.documentSubscriptions&&this.documentSubscriptions.release(),this.movementListeners&&this.movementListeners.release(),this.$1&&r("clearTimeout")(this.$1),this.$2&&r("clearTimeout")(this.$2)},n.getFadeOutStatus=function(){return this.state.fadeOut},n.getChannelVideoElements=function(){return this.state.channelVideoElements},n.$9=function(){var e=this.$4(),t=this.$5({height:this.state.height,left:this.state.left,top:this.state.top,width:this.state.width},e);this.setState({containerBoundingBox:e,height:t.height,left:t.left,top:t.top,width:t.width})},n.$10=function(t,n){this.$11(n,t)},n.$12=function(t){o("Parent").bySelector(t.target,"._5-32")||!o("Parent").bySelector(t.target,"._3t-6")||this.$11(t,null)},n.$13=function(t){return t.button!==0||o("Parent").bySelector(t.target,"._3t-6")||o("Parent").bySelector(t.target,"._2se8")},n.$14=function(t){this.$13(t)||this.props.onClick&&this.props.onClick()},n.$11=function(t,n){var e=t.button,r=t.target;e===0&&(o("Parent").bySelector(r,"._360f")||(this.props.onGrab(),this.setState({containerBoundingBox:this.$4(),dragging:!0,draggingStartHeight:this.state.height,draggingStartLeft:this.state.left,draggingStartMousePositionX:t.screenX,draggingStartMousePositionY:t.screenY,draggingStartTop:this.state.top,draggingStartWidth:this.state.width,resizeDirection:n}),t.preventDefault()))},n.$4=function(){var e=0,t=r("DOM").scry(document.body,".fbChatSidebar");t.length===1&&(e=o("DOMDimensions").getElementDimensions(t[0]).width);var n=r("getViewportDimensions").withoutScrollbars(),a=43+d,i=n.height-d,l=d,s=n.width-d;return o("Locale").isRTL()?l+=e:s-=e,new(r("Rect"))(a,s,i,l)},n.$5=function(t,n){var e=new(r("Rect"))(t.top,t.left+t.width,t.top+t.height,t.left);return e=e.boundWithin(n),{height:e.h(),left:e.getLeft(),top:e.getTop(),width:e.w()}},n.$15=function(t,n,r){var e=t.top,o=n.getTop(),a=o-e;a>0&&((r===f.NE||r===f.NW)&&(t.height-=a),t.top=o);var i=t.left,l=n.getLeft(),s=l-i;s>0&&((r===f.NW||r===f.SW)&&(t.width-=s),t.left=l);var u=t.top+t.height,c=n.getTop()+n.h(),d=u-c;d>0&&(t.height=c-t.top);var m=t.left+t.width,p=n.getLeft()+n.w(),_=m-p;_>0&&(t.width=p-t.left)},n.$16=function(t,n,r){t.width<m&&((r===f.NW||r===f.SW)&&(t.left-=m-t.width),t.width=m),t.height<m&&((r===f.NE||r===f.NW)&&(t.top-=m-t.height),t.height=m)},n.$17=function(t,n,r){t.width>p&&((r===f.NW||r===f.SW)&&(t.left+=t.width-p),t.width=p),t.height>p&&((r===f.NE||r===f.NW)&&(t.top+=t.height-p),t.height=p)},n.$18=function(t,n,r){var e=t.width/t.height,o=n.width/n.height;if(e>o){var a=t.height*o,i=t.height;a<m&&(i*=m/a,a=m,(r===f.NE||r===f.NW)&&(t.top+=t.height-i)),(r===f.NW||r===f.SW)&&(t.left+=t.width-a),t.width=a,t.height=i}else if(e<o){var l=t.width/o;(r===f.NE||r===f.NW)&&(t.top+=t.height-l),t.height=l}},n.$19=function(t,n,r,o){return this.$15(t,r,o),this.$16(t,n,o),this.$17(t,n,o),this.$18(t,n,o),{height:t.height,left:t.left,top:t.top,width:t.width}},n.$6=function(t){var e=this;r("cancelAnimationFrame")(this.dragUpdateRequestAnimationFrameID),this.dragUpdateRequestAnimationFrameID=r("requestAnimationFrame")(function(){return e.$20(t)})},n.$21=function(t){(t.height!==this.state.height||t.width!==this.state.width)&&this.props.onInitialPositionUpdate(t)},n.$20=function(t){if(this.state.dragging){var e=t.screenX-this.state.draggingStartMousePositionX,n=t.screenY-this.state.draggingStartMousePositionY,r=this.state.resizeDirection,o;if(!r)o=this.$5({height:this.state.draggingStartHeight,left:this.state.draggingStartLeft+e,top:this.state.draggingStartTop+n,width:this.state.draggingStartWidth},this.state.containerBoundingBox),this.$21(o),this.setState({height:o.height,left:o.left,top:o.top,width:o.width});else{var a=this.state.draggingStartHeight,i=this.state.draggingStartLeft,l=this.state.draggingStartTop,s=this.state.draggingStartWidth;(r===f.NE||r===f.SE)&&(s+=e),(r===f.NW||r===f.SW)&&(i+=e,s-=e),(r===f.SE||r===f.SW)&&(a+=n),(r===f.NE||r===f.NW)&&(l+=n,a-=n),o=this.$19({height:a,left:i,top:l,width:s},{height:this.state.draggingStartHeight,left:this.state.draggingStartLeft,top:this.state.draggingStartTop,width:this.state.draggingStartWidth},this.state.containerBoundingBox,r),this.$21(o),this.setState({height:o.height,left:o.left,top:o.top,width:o.width})}t.preventDefault()}},n.$7=function(t){r("cancelAnimationFrame")(this.dragUpdateRequestAnimationFrameID),this.props.onDrop(),this.setState({dragging:!1,draggingStartHeight:0,draggingStartLeft:0,draggingStartMousePositionX:0,draggingStartMousePositionY:0,draggingStartTop:0,draggingStartWidth:0,resizeDirection:null}),t.preventDefault()},n.$22=function(){this.$1&&(r("clearTimeout")(this.$1),this.$1=null),this.setState({showDrawer:!0})},n.$23=function(){this.state.showDrawer&&this.$8()},n.$24=function(){r("clearTimeout")(this.$2),this.setState({playbackFinished:!1}),this.props.onReplay()},n.$8=function(){var e=this;this.$1?r("clearTimeout")(this.$1):this.setState({showDrawer:!0}),this.$1=r("setTimeoutAcrossTransitions")(function(){e.setState({showDrawer:!1}),e.$1=null},_)},n.$25=function(t,n){if(t>this.state.channelVideoElements.length)return null;var e=this.state.channelVideoElements[t];return e?c.jsx("div",{className:"_2yq3"+(n==="left"?" _2yq4":"")+(n==="center"?" _2yq5":"")+(n==="right"?" _2yq6":""),children:c.jsx(r("DOMContainer.react"),{children:e})},e.id):null},n.$26=function(){return r("shouldWNSRenderToRHC")()?[]:[c.jsx("div",{className:"_52ua",onMouseDown:this.$10.bind(this,f.NW)},f.NW),c.jsx("div",{className:"_52uc",onMouseDown:this.$10.bind(this,f.NE)},f.NE),c.jsx("div",{className:"_52ui",onMouseDown:this.$10.bind(this,f.SE)},f.SE),c.jsx("div",{className:"_52uj",onMouseDown:this.$10.bind(this,f.SW)},f.SW)]},n.getWidth=function(){return this.state.width},n.onLoadUpNext=function(t,n){this.props.onLoadUpNext(t,n),this.setState({hasDrawer:!0})},n.canPlayAnotherVideo=function(){var e=this.state.channelVideoElements;return this.state.videoIndex<e.length-1},n.render=function(){var e=this,t=null;this.props.isDrawerEnabled||(t={height:Math.round(this.state.height)+"px",left:this.state.left+"px",top:this.state.top+"px",width:Math.round(this.state.width)+"px"});var n=this.state.channelVideoElements,a=n[this.state.videoIndex];a&&o("CSS").addClass(a,"_1kfp");var i=null;this.state.endScreenShown&&(i=c.jsx(r("VideoWatchAndScrollEndScreen.react"),{endScreenDuration:r("VideoPlayerExperiments").endScreenDuration/1e3,fadeOut:this.state.endScreenFadeOut,makeProgress:this.canPlayAnotherVideo(),onReplay:this.props.onReplay,onClose:function(){r("clearTimeout")(e.$2),e.$2=null,e.props.onClose()},onCollapse:this.props.onCollapse}));var l=null;this.state.fadeOutPlaceholder?l=c.jsx(r("DOMContainer.react"),{children:this.state.fadeOutPlaceholder}):l=c.jsx("ul",{className:"_2yq7",children:n.map(function(t,n){return(n>e.state.videoIndex+1||n<e.state.videoIndex-1)&&o("CSS").removeClass(t,"_1kfp"),n<=e.state.videoIndex+1?null:c.jsx("li",{children:c.jsx(r("DOMContainer.react"),{children:t})},t.id)})});var s=null;this.state.playbackFinished&&(s=c.jsx("div",{role:"presentation",onClick:function(){return e.$24()},className:"_1szy _ww8",children:c.jsx(r("VideoChannelProgressCircle.react"),{makeProgress:!!this.state.timeUntilNext,timeoutSec:this.state.timeUntilNext,watchAndScroll:!0,children:c.jsx(r("VideoChannelReplayImage.react"),{size:"small"})})}));var u=null;return this.props.isDrawerEnabled&&(u=c.jsx(r("VideoWatchAndScrollDrawer.react"),{videoID:this.props.videoID,viewedVideos:this.props.viewedVideos,onLoadUpNext:function(n,r){return e.onLoadUpNext(n,r)}})),c.jsx(r("ReactCSSTransitionGroup"),{transitionAppear:!0,transitionAppearTimeout:500,transitionEnter:!1,transitionLeave:!1,transitionName:{appear:"_tie",appearActive:"_tik"},children:c.jsxs("div",{className:"_360g"+(this.state.showDrawer?" _hzi":"")+(this.state.fadeOut?" _473b":"")+(this.state.hasDrawer?" _60a6":"")+(this.props.isLiveVideo()?" _29mh":""),onMouseLeave:function(){return e.$23()},onMouseMove:function(){return e.$22()},style:t,children:[c.jsxs("div",{className:"_52u8",onClick:this.$14.bind(this),onMouseDown:this.$12.bind(this),role:"presentation",children:[c.jsxs("div",{className:"_hzj",children:[this.$25(this.state.videoIndex-1,"left"),this.$25(this.state.videoIndex,"center"),this.$25(this.state.videoIndex+1,"right"),s]}),u]}),this.$26(),l]})})},t})(c.Component);l.default=g}),98);
__d("VideoWatchAndScrollVariables.experimental",["cr:10925"],(function(t,n,r,o,a,i,l){"use strict";l.default=n("cr:10925")}),98);
__d("VideoWatchAndScrollController",["csx","cx","invariant","Arbiter","CSS","DOM","DOMDimensions","Event","EventListener","Locale","ReactDOM_DEPRECATED","SubscriptionsHandler","Tahoe","VideoAutoplayControllerX","VideoChannelStoryFetcher","VideoFrameBuffer","VideoPlayerExperiments","VideoPlayerVolumeSettings","VideoWatchAndScrollContainer.react","VideoWatchAndScrollVariables.experimental","ViewportBounds","cancelAnimationFrame","clearTimeout","destroyOnUnload","getViewportDimensions","ifRequired","react","setTimeoutAcrossTransitions","shouldWNSRenderToRHC","throttle","vulture"],(function(t,n,r,o,a,i,l,s,u,c){var e,d=e||(e=o("react")),m=158,p=280,_=10,f=42,g=f+_,h=476,y=230,C=["autoplay_initiated","page_visibility_initiated"],b=750,v=308,S=3,R=null;function L(){return Math.max(r("getViewportDimensions")().height,400)-f-80}var E=(function(){function e(e,t,n,o,a){var i,l=this;this.$30=new(r("SubscriptionsHandler")),this.$31=new(r("SubscriptionsHandler")),this.$1=!1,this.$2=null,this.$3=null,this.$4=!1,this.$34=n,this.$37=!1,this.$29=!1,this.$47=o,this.$48=o,this.$52=a,this.$33=new(r("VideoChannelStoryFetcher"))(t,e,this.$34,null),this.$35=[],this.$36=0,this.$38=[],this.$39=[],this.$5=m,this.$6=p,this.$10=window.document.getElementById("leftCol"),this.$11=window.document.getElementById("rightCol"),this.$12=window.document.getElementById("pagelet_bluebar"),this.$43={},this.$46=null,this.$53(),(i=this.$30).addSubscriptions.apply(i,this.$54()),r("VideoPlayerExperiments").persistentWNSEnabled||r("destroyOnUnload")(function(){l.$55(),l.$4&&l.$56(),l.$30&&l.$30.release(),l===R&&(R=null)})}var t=e.prototype;return t.$54=function(){var e=this,t=[];return t.push(r("Arbiter").subscribe("VideoChannelView/opened",function(t,n){e.$4&&(!n.controller||e.$16!==n.controller)&&e.$56()})),t.push(r("Arbiter").subscribe("fbVideoWatchAndScroll/closeWNS",function(){if(e.$4){var t=e.$16,n=t.getOption("CommercialBreakVideoAdOverlay","videoController");n&&(t=n),t.logEvent("watch_and_scroll_exited"),e.$57()}})),r("VideoPlayerExperiments").rhcWNSEnabled&&(t.push(r("Arbiter").subscribe("RHCVideoWNSController/collapseStart",function(){var t=e.$14;!t||!r("shouldWNSRenderToRHC")()||t.setState({endScreenFadeOut:!0,endScreenShown:!1})}),r("Arbiter").subscribe("RHCVideoWNSController/collapseEnd",function(){var t=e.$14;!t||!r("shouldWNSRenderToRHC")()||(e.pauseActiveVideo("user_initiated"),t.setState({endScreenFadeOut:!1}))}),r("Arbiter").subscribe("RHCVideoWNSController/expandStart",function(){var t=e.$14;!t||!e.isActiveVideoDonePlaying()||!r("shouldWNSRenderToRHC")()||t.setState({endScreenShown:!0})})),r("VideoPlayerExperiments").persistentWNSEnabled&&t.push(r("Arbiter").subscribe("RHCVideoWNSController/eject",function(t,n){r("shouldWNSRenderToRHC")()&&(e.$2=n,r("DOM").appendContent(document.body,n),e.$16.isState("playing")&&e.playActiveVideo("user_initiated"))}),r("Arbiter").subscribe("RHCVideoWNSController/dock",function(){r("shouldWNSRenderToRHC")()&&e.$16.isState("playing")&&e.playActiveVideo("user_initiated")}),r("Event").listen(window,"resize",r("throttle")(function(){r("shouldWNSRenderToRHC")()&&e.$58()})),r("Arbiter").subscribe("RHCVideoWNSController/mount",function(){e.$58()}))),t},t.$58=function(){var e=this.$14;if(!(!e||this.$37)){var t=this.$16.getVideoNode(),n=this.$59(t);this.$16.removeOffsetStylings(),this.$16.setDimensions(n.width,n.height),e.setState({width:n.width,height:n.height}),this.$46=n,r("Arbiter").inform("VideoWatchAndScrollController/resize")}},t.isActiveVideoDonePlaying=function(){var e=this.$16.getState();return e==="finished"},e.isActiveVideoDonePlaying=function(){return R?R.isActiveVideoDonePlaying():!1},t.$60=function(t,n,o){var e=this;t||c(0,3963),n.length||c(0,3964),this.$47=!0,this.$37=!1,this.$31=new(r("SubscriptionsHandler")),this.$36=o,this.$33=t,this.$38=t.getPreloadedData().thumbnails||[],this.$39=[],this.$35=n.slice(0),this.$35.forEach(function(t){e.$61(t),e.$62(t),t.updateSource("watch_scroll")});var a=this.$35.shift();this.$63(a,"user_initiated")},t.$64=function(t,n,r,o,a){var e=this;this.$9=a,this.$46=this.$59(a.videoRootNode),this.$60(t,n,r),this.$14&&this.$14.setState({channelVideoElements:o},function(){e.$65()}),this.$9=null},e.registerVideoController=function(n,r,o,a,i){if(R==null&&(R=new e(n.getVideoChannelID(),n.getVideoID(),r,a,i)),R.$30.addSubscriptions(n.addListener("enterWatchAndScroll",function(){R&&R.$66(n)}),n.addListener("crossfadeWatchAndScroll",function(){if(R){R.$67();var e=n.getVideoNode();R.$46=R.$59(e),R.$63(n,"user_initiated",!1,!0),n.unmute()}}),n.addListener("exitWatchAndScroll",function(){R&&R.$4&&R.$56()}),n.addListener("VideoChannelController/enterChannel",function(){R&&(R.$37=!0)}),n.addListener("VideoChannelController/exitChannel",function(){R&&(R.$37=!1)})),r==="wns"&&R.$35.push(n),!!o){var t=["beginPlayback","changeVolume","muteVideo","toggleFullscreen","unmuteVideo","VideoChannelController/enterChannel"];t.forEach(function(e){R&&R.$30.addSubscriptions(n.addListener(e,function(t){R&&R.$68(n,e,t)}))})}},e.isActive=function(){return R?R.$4&&!R.$37:!1},e.updateSlidingCalculations=function(){R&&R.$19&&R.$69(R.$19)},e.registerChannelVideoController=function(t){R&&(t.updateSource("watch_scroll"),R.$61(t),R.$62(t),R.$35.push(t))},e.getStoryFetcherData=function(){return R&&R.$70()},t.$70=function(){return{storyFetcher:this.$33,videoPlayerControllers:this.$35,channelVideoIndex:this.$36,rootVideoPlayerController:this.$17,channelInteractionsToRegister:this.$39,isFromWNS:!0}},e.getVideoPlaceholder=function(){return R?R.$18:null},e.getReactContainer=function(){return R?R.$14:null},e.registerChannelInteraction=function(t){R&&R.$39.push(t)},e.onEnterTahoe=function(){R&&R.$71()},t.$71=function(){this.$37=!0,this.$33.abandonRequest()},e.onEnterChannel=function(){R&&R.$72()},t.$72=function(){this.$37=!0,this.$33.abandonRequest();var e=this.$14;if(e){var t=["._23if","._23ig","._452w","._2i7a"];e.getChannelVideoElements().forEach(function(e){t.forEach(function(t){var n=r("DOM").scry(e,t),a=n[0];a&&o("CSS").show(a)});var n=r("DOM").scry(e,"._2337"),a=n[0];a&&(o("CSS").removeClass(a,"_2337"),o("CSS").addClass(a,"_3pay"))})}},e.resetFromChannelView=function(t,n,r){R&&R.$60(t,n,r)},e.startFromChannelView=function(t,n,r,o,a){R&&R.$64(t,n,r,o,a)},t.$68=function(t,n,r){if(this.$4){if(this.$16===t||r&&C.includes(r.reason)||!t.isIntentionallyViewing())return;var e=this.$16.getOption("VideoWithLiveBroadcast","isLive");e?this.$16.mute():this.$16.pause("user_initiated")}if(n==="toggleFullscreen"&&t.isFullscreen()||n==="VideoChannelController/enterChannel")this.$19&&this.$55();else if((n!=="beginPlayback"||r&&r.reason==="user_initiated"||t.getSource()==="permalink")&&t.isIntentionallyViewing()&&!t.isFullscreen()&&!t.getIsInChannel()){var o=this.$73(t.getVideoNode()),a=o.top;(a>window.scrollY||n==="beginPlayback"&&r&&r.reason==="autoplay_initiated")&&this.$69(t)}},t.$74=function(t){this.$37||t!==this.$16||this.$14&&this.$14.setState({endScreenShown:!0,playbackFinished:!0,timeUntilNext:this.$50?S:0})},t.$75=function(t){var e=this;return t.addListener("finishPlayback",function(){return e.$74(t)})},t.$69=function(t){var e=t.getVideoNode();e.offsetParent&&(this.$19=t,this.$25=r("throttle")(this.$76.bind(this),100),window.addEventListener("resize",this.$25),this.$77(e),r("VideoPlayerExperiments").enableClickOnlyWatchAndScroll||this.$78())},t.$76=function(){this.$19&&(this.$77(this.$18||this.$19.getVideoNode()),this.$26&&this.$26())},t.$79=function(t){var e=this.$73(t),n=t.scrollWidth,r=t.scrollHeight,o=y,a=h;n<r&&(o*=n/r,a*=n/r);var i=o;if(this.$10&&this.$10.children.length){var l=this.$73(this.$10);if(l.left<=e.left)i=Math.min(l.left-2*_,a);else if(this.$11&&this.$11.children.length){var s=this.$73(this.$11);i=Math.min(s.left-2*_,a)}}else{var u=document.getElementById("timeline_tab_content");if(u){var c=this.$73(u).left;i=Math.min(c-2*_,a)}}return Math.max(i,o)},t.$73=function(t){var e={left:0,top:0};do e.top+=t.offsetTop,e.left+=t.offsetLeft;while(t=t.offsetParent);return e},t.$80=function(){if(r("VideoPlayerExperiments").rhcWNSEnabled)return v;var e=0;if(this.$10&&this.$10.children.length){var t=this.$73(this.$10),n=window.getComputedStyle(this.$10),o=parseInt(n.width,10);r("VideoPlayerExperiments").persistentWNSEnabled&&(o=o||p),e=o+t.left-_}else{var a=document.getElementById("timeline_tab_content");if(!a){var i=document.getElementById("pagelet_timeline_main_column");i?a=i.parentNode:a=document.getElementById("contentArea")}if(a){var l=this.$73(a).left;e=l-2*_}}return e},t.$59=function(t){var e=!t&&this.$9,n={left:0},a=16,i=9;if(!e){n=this.$73(t),i=1,a=parseFloat(t.getAttribute("data-original-aspect-ratio"));var l=t.parentElement;(!a||i===0)&&l&&(n=this.$73(l),a=l.scrollWidth,i=l.scrollHeight)}var s=y,u=h;a<i&&(s*=a/i,u*=a/i);var c=this.$80(),d=_;this.$12&&(d+=this.$12.scrollHeight),d=Math.max(d,g);var m=r("VideoPlayerExperiments").rhcWNSEnabled?c:Math.max(Math.min(c,u),y),p;r("VideoPlayerExperiments").rhcWNSEnabled?p=o("Locale").isRTL()?_+r("ViewportBounds").getRight():r("getViewportDimensions")().width-m-_:(p=c>u?c-u+_:_,p=Math.max(p,_));var f=m*i/a;return r("VideoPlayerExperiments").rhcWNSEnabled&&(f=Math.min(f,L())),{hasEnoughSpace:!!e||c>=s,height:f,left:p,top:d,width:m}},e.hasEnoughSpaceToEnter=function(t){if(!R||!t||!t.getVideoNode())return!1;var e=t.getVideoNode(),n=1,r=parseFloat(e.getAttribute("data-original-aspect-ratio")),o=e.parentElement;(!r||n===0)&&o&&(r=o.scrollWidth,n=o.scrollHeight);var a=y;return r<n&&(a*=r/n),R.$80()>a},t.$77=function(t){this.$22=this.$73(t),this.$27=t.scrollWidth,this.$28=t.scrollHeight;var e=Math.max(this.$27,this.$28);if(e<y){var n=y/e;this.$27*=n,this.$28*=n}this.$21=this.$22.top+this.$28*.5-f,this.$20=this.$22.top+this.$28*.5-window.innerHeight,this.$46=this.$59(t),this.$29=!this.$46.hasEnoughSpace},t.$78=function(){this.$19.isIntentionallyViewing()?(this.$81(this.$82.bind(this)),this.$82()):this.$55()},e.isVideoAlmostFinished=function(t){var e=t.getPlaybackDuration(),n=t.getCurrentTimePosition(),o=r("VideoWatchAndScrollVariables.experimental").noWNSRemainingTime;return e*.2<o?n/e>.8:e-n<o},e.isSlidingEnabled=function(n){var t=R;if(t==null)return!1;var r=t.$19;return r==null||r!==n?!1:t.$29||!n.isIntentionallyViewing()||!n.getVideoNode().offsetParent||e.isVideoAlmostFinished(n)||n.getSource()==="tahoe"||n.hasLooped()?(t.$55(),!1):!0},t.$82=function(){var t=this.$19;if(t!=null){if(!t.isIntentionallyViewing()||!t.getVideoNode().offsetParent){this.$55();return}(window.scrollY>this.$21||window.scrollY<this.$20)&&e.isSlidingEnabled(t)&&t!==this.$16&&!t.isFullscreen()&&!this.$37&&(this.$67(),r("VideoPlayerExperiments").fixFeedVideosPlayOffscreen&&t.emit("enterWatchAndScroll"),this.$63(t,"autoplay_initiated",!1,!0),this.$55())}},t.$67=function(){this.$47=this.$48},t.$81=function(t){window.removeEventListener("scroll",this.$26),this.$26=t||null,window.addEventListener("scroll",this.$26),r("cancelAnimationFrame")(this.$32),delete this.$32},t.$55=function(){window.removeEventListener("resize",this.$25),this.$81(),delete this.$19,this.$29=!1},t.$66=function(t){this.$55(),this.$4&&this.$16!==t?this.$83(t):(this.$46=this.$59(t.getVideoNode()),this.$67(),this.$63(t,"user_initiated"))},t.$83=function(t){this.$23=t,this.$84()},t.$63=function(t,n,a,i){var e,l=this;if(t.getSource()==="tahoe"){this.$37=!1;var s=r("Tahoe").get();s&&s.onExit("wns")}var u=!!this.$45;this.$45&&(r("clearTimeout")(this.$45),this.$45=null,o("ReactDOM_DEPRECATED").unmountComponentAtNode_DEPRECATED(this.$85()),this.$86());var c=this.$1&&(a||i)&&!!this.$17&&this.$17!==t;c&&(this.$36=0,this.$35=[],this.$38=[],this.$41=this.$17,this.$43=babelHelpers.extends({},this.$8),this.$44=this.$18,this.$40=this.$14,this.$42=this.$2,this.$2=null,this.$13&&this.$13.remove(),this.$31.release(),this.$31=new(r("SubscriptionsHandler"))),this.$17=t,this.$87(this.$14&&this.$36>0?this.$88(this.$36):t),this.$49?this.$49.add(t.getVideoID()):this.$49=new Set([t.getVideoID()]),this.$14&&this.$35.length>this.$36&&this.$88(this.$36+1).preload(),this.$15=this.$16.getRootNode();var d=!this.$1&&!((e=this.$52)!=null&&e.disableAlwaysStartMuted)||!this.$16.isMuted(),m=!this.$1||this.$16.isState("playing"),p=this.$1&&this.$16.isState("finished");if(!this.$1||c){if((!a||u)&&(u&&(this.$46=this.$59(this.$15)),this.$53(this.$15)),this.$9){if(this.$8=this.$9,this.$8.videoRootNode){this.$18=this.$89(this.$8.dimensions,this.$17.getVideoNode()),r("DOM").appendContent(this.$8.videoRootNode,this.$18);var _=r("DOM").scry(this.$8.videoRootNode,"._344x"),f=_[0];f&&r("DOM").remove(f)}}else this.$8={videoRootNode:this.$15.parentNode,dimensions:o("DOMDimensions").getElementDimensions(this.$15),source:this.$16.getSource()},this.$18=this.$89(this.$8.dimensions,this.$16.getVideoNode()),r("DOM").insertAfter(this.$15,this.$18);var g=null;this.$9&&(g=this.$9.videoRootNode),!g&&this.$15&&(g=this.$15.parentNode),g&&(this.$13=r("EventListener").listen(g,"click",function(){l.$57(),t.play("user_initiated"),r("setTimeoutAcrossTransitions")(function(){l.$68(t,"beginPlayback",{reason:"user_initiated"})},b)})),this.$16.pause("user_initiated"),this.$16.isPlayerVersion("silvercity")&&this.$16.detachRootNode();var h=this.$7?this.$7.width:this.$6,y=this.$7?this.$7.height:this.$5;this.$16.removeOffsetStylings(),this.$16.setDimensions(h,y),this.$4=!0,c&&this.$90(),this.$14=this.$91(),!this.$1&&r("shouldWNSRenderToRHC")()&&r("Arbiter").inform("VideoWatchAndScrollController/init"),p&&this.$74(this.$16)}else this.$16.pause("user_initiated"),this.$65();if(m&&this.$16.play(n),d&&(this.$16.unmute(),this.$16.getVolume()===0)){var C=r("VideoPlayerVolumeSettings").getLastVolumeBeforeMute()||1;this.$16.setVolume(C),this.$16.emit("unmuteVideo")}this.$16.updateSource("watch_scroll");var v=this.$33;(!this.$1||c)&&v&&(v.abandonRequest(),this.$9||v.reset(t.getVideoID(),t.getVideoChannelID()),this.$92(),this.$61(t),this.$62(t)),this.$1=!0,r("shouldWNSRenderToRHC")()&&r("Arbiter").inform("VideoWatchAndScrollController/start")},t.$61=function(n){n.hasOption("WatchAndScroll","isActive")||n.registerOption("WatchAndScroll","isActive",e.isActive)},t.$62=function(t){var e=this;this.$31.addSubscriptions(this.$75(t),t.addListener("VideoChannelController/enterChannel",function(){e.$31.release()}),t.addListener("WatchAndScroll/close",function(){e.$57()}))},t.$93=function(){this.$14&&(this.$14.setState({endScreenShown:!1}),this.$16&&this.$16.play("user_initiated"))},t.$92=function(){var e=this;this.$47&&this.$33.fetchStories(!0,function(t,n){var o=e.$14;if(!(!t||!t.length||!o)){var a=o.getChannelVideoElements().concat(t);o.setState({channelVideoElements:a},function(){r("setTimeoutAcrossTransitions")(function(){e.$88(e.$36+1).preload()})}),e.$38=e.$38.concat(n)}})},t.$88=function(t){var e=this.$14?this.$14.getChannelVideoElements():[],n=[this.$17].concat(this.$35),r=null;return n.forEach(function(n){e[t].contains(n.getRootNode())&&(r=n)}),r||c(0,3965),r},t.$94=function(){if(R&&R.$50)for(var e=0;e<R.$35.length;e++){var t=R.$35[e];if(R.$50.contains(t.getRootNode()))return t}return null},t.$65=function(){var e=this.$16.isMuted();this.$16.pause("user_initiated"),this.$16!==this.$17&&this.$16.abortLoading(),this.$87(this.$88(this.$36)),this.$15=this.$16.getRootNode();var t=this.$16.getVideoNode(),n=parseFloat(t.getAttribute("data-original-aspect-ratio"));n||(n=16/9);var o=this.$46;o||(o=this.$59(t)),this.$14&&(o.width=this.$14.getWidth()),o.height=o.width/n,r("VideoPlayerExperiments").rhcWNSEnabled?o.height=Math.min(o.height,L()):o.height>h&&(o.height=h,o.width=o.height*n),this.$16.removeOffsetStylings(),this.$16.setDimensions(o.width,o.height),this.$53(t),this.$14&&this.$14.setState({playbackFinished:!1,videoIndex:this.$36,width:o.width,height:o.height},function(){r("shouldWNSRenderToRHC")()&&r("Arbiter").inform("VideoWatchAndScrollController/resize")}),this.$46=o,this.$16.play("autoplay_initiated"),e&&this.$16.mute(),this.$35.length<=this.$36?this.$92():this.$88(this.$36+1).preload()},t.$95=function(){var e=_;return this.$12&&(e+=this.$12.scrollHeight),Math.max(e,g)},t.$53=function(t){if(this.$46){this.$7={height:this.$46.height,left:this.$46.left,top:this.$46.top,width:this.$46.width};return}if(t){var e=t.scrollWidth,n=t.scrollHeight,r=this.$79(t),o=r*n/e;this.$7.height=o,this.$7.width=r}else this.$7={height:this.$5,left:_,top:this.$95(),width:this.$6}},t.$89=function(t,n){var e=r("DOM").create("canvas",{className:"_57n6"});if(e.height=t.height,e.width=t.width,e.getContext&&e.getContext("2d")){if(n.scrollHeight===0){var o=r("DOM").scry(n.parentNode,"._3t5i"),a=o[0];if(a){var i=e.getContext("2d");i.drawImage(a,0,0)}}else if(n instanceof window.HTMLVideoElement){var l=new(r("VideoFrameBuffer"))(e,n);l.updateFrameBuffer()}}var s=r("DOM").create("div");s.appendChild(e);var u=r("DOM").create("i",{className:"_1jto _bsl _3htz"});return s.appendChild(u),s},t.$57=function(){this.$19&&this.$55(),this.$16.pause("user_initiated");var e=this.$94();e&&e.pause("user_initiated"),R&&(R.$50=null),this.$84()},t.$96=function(){this.$16.emit("WatchAndScroll/collapse")},t.$97=function(){var e=this.$89(this.$7,this.$16.getVideoNode(),!0);this.$14&&this.$14.setState({fadeOut:!0,fadeOutPlaceholder:e}),this.$98(this.$17,this.$8),this.$18&&(r("DOM").remove(this.$18),this.$18=null),this.$13&&(this.$13.remove(),this.$13=null)},t.$98=function(t,n,a){var e;t.pause("user_initiated"),t.isPlayerVersion("silvercity")&&t.detachRootNode(),a&&o("ReactDOM_DEPRECATED").unmountComponentAtNode_DEPRECATED(a),n.dimensions&&n.dimensions.width&&n.dimensions.height&&(t.addOffsetStylings(),t.setDimensions(n.dimensions.width,n.dimensions.height)),n.videoRootNode&&r("DOM").appendContent(n.videoRootNode,t.getRootNode()),t.emit("WatchAndScroll/positionUpdated"),t.updateSource(n.source||"inline");var i=this.$73(t.getVideoNode()),l=i.top,s=r("getViewportDimensions")().height;!((e=this.$52)!=null&&e.disableMuteOnExit)&&t.getSource()!=="permalink"&&t.mute(),l<window.scrollY||l>window.scrollY+s||this.$51===!1?(t.pause("autoplay_initiated"),t.emit("resumeAutoplay")):t.play("user_initiated")},t.$90=function(){var e=this;this.$4||c(0,3966),this.$40||c(0,3967),this.$40.setState({fadeOut:!0}),this.$45=r("setTimeoutAcrossTransitions")(function(){e.$41||c(0,3968),e.$42||c(0,3969),e.$98(e.$41,e.$43,e.$42),e.$44&&(r("DOM").remove(e.$44),e.$44=null),e.$45=null},b)},t.$56=function(){var e=this;this.$4||c(0,3966),this.$14||c(0,3970),!this.$23&&r("shouldWNSRenderToRHC")()&&r("Arbiter").inform("VideoWatchAndScrollController/exit"),this.$35.forEach(function(e){return e.abortLoading()}),this.$97(),this.$45=r("setTimeoutAcrossTransitions")(function(){o("ReactDOM_DEPRECATED").unmountComponentAtNode_DEPRECATED(e.$85()),e.$86()},b)},t.$86=function(){this.$4||c(0,3966),this.$33&&this.$33.abandonRequest(),this.$36=0,this.$1=!1,this.$31.release(),this.$31=new(r("SubscriptionsHandler")),this.$8={},this.$16=null,this.$17=null,this.$4=!1,this.$35=[],this.$38=[],this.$14=null,r("clearTimeout")(this.$45),this.$45=null,this.$41&&this.$42&&this.$43&&this.$98(this.$41,this.$43,this.$42),this.$41=null,this.$43={},this.$44&&(r("DOM").remove(this.$44),this.$44=null),r("VideoAutoplayControllerX").setShouldAutoplay(!0),this.$2=null,this.$23&&(this.$46=this.$59(this.$23.getVideoNode()),this.$67(),this.$63(this.$23,"user_initiated"),this.$23=null),this.$29=!1,this.$46=null},t.$91=function(){var e=this;return r("vulture")("5JMibEZjzxbD4RM0DtgE93Vyris="),o("ReactDOM_DEPRECATED").render_DEPRECATED(d.jsx(r("VideoWatchAndScrollContainer.react"),{isDrawerEnabled:r("VideoPlayerExperiments").rhcWNSDrawerEnabled&&r("shouldWNSRenderToRHC")()&&r("VideoPlayerExperiments").rhcWNSExpandToTahoe,isLiveVideo:function(){return e.$16.isLiveVideo()},initialPosition:this.$7,initialVideoElement:this.$15,onChannelNavigation:this.$99.bind(this),onClick:this.$100.bind(this),onClose:this.$57.bind(this),onCollapse:this.$96.bind(this),onDrop:this.$101.bind(this),onGrab:this.$102.bind(this),onInitialPositionUpdate:this.$103.bind(this),onLoadUpNext:this.registerUpNextUnit.bind(this),onPlayNext:this.$104.bind(this),onReplay:this.$93.bind(this),viewedVideos:Array.from(this.$49),videoID:this.$16.getVideoID()}),this.$85())},t.$84=function(){this.$17&&this.$17.emit("exitWatchAndScroll");var e=this.$94();e&&e.emit("exitWatchAndScroll")},t.$99=function(t){if(t>0&&this.$35.length<=this.$36){r("shouldWNSRenderToRHC")()||this.$57();return}this.$36+=t,this.$65()},t.$104=function(){var e=this.$94();e&&(this.$50=null,e.emit("crossfadeWatchAndScroll"),this.$51?e.play("autoplay_initiated"):(e.preload(),e.emit("showOverlay")))},t.$102=function(){this.$19&&this.$55();var e=this.$16.getOption("VideoWithLiveBroadcast","isLive");e||(this.$24=this.$16.isState("playing"),this.$16.pause("user_initiated"))},t.$101=function(){var e=this.$16.getOption("VideoWithLiveBroadcast","isLive");e||(this.$24&&this.$16.play("user_initiated"),this.$24=null)},t.$100=function(){var e=this.$16.getOption("VideoWithLiveBroadcast","isLive");this.$19||e||(this.$16.isState("playing")?this.$16.pause("user_initiated"):(this.$16.isState("paused")||this.$16.isState("finished")||this.$16.isState("ready"))&&this.$16.play("user_initiated"))},t.$87=function(t){var e=this;this.$16!==t&&(r("VideoPlayerExperiments").rhcWNSEnabled&&t.addListener("WatchAndScroll/collapse",function(){if(t!=e.$16){t.removeCurrentListener();return}r("shouldWNSRenderToRHC")()&&r("Arbiter").inform("VideoWatchAndScrollController/collapse")}),this.$16=t)},t.pauseActiveVideo=function(t){this.$16&&this.$16.pause(t)},e.pauseActiveVideo=function(t){t===void 0&&(t="user_initiated"),R&&R.pauseActiveVideo(t)},t.playActiveVideo=function(t){this.$16&&this.$16.play(t)},t.registerUpNextUnit=function(t,n){var e=r("DOM").find(t,"._3iqr");!R||!e||(R.$50=t,R.$51=n,r("EventListener").listen(e,"click",function(e){if(R){var t=R.$94();t&&(e.preventDefault(),e.stopPropagation(),R.$50=null,t.emit("crossfadeWatchAndScroll"),t.play("user_initiated"))}}))},e.playActiveVideo=function(t){t===void 0&&(t="user_initiated"),R&&R.playActiveVideo(t)},t.$103=function(t){this.$7=t,this.$14&&!this.$14.getFadeOutStatus()&&(this.$16.removeOffsetStylings(),this.$16.setDimensions(t.width,t.height),this.$16.emit("WatchAndScroll/positionUpdated"))},t.$105=function(){var e=r("DOM").create("div");return r("shouldWNSRenderToRHC")()?r("ifRequired")("RHCVideoWNSController",function(t){return t.mount(e)}):r("DOM").appendContent(document.body,e),e},t.$85=function(){return this.$2||(this.$2=this.$105()),this.$2},e})();l.default=E}),98);
__d("XBasicFBNuxGenShouldShowController",["XController"],(function(t,n,r,o,a,i){a.exports=n("XController").create("/ajax/megaphone/should_show_fbnux/",{nux_id:{type:"Int",required:!0},should_log_view:{type:"Bool",defaultValue:!0},dependencies:{type:"IntVector"}})}),null);
__d("VideoControls",["csx","cx","Arbiter","AsyncRequest","Bootloader","CSS","DeferredComponent.react","EventListener","FullScreen","LiveRewindUtils","LiveVideoPlayerActions","Parent","PlaybackSpeedExperiments","ReactDOM","SubscriptionsHandler","VideoPlayerExperiments","VideoPlayerUIComponentDrawer","VideoWatchAndScrollController","XBasicFBNuxGenShouldShowController","cancelAnimationFrame","containsNode","destroyOnUnload","getActiveElement","logVideosClickTracking","react","requestAnimationFrame","shouldWNSRenderToRHC","throttle"],(function(t,n,r,o,a,i,l,s,u){var e,c=e||(e=o("react")),d=new Set(["embedded","embedded_video","embedded_video_preview","embedded_page_plugin","embedded_video_from_ufi"]),m=200,p=4936,_=36,f=5e3,g=(function(){function e(e,t,n){var a=this,i,l;this.$16={current:null},this.$133=function(){a.$11=!1,a.scheduleRenderReactComponent()},this.$15=e,this.$16.current=this.$15,this.$90=t,this.$124=o("ReactDOM").createRoot(t),this.$10=0,this.$83=0,this.$82=0,this.$29=0,this.$123=!1,this.$91=!1,this.$49=n.hideOnEvents.autoplay,this.$50=n.hideOnEvents.finish,this.$43=n.hideOnEvents.pause,this.$104=n.unhideOnHover,this.$44=n.hidePlaybackControl,this.$45=n.isWatchIconEligible,this.$46=n.hidePlaybackScrubber,this.$105=n.showPlaybackRateControl,this.$109=n.showVideoSliderWarningTooltip,this.$47=n.hideRemainingTime,this.$48=n.hideSettings,this.$120=n.useTwoRows,this.$56=n.isCommentAttachment,this.$84=n.pointsOfInterestConfig||{},this.$18=n.displayElapsedTime||!1,this.$19=n.showControlsOnFullScreenOnly||!1,this.$20=n.displayMilliseconds||!1,this.$21=n.displayDurationLimit,this.$22=n.displayTimeOffset,this.$1=n.adBreaks,this.$2=n.adBreaksDisableReasons,this.$108=n.showSpatialAudioNUX,this.$86=(i=n.pollTimestamps)!=null?i:[],this.$69=!1,this.$101=n.shouldShowWNSNUX,this.$11=!1,this.$38=!1,this.$51=n.insertedAdBreaks,this.$52=n.isAdBreakDisabled,this.$53=n.isAdBreakInsertionWithoutGapRule,this.$102=(l=n.showEligibleStarsCueTimeSegments)!=null?l:!1,this.$103=n.selectedStarsCueTimestamp,this.$63=n.isLiveRewindEnabled||this.$15.isFBWasLive(),this.$64=this.$15.isFBWasLive(),this.$76=null,this.$106=n.showPlayButtonForLive,this.$121=n.videoClipInfo,this.$97=!!n.videoClipInfo,this.$13=null;var s=e.isHtml5Player(),u=e.getPlayerSuborigin();this.$40=n.showButtons.watchandscroll&&s&&u!=="topic_live",this.$3=n.showButtons.casting,this.$4=n.showButtons.fullscreen&&!!r("FullScreen").isSupported(),this.$5=n.showButtons.audioButton,this.$80=n.permalinkURL,this.$98=n.shouldShowInlineCopyLinkOption,this.$99=n.shouldShowInlineVideoReportOption,this.$100=n.shouldShowPermalinkButton,this.$61=n.isLive,this.$62=n.isGamingVideo,this.$70=n.isSphericalVideo,this.$30=n.forceVisible||!1,this.$31=n.forceVisibleOnMount||!1,this.$42=n.hideGradient||!1,this.$118=n.useDarkTheme||!1,this.$54=!1,this.$41=!1,this.$67=!1,this.$68=!1,this.$107=n.showQualitySelector,this.$87=n.qualitySelectorMinStreams,this.$74=this.liveRewindToBeginning.bind(this),this.$72=this.liveRewindSeekBack.bind(this),this.$73=this.liveRewindSeekForward.bind(this),this.$75=this.liveRewindToLive.bind(this),this.$26=this.enterWatchAndScroll.bind(this),this.$25=this.enterTahoe.bind(this),this.$81=this.play.bind(this),this.$79=this.pause.bind(this),this.$92=this.scrubBegin.bind(this),this.$93=this.scrubEnd.bind(this),this.$110=this.startCasting.bind(this),this.$111=this.stopCasting.bind(this),this.$113=this.toggleFullscreen.bind(this),this.$114=this.toggleHD.bind(this),this.$115=this.toggleHLS.bind(this),this.$116=this.toggleMuted.bind(this),this.$117=this.toggleCaptions.bind(this),this.$12=this.changeVolume.bind(this),this.$96=this.setVideoPlaybackRate.bind(this),this.$95=this.setPreferredVideoQuality.bind(this),this.$24=this.$15.registerDrawer(r("VideoPlayerUIComponentDrawer").priorities.EmbeddedControls,_),this.$78=n.needsInitialVideoInfoUpdate,this.$17=this.$15.getSource(),this.$33=n.gamesVideoClipButtonEnabled,this.$34=!!n.gamesVideoCreatorClippingGK&&!d.has(this.$17),this.$35=n.gamesDefaultClipLengthInSec,this.$7=n.annotatedMomentsOfInterest||{},this.$57=n.isEmbeddedPlayerRedesignEnabled,this.$119=n.useLargerGradient||!1,r("VideoPlayerExperiments").persistentWNSEnabled||r("destroyOnUnload")(function(){var e;(e=a.$124)==null||e.unmount()});var c=this.$15.getRootNode();r("EventListener").listen(this.$90,"focusin",function(){a.$28=!0,a.scheduleRenderReactComponent()}),r("EventListener").listen(this.$90,"focusout",function(){r("containsNode")(a.$90,r("getActiveElement")())||(a.$28=!1,a.scheduleRenderReactComponent())}),r("EventListener").listen(c,"click",function(e){if(a.$28&&e.detail){var t=r("getActiveElement")();t&&t.blur()}}),r("EventListener").listen(c,"mouseleave",function(){a.$77=!1,a.scheduleRenderReactComponent()}),r("EventListener").listen(c,"mouseenter",function(){a.$77=!0,a.scheduleRenderReactComponent()}),this.$15.registerOption("VideoControls","acquireForceHideLock",function(){return a.$29++,{release:function(){a.$29--,a.scheduleRenderReactComponent()}}}),this.$15.registerOption("VideoControls","hideOnFinish",function(){return a.$50},function(e){a.$50=e}),this.$15.registerOption("VideoControls","hideOnPause",function(){return a.$43},function(e){a.$43=e}),this.$15.registerOption("VideoControls","unhideOnHover",function(){return a.$104},function(e){a.$104=e}),this.$15.registerOption("VideoControls","hidePlaybackControl",function(){return a.$44},function(e){a.$44=e,a.scheduleRenderReactComponent()}),this.$15.registerOption("VideoControls","available",function(){return!0}),this.$15.registerOption("VideoControls","areControlsVisible",function(){return a.areControlsVisible()}),["mousemove","mousedown","keydown"].forEach(function(e){r("EventListener").listen(a.$15.getRootNode(),e,r("throttle")(function(){return a.flashControls()},200))}),this.$112=new(r("SubscriptionsHandler")),this.scheduleRenderReactComponent();var m=["changeVolume","loadedSubtitles","captionsAvailabilityChanged","muteVideo","pausePlayback","stateChange","toggleFullscreen","toggleSubtitles","updateMetadata","unmuteVideo","qualityChange","casting/receiverStateChange","casting/supportStateChange","casting/castingStateChange","casting/playStateChange"];m.forEach(function(e){return a.$112.addSubscriptions(a.$15.addListener(e,function(){return a.scheduleRenderReactComponentWithVideoInfoUpdate()}))}),this.$112.addSubscriptions(this.$15.addListener("pauseRequested",function(e){a.$125(e)}),this.$15.addListener("playRequested",function(e){a.$126(e)}),this.$15.addListener("beginPlayback",function(){return a.$127()}),this.$15.addListener("updateStatus",function(e){if(a.$63){var t=a.$15.getSeekableRanges();if(a.$64&&o("PlaybackSpeedExperiments").enableWwwPlaybackSpeedControl()){var n,r,i=(n=a.$15.getCurrentTimePosition())!=null?n:0,l=t!=null&&(r=t.end(t.length()-1))!=null?r:0;i>0&&l>0&&i>=l&&a.liveRewindToLive()}t&&(a.$71=o("LiveRewindUtils").getRelativePosition(e.position,t))}a.$83=e.position,a.$22&&(a.$83-=a.$22),a.scheduleRenderReactComponent()}),this.$15.addListener("casting/updateStatus",function(e){if(a.$63){var t=a.$15.getSeekableRanges();t&&(a.$71=o("LiveRewindUtils").getRelativePosition(e.position,t))}a.$83=e.position,a.scheduleRenderReactComponent()}),this.$15.addListener("seekRangeChanged",function(e){if(a.$63){var t=a.$15.getSeekableRanges();t&&(a.$82=o("LiveRewindUtils").getTotalDuration(t))}}),this.$15.addListener("updateBuffer",function(e){a.$10=e.duration+e.offset,a.scheduleRenderReactComponent()}),this.$15.addListener("optionsChange",function(e){a.$128()}),this.$15.addListener("resumeAutoplay",function(e){a.$129(),a.scheduleRenderReactComponentWithVideoInfoUpdate()}),this.$15.addListener("turnOffAutoplay",function(e){a.$55=!1}),this.$15.addListener("LivePlayer/isRewoundChanged",function(e){var t=a.$15.getOption("LivePlayer","isRewound");a.$64!==t&&(a.$64=t,a.scheduleRenderReactComponent())}),this.$15.addListener("blockAudio",function(e){e||(a.$54=!0)}),this.$15.addListener("unblockAudio",function(e){e||(a.$54=!1)})),this.$101&&this.$112.addSubscriptions(this.$15.addListener("VideoWithStallRecovery/bufferingStateOn",function(){a.$38||a.$130(p)}),this.$15.addListener("VideoWithStallRecovery/bufferingStateOff",function(){a.$11=!1})),this.$112.addSubscriptions(this.$15.addListener("finishPlayback",function(){a.scheduleRenderReactComponent(!0)})),this.$128()}var t=e.prototype;return t.$131=function(){this.$94=this.$15.getOption("VideoScrubberPreviewComponent","scrubberPreviewSprites"),this.$37=this.$15.getOption("VideoScrubberPreviewComponent","hasPreviewThumbnails"),this.$85=this.$15.getOption("VideoScrubberPreviewComponent","previewThumbnailInformation")},t.$129=function(){this.$55=this.$15.getOption("FeedAutoplay","isAutoplaying")},t.$128=function(){this.$129(),this.$131()},t.$125=function(t){var e=this;this.scheduleRenderReactComponentWithVideoInfoUpdate(),this.$61&&this.$63&&t==="user_initiated"&&!this.$64&&this.$76===null&&(this.$76=window.setTimeout(function(){e.$76=null,o("LiveVideoPlayerActions").setIsRewound(e.$15,!0)},m))},t.$126=function(t){this.$61&&this.$63&&t==="user_initiated"&&this.$76!==null&&(window.clearTimeout(this.$76),this.$76=null)},t.$127=function(){this.flashControls(),this.$132(),this.$66=!0,this.scheduleRenderReactComponentWithVideoInfoUpdate()},t.$130=function(t){var e=this,n=r("XBasicFBNuxGenShouldShowController").getURIBuilder().setInt("nux_id",t).getURI();new(r("AsyncRequest"))().setURI(n).setMethod("GET").setReadOnly(!0).setHandler(function(t){var n=t.getPayload();e.$11=n.should_show_nux}).send()},t.updateConfig_DEPRECATED=function(t,n){this.$80=t.permalinkURL||null,this.$3=t.showButtons?t.showButtons.casting:!1,this.$61=!!t.isLive,this.$1=t.adBreaks||null,this.$119=t.useLargerGradient||!1,this.$105=t.showPlaybackRateControl||!1,this.scheduleRenderReactComponent()},t.updateAdBreaksConfig=function(t){this.$51=t.insertedAdBreaks,this.$52=t.isAdBreakDisabled,this.$53=t.isAdBreakInsertionWithoutGapRule,this.$30=!t.isPreviewingAdBreak,this.scheduleRenderReactComponent()},t.updateStarsCueConfig=function(t){this.$103=t.selectedStarsCueTimestamp,this.scheduleRenderReactComponent()},t.updateTwoRowsConfig=function(t){this.$120=t.useTwoRows,this.$56=t.isCommentAttachment,this.scheduleRenderReactComponent()},t.flashControls=function(){var e=this;this.$88||(this.$88=!0,this.scheduleRenderReactComponent()),window.clearTimeout(this.$27),this.$27=window.setTimeout(function(){e.$27=null,e.$88=!1,e.scheduleRenderReactComponent()},3e3)},t.$132=function(){var e=this;this.$31&&(window.clearTimeout(this.$32),this.$32=window.setTimeout(function(){e.$32=null,e.$31=!1,e.scheduleRenderReactComponent()},f))},t.areControlsVisible=function(){var e=this;if(!this.areControlsEnabled())return!1;if(this.$30||this.$11||this.$67||this.$68||this.$31)return!0;if(this.$15.isState("playing"))return this.$97?(this.$13||(this.$13=window.setTimeout(function(){e.$97=!1},5e3)),!0):this.$49&&this.$55?!1:this.$28||this.$77&&this.$88;if(this.$15.isState("finished")){var t=this.$15.getSource()==="tahoe";return this.$15.isFullscreen()||t||!this.$50}else if(this.$15.isState("paused"))return this.$15.isFullscreen()||!this.$43||this.$104&&(this.$28||this.$77&&this.$88);return!1},t.areControlsEnabled=function(){var e=this.$15.getSource()==="tahoe";return!(this.$29>0||this.$15.isState("loading")||this.$15.isState("fallback")||this.$15.getOption("SottoPaywall","enable")||this.$15.isState("finished")&&this.$50&&!this.$15.isFullscreen()&&!e)},t.scheduleRenderReactComponentWithVideoInfoUpdate=function(){this.$78=!0,this.scheduleRenderReactComponent(!0)},t.shouldRenderComponent=function(){return this.$15.isState("loading")||this.$15.isState("fallback")?!1:this.areControlsVisible()?(this.$41=!1,!0):this.$41?!1:(this.$41=!0,!0)},t.scheduleRenderReactComponent=function(t){var e=this;t===void 0&&(t=!1),!(!t&&!this.shouldRenderComponent())&&(r("cancelAnimationFrame")(this.$89),this.$89=r("requestAnimationFrame")(function(){return e.renderReactComponent()}))},t.renderReactComponent=function(){var e=this;if(r("VideoPlayerExperiments").delayVideoControlRenderForApiReady&&this.$15.getState()==="loading"&&!this.$91){this.$91=!0,this.$15.runOnApiReady(function(){e.scheduleRenderReactComponent()});return}this.$78&&this.$134();var t=this.areControlsVisible();this.$123!==t&&(this.$15.emit("VideoControls/visibilityUpdate",{areControlsVisible:t}),t?this.$24.reserve():this.$24.release(),this.$15.isState("destroyed")||o("CSS").conditionClass(this.$15.getRootNode(),"_302m",!t)),this.$123=t;var n=this.$15.getAvailableVideoQualities(),i=this.$15.getPreferredVideoQuality(),l=this.$15.getSelectedVideoQuality(),s=this.$15.canAutoSelectVideoQuality(),u=this.$15.getStreamingFormat(),m=this.$69;this.$69=r("VideoPlayerExperiments").slidingWNSv3&&this.$40&&r("VideoWatchAndScrollController").isSlidingEnabled(this.$15),m!==this.$69&&this.$15.logEvent(this.$69?"watch_and_scroll_icon_highlighted":"watch_and_scroll_icon_unhighlighted");var p=this.$15.getSource()==="tahoe",_=this.$15.getSource()==="watch_scroll",f=this.$15.isFBIsLiveTemplated()||this.$15.isFBWasLive(),g=this.$63&&f&&(this.$15.isFBWasLive()||this.$15.getState()!=="finished"),h=c.jsx(r("DeferredComponent.react"),{deferredPlaceholder:c.jsx("span",{}),deferredComponent:function(t){return a(["VideoControls.react"],t)},allowCasting:this.$3,allowFullscreen:this.$4,allowAudioButton:this.$5,annotatedMomentsOfInterest:this.$7,areCaptionsActive:this.$8,areCaptionsAutogenerated:this.$9,areHLSActive:this.$6,bufferedPosition:this.$10,finishedPlaying:this.$15.isState("finished"),hasFoundReceiver:this.hasFoundReceiver(),hasHD:this.$36,hasCaptions:this.$39,hasWatchAndScroll:this.$40&&!this.getIsInChannel(),hidden:!this.areControlsEnabled(),hideGradient:this.$42,isAudioBlocked:this.$54,isCasting:this.isCasting(),isCastingSupported:this.isCastingSupported(),isCommentAttachment:this.$56,isEmbedded:d.has(this.$17),isEmbeddedPlayerRedesignEnabled:this.$57,isFullscreen:this.$58,isHD:this.$59,isInline:this.$60,isInTahoe:p,isInWatchAndScroll:_,isLive:this.$61,isLiveRewindEnabled:g,isLiveRewound:this.$64,isFBWasLive:this.$15.isFBWasLive(),isSphericalVideo:this.$70,isMuted:this.$65,isPlaying:this.$66,isSidePaneOpen:this.getIsInChannel()&&!!o("Parent").bySelector(this.$90,"._57bj"),isSlidingWNSEligible:this.$69,interestLevels:null,liveRelativePlaybackPosition:this.$71,drawer:this.$24,onActionsClick:function(){e.$68=!e.$68},onAnnotatedMomentOfInterestSelect:function(n){e.$15.seek(n)},onEnterWatchAndScroll:this.$26,onEnterTahoe:this.$25,doesFullscreenEnterTahoe:this.$23,onLiveRewindToBeginning:this.$74,onLiveRewindSeekBack:this.$72,onLiveRewindSeekForward:this.$73,onLiveRewindToLive:this.$75,onWNSNUXClose:this.$133,onClipVideo:this.$14,onPause:this.$79,onPlay:this.$81,onScrubBegin:this.$92,onScrubEnd:this.$93,onSetVideoPlaybackRate:this.$96,onSettingsClick:function(){e.$67=!e.$67},onSidePaneToggle:function(){r("Arbiter").inform("VideoChannelView/sidePaneToggle",{})},onStartCast:this.$110,onStopCast:this.$111,onToggleFullscreen:this.$113,onToggleHD:this.$114,onToggleHLS:this.$115,onToggleMuted:this.$116,onToggleCaptions:this.$117,onVolumeChange:this.$12,permalinkURL:this.$80,showInlineCopyLinkOption:this.$98,showInlineVideoReportOption:this.$99,showPermalinkButton:this.$100,playbackDuration:this.$82,playbackPosition:this.$83,transparent:!t,hidePlaybackControl:this.$44,isWatchIconEligible:this.$45,hidePlaybackScrubber:this.$46,showPlaybackRateControl:this.$105,showPlayButtonForLive:this.$106,showVideoSliderWarningTooltip:this.$109,hideRemainingTime:this.$47,hideSettings:this.$48,useTwoRows:this.$120,volume:this.$122,scrubberPreviewSprites:this.$94,hasScrubberPreview:this.$37&&!_,previewThumbnailInformation:this.$85,availableQualities:n,selectedQuality:l,preferredQuality:i,canAutoSelectVideoQuality:s,onSelectQuality:this.$95,showQualitySelector:this.$107,qualitySelectorMinStreams:this.$87,streamingFormat:u,showSpatialAudioNUX:this.$108,onPointOfInterestSelect:this.$84.onPointOfInterestSelect,currentPointOfInterest:this.$84.currentPointOfInterest,pointsOfInterest:this.$84.pointsOfInterest,showPointOfInterestTimestamps:this.$84.showPointOfInterestTimestamps,displayElapsedTime:this.$18,showControlsOnFullScreenOnly:this.$19,displayMilliseconds:this.$20,adBreaks:this.$1,pollTimestamps:this.$86.filter(function(t){return t<=e.$82}),vpcID:this.$15.getVideoPlayerID(),adBreaksDisableReasons:this.$2,showSidePaneToggle:!1,showWNSNUX:this.$11&&this.areControlsEnabled()&&this.$101,insertedAdBreaks:this.$51,isAdBreakDisabled:this.$52,isAdBreakInsertionWithoutGapRule:this.$53,showEligibleStarsCueTimeSegments:this.$102,selectedStarsCueTimestamp:this.$103,useDarkTheme:this.$118,videoID:this.$15.getVideoID(),videoClipInfo:this.$121?this.$121:void 0,gamesVideoClipButtonEnabled:this.$33,gamesVideoCreatorClipping:this.$34,gamesDefaultClipLengthInSec:this.$35,useLargerGradient:this.$119});o("ReactDOM").flushSync(function(){var t;(t=e.$124)==null||t.render(h)}),this.$11&&this.areControlsEnabled()&&this.$101&&(this.$38=!0)},t.$134=function(){var e=this.$15.getVideoInfo_DEPRECATED();if(e){if(this.$8=this.$15.areSubtitlesActive(),this.$9=this.$15.areSubtitlesAutogenerated(),this.$39=this.$15.hasSubtitles(),this.$36=e.hasHD,this.$59=e.isHD,this.$65=e.isMuted,this.$66=e.isPlaying||this.isCastPlaying(),this.$63){var t=this.$15.getSeekableRanges();t&&(this.$82=o("LiveRewindUtils").getTotalDuration(t))}else this.$21!=null?this.$82=Math.min(e.playbackDuration,this.$21):this.$82=e.playbackDuration;this.$122=e.volume;var n=this.$15.getOption("CommercialBreakVideoAdOverlay","videoController");n?this.$58=n.isFullscreen():this.$58=this.$15.isFullscreen();var r=this.$15.getPlayerOrigin();switch(this.$15.getSource()){case"inline":case"discover":case"continue_watching_recommendation":case"topic_live":case"entry_point":this.$60=!0;break;case"permalink":this.$60=r==="video_home";break;case"games_video_home_hero":this.$60=r==="games_video_hub";break;default:this.$60=!1;break}this.$61=e.isLiveStream,this.$6=e.areHLSActive,this.$78=!1,this.$23=this.$15.listeners("enterTahoe").length!==0}},t.toggleHD=function(){this.$15.toggleHD()},t.setPreferredVideoQuality=function(t){t?this.$15.setPreferredVideoQuality(t):this.$15.unsetPreferredVideoQuality()},t.toggleHLS=function(){this.$15.switchToStreamType("hls")},t.enterWatchAndScroll=function(){r("shouldWNSRenderToRHC")()?this.$15.emit("crossfadeWatchAndScroll"):this.$15.emit("enterWatchAndScroll")},t.enterTahoe=function(){var e=this;this.$15.getSource()==="watch_scroll"?(this.$15.logEvent("watch_and_scroll_channel_entered"),r("Bootloader").loadModules(["TahoeController","URI"],function(t,n){var o=new n(e.$15.getVideoURL()),a=babelHelpers.extends({},n.getRequestURI().getQueryData(),{ref:"tahoe"});r("VideoWatchAndScrollController").onEnterTahoe(),t.openFromVideoPlayer(e.$15,o.setQueryData(a),e.$15.getVideoChannelID(),"wns")},"VideoControls")):this.$15.emit("enterTahoe")},t.scrubBegin=function(){this.isCasting()||this.$15.pause("seek_initiated")},t.scrubEnd=function(t){if(this.$63){var e=this.$15.getSeekableRanges();if(e){var n=this.$71;this.$71=t,t=o("LiveRewindUtils").getAbsolutePosition(t,e);var r=o("LiveRewindUtils").getLiveHeadTimestamp(e),a=r-t<1;o("LiveVideoPlayerActions").setIsRewound(this.$15,!a),o("LiveRewindUtils").logLiveRewindEvent("scrubber",this.$15,n,null,null,t)}}this.$22&&(t+=this.$22),this.$15.seek(t,"user_initiated"),this.$83=t;var i=this.$66||this.$15.isState("finished")&&!this.$50;!this.isCasting()&&i&&this.$15.play("seek_initiated")},t.toggleMuted=function(){this.$15.isMuted()?(r("logVideosClickTracking")(this.$15.getVideoNode()),this.$15.unmute()):this.$15.mute()},t.toggleFullscreen=function(){this.$15.isFullscreen()||r("logVideosClickTracking")(this.$15.getVideoNode()),this.$15.toggleFullscreen()},t.toggleCaptions=function(){this.$15.toggleSubtitles(),this.scheduleRenderReactComponent()},t.changeVolume=function(t){this.$15.setVolume(t)},t.liveRewindToBeginning=function(){o("LiveRewindUtils").goToBeginning(this.$15)},t.liveRewindSeekBack=function(){o("LiveRewindUtils").seekBack(this.$15)},t.liveRewindSeekForward=function(){o("LiveRewindUtils").seekForward(this.$15)},t.liveRewindToLive=function(){o("LiveRewindUtils").goToLive(this.$15)},t.play=function(){r("logVideosClickTracking")(this.$15.getVideoNode()),this.isCasting()?this.$15.setOption("casting","isPlaying",!0):this.$15.play("user_initiated"),this.$61&&this.$63&&o("LiveRewindUtils").logLiveRewindEvent("play",this.$15,this.$71,null,this.$71,null)},t.pause=function(){this.isCasting()?this.$15.setOption("casting","isPlaying",!1):this.$15.pause("user_initiated"),this.$61&&this.$63&&(o("LiveVideoPlayerActions").setIsRewound(this.$15,!0),o("LiveRewindUtils").logLiveRewindEvent("pause",this.$15,this.$71,null,this.$71,null))},t.setVideoPlaybackRate=function(t){this.$15.setPlaybackRate(t)},t.startCasting=function(){this.$15.setOption("casting","isCasting",!0)},t.stopCasting=function(){this.$15.setOption("casting","isCasting",!1)},t.isCastPlaying=function(){return this.$15.getOption("casting","isPlaying")},t.hasFoundReceiver=function(){return this.$15.getOption("casting","hasFoundReceiver")},t.isCasting=function(){return this.$15.getOption("casting","isCasting")},t.isCastingSupported=function(){return this.$15.getOption("casting","isSupported")},t.updatePointsOfInterestConfig=function(t){Object.assign(this.$84,t),this.scheduleRenderReactComponent()},t.updateDisplayElapsedTime=function(t){this.$18=t,this.scheduleRenderReactComponent()},t.updateDisplayTimeRangeConfig=function(t){this.$21=t.displayDurationLimit,this.$22=t.displayTimeOffset,this.scheduleRenderReactComponentWithVideoInfoUpdate()},t.getIsInChannel=function(){return this.$15.getIsInChannel()},t.$135=function(){var e=[this.$13,this.$27,this.$32,this.$76];e.forEach(function(e){return window.clearTimeout(e)}),this.$13=null,this.$27=null,this.$32=null,this.$76=null},t.unregister=function(){r("cancelAnimationFrame")(this.$89),this.$112.release(),this.$16.current=null,this.$135()},e})();l.default=g}),98);
__d("VideoErrorOverlay",["SphericalVideoFallback","vulture"],(function(t,n,r,o,a,i,l){function e(e,t){"textContent"in e&&(e.textContent=t),e.innerText=t}function s(e){return"textContent"in e?e.textContent:e.innerText?e.innerText:""}var u=(function(){function t(e,t,n,r,a){var i=this;this.$1=t,this.$2=n,this.$3=r,e.registerOption("VideoErrorOverlay","title",function(){return i.getTitle()},function(e){return i.setTitle(e)}),e.registerOption("VideoErrorOverlay","message",function(){return i.getMessage()},function(e){return i.setMessage(e)}),e.registerOption("VideoErrorOverlay","linkURL",function(){return i.getLinkURL()},function(e){return i.setLinkURL(e)}),e.registerOption("VideoErrorOverlay","linkTitle",function(){return i.getLinkTitle()},function(e){return i.setLinkTitle(e)}),e.registerOption("VideoErrorOverlay","available",function(){return!0}),a&&o("SphericalVideoFallback").setup(e,a)}var n=t.prototype;return n.getTitle=function(){return this.$1?s(this.$1):""},n.setTitle=function(n){this.$1&&e(this.$1,n)},n.getMessage=function(){return r("vulture")("CDh8xvqV1KoXhyyB-uS2jWMi_jc="),s(this.$2)},n.setMessage=function(n){e(this.$2,n)},n.getLinkURL=function(){return this.$3.href},n.setLinkURL=function(t){this.$3.href=t},n.getLinkTitle=function(){return s(this.$3)},n.setLinkTitle=function(n){e(this.$3,n)},t})();l.default=u}),98);
__d("VideoHomeClickLogger",["VideoHomeEvents","VideoHomeTypedLogger"],(function(t,n,r,o,a,i,l){"use strict";function e(e){var t=e.target,n=e.id,o=e.clickPoint,a=e.playerOrigin,i=a===void 0?"video_home":a,l=e.eventTargetInfo,s=l===void 0?null:l;new(r("VideoHomeTypedLogger"))().setEvent(r("VideoHomeEvents").CLICK).setEventTarget(t).setEventTargetID(n).setClickPoint(o).setPlayerOrigin(i).setEventTargetInfo(s).log()}function s(t,n){t.addEventListener("click",function(){e(n)})}l.logClick=e,l.init=s}),98);
__d("VideoInstreamAdsConstantsJSModuleWrapper",["VideoInstreamAdsConstants"],(function(t,n,r,o,a,i,l){"use strict";l.default=r("VideoInstreamAdsConstants")}),98);
__d("VideoPlayButton",["CSS","EventListener","VideoDisplayTimePlayButton"],(function(t,n,r,o,a,i,l){var e=(function(){function e(e,t,n){var a=this;this.$1=e,this.$2=t,n&&(this.$3=n.hiddenAfterFinish,this.$4=n.hiddenWhilePaused,this.$5=!!n.hiddenInFallback,this.$5=n.hiddenInFallback,this.$6=n.spherical);var i=o("VideoDisplayTimePlayButton").getClicked(this.$2);o("VideoDisplayTimePlayButton").unregister(this.$2),e.addListener("beginPlayback",function(){return a.$7()}),e.addListener("finishPlayback",function(){return a.$8()}),e.addListener("pausePlayback",function(){return a.$9()}),e.addListener("buffering",function(){return a.$10()}),e.addListener("buffered",function(){return a.$11()}),e.addListener("stateChange",function(){return a.$12()}),e.addListener("playRequested",function(e){return a.$13(e)}),e.addListener("VideoChannelController/exitChannel",function(){return a.$14()}),e.addListener("clickVideo",function(){return a.$15()}),e.addListener("TahoeController/enterTahoe",function(){return a.$16()}),r("EventListener").listen(this.$2,"click",function(){return a.$17()}),n&&n.hiddenWhileJSLoading&&!n.hiddenWhileVideoLoading&&o("CSS").show(this.$2),i&&this.$17()}var t=e.prototype;return t.$12=function(){this.$1.isState("fallback")&&(this.$5||this.$1.getIsInChannel()?o("CSS").hide(this.$2):o("CSS").show(this.$2))},t.$7=function(){o("CSS").hide(this.$2)},t.$9=function(){this.$4||this.$1.getSource()==="inline"||o("CSS").show(this.$2)},t.$13=function(t){this.$1.isState("fallback")||t==="autoplay_initiated"||o("CSS").hide(this.$2)},t.$14=function(){(this.$1.isState("paused")&&(!this.$4||this.$6)||this.$1.isState("finished")&&!this.$3)&&o("CSS").show(this.$2)},t.$16=function(){this.$1.isState("playing")||o("CSS").show(this.$2)},t.$8=function(){var e=this.$1.getOption("Looping","isLooping");this.$3||this.$1.getIsInChannel()||this.$1.getSource()==="tahoe"||e?o("CSS").hide(this.$2):o("CSS").show(this.$2)},t.$10=function(){o("CSS").hide(this.$2)},t.$11=function(){o("CSS").hide(this.$2)},t.$17=function(){this.$1.clickVideo()},t.$15=function(){this.$1.isState("fallback")||o("CSS").hide(this.$2)},e})();l.default=e}),98);
__d("VideoSpinner",["cx","CSS","EventListener","ShakaConstants","setTimeout"],(function(t,n,r,o,a,i,l,s){var e=(function(){function e(e,t){var n=this;this.$2=t,this.$1=e,this.$3=!1,e.addListener("beginPlayback",function(){return n.$5()}),e.addListener("finishPlayback",function(){return n.$6()}),e.addListener("pausePlayback",function(){return n.$7()}),e.addListener("playRequested",function(){return n.$8()}),e.addListener("buffering",function(){return n.$9()}),e.addListener("buffered",function(){return n.$10()}),e.addListener("networkInterrupted",function(){return n.$11()}),e.addListener("networkResumed",function(){return n.$12()}),e.addListener("stateChange",function(){return n.$13()}),e.addListener("clickVideo",function(){return n.$14()}),e.addListener("VideoSphericalOverlay/animationUpdate",function(e,t){return n.$15(e,t)}),r("EventListener").listen(this.$2,"click",function(){return n.$16()})}var t=e.prototype;return t.$15=function(t,n){t?o("CSS").addClass(this.$2,"_1st9"):o("CSS").removeClass(this.$2,"_1st9")},t.$11=function(){this.$4=!0},t.$12=function(){this.$4=!1},t.$9=function(){var e=this,t=r("ShakaConstants").numbers.buffering_spinner_delay_ms;this.$3=!0,t===0?o("CSS").show(this.$2):r("setTimeout")(function(){e.$3&&o("CSS").show(e.$2)},t)},t.$10=function(){o("CSS").hide(this.$2),this.$3=!1},t.$5=function(){this.$3?o("CSS").show(this.$2):o("CSS").hide(this.$2)},t.$7=function(){o("CSS").hide(this.$2)},t.$8=function(){o("CSS").hide(this.$2)},t.$6=function(){o("CSS").hide(this.$2)},t.$13=function(){this.$1.isState("fallback")&&o("CSS").hide(this.$2)},t.$14=function(){this.$1.isState("fallback")||(this.$3||this.$1.isState("ready")||this.$1.isState("loading"))&&o("CSS").show(this.$2)},t.$16=function(){this.$1.clickVideo()},e})();l.default=e}),98);
__d("VideoWatchAndScrollVariablesJSModuleWrapper",["VideoWatchAndScrollVariables"],(function(t,n,r,o,a,i,l){"use strict";l.default=r("VideoWatchAndScrollVariables")}),98);
__d("VideoWithClickPlayPause",["logVideosClickTracking"],(function(t,n,r,o,a,i){var e=(function(){"use strict";function e(e){this.$1=e,this.$2=this.$1.getVideoNode(),this.$1.addListener("clickVideo",this.$3.bind(this)),this.$1.hasSeenClick()&&this.$3()}var t=e.prototype;return t.$3=function(){var e=this.$1.getOption("CommercialBreakVideoAdOverlay","videoController");if(this.$1.isState("playing")){if(this.$1.getOption("VideoWithLiveBroadcast","isLive")||e&&e.getOption("VideoWithLiveBroadcast","isLive")||this.$4()||this.$5())return;this.$1.pause("user_initiated")}else n("logVideosClickTracking")(this.$2),this.$1.play("user_initiated")},t.$4=function(){var e=this.$1.getOption("CommercialBreakVideoAdOverlay","videoController"),t=e&&e.getOption("VideoWithInstreamVideo","controller");return t&&!t.getConfig().canPauseAdBreak},t.$5=function(){return this.$1.getOption("VideoWithInstreamVideo","disableClickToPause")},e})();a.exports=e}),null);
__d("WWWEmbeddedVideoAPIComponent",["AgnosticEmbeddedVideoApiComponent","Arbiter","UnverifiedXD"],(function(t,n,r,o,a,i,l){var e=function(t){var e=this;if(this.$1=t,this.$2=new(r("AgnosticEmbeddedVideoApiComponent"))(r("UnverifiedXD").send.bind(r("UnverifiedXD")),r("Arbiter").subscribe.bind(r("Arbiter"))),this.$2.addListener("play",function(){e.$1.play("embedded_video_api_initiated")}),this.$2.addListener("pause",function(){e.$1.pause("embedded_video_api_initiated")}),this.$2.addListener("seek",function(t,n){e.$1.seek(n.target)}),this.$2.addListener("mute",function(){e.$1.mute()}),this.$2.addListener("unmute",function(){e.$1.unmute()}),this.$2.addListener("setVolume",function(t,n){e.$1.setVolume(n.volume)}),this.$1.addListener("stateChange",function(){if(e.$1.isState("ready")){var t={isMuted:e.$1.isMuted(),volume:e.$1.getVolume(),timePosition:e.$1.getCurrentTimePosition(),duration:e.$1.getPlaybackDuration()};e.$2.notifyVideoAPIReady(t)}else e.$1.isState("playing")?e.$2.notifyStartedPlaying():e.$1.isState("paused")?e.$2.notifyPaused():e.$1.isState("finished")&&e.$2.notifyFinishedPlaying()}),this.$1.addListener("updateStatus",function(t){if(t.position!==void 0){var n={timePosition:t.position};e.$2.notifyStateUpdate(n)}}),this.$1.addListener("buffering",function(){e.$2.notifyStartedBuffering()}),this.$1.addListener("buffered",function(){e.$2.notifyFinishedBuffering()}),this.$1.addListener("error",function(){e.$2.notifyError()}),this.$1.addListener("updateMetadata",function(t){var n={duration:e.$1.getPlaybackDuration()};e.$2.notifyStateUpdate(n)}),this.$1.addListener("muteVideo",function(){var t={isMuted:!0};e.$2.notifyStateUpdate(t)}),this.$1.addListener("unmuteVideo",function(){var t={isMuted:!1};e.$2.notifyStateUpdate(t)}),this.$1.addListener("changeVolume",function(t){var n={volume:t.volume,isMuted:t.volume===0};e.$2.notifyStateUpdate(n)}),!this.$1.isState("loading")&&!this.$1.isState("fallback")){var n={isMuted:this.$1.isMuted(),volume:this.$1.getVolume(),timePosition:this.$1.getCurrentTimePosition(),duration:this.$1.getPlaybackDuration()};this.$2.notifyVideoAPIReady(n)}};l.default=e}),98);
__d("XVideoHomeFeedControllerRouteBuilder",["jsRouteBuilder"],(function(t,n,r,o,a,i,l){var e=r("jsRouteBuilder")("/watch/",Object.freeze({is_arltw:!1,comments_modal:!1}),void 0),s=e;l.default=s}),98);
__d("XVideoHomeShowControllerRouteBuilder",["jsRouteBuilder"],(function(t,n,r,o,a,i,l){var e=r("jsRouteBuilder")("/watch/{?section_id}/",Object.freeze({autoplay_expanded:!1,__nodl:!1,mt_nav:!1,msite_tab_async:!1}),new Set(["__nodl"])),s=e;l.default=s}),98);
__d("bumpVultureJSHash",["ODS"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(t,n){(e||(e=o("ODS"))).bumpEntityKey(7506,"vulture_js",t,n)}l.default=s}),98);
__d("destroyOnUnloadWWW",["Run"],(function(t,n,r,o,a,i,l){function e(e){return o("Run").onLeave(e)}l.default=e}),98);
__d("useHeroBootloadedComponent",["CometHeroInteractionContext","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=s.useContext,c=s.useEffect;function d(e){var t=o("react-compiler-runtime").c(4),n=u(r("CometHeroInteractionContext").Context),a,i;t[0]!==n||t[1]!==e?(a=function(){n.consumeBootload(e.getModuleId())},i=[n,e],t[0]=n,t[1]=e,t[2]=a,t[3]=i):(a=t[2],i=t[3]),c(a,i)}l.default=d}),98);